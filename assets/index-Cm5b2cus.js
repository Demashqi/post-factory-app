var Xb=Object.defineProperty;var Pb=(u,t,n)=>t in u?Xb(u,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[t]=n;var Ti=(u,t,n)=>Pb(u,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bf(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var md={exports:{}},ro={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function Ib(){if(L0)return ro;L0=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:u,type:i,key:c,ref:a!==void 0?a:null,props:o}}return ro.Fragment=t,ro.jsx=n,ro.jsxs=n,ro}var U0;function Gb(){return U0||(U0=1,md.exports=Ib()),md.exports}var g=Gb(),pd={exports:{}},Gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function Vb(){if(H0)return Gt;H0=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),v=Symbol.iterator;function b(A){return A===null||typeof A!="object"?null:(A=v&&A[v]||A["@@iterator"],typeof A=="function"?A:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,k={};function C(A,j,R){this.props=A,this.context=j,this.refs=k,this.updater=R||w}C.prototype.isReactComponent={},C.prototype.setState=function(A,j){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,j,"setState")},C.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function O(){}O.prototype=C.prototype;function M(A,j,R){this.props=A,this.context=j,this.refs=k,this.updater=R||w}var X=M.prototype=new O;X.constructor=M,_(X,C.prototype),X.isPureReactComponent=!0;var I=Array.isArray;function $(){}var V={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function z(A,j,R){var Z=R.ref;return{$$typeof:u,type:A,key:j,ref:Z!==void 0?Z:null,props:R}}function Q(A,j){return z(A.type,j,A.props)}function ct(A){return typeof A=="object"&&A!==null&&A.$$typeof===u}function L(A){var j={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(R){return j[R]})}var P=/\/+/g;function E(A,j){return typeof A=="object"&&A!==null&&A.key!=null?L(""+A.key):j.toString(36)}function q(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then($,$):(A.status="pending",A.then(function(j){A.status==="pending"&&(A.status="fulfilled",A.value=j)},function(j){A.status==="pending"&&(A.status="rejected",A.reason=j)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function K(A,j,R,Z,W){var _t=typeof A;(_t==="undefined"||_t==="boolean")&&(A=null);var xt=!1;if(A===null)xt=!0;else switch(_t){case"bigint":case"string":case"number":xt=!0;break;case"object":switch(A.$$typeof){case u:case t:xt=!0;break;case p:return xt=A._init,K(xt(A._payload),j,R,Z,W)}}if(xt)return W=W(A),xt=Z===""?"."+E(A,0):Z,I(W)?(R="",xt!=null&&(R=xt.replace(P,"$&/")+"/"),K(W,j,R,"",function(ot){return ot})):W!=null&&(ct(W)&&(W=Q(W,R+(W.key==null||A&&A.key===W.key?"":(""+W.key).replace(P,"$&/")+"/")+xt)),j.push(W)),1;xt=0;var bt=Z===""?".":Z+":";if(I(A))for(var Ct=0;Ct<A.length;Ct++)Z=A[Ct],_t=bt+E(Z,Ct),xt+=K(Z,j,R,_t,W);else if(Ct=b(A),typeof Ct=="function")for(A=Ct.call(A),Ct=0;!(Z=A.next()).done;)Z=Z.value,_t=bt+E(Z,Ct++),xt+=K(Z,j,R,_t,W);else if(_t==="object"){if(typeof A.then=="function")return K(q(A),j,R,Z,W);throw j=String(A),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return xt}function Y(A,j,R){if(A==null)return A;var Z=[],W=0;return K(A,Z,"","",function(_t){return j.call(R,_t,W++)}),Z}function rt(A){if(A._status===-1){var j=A._result;j=j(),j.then(function(R){(A._status===0||A._status===-1)&&(A._status=1,A._result=R)},function(R){(A._status===0||A._status===-1)&&(A._status=2,A._result=R)}),A._status===-1&&(A._status=0,A._result=j)}if(A._status===1)return A._result.default;throw A._result}var et=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},pt={map:Y,forEach:function(A,j,R){Y(A,function(){j.apply(this,arguments)},R)},count:function(A){var j=0;return Y(A,function(){j++}),j},toArray:function(A){return Y(A,function(j){return j})||[]},only:function(A){if(!ct(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return Gt.Activity=x,Gt.Children=pt,Gt.Component=C,Gt.Fragment=n,Gt.Profiler=a,Gt.PureComponent=M,Gt.StrictMode=i,Gt.Suspense=d,Gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Gt.__COMPILER_RUNTIME={__proto__:null,c:function(A){return V.H.useMemoCache(A)}},Gt.cache=function(A){return function(){return A.apply(null,arguments)}},Gt.cacheSignal=function(){return null},Gt.cloneElement=function(A,j,R){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var Z=_({},A.props),W=A.key;if(j!=null)for(_t in j.key!==void 0&&(W=""+j.key),j)!B.call(j,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&j.ref===void 0||(Z[_t]=j[_t]);var _t=arguments.length-2;if(_t===1)Z.children=R;else if(1<_t){for(var xt=Array(_t),bt=0;bt<_t;bt++)xt[bt]=arguments[bt+2];Z.children=xt}return z(A.type,W,Z)},Gt.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},Gt.createElement=function(A,j,R){var Z,W={},_t=null;if(j!=null)for(Z in j.key!==void 0&&(_t=""+j.key),j)B.call(j,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(W[Z]=j[Z]);var xt=arguments.length-2;if(xt===1)W.children=R;else if(1<xt){for(var bt=Array(xt),Ct=0;Ct<xt;Ct++)bt[Ct]=arguments[Ct+2];W.children=bt}if(A&&A.defaultProps)for(Z in xt=A.defaultProps,xt)W[Z]===void 0&&(W[Z]=xt[Z]);return z(A,_t,W)},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(A){return{$$typeof:h,render:A}},Gt.isValidElement=ct,Gt.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:rt}},Gt.memo=function(A,j){return{$$typeof:f,type:A,compare:j===void 0?null:j}},Gt.startTransition=function(A){var j=V.T,R={};V.T=R;try{var Z=A(),W=V.S;W!==null&&W(R,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then($,et)}catch(_t){et(_t)}finally{j!==null&&R.types!==null&&(j.types=R.types),V.T=j}},Gt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Gt.use=function(A){return V.H.use(A)},Gt.useActionState=function(A,j,R){return V.H.useActionState(A,j,R)},Gt.useCallback=function(A,j){return V.H.useCallback(A,j)},Gt.useContext=function(A){return V.H.useContext(A)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(A,j){return V.H.useDeferredValue(A,j)},Gt.useEffect=function(A,j){return V.H.useEffect(A,j)},Gt.useEffectEvent=function(A){return V.H.useEffectEvent(A)},Gt.useId=function(){return V.H.useId()},Gt.useImperativeHandle=function(A,j,R){return V.H.useImperativeHandle(A,j,R)},Gt.useInsertionEffect=function(A,j){return V.H.useInsertionEffect(A,j)},Gt.useLayoutEffect=function(A,j){return V.H.useLayoutEffect(A,j)},Gt.useMemo=function(A,j){return V.H.useMemo(A,j)},Gt.useOptimistic=function(A,j){return V.H.useOptimistic(A,j)},Gt.useReducer=function(A,j,R){return V.H.useReducer(A,j,R)},Gt.useRef=function(A){return V.H.useRef(A)},Gt.useState=function(A){return V.H.useState(A)},Gt.useSyncExternalStore=function(A,j,R){return V.H.useSyncExternalStore(A,j,R)},Gt.useTransition=function(){return V.H.useTransition()},Gt.version="19.2.4",Gt}var F0;function _f(){return F0||(F0=1,pd.exports=Vb()),pd.exports}var tt=_f();const Ge=bf(tt);var yd={exports:{}},oo={},xd={exports:{}},vd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function qb(){return Y0||(Y0=1,(function(u){function t(K,Y){var rt=K.length;K.push(Y);t:for(;0<rt;){var et=rt-1>>>1,pt=K[et];if(0<a(pt,Y))K[et]=Y,K[rt]=pt,rt=et;else break t}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var Y=K[0],rt=K.pop();if(rt!==Y){K[0]=rt;t:for(var et=0,pt=K.length,A=pt>>>1;et<A;){var j=2*(et+1)-1,R=K[j],Z=j+1,W=K[Z];if(0>a(R,rt))Z<pt&&0>a(W,R)?(K[et]=W,K[Z]=rt,et=Z):(K[et]=R,K[j]=rt,et=j);else if(Z<pt&&0>a(W,rt))K[et]=W,K[Z]=rt,et=Z;else break t}}return Y}function a(K,Y){var rt=K.sortIndex-Y.sortIndex;return rt!==0?rt:K.id-Y.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;u.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();u.unstable_now=function(){return c.now()-h}}var d=[],f=[],p=1,x=null,v=3,b=!1,w=!1,_=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function X(K){for(var Y=n(f);Y!==null;){if(Y.callback===null)i(f);else if(Y.startTime<=K)i(f),Y.sortIndex=Y.expirationTime,t(d,Y);else break;Y=n(f)}}function I(K){if(_=!1,X(K),!w)if(n(d)!==null)w=!0,$||($=!0,L());else{var Y=n(f);Y!==null&&q(I,Y.startTime-K)}}var $=!1,V=-1,B=5,z=-1;function Q(){return k?!0:!(u.unstable_now()-z<B)}function ct(){if(k=!1,$){var K=u.unstable_now();z=K;var Y=!0;try{t:{w=!1,_&&(_=!1,O(V),V=-1),b=!0;var rt=v;try{e:{for(X(K),x=n(d);x!==null&&!(x.expirationTime>K&&Q());){var et=x.callback;if(typeof et=="function"){x.callback=null,v=x.priorityLevel;var pt=et(x.expirationTime<=K);if(K=u.unstable_now(),typeof pt=="function"){x.callback=pt,X(K),Y=!0;break e}x===n(d)&&i(d),X(K)}else i(d);x=n(d)}if(x!==null)Y=!0;else{var A=n(f);A!==null&&q(I,A.startTime-K),Y=!1}}break t}finally{x=null,v=rt,b=!1}Y=void 0}}finally{Y?L():$=!1}}}var L;if(typeof M=="function")L=function(){M(ct)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,E=P.port2;P.port1.onmessage=ct,L=function(){E.postMessage(null)}}else L=function(){C(ct,0)};function q(K,Y){V=C(function(){K(u.unstable_now())},Y)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(K){K.callback=null},u.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<K?Math.floor(1e3/K):5},u.unstable_getCurrentPriorityLevel=function(){return v},u.unstable_next=function(K){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var rt=v;v=Y;try{return K()}finally{v=rt}},u.unstable_requestPaint=function(){k=!0},u.unstable_runWithPriority=function(K,Y){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var rt=v;v=K;try{return Y()}finally{v=rt}},u.unstable_scheduleCallback=function(K,Y,rt){var et=u.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?et+rt:et):rt=et,K){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=rt+pt,K={id:p++,callback:Y,priorityLevel:K,startTime:rt,expirationTime:pt,sortIndex:-1},rt>et?(K.sortIndex=rt,t(f,K),n(d)===null&&K===n(f)&&(_?(O(V),V=-1):_=!0,q(I,rt-et))):(K.sortIndex=pt,t(d,K),w||b||(w=!0,$||($=!0,L()))),K},u.unstable_shouldYield=Q,u.unstable_wrapCallback=function(K){var Y=v;return function(){var rt=v;v=Y;try{return K.apply(this,arguments)}finally{v=rt}}}})(vd)),vd}var X0;function Wb(){return X0||(X0=1,xd.exports=qb()),xd.exports}var bd={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function Zb(){if(P0)return on;P0=1;var u=_f();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:d,containerInfo:f,implementation:p}}var c=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},on.flushSync=function(d){var f=c.T,p=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=p,i.d.f()}},on.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},on.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},on.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,x=h(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:v,fetchPriority:b}):p==="script"&&i.d.X(d,{crossOrigin:x,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},on.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},on.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,x=h(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},on.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},on.requestFormReset=function(d){i.d.r(d)},on.unstable_batchedUpdates=function(d,f){return d(f)},on.useFormState=function(d,f,p){return c.H.useFormState(d,f,p)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.4",on}var I0;function Kb(){if(I0)return bd.exports;I0=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),bd.exports=Zb(),bd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function Qb(){if(G0)return oo;G0=1;var u=Wb(),t=_f(),n=Kb();function i(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function c(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function h(e){if(e.tag===31){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(i(188))}function f(e){var s=e.alternate;if(!s){if(s=o(e),s===null)throw Error(i(188));return s!==e?null:e}for(var r=e,l=s;;){var m=r.return;if(m===null)break;var y=m.alternate;if(y===null){if(l=m.return,l!==null){r=l;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===r)return d(m),e;if(y===l)return d(m),s;y=y.sibling}throw Error(i(188))}if(r.return!==l.return)r=m,l=y;else{for(var T=!1,U=m.child;U;){if(U===r){T=!0,r=m,l=y;break}if(U===l){T=!0,l=m,r=y;break}U=U.sibling}if(!T){for(U=y.child;U;){if(U===r){T=!0,r=y,l=m;break}if(U===l){T=!0,l=y,r=m;break}U=U.sibling}if(!T)throw Error(i(189))}}if(r.alternate!==l)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:s}function p(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=p(e),s!==null)return s;e=e.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),ct=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=ct&&e[ct]||e["@@iterator"],typeof e=="function"?e:null)}var P=Symbol.for("react.client.reference");function E(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===P?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case C:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case $:return"SuspenseList";case z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case M:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case X:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return s=e.displayName||null,s!==null?s:E(e.type)||"Memo";case B:s=e._payload,e=e._init;try{return E(e(s))}catch{}}return null}var q=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt={pending:!1,data:null,method:null,action:null},et=[],pt=-1;function A(e){return{current:e}}function j(e){0>pt||(e.current=et[pt],et[pt]=null,pt--)}function R(e,s){pt++,et[pt]=e.current,e.current=s}var Z=A(null),W=A(null),_t=A(null),xt=A(null);function bt(e,s){switch(R(_t,s),R(W,e),R(Z,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?r0(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=r0(s),e=o0(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(Z),R(Z,e)}function Ct(){j(Z),j(W),j(_t)}function ot(e){e.memoizedState!==null&&R(xt,e);var s=Z.current,r=o0(s,e.type);s!==r&&(R(W,e),R(Z,r))}function St(e){W.current===e&&(j(Z),j(W)),xt.current===e&&(j(xt),no._currentValue=rt)}var At,dt;function S(e){if(At===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);At=s&&s[1]||"",dt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+e+dt}var F=!1;function H(e,s){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(vt){var gt=vt}Reflect.construct(e,[],kt)}else{try{kt.call()}catch(vt){gt=vt}e.call(kt.prototype)}}else{try{throw Error()}catch(vt){gt=vt}(kt=e())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(vt){if(vt&&gt&&typeof vt.stack=="string")return[vt.stack,gt.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=l.DetermineComponentFrameRoot(),T=y[0],U=y[1];if(T&&U){var J=T.split(`
`),ft=U.split(`
`);for(m=l=0;l<J.length&&!J[l].includes("DetermineComponentFrameRoot");)l++;for(;m<ft.length&&!ft[m].includes("DetermineComponentFrameRoot");)m++;if(l===J.length||m===ft.length)for(l=J.length-1,m=ft.length-1;1<=l&&0<=m&&J[l]!==ft[m];)m--;for(;1<=l&&0<=m;l--,m--)if(J[l]!==ft[m]){if(l!==1||m!==1)do if(l--,m--,0>m||J[l]!==ft[m]){var wt=`
`+J[l].replace(" at new "," at ");return e.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",e.displayName)),wt}while(1<=l&&0<=m);break}}}finally{F=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?S(r):""}function N(e,s){switch(e.tag){case 26:case 27:case 5:return S(e.type);case 16:return S("Lazy");case 13:return e.child!==s&&s!==null?S("Suspense Fallback"):S("Suspense");case 19:return S("SuspenseList");case 0:case 15:return H(e.type,!1);case 11:return H(e.type.render,!1);case 1:return H(e.type,!0);case 31:return S("Activity");default:return""}}function D(e){try{var s="",r=null;do s+=N(e,r),r=e,e=e.return;while(e);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var G=Object.prototype.hasOwnProperty,ut=u.unstable_scheduleCallback,yt=u.unstable_cancelCallback,st=u.unstable_shouldYield,Et=u.unstable_requestPaint,Tt=u.unstable_now,Nt=u.unstable_getCurrentPriorityLevel,Dt=u.unstable_ImmediatePriority,Yt=u.unstable_UserBlockingPriority,Bt=u.unstable_NormalPriority,Ot=u.unstable_LowPriority,se=u.unstable_IdlePriority,ae=u.log,Te=u.unstable_setDisableYieldValue,Kt=null,xe=null;function Qt(e){if(typeof ae=="function"&&Te(e),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(Kt,e)}catch{}}var Wt=Math.clz32?Math.clz32:an,Oe=Math.log,un=Math.LN2;function an(e){return e>>>=0,e===0?32:31-(Oe(e)/un|0)|0}var gn=256,Mt=262144,Ht=4194304;function zt(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function fe(e,s,r){var l=e.pendingLanes;if(l===0)return 0;var m=0,y=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var U=l&134217727;return U!==0?(l=U&~y,l!==0?m=zt(l):(T&=U,T!==0?m=zt(T):r||(r=U&~e,r!==0&&(m=zt(r))))):(U=l&~y,U!==0?m=zt(U):T!==0?m=zt(T):r||(r=l&~e,r!==0&&(m=zt(r)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:m}function Le(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function rn(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kn(){var e=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),e}function Un(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function je(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ds(e,s,r,l,m,y){var T=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var U=e.entanglements,J=e.expirationTimes,ft=e.hiddenUpdates;for(r=T&~r;0<r;){var wt=31-Wt(r),kt=1<<wt;U[wt]=0,J[wt]=-1;var gt=ft[wt];if(gt!==null)for(ft[wt]=null,wt=0;wt<gt.length;wt++){var vt=gt[wt];vt!==null&&(vt.lane&=-536870913)}r&=~kt}l!==0&&ti(e,l,0),y!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=y&~(T&~s))}function ti(e,s,r){e.pendingLanes|=s,e.suspendedLanes&=~s;var l=31-Wt(s);e.entangledLanes|=s,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function Pf(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var l=31-Wt(r),m=1<<l;m&s|e[l]&s&&(e[l]|=s),r&=~m}}function If(e,s){var r=s&-s;return r=(r&42)!==0?1:iu(r),(r&(e.suspendedLanes|s))!==0?0:r}function iu(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function au(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gf(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:N0(e.type))}function Vf(e,s){var r=Y.p;try{return Y.p=e,s()}finally{Y.p=r}}var ei=Math.random().toString(36).slice(2),Qe="__reactFiber$"+ei,mn="__reactProps$"+ei,ra="__reactContainer$"+ei,ru="__reactEvents$"+ei,Dv="__reactListeners$"+ei,Av="__reactHandles$"+ei,qf="__reactResources$"+ei,yr="__reactMarker$"+ei;function ou(e){delete e[Qe],delete e[mn],delete e[ru],delete e[Dv],delete e[Av]}function oa(e){var s=e[Qe];if(s)return s;for(var r=e.parentNode;r;){if(s=r[ra]||r[Qe]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=g0(e);e!==null;){if(r=e[Qe])return r;e=g0(e)}return s}e=r,r=e.parentNode}return null}function la(e){if(e=e[Qe]||e[ra]){var s=e.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return e}return null}function xr(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(i(33))}function ca(e){var s=e[qf];return s||(s=e[qf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ze(e){e[yr]=!0}var Wf=new Set,Zf={};function Ri(e,s){ua(e,s),ua(e+"Capture",s)}function ua(e,s){for(Zf[e]=s,e=0;e<s.length;e++)Wf.add(s[e])}var Mv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kf={},Qf={};function Rv(e){return G.call(Qf,e)?!0:G.call(Kf,e)?!1:Mv.test(e)?Qf[e]=!0:(Kf[e]=!0,!1)}function No(e,s,r){if(Rv(s))if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+r)}}function Do(e,s,r){if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+r)}}function Ss(e,s,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(s,r,""+l)}}function Hn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jf(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function zv(e,s,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,s);if(!e.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,y=l.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){r=""+T,y.call(this,T)}}),Object.defineProperty(e,s,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function lu(e){if(!e._valueTracker){var s=Jf(e)?"checked":"value";e._valueTracker=zv(e,s,""+e[s])}}function $f(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),l="";return e&&(l=Jf(e)?e.checked?"true":"false":e.value),e=l,e!==r?(s.setValue(e),!0):!1}function Ao(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Bv=/[\n"\\]/g;function Fn(e){return e.replace(Bv,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function cu(e,s,r,l,m,y,T,U){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),s!=null?T==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+Hn(s)):e.value!==""+Hn(s)&&(e.value=""+Hn(s)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),s!=null?uu(e,T,Hn(s)):r!=null?uu(e,T,Hn(r)):l!=null&&e.removeAttribute("value"),m==null&&y!=null&&(e.defaultChecked=!!y),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?e.name=""+Hn(U):e.removeAttribute("name")}function tg(e,s,r,l,m,y,T,U){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){lu(e);return}r=r!=null?""+Hn(r):"",s=s!=null?""+Hn(s):r,U||s===e.value||(e.value=s),e.defaultValue=s}l=l??m,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=U?e.checked:!!l,e.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),lu(e)}function uu(e,s,r){s==="number"&&Ao(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ha(e,s,r,l){if(e=e.options,s){s={};for(var m=0;m<r.length;m++)s["$"+r[m]]=!0;for(r=0;r<e.length;r++)m=s.hasOwnProperty("$"+e[r].value),e[r].selected!==m&&(e[r].selected=m),m&&l&&(e[r].defaultSelected=!0)}else{for(r=""+Hn(r),s=null,m=0;m<e.length;m++){if(e[m].value===r){e[m].selected=!0,l&&(e[m].defaultSelected=!0);return}s!==null||e[m].disabled||(s=e[m])}s!==null&&(s.selected=!0)}}function eg(e,s,r){if(s!=null&&(s=""+Hn(s),s!==e.value&&(e.value=s),r==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=r!=null?""+Hn(r):""}function ng(e,s,r,l){if(s==null){if(l!=null){if(r!=null)throw Error(i(92));if(q(l)){if(1<l.length)throw Error(i(93));l=l[0]}r=l}r==null&&(r=""),s=r}r=Hn(s),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),lu(e)}function da(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var Lv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sg(e,s,r){var l=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":l?e.setProperty(s,r):typeof r!="number"||r===0||Lv.has(s)?s==="float"?e.cssFloat=r:e[s]=(""+r).trim():e[s]=r+"px"}function ig(e,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var m in s)l=s[m],s.hasOwnProperty(m)&&r[m]!==l&&sg(e,m,l)}else for(var y in s)s.hasOwnProperty(y)&&sg(e,y,s[y])}function hu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(e){return Hv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Cs(){}var du=null;function fu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fa=null,ga=null;function ag(e){var s=la(e);if(s&&(e=s.stateNode)){var r=e[mn]||null;t:switch(e=s.stateNode,s.type){case"input":if(cu(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Fn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var l=r[s];if(l!==e&&l.form===e.form){var m=l[mn]||null;if(!m)throw Error(i(90));cu(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<r.length;s++)l=r[s],l.form===e.form&&$f(l)}break t;case"textarea":eg(e,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&ha(e,!!r.multiple,s,!1)}}}var gu=!1;function rg(e,s,r){if(gu)return e(s,r);gu=!0;try{var l=e(s);return l}finally{if(gu=!1,(fa!==null||ga!==null)&&(bl(),fa&&(s=fa,e=ga,ga=fa=null,ag(s),e)))for(s=0;s<e.length;s++)ag(e[s])}}function vr(e,s){var r=e.stateNode;if(r===null)return null;var l=r[mn]||null;if(l===null)return null;r=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mu=!1;if(Ts)try{var br={};Object.defineProperty(br,"passive",{get:function(){mu=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{mu=!1}var ni=null,pu=null,Ro=null;function og(){if(Ro)return Ro;var e,s=pu,r=s.length,l,m="value"in ni?ni.value:ni.textContent,y=m.length;for(e=0;e<r&&s[e]===m[e];e++);var T=r-e;for(l=1;l<=T&&s[r-l]===m[y-l];l++);return Ro=m.slice(e,1<l?1-l:void 0)}function zo(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Bo(){return!0}function lg(){return!1}function pn(e){function s(r,l,m,y,T){this._reactName=r,this._targetInst=m,this.type=l,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var U in e)e.hasOwnProperty(U)&&(r=e[U],this[U]=r?r(y):y[U]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Bo:lg,this.isPropagationStopped=lg,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),s}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=pn(zi),_r=x({},zi,{view:0,detail:0}),Fv=pn(_r),yu,xu,wr,Uo=x({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wr&&(wr&&e.type==="mousemove"?(yu=e.screenX-wr.screenX,xu=e.screenY-wr.screenY):xu=yu=0,wr=e),yu)},movementY:function(e){return"movementY"in e?e.movementY:xu}}),cg=pn(Uo),Yv=x({},Uo,{dataTransfer:0}),Xv=pn(Yv),Pv=x({},_r,{relatedTarget:0}),vu=pn(Pv),Iv=x({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Gv=pn(Iv),Vv=x({},zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qv=pn(Vv),Wv=x({},zi,{data:0}),ug=pn(Wv),Zv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jv(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Qv[e])?!!s[e]:!1}function bu(){return Jv}var $v=x({},_r,{key:function(e){if(e.key){var s=Zv[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bu,charCode:function(e){return e.type==="keypress"?zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t1=pn($v),e1=x({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hg=pn(e1),n1=x({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bu}),s1=pn(n1),i1=x({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),a1=pn(i1),r1=x({},Uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=pn(r1),l1=x({},zi,{newState:0,oldState:0}),c1=pn(l1),u1=[9,13,27,32],_u=Ts&&"CompositionEvent"in window,Sr=null;Ts&&"documentMode"in document&&(Sr=document.documentMode);var h1=Ts&&"TextEvent"in window&&!Sr,dg=Ts&&(!_u||Sr&&8<Sr&&11>=Sr),fg=" ",gg=!1;function mg(e,s){switch(e){case"keyup":return u1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ma=!1;function d1(e,s){switch(e){case"compositionend":return pg(s);case"keypress":return s.which!==32?null:(gg=!0,fg);case"textInput":return e=s.data,e===fg&&gg?null:e;default:return null}}function f1(e,s){if(ma)return e==="compositionend"||!_u&&mg(e,s)?(e=og(),Ro=pu=ni=null,ma=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return dg&&s.locale!=="ko"?null:s.data;default:return null}}var g1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!g1[e.type]:s==="textarea"}function xg(e,s,r,l){fa?ga?ga.push(l):ga=[l]:fa=l,s=kl(s,"onChange"),0<s.length&&(r=new Lo("onChange","change",null,r,l),e.push({event:r,listeners:s}))}var Cr=null,Tr=null;function m1(e){t0(e,0)}function Ho(e){var s=xr(e);if($f(s))return e}function vg(e,s){if(e==="change")return s}var bg=!1;if(Ts){var wu;if(Ts){var Su="oninput"in document;if(!Su){var _g=document.createElement("div");_g.setAttribute("oninput","return;"),Su=typeof _g.oninput=="function"}wu=Su}else wu=!1;bg=wu&&(!document.documentMode||9<document.documentMode)}function wg(){Cr&&(Cr.detachEvent("onpropertychange",Sg),Tr=Cr=null)}function Sg(e){if(e.propertyName==="value"&&Ho(Tr)){var s=[];xg(s,Tr,e,fu(e)),rg(m1,s)}}function p1(e,s,r){e==="focusin"?(wg(),Cr=s,Tr=r,Cr.attachEvent("onpropertychange",Sg)):e==="focusout"&&wg()}function y1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ho(Tr)}function x1(e,s){if(e==="click")return Ho(s)}function v1(e,s){if(e==="input"||e==="change")return Ho(s)}function b1(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var On=typeof Object.is=="function"?Object.is:b1;function jr(e,s){if(On(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),l=Object.keys(s);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var m=r[l];if(!G.call(s,m)||!On(e[m],s[m]))return!1}return!0}function Cg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tg(e,s){var r=Cg(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=s&&l>=s)return{node:r,offset:s-e};e=l}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Cg(r)}}function jg(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?jg(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function kg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Ao(e.document);s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=Ao(e.document)}return s}function Cu(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var _1=Ts&&"documentMode"in document&&11>=document.documentMode,pa=null,Tu=null,kr=null,ju=!1;function Og(e,s,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ju||pa==null||pa!==Ao(l)||(l=pa,"selectionStart"in l&&Cu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),kr&&jr(kr,l)||(kr=l,l=kl(Tu,"onSelect"),0<l.length&&(s=new Lo("onSelect","select",null,s,r),e.push({event:s,listeners:l}),s.target=pa)))}function Bi(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var ya={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},ku={},Eg={};Ts&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function Li(e){if(ku[e])return ku[e];if(!ya[e])return e;var s=ya[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in Eg)return ku[e]=s[r];return e}var Ng=Li("animationend"),Dg=Li("animationiteration"),Ag=Li("animationstart"),w1=Li("transitionrun"),S1=Li("transitionstart"),C1=Li("transitioncancel"),Mg=Li("transitionend"),Rg=new Map,Ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ou.push("scrollEnd");function es(e,s){Rg.set(e,s),Ri(s,[e])}var Fo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Yn=[],xa=0,Eu=0;function Yo(){for(var e=xa,s=Eu=xa=0;s<e;){var r=Yn[s];Yn[s++]=null;var l=Yn[s];Yn[s++]=null;var m=Yn[s];Yn[s++]=null;var y=Yn[s];if(Yn[s++]=null,l!==null&&m!==null){var T=l.pending;T===null?m.next=m:(m.next=T.next,T.next=m),l.pending=m}y!==0&&zg(r,m,y)}}function Xo(e,s,r,l){Yn[xa++]=e,Yn[xa++]=s,Yn[xa++]=r,Yn[xa++]=l,Eu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Nu(e,s,r,l){return Xo(e,s,r,l),Po(e)}function Ui(e,s){return Xo(e,null,null,s),Po(e)}function zg(e,s,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var m=!1,y=e.return;y!==null;)y.childLanes|=r,l=y.alternate,l!==null&&(l.childLanes|=r),y.tag===22&&(e=y.stateNode,e===null||e._visibility&1||(m=!0)),e=y,y=y.return;return e.tag===3?(y=e.stateNode,m&&s!==null&&(m=31-Wt(r),e=y.hiddenUpdates,l=e[m],l===null?e[m]=[s]:l.push(s),s.lane=r|536870912),y):null}function Po(e){if(50<Zr)throw Zr=0,Hh=null,Error(i(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var va={};function T1(e,s,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(e,s,r,l){return new T1(e,s,r,l)}function Du(e){return e=e.prototype,!(!e||!e.isReactComponent)}function js(e,s){var r=e.alternate;return r===null?(r=En(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Bg(e,s){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,s=r.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Io(e,s,r,l,m,y){var T=0;if(l=e,typeof e=="function")Du(e)&&(T=1);else if(typeof e=="string")T=Nb(e,r,Z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case z:return e=En(31,r,s,m),e.elementType=z,e.lanes=y,e;case _:return Hi(r.children,m,y,s);case k:T=8,m|=24;break;case C:return e=En(12,r,s,m|2),e.elementType=C,e.lanes=y,e;case I:return e=En(13,r,s,m),e.elementType=I,e.lanes=y,e;case $:return e=En(19,r,s,m),e.elementType=$,e.lanes=y,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:T=10;break t;case O:T=9;break t;case X:T=11;break t;case V:T=14;break t;case B:T=16,l=null;break t}T=29,r=Error(i(130,e===null?"null":typeof e,"")),l=null}return s=En(T,r,s,m),s.elementType=e,s.type=l,s.lanes=y,s}function Hi(e,s,r,l){return e=En(7,e,l,s),e.lanes=r,e}function Au(e,s,r){return e=En(6,e,null,s),e.lanes=r,e}function Lg(e){var s=En(18,null,null,0);return s.stateNode=e,s}function Mu(e,s,r){return s=En(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var Ug=new WeakMap;function Xn(e,s){if(typeof e=="object"&&e!==null){var r=Ug.get(e);return r!==void 0?r:(s={value:e,source:s,stack:D(s)},Ug.set(e,s),s)}return{value:e,source:s,stack:D(s)}}var ba=[],_a=0,Go=null,Or=0,Pn=[],In=0,si=null,fs=1,gs="";function ks(e,s){ba[_a++]=Or,ba[_a++]=Go,Go=e,Or=s}function Hg(e,s,r){Pn[In++]=fs,Pn[In++]=gs,Pn[In++]=si,si=e;var l=fs;e=gs;var m=32-Wt(l)-1;l&=~(1<<m),r+=1;var y=32-Wt(s)+m;if(30<y){var T=m-m%5;y=(l&(1<<T)-1).toString(32),l>>=T,m-=T,fs=1<<32-Wt(s)+m|r<<m|l,gs=y+e}else fs=1<<y|r<<m|l,gs=e}function Ru(e){e.return!==null&&(ks(e,1),Hg(e,1,0))}function zu(e){for(;e===Go;)Go=ba[--_a],ba[_a]=null,Or=ba[--_a],ba[_a]=null;for(;e===si;)si=Pn[--In],Pn[In]=null,gs=Pn[--In],Pn[In]=null,fs=Pn[--In],Pn[In]=null}function Fg(e,s){Pn[In++]=fs,Pn[In++]=gs,Pn[In++]=si,fs=s.id,gs=s.overflow,si=e}var Je=null,_e=null,ne=!1,ii=null,Gn=!1,Bu=Error(i(519));function ai(e){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Er(Xn(s,e)),Bu}function Yg(e){var s=e.stateNode,r=e.type,l=e.memoizedProps;switch(s[Qe]=e,s[mn]=l,r){case"dialog":$t("cancel",s),$t("close",s);break;case"iframe":case"object":case"embed":$t("load",s);break;case"video":case"audio":for(r=0;r<Qr.length;r++)$t(Qr[r],s);break;case"source":$t("error",s);break;case"img":case"image":case"link":$t("error",s),$t("load",s);break;case"details":$t("toggle",s);break;case"input":$t("invalid",s),tg(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":$t("invalid",s);break;case"textarea":$t("invalid",s),ng(s,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||l.suppressHydrationWarning===!0||i0(s.textContent,r)?(l.popover!=null&&($t("beforetoggle",s),$t("toggle",s)),l.onScroll!=null&&$t("scroll",s),l.onScrollEnd!=null&&$t("scrollend",s),l.onClick!=null&&(s.onclick=Cs),s=!0):s=!1,s||ai(e,!0)}function Xg(e){for(Je=e.return;Je;)switch(Je.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Je=Je.return}}function wa(e){if(e!==Je)return!1;if(!ne)return Xg(e),ne=!0,!1;var s=e.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||td(e.type,e.memoizedProps)),r=!r),r&&_e&&ai(e),Xg(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));_e=f0(e)}else if(s===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));_e=f0(e)}else s===27?(s=_e,vi(e.type)?(e=ad,ad=null,_e=e):_e=s):_e=Je?qn(e.stateNode.nextSibling):null;return!0}function Fi(){_e=Je=null,ne=!1}function Lu(){var e=ii;return e!==null&&(bn===null?bn=e:bn.push.apply(bn,e),ii=null),e}function Er(e){ii===null?ii=[e]:ii.push(e)}var Uu=A(null),Yi=null,Os=null;function ri(e,s,r){R(Uu,s._currentValue),s._currentValue=r}function Es(e){e._currentValue=Uu.current,j(Uu)}function Hu(e,s,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),e===r)break;e=e.return}}function Fu(e,s,r,l){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;t:for(;y!==null;){var U=y;y=m;for(var J=0;J<s.length;J++)if(U.context===s[J]){y.lanes|=r,U=y.alternate,U!==null&&(U.lanes|=r),Hu(y.return,r,e),l||(T=null);break t}y=U.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=r,y=T.alternate,y!==null&&(y.lanes|=r),Hu(T,r,e),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===e){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Sa(e,s,r,l){e=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var U=m.type;On(m.pendingProps.value,T.value)||(e!==null?e.push(U):e=[U])}}else if(m===xt.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(no):e=[no])}m=m.return}e!==null&&Fu(s,e,r,l),s.flags|=262144}function Vo(e){for(e=e.firstContext;e!==null;){if(!On(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xi(e){Yi=e,Os=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return Pg(Yi,e)}function qo(e,s){return Yi===null&&Xi(e),Pg(e,s)}function Pg(e,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Os===null){if(e===null)throw Error(i(308));Os=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Os=Os.next=s;return r}var j1=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){s.aborted=!0,e.forEach(function(r){return r()})}},k1=u.unstable_scheduleCallback,O1=u.unstable_NormalPriority,Ue={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yu(){return{controller:new j1,data:new Map,refCount:0}}function Nr(e){e.refCount--,e.refCount===0&&k1(O1,function(){e.controller.abort()})}var Dr=null,Xu=0,Ca=0,Ta=null;function E1(e,s){if(Dr===null){var r=Dr=[];Xu=0,Ca=Gh(),Ta={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Xu++,s.then(Ig,Ig),s}function Ig(){if(--Xu===0&&Dr!==null){Ta!==null&&(Ta.status="fulfilled");var e=Dr;Dr=null,Ca=0,Ta=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function N1(e,s){var r=[],l={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return e.then(function(){l.status="fulfilled",l.value=s;for(var m=0;m<r.length;m++)(0,r[m])(s)},function(m){for(l.status="rejected",l.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),l}var Gg=K.S;K.S=function(e,s){Op=Tt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&E1(e,s),Gg!==null&&Gg(e,s)};var Pi=A(null);function Pu(){var e=Pi.current;return e!==null?e:ye.pooledCache}function Wo(e,s){s===null?R(Pi,Pi.current):R(Pi,s.pool)}function Vg(){var e=Pu();return e===null?null:{parent:Ue._currentValue,pool:e}}var ja=Error(i(460)),Iu=Error(i(474)),Zo=Error(i(542)),Ko={then:function(){}};function qg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wg(e,s,r){switch(r=e[r],r===void 0?e.push(s):r!==s&&(s.then(Cs,Cs),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Kg(e),e;default:if(typeof s.status=="string")s.then(Cs,Cs);else{if(e=ye,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=s,e.status="pending",e.then(function(l){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=l}},function(l){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Kg(e),e}throw Gi=s,ja}}function Ii(e){try{var s=e._init;return s(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Gi=r,ja):r}}var Gi=null;function Zg(){if(Gi===null)throw Error(i(459));var e=Gi;return Gi=null,e}function Kg(e){if(e===ja||e===Zo)throw Error(i(483))}var ka=null,Ar=0;function Qo(e){var s=Ar;return Ar+=1,ka===null&&(ka=[]),Wg(ka,e,s)}function Mr(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Jo(e,s){throw s.$$typeof===v?Error(i(525)):(e=Object.prototype.toString.call(s),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Qg(e){function s(lt,nt){if(e){var ht=lt.deletions;ht===null?(lt.deletions=[nt],lt.flags|=16):ht.push(nt)}}function r(lt,nt){if(!e)return null;for(;nt!==null;)s(lt,nt),nt=nt.sibling;return null}function l(lt){for(var nt=new Map;lt!==null;)lt.key!==null?nt.set(lt.key,lt):nt.set(lt.index,lt),lt=lt.sibling;return nt}function m(lt,nt){return lt=js(lt,nt),lt.index=0,lt.sibling=null,lt}function y(lt,nt,ht){return lt.index=ht,e?(ht=lt.alternate,ht!==null?(ht=ht.index,ht<nt?(lt.flags|=67108866,nt):ht):(lt.flags|=67108866,nt)):(lt.flags|=1048576,nt)}function T(lt){return e&&lt.alternate===null&&(lt.flags|=67108866),lt}function U(lt,nt,ht,jt){return nt===null||nt.tag!==6?(nt=Au(ht,lt.mode,jt),nt.return=lt,nt):(nt=m(nt,ht),nt.return=lt,nt)}function J(lt,nt,ht,jt){var Xt=ht.type;return Xt===_?wt(lt,nt,ht.props.children,jt,ht.key):nt!==null&&(nt.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===B&&Ii(Xt)===nt.type)?(nt=m(nt,ht.props),Mr(nt,ht),nt.return=lt,nt):(nt=Io(ht.type,ht.key,ht.props,null,lt.mode,jt),Mr(nt,ht),nt.return=lt,nt)}function ft(lt,nt,ht,jt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==ht.containerInfo||nt.stateNode.implementation!==ht.implementation?(nt=Mu(ht,lt.mode,jt),nt.return=lt,nt):(nt=m(nt,ht.children||[]),nt.return=lt,nt)}function wt(lt,nt,ht,jt,Xt){return nt===null||nt.tag!==7?(nt=Hi(ht,lt.mode,jt,Xt),nt.return=lt,nt):(nt=m(nt,ht),nt.return=lt,nt)}function kt(lt,nt,ht){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return nt=Au(""+nt,lt.mode,ht),nt.return=lt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case b:return ht=Io(nt.type,nt.key,nt.props,null,lt.mode,ht),Mr(ht,nt),ht.return=lt,ht;case w:return nt=Mu(nt,lt.mode,ht),nt.return=lt,nt;case B:return nt=Ii(nt),kt(lt,nt,ht)}if(q(nt)||L(nt))return nt=Hi(nt,lt.mode,ht,null),nt.return=lt,nt;if(typeof nt.then=="function")return kt(lt,Qo(nt),ht);if(nt.$$typeof===M)return kt(lt,qo(lt,nt),ht);Jo(lt,nt)}return null}function gt(lt,nt,ht,jt){var Xt=nt!==null?nt.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Xt!==null?null:U(lt,nt,""+ht,jt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case b:return ht.key===Xt?J(lt,nt,ht,jt):null;case w:return ht.key===Xt?ft(lt,nt,ht,jt):null;case B:return ht=Ii(ht),gt(lt,nt,ht,jt)}if(q(ht)||L(ht))return Xt!==null?null:wt(lt,nt,ht,jt,null);if(typeof ht.then=="function")return gt(lt,nt,Qo(ht),jt);if(ht.$$typeof===M)return gt(lt,nt,qo(lt,ht),jt);Jo(lt,ht)}return null}function vt(lt,nt,ht,jt,Xt){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return lt=lt.get(ht)||null,U(nt,lt,""+jt,Xt);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case b:return lt=lt.get(jt.key===null?ht:jt.key)||null,J(nt,lt,jt,Xt);case w:return lt=lt.get(jt.key===null?ht:jt.key)||null,ft(nt,lt,jt,Xt);case B:return jt=Ii(jt),vt(lt,nt,ht,jt,Xt)}if(q(jt)||L(jt))return lt=lt.get(ht)||null,wt(nt,lt,jt,Xt,null);if(typeof jt.then=="function")return vt(lt,nt,ht,Qo(jt),Xt);if(jt.$$typeof===M)return vt(lt,nt,ht,qo(nt,jt),Xt);Jo(nt,jt)}return null}function Ut(lt,nt,ht,jt){for(var Xt=null,re=null,Ft=nt,qt=nt=0,ee=null;Ft!==null&&qt<ht.length;qt++){Ft.index>qt?(ee=Ft,Ft=null):ee=Ft.sibling;var oe=gt(lt,Ft,ht[qt],jt);if(oe===null){Ft===null&&(Ft=ee);break}e&&Ft&&oe.alternate===null&&s(lt,Ft),nt=y(oe,nt,qt),re===null?Xt=oe:re.sibling=oe,re=oe,Ft=ee}if(qt===ht.length)return r(lt,Ft),ne&&ks(lt,qt),Xt;if(Ft===null){for(;qt<ht.length;qt++)Ft=kt(lt,ht[qt],jt),Ft!==null&&(nt=y(Ft,nt,qt),re===null?Xt=Ft:re.sibling=Ft,re=Ft);return ne&&ks(lt,qt),Xt}for(Ft=l(Ft);qt<ht.length;qt++)ee=vt(Ft,lt,qt,ht[qt],jt),ee!==null&&(e&&ee.alternate!==null&&Ft.delete(ee.key===null?qt:ee.key),nt=y(ee,nt,qt),re===null?Xt=ee:re.sibling=ee,re=ee);return e&&Ft.forEach(function(Ci){return s(lt,Ci)}),ne&&ks(lt,qt),Xt}function Pt(lt,nt,ht,jt){if(ht==null)throw Error(i(151));for(var Xt=null,re=null,Ft=nt,qt=nt=0,ee=null,oe=ht.next();Ft!==null&&!oe.done;qt++,oe=ht.next()){Ft.index>qt?(ee=Ft,Ft=null):ee=Ft.sibling;var Ci=gt(lt,Ft,oe.value,jt);if(Ci===null){Ft===null&&(Ft=ee);break}e&&Ft&&Ci.alternate===null&&s(lt,Ft),nt=y(Ci,nt,qt),re===null?Xt=Ci:re.sibling=Ci,re=Ci,Ft=ee}if(oe.done)return r(lt,Ft),ne&&ks(lt,qt),Xt;if(Ft===null){for(;!oe.done;qt++,oe=ht.next())oe=kt(lt,oe.value,jt),oe!==null&&(nt=y(oe,nt,qt),re===null?Xt=oe:re.sibling=oe,re=oe);return ne&&ks(lt,qt),Xt}for(Ft=l(Ft);!oe.done;qt++,oe=ht.next())oe=vt(Ft,lt,qt,oe.value,jt),oe!==null&&(e&&oe.alternate!==null&&Ft.delete(oe.key===null?qt:oe.key),nt=y(oe,nt,qt),re===null?Xt=oe:re.sibling=oe,re=oe);return e&&Ft.forEach(function(Yb){return s(lt,Yb)}),ne&&ks(lt,qt),Xt}function pe(lt,nt,ht,jt){if(typeof ht=="object"&&ht!==null&&ht.type===_&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case b:t:{for(var Xt=ht.key;nt!==null;){if(nt.key===Xt){if(Xt=ht.type,Xt===_){if(nt.tag===7){r(lt,nt.sibling),jt=m(nt,ht.props.children),jt.return=lt,lt=jt;break t}}else if(nt.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===B&&Ii(Xt)===nt.type){r(lt,nt.sibling),jt=m(nt,ht.props),Mr(jt,ht),jt.return=lt,lt=jt;break t}r(lt,nt);break}else s(lt,nt);nt=nt.sibling}ht.type===_?(jt=Hi(ht.props.children,lt.mode,jt,ht.key),jt.return=lt,lt=jt):(jt=Io(ht.type,ht.key,ht.props,null,lt.mode,jt),Mr(jt,ht),jt.return=lt,lt=jt)}return T(lt);case w:t:{for(Xt=ht.key;nt!==null;){if(nt.key===Xt)if(nt.tag===4&&nt.stateNode.containerInfo===ht.containerInfo&&nt.stateNode.implementation===ht.implementation){r(lt,nt.sibling),jt=m(nt,ht.children||[]),jt.return=lt,lt=jt;break t}else{r(lt,nt);break}else s(lt,nt);nt=nt.sibling}jt=Mu(ht,lt.mode,jt),jt.return=lt,lt=jt}return T(lt);case B:return ht=Ii(ht),pe(lt,nt,ht,jt)}if(q(ht))return Ut(lt,nt,ht,jt);if(L(ht)){if(Xt=L(ht),typeof Xt!="function")throw Error(i(150));return ht=Xt.call(ht),Pt(lt,nt,ht,jt)}if(typeof ht.then=="function")return pe(lt,nt,Qo(ht),jt);if(ht.$$typeof===M)return pe(lt,nt,qo(lt,ht),jt);Jo(lt,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,nt!==null&&nt.tag===6?(r(lt,nt.sibling),jt=m(nt,ht),jt.return=lt,lt=jt):(r(lt,nt),jt=Au(ht,lt.mode,jt),jt.return=lt,lt=jt),T(lt)):r(lt,nt)}return function(lt,nt,ht,jt){try{Ar=0;var Xt=pe(lt,nt,ht,jt);return ka=null,Xt}catch(Ft){if(Ft===ja||Ft===Zo)throw Ft;var re=En(29,Ft,null,lt.mode);return re.lanes=jt,re.return=lt,re}finally{}}}var Vi=Qg(!0),Jg=Qg(!1),oi=!1;function Gu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vu(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function li(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ci(e,s,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(le&2)!==0){var m=l.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),l.pending=s,s=Po(e),zg(e,null,r),s}return Xo(e,l,s,r),Po(e)}function Rr(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var l=s.lanes;l&=e.pendingLanes,r|=l,s.lanes=r,Pf(e,r)}}function qu(e,s){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var m=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,r=r.next}while(r!==null);y===null?m=y=s:y=y.next=s}else m=y=s;r={baseState:l.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}var Wu=!1;function zr(){if(Wu){var e=Ta;if(e!==null)throw e}}function Br(e,s,r,l){Wu=!1;var m=e.updateQueue;oi=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,U=m.shared.pending;if(U!==null){m.shared.pending=null;var J=U,ft=J.next;J.next=null,T===null?y=ft:T.next=ft,T=J;var wt=e.alternate;wt!==null&&(wt=wt.updateQueue,U=wt.lastBaseUpdate,U!==T&&(U===null?wt.firstBaseUpdate=ft:U.next=ft,wt.lastBaseUpdate=J))}if(y!==null){var kt=m.baseState;T=0,wt=ft=J=null,U=y;do{var gt=U.lane&-536870913,vt=gt!==U.lane;if(vt?(te&gt)===gt:(l&gt)===gt){gt!==0&&gt===Ca&&(Wu=!0),wt!==null&&(wt=wt.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});t:{var Ut=e,Pt=U;gt=s;var pe=r;switch(Pt.tag){case 1:if(Ut=Pt.payload,typeof Ut=="function"){kt=Ut.call(pe,kt,gt);break t}kt=Ut;break t;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Pt.payload,gt=typeof Ut=="function"?Ut.call(pe,kt,gt):Ut,gt==null)break t;kt=x({},kt,gt);break t;case 2:oi=!0}}gt=U.callback,gt!==null&&(e.flags|=64,vt&&(e.flags|=8192),vt=m.callbacks,vt===null?m.callbacks=[gt]:vt.push(gt))}else vt={lane:gt,tag:U.tag,payload:U.payload,callback:U.callback,next:null},wt===null?(ft=wt=vt,J=kt):wt=wt.next=vt,T|=gt;if(U=U.next,U===null){if(U=m.shared.pending,U===null)break;vt=U,U=vt.next,vt.next=null,m.lastBaseUpdate=vt,m.shared.pending=null}}while(!0);wt===null&&(J=kt),m.baseState=J,m.firstBaseUpdate=ft,m.lastBaseUpdate=wt,y===null&&(m.shared.lanes=0),gi|=T,e.lanes=T,e.memoizedState=kt}}function $g(e,s){if(typeof e!="function")throw Error(i(191,e));e.call(s)}function tm(e,s){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)$g(r[e],s)}var Oa=A(null),$o=A(0);function em(e,s){e=Us,R($o,e),R(Oa,s),Us=e|s.baseLanes}function Zu(){R($o,Us),R(Oa,Oa.current)}function Ku(){Us=$o.current,j(Oa),j($o)}var Nn=A(null),Vn=null;function ui(e){var s=e.alternate;R(Ae,Ae.current&1),R(Nn,e),Vn===null&&(s===null||Oa.current!==null||s.memoizedState!==null)&&(Vn=e)}function Qu(e){R(Ae,Ae.current),R(Nn,e),Vn===null&&(Vn=e)}function nm(e){e.tag===22?(R(Ae,Ae.current),R(Nn,e),Vn===null&&(Vn=e)):hi()}function hi(){R(Ae,Ae.current),R(Nn,Nn.current)}function Dn(e){j(Nn),Vn===e&&(Vn=null),j(Ae)}var Ae=A(0);function tl(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||sd(r)||id(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ns=0,Vt=null,ge=null,He=null,el=!1,Ea=!1,qi=!1,nl=0,Lr=0,Na=null,D1=0;function Ne(){throw Error(i(321))}function Ju(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!On(e[r],s[r]))return!1;return!0}function $u(e,s,r,l,m,y){return Ns=y,Vt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=e===null||e.memoizedState===null?Hm:gh,qi=!1,y=r(l,m),qi=!1,Ea&&(y=im(s,r,l,m)),sm(e),y}function sm(e){K.H=Fr;var s=ge!==null&&ge.next!==null;if(Ns=0,He=ge=Vt=null,el=!1,Lr=0,Na=null,s)throw Error(i(300));e===null||Fe||(e=e.dependencies,e!==null&&Vo(e)&&(Fe=!0))}function im(e,s,r,l){Vt=e;var m=0;do{if(Ea&&(Na=null),Lr=0,Ea=!1,25<=m)throw Error(i(301));if(m+=1,He=ge=null,e.updateQueue!=null){var y=e.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}K.H=Fm,y=s(r,l)}while(Ea);return y}function A1(){var e=K.H,s=e.useState()[0];return s=typeof s.then=="function"?Ur(s):s,e=e.useState()[0],(ge!==null?ge.memoizedState:null)!==e&&(Vt.flags|=1024),s}function th(){var e=nl!==0;return nl=0,e}function eh(e,s,r){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~r}function nh(e){if(el){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}el=!1}Ns=0,He=ge=Vt=null,Ea=!1,Lr=nl=0,Na=null}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Vt.memoizedState=He=e:He=He.next=e,He}function Me(){if(ge===null){var e=Vt.alternate;e=e!==null?e.memoizedState:null}else e=ge.next;var s=He===null?Vt.memoizedState:He.next;if(s!==null)He=s,ge=e;else{if(e===null)throw Vt.alternate===null?Error(i(467)):Error(i(310));ge=e,e={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},He===null?Vt.memoizedState=He=e:He=He.next=e}return He}function sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ur(e){var s=Lr;return Lr+=1,Na===null&&(Na=[]),e=Wg(Na,e,s),s=Vt,(He===null?s.memoizedState:He.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?Hm:gh),e}function il(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ur(e);if(e.$$typeof===M)return $e(e)}throw Error(i(438,String(e)))}function sh(e){var s=null,r=Vt.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var l=Vt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=sl(),Vt.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(e),l=0;l<e;l++)r[l]=Q;return s.index++,r}function Ds(e,s){return typeof s=="function"?s(e):s}function al(e){var s=Me();return ih(s,ge,e)}function ih(e,s,r){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var m=e.baseQueue,y=l.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}s.baseQueue=m=y,l.pending=null}if(y=e.baseState,m===null)e.memoizedState=y;else{s=m.next;var U=T=null,J=null,ft=s,wt=!1;do{var kt=ft.lane&-536870913;if(kt!==ft.lane?(te&kt)===kt:(Ns&kt)===kt){var gt=ft.revertLane;if(gt===0)J!==null&&(J=J.next={lane:0,revertLane:0,gesture:null,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),kt===Ca&&(wt=!0);else if((Ns&gt)===gt){ft=ft.next,gt===Ca&&(wt=!0);continue}else kt={lane:0,revertLane:ft.revertLane,gesture:null,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},J===null?(U=J=kt,T=y):J=J.next=kt,Vt.lanes|=gt,gi|=gt;kt=ft.action,qi&&r(y,kt),y=ft.hasEagerState?ft.eagerState:r(y,kt)}else gt={lane:kt,revertLane:ft.revertLane,gesture:ft.gesture,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},J===null?(U=J=gt,T=y):J=J.next=gt,Vt.lanes|=kt,gi|=kt;ft=ft.next}while(ft!==null&&ft!==s);if(J===null?T=y:J.next=U,!On(y,e.memoizedState)&&(Fe=!0,wt&&(r=Ta,r!==null)))throw r;e.memoizedState=y,e.baseState=T,e.baseQueue=J,l.lastRenderedState=y}return m===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ah(e){var s=Me(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var l=r.dispatch,m=r.pending,y=s.memoizedState;if(m!==null){r.pending=null;var T=m=m.next;do y=e(y,T.action),T=T.next;while(T!==m);On(y,s.memoizedState)||(Fe=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,l]}function am(e,s,r){var l=Vt,m=Me(),y=ne;if(y){if(r===void 0)throw Error(i(407));r=r()}else r=s();var T=!On((ge||m).memoizedState,r);if(T&&(m.memoizedState=r,Fe=!0),m=m.queue,lh(lm.bind(null,l,m,e),[e]),m.getSnapshot!==s||T||He!==null&&He.memoizedState.tag&1){if(l.flags|=2048,Da(9,{destroy:void 0},om.bind(null,l,m,r,s),null),ye===null)throw Error(i(349));y||(Ns&127)!==0||rm(l,s,r)}return r}function rm(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=Vt.updateQueue,s===null?(s=sl(),Vt.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function om(e,s,r,l){s.value=r,s.getSnapshot=l,cm(s)&&um(e)}function lm(e,s,r){return r(function(){cm(s)&&um(e)})}function cm(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!On(e,r)}catch{return!0}}function um(e){var s=Ui(e,2);s!==null&&_n(s,e,2)}function rh(e){var s=hn();if(typeof e=="function"){var r=e;if(e=r(),qi){Qt(!0);try{r()}finally{Qt(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:e},s}function hm(e,s,r,l){return e.baseState=r,ih(e,ge,typeof l=="function"?l:Ds)}function M1(e,s,r,l,m){if(ll(e))throw Error(i(485));if(e=s.action,e!==null){var y={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};K.T!==null?r(!0):y.isTransition=!1,l(y),r=s.pending,r===null?(y.next=s.pending=y,dm(s,y)):(y.next=r.next,s.pending=r.next=y)}}function dm(e,s){var r=s.action,l=s.payload,m=e.state;if(s.isTransition){var y=K.T,T={};K.T=T;try{var U=r(m,l),J=K.S;J!==null&&J(T,U),fm(e,s,U)}catch(ft){oh(e,s,ft)}finally{y!==null&&T.types!==null&&(y.types=T.types),K.T=y}}else try{y=r(m,l),fm(e,s,y)}catch(ft){oh(e,s,ft)}}function fm(e,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){gm(e,s,l)},function(l){return oh(e,s,l)}):gm(e,s,r)}function gm(e,s,r){s.status="fulfilled",s.value=r,mm(s),e.state=r,s=e.pending,s!==null&&(r=s.next,r===s?e.pending=null:(r=r.next,s.next=r,dm(e,r)))}function oh(e,s,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=r,mm(s),s=s.next;while(s!==l)}e.action=null}function mm(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function pm(e,s){return s}function ym(e,s){if(ne){var r=ye.formState;if(r!==null){t:{var l=Vt;if(ne){if(_e){e:{for(var m=_e,y=Gn;m.nodeType!==8;){if(!y){m=null;break e}if(m=qn(m.nextSibling),m===null){m=null;break e}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){_e=qn(m.nextSibling),l=m.data==="F!";break t}}ai(l)}l=!1}l&&(s=r[0])}}return r=hn(),r.memoizedState=r.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pm,lastRenderedState:s},r.queue=l,r=Bm.bind(null,Vt,l),l.dispatch=r,l=rh(!1),y=fh.bind(null,Vt,!1,l.queue),l=hn(),m={state:s,dispatch:null,action:e,pending:null},l.queue=m,r=M1.bind(null,Vt,m,y,r),m.dispatch=r,l.memoizedState=e,[s,r,!1]}function xm(e){var s=Me();return vm(s,ge,e)}function vm(e,s,r){if(s=ih(e,s,pm)[0],e=al(Ds)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Ur(s)}catch(T){throw T===ja?Zo:T}else l=s;s=Me();var m=s.queue,y=m.dispatch;return r!==s.memoizedState&&(Vt.flags|=2048,Da(9,{destroy:void 0},R1.bind(null,m,r),null)),[l,y,e]}function R1(e,s){e.action=s}function bm(e){var s=Me(),r=ge;if(r!==null)return vm(s,r,e);Me(),s=s.memoizedState,r=Me();var l=r.queue.dispatch;return r.memoizedState=e,[s,l,!1]}function Da(e,s,r,l){return e={tag:e,create:r,deps:l,inst:s,next:null},s=Vt.updateQueue,s===null&&(s=sl(),Vt.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,s.lastEffect=e),e}function _m(){return Me().memoizedState}function rl(e,s,r,l){var m=hn();Vt.flags|=e,m.memoizedState=Da(1|s,{destroy:void 0},r,l===void 0?null:l)}function ol(e,s,r,l){var m=Me();l=l===void 0?null:l;var y=m.memoizedState.inst;ge!==null&&l!==null&&Ju(l,ge.memoizedState.deps)?m.memoizedState=Da(s,y,r,l):(Vt.flags|=e,m.memoizedState=Da(1|s,y,r,l))}function wm(e,s){rl(8390656,8,e,s)}function lh(e,s){ol(2048,8,e,s)}function z1(e){Vt.flags|=4;var s=Vt.updateQueue;if(s===null)s=sl(),Vt.updateQueue=s,s.events=[e];else{var r=s.events;r===null?s.events=[e]:r.push(e)}}function Sm(e){var s=Me().memoizedState;return z1({ref:s,nextImpl:e}),function(){if((le&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Cm(e,s){return ol(4,2,e,s)}function Tm(e,s){return ol(4,4,e,s)}function jm(e,s){if(typeof s=="function"){e=e();var r=s(e);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function km(e,s,r){r=r!=null?r.concat([e]):null,ol(4,4,jm.bind(null,s,e),r)}function ch(){}function Om(e,s){var r=Me();s=s===void 0?null:s;var l=r.memoizedState;return s!==null&&Ju(s,l[1])?l[0]:(r.memoizedState=[e,s],e)}function Em(e,s){var r=Me();s=s===void 0?null:s;var l=r.memoizedState;if(s!==null&&Ju(s,l[1]))return l[0];if(l=e(),qi){Qt(!0);try{e()}finally{Qt(!1)}}return r.memoizedState=[l,s],l}function uh(e,s,r){return r===void 0||(Ns&1073741824)!==0&&(te&261930)===0?e.memoizedState=s:(e.memoizedState=r,e=Np(),Vt.lanes|=e,gi|=e,r)}function Nm(e,s,r,l){return On(r,s)?r:Oa.current!==null?(e=uh(e,r,l),On(e,s)||(Fe=!0),e):(Ns&42)===0||(Ns&1073741824)!==0&&(te&261930)===0?(Fe=!0,e.memoizedState=r):(e=Np(),Vt.lanes|=e,gi|=e,s)}function Dm(e,s,r,l,m){var y=Y.p;Y.p=y!==0&&8>y?y:8;var T=K.T,U={};K.T=U,fh(e,!1,s,r);try{var J=m(),ft=K.S;if(ft!==null&&ft(U,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var wt=N1(J,l);Hr(e,s,wt,Rn(e))}else Hr(e,s,l,Rn(e))}catch(kt){Hr(e,s,{then:function(){},status:"rejected",reason:kt},Rn())}finally{Y.p=y,T!==null&&U.types!==null&&(T.types=U.types),K.T=T}}function B1(){}function hh(e,s,r,l){if(e.tag!==5)throw Error(i(476));var m=Am(e).queue;Dm(e,m,s,rt,r===null?B1:function(){return Mm(e),r(l)})}function Am(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:rt,baseState:rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:rt},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:r},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function Mm(e){var s=Am(e);s.next===null&&(s=e.alternate.memoizedState),Hr(e,s.next.queue,{},Rn())}function dh(){return $e(no)}function Rm(){return Me().memoizedState}function zm(){return Me().memoizedState}function L1(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var r=Rn();e=li(r);var l=ci(s,e,r);l!==null&&(_n(l,s,r),Rr(l,s,r)),s={cache:Yu()},e.payload=s;return}s=s.return}}function U1(e,s,r){var l=Rn();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ll(e)?Lm(s,r):(r=Nu(e,s,r,l),r!==null&&(_n(r,e,l),Um(r,s,l)))}function Bm(e,s,r){var l=Rn();Hr(e,s,r,l)}function Hr(e,s,r,l){var m={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ll(e))Lm(s,m);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,U=y(T,r);if(m.hasEagerState=!0,m.eagerState=U,On(U,T))return Xo(e,s,m,0),ye===null&&Yo(),!1}catch{}finally{}if(r=Nu(e,s,m,l),r!==null)return _n(r,e,l),Um(r,s,l),!0}return!1}function fh(e,s,r,l){if(l={lane:2,revertLane:Gh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ll(e)){if(s)throw Error(i(479))}else s=Nu(e,r,l,2),s!==null&&_n(s,e,2)}function ll(e){var s=e.alternate;return e===Vt||s!==null&&s===Vt}function Lm(e,s){Ea=el=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function Um(e,s,r){if((r&4194048)!==0){var l=s.lanes;l&=e.pendingLanes,r|=l,s.lanes=r,Pf(e,r)}}var Fr={readContext:$e,use:il,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useLayoutEffect:Ne,useInsertionEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useSyncExternalStore:Ne,useId:Ne,useHostTransitionStatus:Ne,useFormState:Ne,useActionState:Ne,useOptimistic:Ne,useMemoCache:Ne,useCacheRefresh:Ne};Fr.useEffectEvent=Ne;var Hm={readContext:$e,use:il,useCallback:function(e,s){return hn().memoizedState=[e,s===void 0?null:s],e},useContext:$e,useEffect:wm,useImperativeHandle:function(e,s,r){r=r!=null?r.concat([e]):null,rl(4194308,4,jm.bind(null,s,e),r)},useLayoutEffect:function(e,s){return rl(4194308,4,e,s)},useInsertionEffect:function(e,s){rl(4,2,e,s)},useMemo:function(e,s){var r=hn();s=s===void 0?null:s;var l=e();if(qi){Qt(!0);try{e()}finally{Qt(!1)}}return r.memoizedState=[l,s],l},useReducer:function(e,s,r){var l=hn();if(r!==void 0){var m=r(s);if(qi){Qt(!0);try{r(s)}finally{Qt(!1)}}}else m=s;return l.memoizedState=l.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},l.queue=e,e=e.dispatch=U1.bind(null,Vt,e),[l.memoizedState,e]},useRef:function(e){var s=hn();return e={current:e},s.memoizedState=e},useState:function(e){e=rh(e);var s=e.queue,r=Bm.bind(null,Vt,s);return s.dispatch=r,[e.memoizedState,r]},useDebugValue:ch,useDeferredValue:function(e,s){var r=hn();return uh(r,e,s)},useTransition:function(){var e=rh(!1);return e=Dm.bind(null,Vt,e.queue,!0,!1),hn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,r){var l=Vt,m=hn();if(ne){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),ye===null)throw Error(i(349));(te&127)!==0||rm(l,s,r)}m.memoizedState=r;var y={value:r,getSnapshot:s};return m.queue=y,wm(lm.bind(null,l,y,e),[e]),l.flags|=2048,Da(9,{destroy:void 0},om.bind(null,l,y,r,s),null),r},useId:function(){var e=hn(),s=ye.identifierPrefix;if(ne){var r=gs,l=fs;r=(l&~(1<<32-Wt(l)-1)).toString(32)+r,s="_"+s+"R_"+r,r=nl++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=D1++,s="_"+s+"r_"+r.toString(32)+"_";return e.memoizedState=s},useHostTransitionStatus:dh,useFormState:ym,useActionState:ym,useOptimistic:function(e){var s=hn();s.memoizedState=s.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=fh.bind(null,Vt,!0,r),r.dispatch=s,[e,s]},useMemoCache:sh,useCacheRefresh:function(){return hn().memoizedState=L1.bind(null,Vt)},useEffectEvent:function(e){var s=hn(),r={impl:e};return s.memoizedState=r,function(){if((le&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},gh={readContext:$e,use:il,useCallback:Om,useContext:$e,useEffect:lh,useImperativeHandle:km,useInsertionEffect:Cm,useLayoutEffect:Tm,useMemo:Em,useReducer:al,useRef:_m,useState:function(){return al(Ds)},useDebugValue:ch,useDeferredValue:function(e,s){var r=Me();return Nm(r,ge.memoizedState,e,s)},useTransition:function(){var e=al(Ds)[0],s=Me().memoizedState;return[typeof e=="boolean"?e:Ur(e),s]},useSyncExternalStore:am,useId:Rm,useHostTransitionStatus:dh,useFormState:xm,useActionState:xm,useOptimistic:function(e,s){var r=Me();return hm(r,ge,e,s)},useMemoCache:sh,useCacheRefresh:zm};gh.useEffectEvent=Sm;var Fm={readContext:$e,use:il,useCallback:Om,useContext:$e,useEffect:lh,useImperativeHandle:km,useInsertionEffect:Cm,useLayoutEffect:Tm,useMemo:Em,useReducer:ah,useRef:_m,useState:function(){return ah(Ds)},useDebugValue:ch,useDeferredValue:function(e,s){var r=Me();return ge===null?uh(r,e,s):Nm(r,ge.memoizedState,e,s)},useTransition:function(){var e=ah(Ds)[0],s=Me().memoizedState;return[typeof e=="boolean"?e:Ur(e),s]},useSyncExternalStore:am,useId:Rm,useHostTransitionStatus:dh,useFormState:bm,useActionState:bm,useOptimistic:function(e,s){var r=Me();return ge!==null?hm(r,ge,e,s):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:sh,useCacheRefresh:zm};Fm.useEffectEvent=Sm;function mh(e,s,r,l){s=e.memoizedState,r=r(l,s),r=r==null?s:x({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ph={enqueueSetState:function(e,s,r){e=e._reactInternals;var l=Rn(),m=li(l);m.payload=s,r!=null&&(m.callback=r),s=ci(e,m,l),s!==null&&(_n(s,e,l),Rr(s,e,l))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var l=Rn(),m=li(l);m.tag=1,m.payload=s,r!=null&&(m.callback=r),s=ci(e,m,l),s!==null&&(_n(s,e,l),Rr(s,e,l))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=Rn(),l=li(r);l.tag=2,s!=null&&(l.callback=s),s=ci(e,l,r),s!==null&&(_n(s,e,r),Rr(s,e,r))}};function Ym(e,s,r,l,m,y,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,y,T):s.prototype&&s.prototype.isPureReactComponent?!jr(r,l)||!jr(m,y):!0}function Xm(e,s,r,l){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,l),s.state!==e&&ph.enqueueReplaceState(s,s.state,null)}function Wi(e,s){var r=s;if("ref"in s){r={};for(var l in s)l!=="ref"&&(r[l]=s[l])}if(e=e.defaultProps){r===s&&(r=x({},r));for(var m in e)r[m]===void 0&&(r[m]=e[m])}return r}function Pm(e){Fo(e)}function Im(e){console.error(e)}function Gm(e){Fo(e)}function cl(e,s){try{var r=e.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Vm(e,s,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function yh(e,s,r){return r=li(r),r.tag=3,r.payload={element:null},r.callback=function(){cl(e,s)},r}function qm(e){return e=li(e),e.tag=3,e}function Wm(e,s,r,l){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var y=l.value;e.payload=function(){return m(y)},e.callback=function(){Vm(s,r,l)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){Vm(s,r,l),typeof m!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var U=l.stack;this.componentDidCatch(l.value,{componentStack:U!==null?U:""})})}function H1(e,s,r,l,m){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=r.alternate,s!==null&&Sa(s,r,m,!0),r=Nn.current,r!==null){switch(r.tag){case 31:case 13:return Vn===null?_l():r.alternate===null&&De===0&&(De=3),r.flags&=-257,r.flags|=65536,r.lanes=m,l===Ko?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([l]):s.add(l),Xh(e,l,m)),!1;case 22:return r.flags|=65536,l===Ko?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([l]):r.add(l)),Xh(e,l,m)),!1}throw Error(i(435,r.tag))}return Xh(e,l,m),_l(),!1}if(ne)return s=Nn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,l!==Bu&&(e=Error(i(422),{cause:l}),Er(Xn(e,r)))):(l!==Bu&&(s=Error(i(423),{cause:l}),Er(Xn(s,r))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,l=Xn(l,r),m=yh(e.stateNode,l,m),qu(e,m),De!==4&&(De=2)),!1;var y=Error(i(520),{cause:l});if(y=Xn(y,r),Wr===null?Wr=[y]:Wr.push(y),De!==4&&(De=2),s===null)return!0;l=Xn(l,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,e=m&-m,r.lanes|=e,e=yh(r.stateNode,l,e),qu(r,e),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(mi===null||!mi.has(y))))return r.flags|=65536,m&=-m,r.lanes|=m,m=qm(m),Wm(m,e,r,l),qu(r,m),!1}r=r.return}while(r!==null);return!1}var xh=Error(i(461)),Fe=!1;function tn(e,s,r,l){s.child=e===null?Jg(s,null,r,l):Vi(s,e.child,r,l)}function Zm(e,s,r,l,m){r=r.render;var y=s.ref;if("ref"in l){var T={};for(var U in l)U!=="ref"&&(T[U]=l[U])}else T=l;return Xi(s),l=$u(e,s,r,T,y,m),U=th(),e!==null&&!Fe?(eh(e,s,m),As(e,s,m)):(ne&&U&&Ru(s),s.flags|=1,tn(e,s,l,m),s.child)}function Km(e,s,r,l,m){if(e===null){var y=r.type;return typeof y=="function"&&!Du(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,Qm(e,s,y,l,m)):(e=Io(r.type,null,l,s,s.mode,m),e.ref=s.ref,e.return=s,s.child=e)}if(y=e.child,!jh(e,m)){var T=y.memoizedProps;if(r=r.compare,r=r!==null?r:jr,r(T,l)&&e.ref===s.ref)return As(e,s,m)}return s.flags|=1,e=js(y,l),e.ref=s.ref,e.return=s,s.child=e}function Qm(e,s,r,l,m){if(e!==null){var y=e.memoizedProps;if(jr(y,l)&&e.ref===s.ref)if(Fe=!1,s.pendingProps=l=y,jh(e,m))(e.flags&131072)!==0&&(Fe=!0);else return s.lanes=e.lanes,As(e,s,m)}return vh(e,s,r,l,m)}function Jm(e,s,r,l){var m=l.children,y=e!==null?e.memoizedState:null;if(e===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,e!==null){for(l=s.child=e.child,m=0;l!==null;)m=m|l.lanes|l.childLanes,l=l.sibling;l=m&~y}else l=0,s.child=null;return $m(e,s,y,r,l)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wo(s,y!==null?y.cachePool:null),y!==null?em(s,y):Zu(),nm(s);else return l=s.lanes=536870912,$m(e,s,y!==null?y.baseLanes|r:r,r,l)}else y!==null?(Wo(s,y.cachePool),em(s,y),hi(),s.memoizedState=null):(e!==null&&Wo(s,null),Zu(),hi());return tn(e,s,m,r),s.child}function Yr(e,s){return e!==null&&e.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function $m(e,s,r,l,m){var y=Pu();return y=y===null?null:{parent:Ue._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},e!==null&&Wo(s,null),Zu(),nm(s),e!==null&&Sa(e,s,l,!0),s.childLanes=m,null}function ul(e,s){return s=dl({mode:s.mode,children:s.children},e.mode),s.ref=e.ref,e.child=s,s.return=e,s}function tp(e,s,r){return Vi(s,e.child,null,r),e=ul(s,s.pendingProps),e.flags|=2,Dn(s),s.memoizedState=null,e}function F1(e,s,r){var l=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,e===null){if(ne){if(l.mode==="hidden")return e=ul(s,l),s.lanes=536870912,Yr(null,e);if(Qu(s),(e=_e)?(e=d0(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:si!==null?{id:fs,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},r=Lg(e),r.return=s,s.child=r,Je=s,_e=null)):e=null,e===null)throw ai(s);return s.lanes=536870912,null}return ul(s,l)}var y=e.memoizedState;if(y!==null){var T=y.dehydrated;if(Qu(s),m)if(s.flags&256)s.flags&=-257,s=tp(e,s,r);else if(s.memoizedState!==null)s.child=e.child,s.flags|=128,s=null;else throw Error(i(558));else if(Fe||Sa(e,s,r,!1),m=(r&e.childLanes)!==0,Fe||m){if(l=ye,l!==null&&(T=If(l,r),T!==0&&T!==y.retryLane))throw y.retryLane=T,Ui(e,T),_n(l,e,T),xh;_l(),s=tp(e,s,r)}else e=y.treeContext,_e=qn(T.nextSibling),Je=s,ne=!0,ii=null,Gn=!1,e!==null&&Fg(s,e),s=ul(s,l),s.flags|=4096;return s}return e=js(e.child,{mode:l.mode,children:l.children}),e.ref=s.ref,s.child=e,e.return=s,e}function hl(e,s){var r=s.ref;if(r===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(s.flags|=4194816)}}function vh(e,s,r,l,m){return Xi(s),r=$u(e,s,r,l,void 0,m),l=th(),e!==null&&!Fe?(eh(e,s,m),As(e,s,m)):(ne&&l&&Ru(s),s.flags|=1,tn(e,s,r,m),s.child)}function ep(e,s,r,l,m,y){return Xi(s),s.updateQueue=null,r=im(s,l,r,m),sm(e),l=th(),e!==null&&!Fe?(eh(e,s,y),As(e,s,y)):(ne&&l&&Ru(s),s.flags|=1,tn(e,s,r,y),s.child)}function np(e,s,r,l,m){if(Xi(s),s.stateNode===null){var y=va,T=r.contextType;typeof T=="object"&&T!==null&&(y=$e(T)),y=new r(l,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ph,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=l,y.state=s.memoizedState,y.refs={},Gu(s),T=r.contextType,y.context=typeof T=="object"&&T!==null?$e(T):va,y.state=s.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(mh(s,r,T,l),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&ph.enqueueReplaceState(y,y.state,null),Br(s,l,y,m),zr(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(e===null){y=s.stateNode;var U=s.memoizedProps,J=Wi(r,U);y.props=J;var ft=y.context,wt=r.contextType;T=va,typeof wt=="object"&&wt!==null&&(T=$e(wt));var kt=r.getDerivedStateFromProps;wt=typeof kt=="function"||typeof y.getSnapshotBeforeUpdate=="function",U=s.pendingProps!==U,wt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(U||ft!==T)&&Xm(s,y,l,T),oi=!1;var gt=s.memoizedState;y.state=gt,Br(s,l,y,m),zr(),ft=s.memoizedState,U||gt!==ft||oi?(typeof kt=="function"&&(mh(s,r,kt,l),ft=s.memoizedState),(J=oi||Ym(s,r,J,l,gt,ft,T))?(wt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=ft),y.props=l,y.state=ft,y.context=T,l=J):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{y=s.stateNode,Vu(e,s),T=s.memoizedProps,wt=Wi(r,T),y.props=wt,kt=s.pendingProps,gt=y.context,ft=r.contextType,J=va,typeof ft=="object"&&ft!==null&&(J=$e(ft)),U=r.getDerivedStateFromProps,(ft=typeof U=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==kt||gt!==J)&&Xm(s,y,l,J),oi=!1,gt=s.memoizedState,y.state=gt,Br(s,l,y,m),zr();var vt=s.memoizedState;T!==kt||gt!==vt||oi||e!==null&&e.dependencies!==null&&Vo(e.dependencies)?(typeof U=="function"&&(mh(s,r,U,l),vt=s.memoizedState),(wt=oi||Ym(s,r,wt,l,gt,vt,J)||e!==null&&e.dependencies!==null&&Vo(e.dependencies))?(ft||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,vt,J),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,vt,J)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===e.memoizedProps&&gt===e.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&gt===e.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=vt),y.props=l,y.state=vt,y.context=J,l=wt):(typeof y.componentDidUpdate!="function"||T===e.memoizedProps&&gt===e.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&gt===e.memoizedState||(s.flags|=1024),l=!1)}return y=l,hl(e,s),l=(s.flags&128)!==0,y||l?(y=s.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,e!==null&&l?(s.child=Vi(s,e.child,null,m),s.child=Vi(s,null,r,m)):tn(e,s,r,m),s.memoizedState=y.state,e=s.child):e=As(e,s,m),e}function sp(e,s,r,l){return Fi(),s.flags|=256,tn(e,s,r,l),s.child}var bh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _h(e){return{baseLanes:e,cachePool:Vg()}}function wh(e,s,r){return e=e!==null?e.childLanes&~r:0,s&&(e|=Mn),e}function ip(e,s,r){var l=s.pendingProps,m=!1,y=(s.flags&128)!==0,T;if((T=y)||(T=e!==null&&e.memoizedState===null?!1:(Ae.current&2)!==0),T&&(m=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,e===null){if(ne){if(m?ui(s):hi(),(e=_e)?(e=d0(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:si!==null?{id:fs,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},r=Lg(e),r.return=s,s.child=r,Je=s,_e=null)):e=null,e===null)throw ai(s);return id(e)?s.lanes=32:s.lanes=536870912,null}var U=l.children;return l=l.fallback,m?(hi(),m=s.mode,U=dl({mode:"hidden",children:U},m),l=Hi(l,m,r,null),U.return=s,l.return=s,U.sibling=l,s.child=U,l=s.child,l.memoizedState=_h(r),l.childLanes=wh(e,T,r),s.memoizedState=bh,Yr(null,l)):(ui(s),Sh(s,U))}var J=e.memoizedState;if(J!==null&&(U=J.dehydrated,U!==null)){if(y)s.flags&256?(ui(s),s.flags&=-257,s=Ch(e,s,r)):s.memoizedState!==null?(hi(),s.child=e.child,s.flags|=128,s=null):(hi(),U=l.fallback,m=s.mode,l=dl({mode:"visible",children:l.children},m),U=Hi(U,m,r,null),U.flags|=2,l.return=s,U.return=s,l.sibling=U,s.child=l,Vi(s,e.child,null,r),l=s.child,l.memoizedState=_h(r),l.childLanes=wh(e,T,r),s.memoizedState=bh,s=Yr(null,l));else if(ui(s),id(U)){if(T=U.nextSibling&&U.nextSibling.dataset,T)var ft=T.dgst;T=ft,l=Error(i(419)),l.stack="",l.digest=T,Er({value:l,source:null,stack:null}),s=Ch(e,s,r)}else if(Fe||Sa(e,s,r,!1),T=(r&e.childLanes)!==0,Fe||T){if(T=ye,T!==null&&(l=If(T,r),l!==0&&l!==J.retryLane))throw J.retryLane=l,Ui(e,l),_n(T,e,l),xh;sd(U)||_l(),s=Ch(e,s,r)}else sd(U)?(s.flags|=192,s.child=e.child,s=null):(e=J.treeContext,_e=qn(U.nextSibling),Je=s,ne=!0,ii=null,Gn=!1,e!==null&&Fg(s,e),s=Sh(s,l.children),s.flags|=4096);return s}return m?(hi(),U=l.fallback,m=s.mode,J=e.child,ft=J.sibling,l=js(J,{mode:"hidden",children:l.children}),l.subtreeFlags=J.subtreeFlags&65011712,ft!==null?U=js(ft,U):(U=Hi(U,m,r,null),U.flags|=2),U.return=s,l.return=s,l.sibling=U,s.child=l,Yr(null,l),l=s.child,U=e.child.memoizedState,U===null?U=_h(r):(m=U.cachePool,m!==null?(J=Ue._currentValue,m=m.parent!==J?{parent:J,pool:J}:m):m=Vg(),U={baseLanes:U.baseLanes|r,cachePool:m}),l.memoizedState=U,l.childLanes=wh(e,T,r),s.memoizedState=bh,Yr(e.child,l)):(ui(s),r=e.child,e=r.sibling,r=js(r,{mode:"visible",children:l.children}),r.return=s,r.sibling=null,e!==null&&(T=s.deletions,T===null?(s.deletions=[e],s.flags|=16):T.push(e)),s.child=r,s.memoizedState=null,r)}function Sh(e,s){return s=dl({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function dl(e,s){return e=En(22,e,null,s),e.lanes=0,e}function Ch(e,s,r){return Vi(s,e.child,null,r),e=Sh(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function ap(e,s,r){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s),Hu(e.return,s,r)}function Th(e,s,r,l,m,y){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:m,treeForkCount:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=r,T.tailMode=m,T.treeForkCount=y)}function rp(e,s,r){var l=s.pendingProps,m=l.revealOrder,y=l.tail;l=l.children;var T=Ae.current,U=(T&2)!==0;if(U?(T=T&1|2,s.flags|=128):T&=1,R(Ae,T),tn(e,s,l,r),l=ne?Or:0,!U&&e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ap(e,r,s);else if(e.tag===19)ap(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(m){case"forwards":for(r=s.child,m=null;r!==null;)e=r.alternate,e!==null&&tl(e)===null&&(m=r),r=r.sibling;r=m,r===null?(m=s.child,s.child=null):(m=r.sibling,r.sibling=null),Th(s,!1,m,r,y,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=s.child,s.child=null;m!==null;){if(e=m.alternate,e!==null&&tl(e)===null){s.child=m;break}e=m.sibling,m.sibling=r,r=m,m=e}Th(s,!0,r,null,y,l);break;case"together":Th(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function As(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),gi|=s.lanes,(r&s.childLanes)===0)if(e!==null){if(Sa(e,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(i(153));if(s.child!==null){for(e=s.child,r=js(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=js(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function jh(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Vo(e)))}function Y1(e,s,r){switch(s.tag){case 3:bt(s,s.stateNode.containerInfo),ri(s,Ue,e.memoizedState.cache),Fi();break;case 27:case 5:ot(s);break;case 4:bt(s,s.stateNode.containerInfo);break;case 10:ri(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Qu(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ui(s),s.flags|=128,null):(r&s.child.childLanes)!==0?ip(e,s,r):(ui(s),e=As(e,s,r),e!==null?e.sibling:null);ui(s);break;case 19:var m=(e.flags&128)!==0;if(l=(r&s.childLanes)!==0,l||(Sa(e,s,r,!1),l=(r&s.childLanes)!==0),m){if(l)return rp(e,s,r);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),R(Ae,Ae.current),l)break;return null;case 22:return s.lanes=0,Jm(e,s,r,s.pendingProps);case 24:ri(s,Ue,e.memoizedState.cache)}return As(e,s,r)}function op(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps)Fe=!0;else{if(!jh(e,r)&&(s.flags&128)===0)return Fe=!1,Y1(e,s,r);Fe=(e.flags&131072)!==0}else Fe=!1,ne&&(s.flags&1048576)!==0&&Hg(s,Or,s.index);switch(s.lanes=0,s.tag){case 16:t:{var l=s.pendingProps;if(e=Ii(s.elementType),s.type=e,typeof e=="function")Du(e)?(l=Wi(e,l),s.tag=1,s=np(null,s,e,l,r)):(s.tag=0,s=vh(null,s,e,l,r));else{if(e!=null){var m=e.$$typeof;if(m===X){s.tag=11,s=Zm(null,s,e,l,r);break t}else if(m===V){s.tag=14,s=Km(null,s,e,l,r);break t}}throw s=E(e)||e,Error(i(306,s,""))}}return s;case 0:return vh(e,s,s.type,s.pendingProps,r);case 1:return l=s.type,m=Wi(l,s.pendingProps),np(e,s,l,m,r);case 3:t:{if(bt(s,s.stateNode.containerInfo),e===null)throw Error(i(387));l=s.pendingProps;var y=s.memoizedState;m=y.element,Vu(e,s),Br(s,l,null,r);var T=s.memoizedState;if(l=T.cache,ri(s,Ue,l),l!==y.cache&&Fu(s,[Ue],r,!0),zr(),l=T.element,y.isDehydrated)if(y={element:l,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=sp(e,s,l,r);break t}else if(l!==m){m=Xn(Error(i(424)),s),Er(m),s=sp(e,s,l,r);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(_e=qn(e.firstChild),Je=s,ne=!0,ii=null,Gn=!0,r=Jg(s,null,l,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Fi(),l===m){s=As(e,s,r);break t}tn(e,s,l,r)}s=s.child}return s;case 26:return hl(e,s),e===null?(r=x0(s.type,null,s.pendingProps,null))?s.memoizedState=r:ne||(r=s.type,e=s.pendingProps,l=Ol(_t.current).createElement(r),l[Qe]=s,l[mn]=e,en(l,r,e),Ze(l),s.stateNode=l):s.memoizedState=x0(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return ot(s),e===null&&ne&&(l=s.stateNode=m0(s.type,s.pendingProps,_t.current),Je=s,Gn=!0,m=_e,vi(s.type)?(ad=m,_e=qn(l.firstChild)):_e=m),tn(e,s,s.pendingProps.children,r),hl(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&ne&&((m=l=_e)&&(l=yb(l,s.type,s.pendingProps,Gn),l!==null?(s.stateNode=l,Je=s,_e=qn(l.firstChild),Gn=!1,m=!0):m=!1),m||ai(s)),ot(s),m=s.type,y=s.pendingProps,T=e!==null?e.memoizedProps:null,l=y.children,td(m,y)?l=null:T!==null&&td(m,T)&&(s.flags|=32),s.memoizedState!==null&&(m=$u(e,s,A1,null,null,r),no._currentValue=m),hl(e,s),tn(e,s,l,r),s.child;case 6:return e===null&&ne&&((e=r=_e)&&(r=xb(r,s.pendingProps,Gn),r!==null?(s.stateNode=r,Je=s,_e=null,e=!0):e=!1),e||ai(s)),null;case 13:return ip(e,s,r);case 4:return bt(s,s.stateNode.containerInfo),l=s.pendingProps,e===null?s.child=Vi(s,null,l,r):tn(e,s,l,r),s.child;case 11:return Zm(e,s,s.type,s.pendingProps,r);case 7:return tn(e,s,s.pendingProps,r),s.child;case 8:return tn(e,s,s.pendingProps.children,r),s.child;case 12:return tn(e,s,s.pendingProps.children,r),s.child;case 10:return l=s.pendingProps,ri(s,s.type,l.value),tn(e,s,l.children,r),s.child;case 9:return m=s.type._context,l=s.pendingProps.children,Xi(s),m=$e(m),l=l(m),s.flags|=1,tn(e,s,l,r),s.child;case 14:return Km(e,s,s.type,s.pendingProps,r);case 15:return Qm(e,s,s.type,s.pendingProps,r);case 19:return rp(e,s,r);case 31:return F1(e,s,r);case 22:return Jm(e,s,r,s.pendingProps);case 24:return Xi(s),l=$e(Ue),e===null?(m=Pu(),m===null&&(m=ye,y=Yu(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=r),m=y),s.memoizedState={parent:l,cache:m},Gu(s),ri(s,Ue,m)):((e.lanes&r)!==0&&(Vu(e,s),Br(s,null,null,r),zr()),m=e.memoizedState,y=s.memoizedState,m.parent!==l?(m={parent:l,cache:l},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),ri(s,Ue,l)):(l=y.cache,ri(s,Ue,l),l!==m.cache&&Fu(s,[Ue],r,!0))),tn(e,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ms(e){e.flags|=4}function kh(e,s,r,l,m){if((s=(e.mode&32)!==0)&&(s=!1),s){if(e.flags|=16777216,(m&335544128)===m)if(e.stateNode.complete)e.flags|=8192;else if(Rp())e.flags|=8192;else throw Gi=Ko,Iu}else e.flags&=-16777217}function lp(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!S0(s))if(Rp())e.flags|=8192;else throw Gi=Ko,Iu}function fl(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?kn():536870912,e.lanes|=s,za|=s)}function Xr(e,s){if(!ne)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function we(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(s)for(var m=e.child;m!==null;)r|=m.lanes|m.childLanes,l|=m.subtreeFlags&65011712,l|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)r|=m.lanes|m.childLanes,l|=m.subtreeFlags,l|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=l,e.childLanes=r,s}function X1(e,s,r){var l=s.pendingProps;switch(zu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(s),null;case 1:return we(s),null;case 3:return r=s.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Es(Ue),Ct(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(wa(s)?Ms(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Lu())),we(s),null;case 26:var m=s.type,y=s.memoizedState;return e===null?(Ms(s),y!==null?(we(s),lp(s,y)):(we(s),kh(s,m,null,l,r))):y?y!==e.memoizedState?(Ms(s),we(s),lp(s,y)):(we(s),s.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ms(s),we(s),kh(s,m,e,l,r)),null;case 27:if(St(s),r=_t.current,m=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&Ms(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return we(s),null}e=Z.current,wa(s)?Yg(s):(e=m0(m,l,r),s.stateNode=e,Ms(s))}return we(s),null;case 5:if(St(s),m=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&Ms(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return we(s),null}if(y=Z.current,wa(s))Yg(s);else{var T=Ol(_t.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?y.multiple=!0:l.size&&(y.size=l.size);break;default:y=typeof l.is=="string"?T.createElement(m,{is:l.is}):T.createElement(m)}}y[Qe]=s,y[mn]=l;t:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break t;for(;T.sibling===null;){if(T.return===null||T.return===s)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=y;t:switch(en(y,m,l),m){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Ms(s)}}return we(s),kh(s,s.type,e===null?null:e.memoizedProps,s.pendingProps,r),null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==l&&Ms(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(e=_t.current,wa(s)){if(e=s.stateNode,r=s.memoizedProps,l=null,m=Je,m!==null)switch(m.tag){case 27:case 5:l=m.memoizedProps}e[Qe]=s,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||i0(e.nodeValue,r)),e||ai(s,!0)}else e=Ol(e).createTextNode(l),e[Qe]=s,s.stateNode=e}return we(s),null;case 31:if(r=s.memoizedState,e===null||e.memoizedState!==null){if(l=wa(s),r!==null){if(e===null){if(!l)throw Error(i(318));if(e=s.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Qe]=s}else Fi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;we(s),e=!1}else r=Lu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return s.flags&256?(Dn(s),s):(Dn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return we(s),null;case 13:if(l=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=wa(s),l!==null&&l.dehydrated!==null){if(e===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Qe]=s}else Fi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;we(s),m=!1}else m=Lu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Dn(s),s):(Dn(s),null)}return Dn(s),(s.flags&128)!==0?(s.lanes=r,s):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=s.child,m=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(m=l.alternate.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==m&&(l.flags|=2048)),r!==e&&r&&(s.child.flags|=8192),fl(s,s.updateQueue),we(s),null);case 4:return Ct(),e===null&&Zh(s.stateNode.containerInfo),we(s),null;case 10:return Es(s.type),we(s),null;case 19:if(j(Ae),l=s.memoizedState,l===null)return we(s),null;if(m=(s.flags&128)!==0,y=l.rendering,y===null)if(m)Xr(l,!1);else{if(De!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(y=tl(e),y!==null){for(s.flags|=128,Xr(l,!1),e=y.updateQueue,s.updateQueue=e,fl(s,e),s.subtreeFlags=0,e=r,r=s.child;r!==null;)Bg(r,e),r=r.sibling;return R(Ae,Ae.current&1|2),ne&&ks(s,l.treeForkCount),s.child}e=e.sibling}l.tail!==null&&Tt()>xl&&(s.flags|=128,m=!0,Xr(l,!1),s.lanes=4194304)}else{if(!m)if(e=tl(y),e!==null){if(s.flags|=128,m=!0,e=e.updateQueue,s.updateQueue=e,fl(s,e),Xr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!y.alternate&&!ne)return we(s),null}else 2*Tt()-l.renderingStartTime>xl&&r!==536870912&&(s.flags|=128,m=!0,Xr(l,!1),s.lanes=4194304);l.isBackwards?(y.sibling=s.child,s.child=y):(e=l.last,e!==null?e.sibling=y:s.child=y,l.last=y)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Tt(),e.sibling=null,r=Ae.current,R(Ae,m?r&1|2:r&1),ne&&ks(s,l.treeForkCount),e):(we(s),null);case 22:case 23:return Dn(s),Ku(),l=s.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(r&536870912)!==0&&(s.flags&128)===0&&(we(s),s.subtreeFlags&6&&(s.flags|=8192)):we(s),r=s.updateQueue,r!==null&&fl(s,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==r&&(s.flags|=2048),e!==null&&j(Pi),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Es(Ue),we(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function P1(e,s){switch(zu(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Es(Ue),Ct(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return St(s),null;case 31:if(s.memoizedState!==null){if(Dn(s),s.alternate===null)throw Error(i(340));Fi()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 13:if(Dn(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Fi()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return j(Ae),null;case 4:return Ct(),null;case 10:return Es(s.type),null;case 22:case 23:return Dn(s),Ku(),e!==null&&j(Pi),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Es(Ue),null;case 25:return null;default:return null}}function cp(e,s){switch(zu(s),s.tag){case 3:Es(Ue),Ct();break;case 26:case 27:case 5:St(s);break;case 4:Ct();break;case 31:s.memoizedState!==null&&Dn(s);break;case 13:Dn(s);break;case 19:j(Ae);break;case 10:Es(s.type);break;case 22:case 23:Dn(s),Ku(),e!==null&&j(Pi);break;case 24:Es(Ue)}}function Pr(e,s){try{var r=s.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var m=l.next;r=m;do{if((r.tag&e)===e){l=void 0;var y=r.create,T=r.inst;l=y(),T.destroy=l}r=r.next}while(r!==m)}}catch(U){he(s,s.return,U)}}function di(e,s,r){try{var l=s.updateQueue,m=l!==null?l.lastEffect:null;if(m!==null){var y=m.next;l=y;do{if((l.tag&e)===e){var T=l.inst,U=T.destroy;if(U!==void 0){T.destroy=void 0,m=s;var J=r,ft=U;try{ft()}catch(wt){he(m,J,wt)}}}l=l.next}while(l!==y)}}catch(wt){he(s,s.return,wt)}}function up(e){var s=e.updateQueue;if(s!==null){var r=e.stateNode;try{tm(s,r)}catch(l){he(e,e.return,l)}}}function hp(e,s,r){r.props=Wi(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){he(e,s,l)}}function Ir(e,s){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(m){he(e,s,m)}}function ms(e,s){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(m){he(e,s,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){he(e,s,m)}else r.current=null}function dp(e){var s=e.type,r=e.memoizedProps,l=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break t;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(m){he(e,e.return,m)}}function Oh(e,s,r){try{var l=e.stateNode;hb(l,e.type,r,s),l[mn]=s}catch(m){he(e,e.return,m)}}function fp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vi(e.type)||e.tag===4}function Eh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||fp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nh(e,s,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(e),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Cs));else if(l!==4&&(l===27&&vi(e.type)&&(r=e.stateNode,s=null),e=e.child,e!==null))for(Nh(e,s,r),e=e.sibling;e!==null;)Nh(e,s,r),e=e.sibling}function gl(e,s,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(l!==4&&(l===27&&vi(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(gl(e,s,r),e=e.sibling;e!==null;)gl(e,s,r),e=e.sibling}function gp(e){var s=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);en(s,l,r),s[Qe]=e,s[mn]=r}catch(y){he(e,e.return,y)}}var Rs=!1,Ye=!1,Dh=!1,mp=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function I1(e,s){if(e=e.containerInfo,Jh=zl,e=kg(e),Cu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var m=l.anchorOffset,y=l.focusNode;l=l.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break t}var T=0,U=-1,J=-1,ft=0,wt=0,kt=e,gt=null;e:for(;;){for(var vt;kt!==r||m!==0&&kt.nodeType!==3||(U=T+m),kt!==y||l!==0&&kt.nodeType!==3||(J=T+l),kt.nodeType===3&&(T+=kt.nodeValue.length),(vt=kt.firstChild)!==null;)gt=kt,kt=vt;for(;;){if(kt===e)break e;if(gt===r&&++ft===m&&(U=T),gt===y&&++wt===l&&(J=T),(vt=kt.nextSibling)!==null)break;kt=gt,gt=kt.parentNode}kt=vt}r=U===-1||J===-1?null:{start:U,end:J}}else r=null}r=r||{start:0,end:0}}else r=null;for($h={focusedElem:e,selectionRange:r},zl=!1,Ke=s;Ke!==null;)if(s=Ke,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,Ke=e;else for(;Ke!==null;){switch(s=Ke,y=s.alternate,e=s.flags,s.tag){case 0:if((e&4)!==0&&(e=s.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)m=e[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&y!==null){e=void 0,r=s,m=y.memoizedProps,y=y.memoizedState,l=r.stateNode;try{var Ut=Wi(r.type,m);e=l.getSnapshotBeforeUpdate(Ut,y),l.__reactInternalSnapshotBeforeUpdate=e}catch(Pt){he(r,r.return,Pt)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,r=e.nodeType,r===9)nd(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":nd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=s.sibling,e!==null){e.return=s.return,Ke=e;break}Ke=s.return}}function pp(e,s,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Bs(e,r),l&4&&Pr(5,r);break;case 1:if(Bs(e,r),l&4)if(e=r.stateNode,s===null)try{e.componentDidMount()}catch(T){he(r,r.return,T)}else{var m=Wi(r.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(m,s,e.__reactInternalSnapshotBeforeUpdate)}catch(T){he(r,r.return,T)}}l&64&&up(r),l&512&&Ir(r,r.return);break;case 3:if(Bs(e,r),l&64&&(e=r.updateQueue,e!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{tm(e,s)}catch(T){he(r,r.return,T)}}break;case 27:s===null&&l&4&&gp(r);case 26:case 5:Bs(e,r),s===null&&l&4&&dp(r),l&512&&Ir(r,r.return);break;case 12:Bs(e,r);break;case 31:Bs(e,r),l&4&&vp(e,r);break;case 13:Bs(e,r),l&4&&bp(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=$1.bind(null,r),vb(e,r))));break;case 22:if(l=r.memoizedState!==null||Rs,!l){s=s!==null&&s.memoizedState!==null||Ye,m=Rs;var y=Ye;Rs=l,(Ye=s)&&!y?Ls(e,r,(r.subtreeFlags&8772)!==0):Bs(e,r),Rs=m,Ye=y}break;case 30:break;default:Bs(e,r)}}function yp(e){var s=e.alternate;s!==null&&(e.alternate=null,yp(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&ou(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ke=null,yn=!1;function zs(e,s,r){for(r=r.child;r!==null;)xp(e,s,r),r=r.sibling}function xp(e,s,r){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(Kt,r)}catch{}switch(r.tag){case 26:Ye||ms(r,s),zs(e,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ye||ms(r,s);var l=ke,m=yn;vi(r.type)&&(ke=r.stateNode,yn=!1),zs(e,s,r),$r(r.stateNode),ke=l,yn=m;break;case 5:Ye||ms(r,s);case 6:if(l=ke,m=yn,ke=null,zs(e,s,r),ke=l,yn=m,ke!==null)if(yn)try{(ke.nodeType===9?ke.body:ke.nodeName==="HTML"?ke.ownerDocument.body:ke).removeChild(r.stateNode)}catch(y){he(r,s,y)}else try{ke.removeChild(r.stateNode)}catch(y){he(r,s,y)}break;case 18:ke!==null&&(yn?(e=ke,u0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Pa(e)):u0(ke,r.stateNode));break;case 4:l=ke,m=yn,ke=r.stateNode.containerInfo,yn=!0,zs(e,s,r),ke=l,yn=m;break;case 0:case 11:case 14:case 15:di(2,r,s),Ye||di(4,r,s),zs(e,s,r);break;case 1:Ye||(ms(r,s),l=r.stateNode,typeof l.componentWillUnmount=="function"&&hp(r,s,l)),zs(e,s,r);break;case 21:zs(e,s,r);break;case 22:Ye=(l=Ye)||r.memoizedState!==null,zs(e,s,r),Ye=l;break;default:zs(e,s,r)}}function vp(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pa(e)}catch(r){he(s,s.return,r)}}}function bp(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pa(e)}catch(r){he(s,s.return,r)}}function G1(e){switch(e.tag){case 31:case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new mp),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new mp),s;default:throw Error(i(435,e.tag))}}function ml(e,s){var r=G1(e);s.forEach(function(l){if(!r.has(l)){r.add(l);var m=tb.bind(null,e,l);l.then(m,m)}})}function xn(e,s){var r=s.deletions;if(r!==null)for(var l=0;l<r.length;l++){var m=r[l],y=e,T=s,U=T;t:for(;U!==null;){switch(U.tag){case 27:if(vi(U.type)){ke=U.stateNode,yn=!1;break t}break;case 5:ke=U.stateNode,yn=!1;break t;case 3:case 4:ke=U.stateNode.containerInfo,yn=!0;break t}U=U.return}if(ke===null)throw Error(i(160));xp(y,T,m),ke=null,yn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)_p(s,e),s=s.sibling}var ns=null;function _p(e,s){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xn(s,e),vn(e),l&4&&(di(3,e,e.return),Pr(3,e),di(5,e,e.return));break;case 1:xn(s,e),vn(e),l&512&&(Ye||r===null||ms(r,r.return)),l&64&&Rs&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var m=ns;if(xn(s,e),vn(e),l&512&&(Ye||r===null||ms(r,r.return)),l&4){var y=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){t:{l=e.type,r=e.memoizedProps,m=m.ownerDocument||m;e:switch(l){case"title":y=m.getElementsByTagName("title")[0],(!y||y[yr]||y[Qe]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(l),m.head.insertBefore(y,m.querySelector("head > title"))),en(y,l,r),y[Qe]=e,Ze(y),l=y;break t;case"link":var T=_0("link","href",m).get(l+(r.href||""));if(T){for(var U=0;U<T.length;U++)if(y=T[U],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(U,1);break e}}y=m.createElement(l),en(y,l,r),m.head.appendChild(y);break;case"meta":if(T=_0("meta","content",m).get(l+(r.content||""))){for(U=0;U<T.length;U++)if(y=T[U],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(U,1);break e}}y=m.createElement(l),en(y,l,r),m.head.appendChild(y);break;default:throw Error(i(468,l))}y[Qe]=e,Ze(y),l=y}e.stateNode=l}else w0(m,e.type,e.stateNode);else e.stateNode=b0(m,l,e.memoizedProps);else y!==l?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,l===null?w0(m,e.type,e.stateNode):b0(m,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Oh(e,e.memoizedProps,r.memoizedProps)}break;case 27:xn(s,e),vn(e),l&512&&(Ye||r===null||ms(r,r.return)),r!==null&&l&4&&Oh(e,e.memoizedProps,r.memoizedProps);break;case 5:if(xn(s,e),vn(e),l&512&&(Ye||r===null||ms(r,r.return)),e.flags&32){m=e.stateNode;try{da(m,"")}catch(Ut){he(e,e.return,Ut)}}l&4&&e.stateNode!=null&&(m=e.memoizedProps,Oh(e,m,r!==null?r.memoizedProps:m)),l&1024&&(Dh=!0);break;case 6:if(xn(s,e),vn(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(Ut){he(e,e.return,Ut)}}break;case 3:if(Dl=null,m=ns,ns=El(s.containerInfo),xn(s,e),ns=m,vn(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Pa(s.containerInfo)}catch(Ut){he(e,e.return,Ut)}Dh&&(Dh=!1,wp(e));break;case 4:l=ns,ns=El(e.stateNode.containerInfo),xn(s,e),vn(e),ns=l;break;case 12:xn(s,e),vn(e);break;case 31:xn(s,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ml(e,l)));break;case 13:xn(s,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(yl=Tt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ml(e,l)));break;case 22:m=e.memoizedState!==null;var J=r!==null&&r.memoizedState!==null,ft=Rs,wt=Ye;if(Rs=ft||m,Ye=wt||J,xn(s,e),Ye=wt,Rs=ft,vn(e),l&8192)t:for(s=e.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(r===null||J||Rs||Ye||Zi(e)),r=null,s=e;;){if(s.tag===5||s.tag===26){if(r===null){J=r=s;try{if(y=J.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{U=J.stateNode;var kt=J.memoizedProps.style,gt=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;U.style.display=gt==null||typeof gt=="boolean"?"":(""+gt).trim()}}catch(Ut){he(J,J.return,Ut)}}}else if(s.tag===6){if(r===null){J=s;try{J.stateNode.nodeValue=m?"":J.memoizedProps}catch(Ut){he(J,J.return,Ut)}}}else if(s.tag===18){if(r===null){J=s;try{var vt=J.stateNode;m?h0(vt,!0):h0(J.stateNode,!1)}catch(Ut){he(J,J.return,Ut)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,ml(e,r))));break;case 19:xn(s,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ml(e,l)));break;case 30:break;case 21:break;default:xn(s,e),vn(e)}}function vn(e){var s=e.flags;if(s&2){try{for(var r,l=e.return;l!==null;){if(fp(l)){r=l;break}l=l.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var m=r.stateNode,y=Eh(e);gl(e,y,m);break;case 5:var T=r.stateNode;r.flags&32&&(da(T,""),r.flags&=-33);var U=Eh(e);gl(e,U,T);break;case 3:case 4:var J=r.stateNode.containerInfo,ft=Eh(e);Nh(e,ft,J);break;default:throw Error(i(161))}}catch(wt){he(e,e.return,wt)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function wp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;wp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Bs(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)pp(e,s.alternate,s),s=s.sibling}function Zi(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:di(4,s,s.return),Zi(s);break;case 1:ms(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&hp(s,s.return,r),Zi(s);break;case 27:$r(s.stateNode);case 26:case 5:ms(s,s.return),Zi(s);break;case 22:s.memoizedState===null&&Zi(s);break;case 30:Zi(s);break;default:Zi(s)}e=e.sibling}}function Ls(e,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,m=e,y=s,T=y.flags;switch(y.tag){case 0:case 11:case 15:Ls(m,y,r),Pr(4,y);break;case 1:if(Ls(m,y,r),l=y,m=l.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ft){he(l,l.return,ft)}if(l=y,m=l.updateQueue,m!==null){var U=l.stateNode;try{var J=m.shared.hiddenCallbacks;if(J!==null)for(m.shared.hiddenCallbacks=null,m=0;m<J.length;m++)$g(J[m],U)}catch(ft){he(l,l.return,ft)}}r&&T&64&&up(y),Ir(y,y.return);break;case 27:gp(y);case 26:case 5:Ls(m,y,r),r&&l===null&&T&4&&dp(y),Ir(y,y.return);break;case 12:Ls(m,y,r);break;case 31:Ls(m,y,r),r&&T&4&&vp(m,y);break;case 13:Ls(m,y,r),r&&T&4&&bp(m,y);break;case 22:y.memoizedState===null&&Ls(m,y,r),Ir(y,y.return);break;case 30:break;default:Ls(m,y,r)}s=s.sibling}}function Ah(e,s){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Nr(r))}function Mh(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Nr(e))}function ss(e,s,r,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sp(e,s,r,l),s=s.sibling}function Sp(e,s,r,l){var m=s.flags;switch(s.tag){case 0:case 11:case 15:ss(e,s,r,l),m&2048&&Pr(9,s);break;case 1:ss(e,s,r,l);break;case 3:ss(e,s,r,l),m&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Nr(e)));break;case 12:if(m&2048){ss(e,s,r,l),e=s.stateNode;try{var y=s.memoizedProps,T=y.id,U=y.onPostCommit;typeof U=="function"&&U(T,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(J){he(s,s.return,J)}}else ss(e,s,r,l);break;case 31:ss(e,s,r,l);break;case 13:ss(e,s,r,l);break;case 23:break;case 22:y=s.stateNode,T=s.alternate,s.memoizedState!==null?y._visibility&2?ss(e,s,r,l):Gr(e,s):y._visibility&2?ss(e,s,r,l):(y._visibility|=2,Aa(e,s,r,l,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Ah(T,s);break;case 24:ss(e,s,r,l),m&2048&&Mh(s.alternate,s);break;default:ss(e,s,r,l)}}function Aa(e,s,r,l,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=e,T=s,U=r,J=l,ft=T.flags;switch(T.tag){case 0:case 11:case 15:Aa(y,T,U,J,m),Pr(8,T);break;case 23:break;case 22:var wt=T.stateNode;T.memoizedState!==null?wt._visibility&2?Aa(y,T,U,J,m):Gr(y,T):(wt._visibility|=2,Aa(y,T,U,J,m)),m&&ft&2048&&Ah(T.alternate,T);break;case 24:Aa(y,T,U,J,m),m&&ft&2048&&Mh(T.alternate,T);break;default:Aa(y,T,U,J,m)}s=s.sibling}}function Gr(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=e,l=s,m=l.flags;switch(l.tag){case 22:Gr(r,l),m&2048&&Ah(l.alternate,l);break;case 24:Gr(r,l),m&2048&&Mh(l.alternate,l);break;default:Gr(r,l)}s=s.sibling}}var Vr=8192;function Ma(e,s,r){if(e.subtreeFlags&Vr)for(e=e.child;e!==null;)Cp(e,s,r),e=e.sibling}function Cp(e,s,r){switch(e.tag){case 26:Ma(e,s,r),e.flags&Vr&&e.memoizedState!==null&&Db(r,ns,e.memoizedState,e.memoizedProps);break;case 5:Ma(e,s,r);break;case 3:case 4:var l=ns;ns=El(e.stateNode.containerInfo),Ma(e,s,r),ns=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Vr,Vr=16777216,Ma(e,s,r),Vr=l):Ma(e,s,r));break;default:Ma(e,s,r)}}function Tp(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function qr(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Ke=l,kp(l,e)}Tp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jp(e),e=e.sibling}function jp(e){switch(e.tag){case 0:case 11:case 15:qr(e),e.flags&2048&&di(9,e,e.return);break;case 3:qr(e);break;case 12:qr(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,pl(e)):qr(e);break;default:qr(e)}}function pl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Ke=l,kp(l,e)}Tp(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:di(8,s,s.return),pl(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,pl(s));break;default:pl(s)}e=e.sibling}}function kp(e,s){for(;Ke!==null;){var r=Ke;switch(r.tag){case 0:case 11:case 15:di(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Nr(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,Ke=l;else t:for(r=e;Ke!==null;){l=Ke;var m=l.sibling,y=l.return;if(yp(l),l===r){Ke=null;break t}if(m!==null){m.return=y,Ke=m;break t}Ke=y}}}var V1={getCacheForType:function(e){var s=$e(Ue),r=s.data.get(e);return r===void 0&&(r=e(),s.data.set(e,r)),r},cacheSignal:function(){return $e(Ue).controller.signal}},q1=typeof WeakMap=="function"?WeakMap:Map,le=0,ye=null,Jt=null,te=0,ue=0,An=null,fi=!1,Ra=!1,Rh=!1,Us=0,De=0,gi=0,Ki=0,zh=0,Mn=0,za=0,Wr=null,bn=null,Bh=!1,yl=0,Op=0,xl=1/0,vl=null,mi=null,Ve=0,pi=null,Ba=null,Hs=0,Lh=0,Uh=null,Ep=null,Zr=0,Hh=null;function Rn(){return(le&2)!==0&&te!==0?te&-te:K.T!==null?Gh():Gf()}function Np(){if(Mn===0)if((te&536870912)===0||ne){var e=Mt;Mt<<=1,(Mt&3932160)===0&&(Mt=262144),Mn=e}else Mn=536870912;return e=Nn.current,e!==null&&(e.flags|=32),Mn}function _n(e,s,r){(e===ye&&(ue===2||ue===9)||e.cancelPendingCommit!==null)&&(La(e,0),yi(e,te,Mn,!1)),je(e,r),((le&2)===0||e!==ye)&&(e===ye&&((le&2)===0&&(Ki|=r),De===4&&yi(e,te,Mn,!1)),ps(e))}function Dp(e,s,r){if((le&6)!==0)throw Error(i(327));var l=!r&&(s&127)===0&&(s&e.expiredLanes)===0||Le(e,s),m=l?K1(e,s):Yh(e,s,!0),y=l;do{if(m===0){Ra&&!l&&yi(e,s,0,!1);break}else{if(r=e.current.alternate,y&&!W1(r)){m=Yh(e,s,!1),y=!1;continue}if(m===2){if(y=s,e.errorRecoveryDisabledLanes&y)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;t:{var U=e;m=Wr;var J=U.current.memoizedState.isDehydrated;if(J&&(La(U,T).flags|=256),T=Yh(U,T,!1),T!==2){if(Rh&&!J){U.errorRecoveryDisabledLanes|=y,Ki|=y,m=4;break t}y=bn,bn=m,y!==null&&(bn===null?bn=y:bn.push.apply(bn,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){La(e,0),yi(e,s,0,!0);break}t:{switch(l=e,y=m,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:yi(l,s,Mn,!fi);break t;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(m=yl+300-Tt(),10<m)){if(yi(l,s,Mn,!fi),fe(l,0,!0)!==0)break t;Hs=s,l.timeoutHandle=l0(Ap.bind(null,l,r,bn,vl,Bh,s,Mn,Ki,za,fi,y,"Throttled",-0,0),m);break t}Ap(l,r,bn,vl,Bh,s,Mn,Ki,za,fi,y,null,-0,0)}}break}while(!0);ps(e)}function Ap(e,s,r,l,m,y,T,U,J,ft,wt,kt,gt,vt){if(e.timeoutHandle=-1,kt=s.subtreeFlags,kt&8192||(kt&16785408)===16785408){kt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cs},Cp(s,y,kt);var Ut=(y&62914560)===y?yl-Tt():(y&4194048)===y?Op-Tt():0;if(Ut=Ab(kt,Ut),Ut!==null){Hs=y,e.cancelPendingCommit=Ut(Fp.bind(null,e,s,y,r,l,m,T,U,J,wt,kt,null,gt,vt)),yi(e,y,T,!ft);return}}Fp(e,s,y,r,l,m,T,U,J)}function W1(e){for(var s=e;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var m=r[l],y=m.getSnapshot;m=m.value;try{if(!On(y(),m))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(e,s,r,l){s&=~zh,s&=~Ki,e.suspendedLanes|=s,e.pingedLanes&=~s,l&&(e.warmLanes|=s),l=e.expirationTimes;for(var m=s;0<m;){var y=31-Wt(m),T=1<<y;l[y]=-1,m&=~T}r!==0&&ti(e,r,s)}function bl(){return(le&6)===0?(Kr(0),!1):!0}function Fh(){if(Jt!==null){if(ue===0)var e=Jt.return;else e=Jt,Os=Yi=null,nh(e),ka=null,Ar=0,e=Jt;for(;e!==null;)cp(e.alternate,e),e=e.return;Jt=null}}function La(e,s){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,gb(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Hs=0,Fh(),ye=e,Jt=r=js(e.current,null),te=s,ue=0,An=null,fi=!1,Ra=Le(e,s),Rh=!1,za=Mn=zh=Ki=gi=De=0,bn=Wr=null,Bh=!1,(s&8)!==0&&(s|=s&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=s;0<l;){var m=31-Wt(l),y=1<<m;s|=e[m],l&=~y}return Us=s,Yo(),r}function Mp(e,s){Vt=null,K.H=Fr,s===ja||s===Zo?(s=Zg(),ue=3):s===Iu?(s=Zg(),ue=4):ue=s===xh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,An=s,Jt===null&&(De=1,cl(e,Xn(s,e.current)))}function Rp(){var e=Nn.current;return e===null?!0:(te&4194048)===te?Vn===null:(te&62914560)===te||(te&536870912)!==0?e===Vn:!1}function zp(){var e=K.H;return K.H=Fr,e===null?Fr:e}function Bp(){var e=K.A;return K.A=V1,e}function _l(){De=4,fi||(te&4194048)!==te&&Nn.current!==null||(Ra=!0),(gi&134217727)===0&&(Ki&134217727)===0||ye===null||yi(ye,te,Mn,!1)}function Yh(e,s,r){var l=le;le|=2;var m=zp(),y=Bp();(ye!==e||te!==s)&&(vl=null,La(e,s)),s=!1;var T=De;t:do try{if(ue!==0&&Jt!==null){var U=Jt,J=An;switch(ue){case 8:Fh(),T=6;break t;case 3:case 2:case 9:case 6:Nn.current===null&&(s=!0);var ft=ue;if(ue=0,An=null,Ua(e,U,J,ft),r&&Ra){T=0;break t}break;default:ft=ue,ue=0,An=null,Ua(e,U,J,ft)}}Z1(),T=De;break}catch(wt){Mp(e,wt)}while(!0);return s&&e.shellSuspendCounter++,Os=Yi=null,le=l,K.H=m,K.A=y,Jt===null&&(ye=null,te=0,Yo()),T}function Z1(){for(;Jt!==null;)Lp(Jt)}function K1(e,s){var r=le;le|=2;var l=zp(),m=Bp();ye!==e||te!==s?(vl=null,xl=Tt()+500,La(e,s)):Ra=Le(e,s);t:do try{if(ue!==0&&Jt!==null){s=Jt;var y=An;e:switch(ue){case 1:ue=0,An=null,Ua(e,s,y,1);break;case 2:case 9:if(qg(y)){ue=0,An=null,Up(s);break}s=function(){ue!==2&&ue!==9||ye!==e||(ue=7),ps(e)},y.then(s,s);break t;case 3:ue=7;break t;case 4:ue=5;break t;case 7:qg(y)?(ue=0,An=null,Up(s)):(ue=0,An=null,Ua(e,s,y,7));break;case 5:var T=null;switch(Jt.tag){case 26:T=Jt.memoizedState;case 5:case 27:var U=Jt;if(T?S0(T):U.stateNode.complete){ue=0,An=null;var J=U.sibling;if(J!==null)Jt=J;else{var ft=U.return;ft!==null?(Jt=ft,wl(ft)):Jt=null}break e}}ue=0,An=null,Ua(e,s,y,5);break;case 6:ue=0,An=null,Ua(e,s,y,6);break;case 8:Fh(),De=6;break t;default:throw Error(i(462))}}Q1();break}catch(wt){Mp(e,wt)}while(!0);return Os=Yi=null,K.H=l,K.A=m,le=r,Jt!==null?0:(ye=null,te=0,Yo(),De)}function Q1(){for(;Jt!==null&&!st();)Lp(Jt)}function Lp(e){var s=op(e.alternate,e,Us);e.memoizedProps=e.pendingProps,s===null?wl(e):Jt=s}function Up(e){var s=e,r=s.alternate;switch(s.tag){case 15:case 0:s=ep(r,s,s.pendingProps,s.type,void 0,te);break;case 11:s=ep(r,s,s.pendingProps,s.type.render,s.ref,te);break;case 5:nh(s);default:cp(r,s),s=Jt=Bg(s,Us),s=op(r,s,Us)}e.memoizedProps=e.pendingProps,s===null?wl(e):Jt=s}function Ua(e,s,r,l){Os=Yi=null,nh(s),ka=null,Ar=0;var m=s.return;try{if(H1(e,m,s,r,te)){De=1,cl(e,Xn(r,e.current)),Jt=null;return}}catch(y){if(m!==null)throw Jt=m,y;De=1,cl(e,Xn(r,e.current)),Jt=null;return}s.flags&32768?(ne||l===1?e=!0:Ra||(te&536870912)!==0?e=!1:(fi=e=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Hp(s,e)):wl(s)}function wl(e){var s=e;do{if((s.flags&32768)!==0){Hp(s,fi);return}e=s.return;var r=X1(s.alternate,s,Us);if(r!==null){Jt=r;return}if(s=s.sibling,s!==null){Jt=s;return}Jt=s=e}while(s!==null);De===0&&(De=5)}function Hp(e,s){do{var r=P1(e.alternate,e);if(r!==null){r.flags&=32767,Jt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(e=e.sibling,e!==null)){Jt=e;return}Jt=e=r}while(e!==null);De=6,Jt=null}function Fp(e,s,r,l,m,y,T,U,J){e.cancelPendingCommit=null;do Sl();while(Ve!==0);if((le&6)!==0)throw Error(i(327));if(s!==null){if(s===e.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=Eu,ds(e,r,y,T,U,J),e===ye&&(Jt=ye=null,te=0),Ba=s,pi=e,Hs=r,Lh=y,Uh=m,Ep=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,eb(Bt,function(){return Gp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,m=Y.p,Y.p=2,T=le,le|=4;try{I1(e,s,r)}finally{le=T,Y.p=m,K.T=l}}Ve=1,Yp(),Xp(),Pp()}}function Yp(){if(Ve===1){Ve=0;var e=pi,s=Ba,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=K.T,K.T=null;var l=Y.p;Y.p=2;var m=le;le|=4;try{_p(s,e);var y=$h,T=kg(e.containerInfo),U=y.focusedElem,J=y.selectionRange;if(T!==U&&U&&U.ownerDocument&&jg(U.ownerDocument.documentElement,U)){if(J!==null&&Cu(U)){var ft=J.start,wt=J.end;if(wt===void 0&&(wt=ft),"selectionStart"in U)U.selectionStart=ft,U.selectionEnd=Math.min(wt,U.value.length);else{var kt=U.ownerDocument||document,gt=kt&&kt.defaultView||window;if(gt.getSelection){var vt=gt.getSelection(),Ut=U.textContent.length,Pt=Math.min(J.start,Ut),pe=J.end===void 0?Pt:Math.min(J.end,Ut);!vt.extend&&Pt>pe&&(T=pe,pe=Pt,Pt=T);var lt=Tg(U,Pt),nt=Tg(U,pe);if(lt&&nt&&(vt.rangeCount!==1||vt.anchorNode!==lt.node||vt.anchorOffset!==lt.offset||vt.focusNode!==nt.node||vt.focusOffset!==nt.offset)){var ht=kt.createRange();ht.setStart(lt.node,lt.offset),vt.removeAllRanges(),Pt>pe?(vt.addRange(ht),vt.extend(nt.node,nt.offset)):(ht.setEnd(nt.node,nt.offset),vt.addRange(ht))}}}}for(kt=[],vt=U;vt=vt.parentNode;)vt.nodeType===1&&kt.push({element:vt,left:vt.scrollLeft,top:vt.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<kt.length;U++){var jt=kt[U];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}zl=!!Jh,$h=Jh=null}finally{le=m,Y.p=l,K.T=r}}e.current=s,Ve=2}}function Xp(){if(Ve===2){Ve=0;var e=pi,s=Ba,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=K.T,K.T=null;var l=Y.p;Y.p=2;var m=le;le|=4;try{pp(e,s.alternate,s)}finally{le=m,Y.p=l,K.T=r}}Ve=3}}function Pp(){if(Ve===4||Ve===3){Ve=0,Et();var e=pi,s=Ba,r=Hs,l=Ep;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ve=5:(Ve=0,Ba=pi=null,Ip(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(mi=null),au(r),s=s.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(Kt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=K.T,m=Y.p,Y.p=2,K.T=null;try{for(var y=e.onRecoverableError,T=0;T<l.length;T++){var U=l[T];y(U.value,{componentStack:U.stack})}}finally{K.T=s,Y.p=m}}(Hs&3)!==0&&Sl(),ps(e),m=e.pendingLanes,(r&261930)!==0&&(m&42)!==0?e===Hh?Zr++:(Zr=0,Hh=e):Zr=0,Kr(0)}}function Ip(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Nr(s)))}function Sl(){return Yp(),Xp(),Pp(),Gp()}function Gp(){if(Ve!==5)return!1;var e=pi,s=Lh;Lh=0;var r=au(Hs),l=K.T,m=Y.p;try{Y.p=32>r?32:r,K.T=null,r=Uh,Uh=null;var y=pi,T=Hs;if(Ve=0,Ba=pi=null,Hs=0,(le&6)!==0)throw Error(i(331));var U=le;if(le|=4,jp(y.current),Sp(y,y.current,T,r),le=U,Kr(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(Kt,y)}catch{}return!0}finally{Y.p=m,K.T=l,Ip(e,s)}}function Vp(e,s,r){s=Xn(r,s),s=yh(e.stateNode,s,2),e=ci(e,s,2),e!==null&&(je(e,2),ps(e))}function he(e,s,r){if(e.tag===3)Vp(e,e,r);else for(;s!==null;){if(s.tag===3){Vp(s,e,r);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(mi===null||!mi.has(l))){e=Xn(r,e),r=qm(2),l=ci(s,r,2),l!==null&&(Wm(r,l,s,e),je(l,2),ps(l));break}}s=s.return}}function Xh(e,s,r){var l=e.pingCache;if(l===null){l=e.pingCache=new q1;var m=new Set;l.set(s,m)}else m=l.get(s),m===void 0&&(m=new Set,l.set(s,m));m.has(r)||(Rh=!0,m.add(r),e=J1.bind(null,e,s,r),s.then(e,e))}function J1(e,s,r){var l=e.pingCache;l!==null&&l.delete(s),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,ye===e&&(te&r)===r&&(De===4||De===3&&(te&62914560)===te&&300>Tt()-yl?(le&2)===0&&La(e,0):zh|=r,za===te&&(za=0)),ps(e)}function qp(e,s){s===0&&(s=kn()),e=Ui(e,s),e!==null&&(je(e,s),ps(e))}function $1(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),qp(e,r)}function tb(e,s){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,m=e.memoizedState;m!==null&&(r=m.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),qp(e,r)}function eb(e,s){return ut(e,s)}var Cl=null,Ha=null,Ph=!1,Tl=!1,Ih=!1,xi=0;function ps(e){e!==Ha&&e.next===null&&(Ha===null?Cl=Ha=e:Ha=Ha.next=e),Tl=!0,Ph||(Ph=!0,sb())}function Kr(e,s){if(!Ih&&Tl){Ih=!0;do for(var r=!1,l=Cl;l!==null;){if(e!==0){var m=l.pendingLanes;if(m===0)var y=0;else{var T=l.suspendedLanes,U=l.pingedLanes;y=(1<<31-Wt(42|e)+1)-1,y&=m&~(T&~U),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Qp(l,y))}else y=te,y=fe(l,l===ye?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(y&3)===0||Le(l,y)||(r=!0,Qp(l,y));l=l.next}while(r);Ih=!1}}function nb(){Wp()}function Wp(){Tl=Ph=!1;var e=0;xi!==0&&fb()&&(e=xi);for(var s=Tt(),r=null,l=Cl;l!==null;){var m=l.next,y=Zp(l,s);y===0?(l.next=null,r===null?Cl=m:r.next=m,m===null&&(Ha=r)):(r=l,(e!==0||(y&3)!==0)&&(Tl=!0)),l=m}Ve!==0&&Ve!==5||Kr(e),xi!==0&&(xi=0)}function Zp(e,s){for(var r=e.suspendedLanes,l=e.pingedLanes,m=e.expirationTimes,y=e.pendingLanes&-62914561;0<y;){var T=31-Wt(y),U=1<<T,J=m[T];J===-1?((U&r)===0||(U&l)!==0)&&(m[T]=rn(U,s)):J<=s&&(e.expiredLanes|=U),y&=~U}if(s=ye,r=te,r=fe(e,e===s?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===s&&(ue===2||ue===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&yt(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Le(e,r)){if(s=r&-r,s===e.callbackPriority)return s;switch(l!==null&&yt(l),au(r)){case 2:case 8:r=Yt;break;case 32:r=Bt;break;case 268435456:r=se;break;default:r=Bt}return l=Kp.bind(null,e),r=ut(r,l),e.callbackPriority=s,e.callbackNode=r,s}return l!==null&&l!==null&&yt(l),e.callbackPriority=2,e.callbackNode=null,2}function Kp(e,s){if(Ve!==0&&Ve!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Sl()&&e.callbackNode!==r)return null;var l=te;return l=fe(e,e===ye?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Dp(e,l,s),Zp(e,Tt()),e.callbackNode!=null&&e.callbackNode===r?Kp.bind(null,e):null)}function Qp(e,s){if(Sl())return null;Dp(e,s,!0)}function sb(){mb(function(){(le&6)!==0?ut(Dt,nb):Wp()})}function Gh(){if(xi===0){var e=Ca;e===0&&(e=gn,gn<<=1,(gn&261888)===0&&(gn=256)),xi=e}return xi}function Jp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Mo(""+e)}function $p(e,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,e.id&&r.setAttribute("form",e.id),s.parentNode.insertBefore(r,s),e=new FormData(e),r.parentNode.removeChild(r),e}function ib(e,s,r,l,m){if(s==="submit"&&r&&r.stateNode===m){var y=Jp((m[mn]||null).action),T=l.submitter;T&&(s=(s=T[mn]||null)?Jp(s.formAction):T.getAttribute("formAction"),s!==null&&(y=s,T=null));var U=new Lo("action","action",null,l,m);e.push({event:U,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xi!==0){var J=T?$p(m,T):new FormData(m);hh(r,{pending:!0,data:J,method:m.method,action:y},null,J)}}else typeof y=="function"&&(U.preventDefault(),J=T?$p(m,T):new FormData(m),hh(r,{pending:!0,data:J,method:m.method,action:y},y,J))},currentTarget:m}]})}}for(var Vh=0;Vh<Ou.length;Vh++){var qh=Ou[Vh],ab=qh.toLowerCase(),rb=qh[0].toUpperCase()+qh.slice(1);es(ab,"on"+rb)}es(Ng,"onAnimationEnd"),es(Dg,"onAnimationIteration"),es(Ag,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(w1,"onTransitionRun"),es(S1,"onTransitionStart"),es(C1,"onTransitionCancel"),es(Mg,"onTransitionEnd"),ua("onMouseEnter",["mouseout","mouseover"]),ua("onMouseLeave",["mouseout","mouseover"]),ua("onPointerEnter",["pointerout","pointerover"]),ua("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qr));function t0(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],m=l.event;l=l.listeners;t:{var y=void 0;if(s)for(var T=l.length-1;0<=T;T--){var U=l[T],J=U.instance,ft=U.currentTarget;if(U=U.listener,J!==y&&m.isPropagationStopped())break t;y=U,m.currentTarget=ft;try{y(m)}catch(wt){Fo(wt)}m.currentTarget=null,y=J}else for(T=0;T<l.length;T++){if(U=l[T],J=U.instance,ft=U.currentTarget,U=U.listener,J!==y&&m.isPropagationStopped())break t;y=U,m.currentTarget=ft;try{y(m)}catch(wt){Fo(wt)}m.currentTarget=null,y=J}}}}function $t(e,s){var r=s[ru];r===void 0&&(r=s[ru]=new Set);var l=e+"__bubble";r.has(l)||(e0(s,e,2,!1),r.add(l))}function Wh(e,s,r){var l=0;s&&(l|=4),e0(r,e,l,s)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Zh(e){if(!e[jl]){e[jl]=!0,Wf.forEach(function(r){r!=="selectionchange"&&(ob.has(r)||Wh(r,!1,e),Wh(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[jl]||(s[jl]=!0,Wh("selectionchange",!1,s))}}function e0(e,s,r,l){switch(N0(s)){case 2:var m=zb;break;case 8:m=Bb;break;default:m=ud}r=m.bind(null,s,r,e),m=void 0,!mu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),l?m!==void 0?e.addEventListener(s,r,{capture:!0,passive:m}):e.addEventListener(s,r,!0):m!==void 0?e.addEventListener(s,r,{passive:m}):e.addEventListener(s,r,!1)}function Kh(e,s,r,l,m){var y=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var U=l.stateNode.containerInfo;if(U===m)break;if(T===4)for(T=l.return;T!==null;){var J=T.tag;if((J===3||J===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;U!==null;){if(T=oa(U),T===null)return;if(J=T.tag,J===5||J===6||J===26||J===27){l=y=T;continue t}U=U.parentNode}}l=l.return}rg(function(){var ft=y,wt=fu(r),kt=[];t:{var gt=Rg.get(e);if(gt!==void 0){var vt=Lo,Ut=e;switch(e){case"keypress":if(zo(r)===0)break t;case"keydown":case"keyup":vt=t1;break;case"focusin":Ut="focus",vt=vu;break;case"focusout":Ut="blur",vt=vu;break;case"beforeblur":case"afterblur":vt=vu;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=cg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=Xv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=s1;break;case Ng:case Dg:case Ag:vt=Gv;break;case Mg:vt=a1;break;case"scroll":case"scrollend":vt=Fv;break;case"wheel":vt=o1;break;case"copy":case"cut":case"paste":vt=qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=hg;break;case"toggle":case"beforetoggle":vt=c1}var Pt=(s&4)!==0,pe=!Pt&&(e==="scroll"||e==="scrollend"),lt=Pt?gt!==null?gt+"Capture":null:gt;Pt=[];for(var nt=ft,ht;nt!==null;){var jt=nt;if(ht=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||ht===null||lt===null||(jt=vr(nt,lt),jt!=null&&Pt.push(Jr(nt,jt,ht))),pe)break;nt=nt.return}0<Pt.length&&(gt=new vt(gt,Ut,null,r,wt),kt.push({event:gt,listeners:Pt}))}}if((s&7)===0){t:{if(gt=e==="mouseover"||e==="pointerover",vt=e==="mouseout"||e==="pointerout",gt&&r!==du&&(Ut=r.relatedTarget||r.fromElement)&&(oa(Ut)||Ut[ra]))break t;if((vt||gt)&&(gt=wt.window===wt?wt:(gt=wt.ownerDocument)?gt.defaultView||gt.parentWindow:window,vt?(Ut=r.relatedTarget||r.toElement,vt=ft,Ut=Ut?oa(Ut):null,Ut!==null&&(pe=o(Ut),Pt=Ut.tag,Ut!==pe||Pt!==5&&Pt!==27&&Pt!==6)&&(Ut=null)):(vt=null,Ut=ft),vt!==Ut)){if(Pt=cg,jt="onMouseLeave",lt="onMouseEnter",nt="mouse",(e==="pointerout"||e==="pointerover")&&(Pt=hg,jt="onPointerLeave",lt="onPointerEnter",nt="pointer"),pe=vt==null?gt:xr(vt),ht=Ut==null?gt:xr(Ut),gt=new Pt(jt,nt+"leave",vt,r,wt),gt.target=pe,gt.relatedTarget=ht,jt=null,oa(wt)===ft&&(Pt=new Pt(lt,nt+"enter",Ut,r,wt),Pt.target=ht,Pt.relatedTarget=pe,jt=Pt),pe=jt,vt&&Ut)e:{for(Pt=lb,lt=vt,nt=Ut,ht=0,jt=lt;jt;jt=Pt(jt))ht++;jt=0;for(var Xt=nt;Xt;Xt=Pt(Xt))jt++;for(;0<ht-jt;)lt=Pt(lt),ht--;for(;0<jt-ht;)nt=Pt(nt),jt--;for(;ht--;){if(lt===nt||nt!==null&&lt===nt.alternate){Pt=lt;break e}lt=Pt(lt),nt=Pt(nt)}Pt=null}else Pt=null;vt!==null&&n0(kt,gt,vt,Pt,!1),Ut!==null&&pe!==null&&n0(kt,pe,Ut,Pt,!0)}}t:{if(gt=ft?xr(ft):window,vt=gt.nodeName&&gt.nodeName.toLowerCase(),vt==="select"||vt==="input"&&gt.type==="file")var re=vg;else if(yg(gt))if(bg)re=v1;else{re=y1;var Ft=p1}else vt=gt.nodeName,!vt||vt.toLowerCase()!=="input"||gt.type!=="checkbox"&&gt.type!=="radio"?ft&&hu(ft.elementType)&&(re=vg):re=x1;if(re&&(re=re(e,ft))){xg(kt,re,r,wt);break t}Ft&&Ft(e,gt,ft),e==="focusout"&&ft&&gt.type==="number"&&ft.memoizedProps.value!=null&&uu(gt,"number",gt.value)}switch(Ft=ft?xr(ft):window,e){case"focusin":(yg(Ft)||Ft.contentEditable==="true")&&(pa=Ft,Tu=ft,kr=null);break;case"focusout":kr=Tu=pa=null;break;case"mousedown":ju=!0;break;case"contextmenu":case"mouseup":case"dragend":ju=!1,Og(kt,r,wt);break;case"selectionchange":if(_1)break;case"keydown":case"keyup":Og(kt,r,wt)}var qt;if(_u)t:{switch(e){case"compositionstart":var ee="onCompositionStart";break t;case"compositionend":ee="onCompositionEnd";break t;case"compositionupdate":ee="onCompositionUpdate";break t}ee=void 0}else ma?mg(e,r)&&(ee="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ee="onCompositionStart");ee&&(dg&&r.locale!=="ko"&&(ma||ee!=="onCompositionStart"?ee==="onCompositionEnd"&&ma&&(qt=og()):(ni=wt,pu="value"in ni?ni.value:ni.textContent,ma=!0)),Ft=kl(ft,ee),0<Ft.length&&(ee=new ug(ee,e,null,r,wt),kt.push({event:ee,listeners:Ft}),qt?ee.data=qt:(qt=pg(r),qt!==null&&(ee.data=qt)))),(qt=h1?d1(e,r):f1(e,r))&&(ee=kl(ft,"onBeforeInput"),0<ee.length&&(Ft=new ug("onBeforeInput","beforeinput",null,r,wt),kt.push({event:Ft,listeners:ee}),Ft.data=qt)),ib(kt,e,ft,r,wt)}t0(kt,s)})}function Jr(e,s,r){return{instance:e,listener:s,currentTarget:r}}function kl(e,s){for(var r=s+"Capture",l=[];e!==null;){var m=e,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=vr(e,r),m!=null&&l.unshift(Jr(e,m,y)),m=vr(e,s),m!=null&&l.push(Jr(e,m,y))),e.tag===3)return l;e=e.return}return[]}function lb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function n0(e,s,r,l,m){for(var y=s._reactName,T=[];r!==null&&r!==l;){var U=r,J=U.alternate,ft=U.stateNode;if(U=U.tag,J!==null&&J===l)break;U!==5&&U!==26&&U!==27||ft===null||(J=ft,m?(ft=vr(r,y),ft!=null&&T.unshift(Jr(r,ft,J))):m||(ft=vr(r,y),ft!=null&&T.push(Jr(r,ft,J)))),r=r.return}T.length!==0&&e.push({event:s,listeners:T})}var cb=/\r\n?/g,ub=/\u0000|\uFFFD/g;function s0(e){return(typeof e=="string"?e:""+e).replace(cb,`
`).replace(ub,"")}function i0(e,s){return s=s0(s),s0(e)===s}function me(e,s,r,l,m,y){switch(r){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||da(e,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&da(e,""+l);break;case"className":Do(e,"class",l);break;case"tabIndex":Do(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Do(e,r,l);break;case"style":ig(e,l,y);break;case"data":if(s!=="object"){Do(e,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Mo(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&me(e,s,"name",m.name,m,null),me(e,s,"formEncType",m.formEncType,m,null),me(e,s,"formMethod",m.formMethod,m,null),me(e,s,"formTarget",m.formTarget,m,null)):(me(e,s,"encType",m.encType,m,null),me(e,s,"method",m.method,m,null),me(e,s,"target",m.target,m,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Mo(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=Cs);break;case"onScroll":l!=null&&$t("scroll",e);break;case"onScrollEnd":l!=null&&$t("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(r=l.__html,r!=null){if(m.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=Mo(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":$t("beforetoggle",e),$t("toggle",e),No(e,"popover",l);break;case"xlinkActuate":Ss(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ss(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ss(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ss(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ss(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ss(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ss(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ss(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ss(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":No(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Uv.get(r)||r,No(e,r,l))}}function Qh(e,s,r,l,m,y){switch(r){case"style":ig(e,l,y);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(r=l.__html,r!=null){if(m.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof l=="string"?da(e,l):(typeof l=="number"||typeof l=="bigint")&&da(e,""+l);break;case"onScroll":l!=null&&$t("scroll",e);break;case"onScrollEnd":l!=null&&$t("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Cs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zf.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),s=r.slice(2,m?r.length-7:void 0),y=e[mn]||null,y=y!=null?y[r]:null,typeof y=="function"&&e.removeEventListener(s,y,m),typeof l=="function")){typeof y!="function"&&y!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(s,l,m);break t}r in e?e[r]=l:l===!0?e.setAttribute(r,""):No(e,r,l)}}}function en(e,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",e),$t("load",e);var l=!1,m=!1,y;for(y in r)if(r.hasOwnProperty(y)){var T=r[y];if(T!=null)switch(y){case"src":l=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:me(e,s,y,T,r,null)}}m&&me(e,s,"srcSet",r.srcSet,r,null),l&&me(e,s,"src",r.src,r,null);return;case"input":$t("invalid",e);var U=y=T=m=null,J=null,ft=null;for(l in r)if(r.hasOwnProperty(l)){var wt=r[l];if(wt!=null)switch(l){case"name":m=wt;break;case"type":T=wt;break;case"checked":J=wt;break;case"defaultChecked":ft=wt;break;case"value":y=wt;break;case"defaultValue":U=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(i(137,s));break;default:me(e,s,l,wt,r,null)}}tg(e,y,U,J,ft,T,m,!1);return;case"select":$t("invalid",e),l=T=y=null;for(m in r)if(r.hasOwnProperty(m)&&(U=r[m],U!=null))switch(m){case"value":y=U;break;case"defaultValue":T=U;break;case"multiple":l=U;default:me(e,s,m,U,r,null)}s=y,r=T,e.multiple=!!l,s!=null?ha(e,!!l,s,!1):r!=null&&ha(e,!!l,r,!0);return;case"textarea":$t("invalid",e),y=m=l=null;for(T in r)if(r.hasOwnProperty(T)&&(U=r[T],U!=null))switch(T){case"value":l=U;break;case"defaultValue":m=U;break;case"children":y=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:me(e,s,T,U,r,null)}ng(e,l,m,y);return;case"option":for(J in r)if(r.hasOwnProperty(J)&&(l=r[J],l!=null))switch(J){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:me(e,s,J,l,r,null)}return;case"dialog":$t("beforetoggle",e),$t("toggle",e),$t("cancel",e),$t("close",e);break;case"iframe":case"object":$t("load",e);break;case"video":case"audio":for(l=0;l<Qr.length;l++)$t(Qr[l],e);break;case"image":$t("error",e),$t("load",e);break;case"details":$t("toggle",e);break;case"embed":case"source":case"link":$t("error",e),$t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in r)if(r.hasOwnProperty(ft)&&(l=r[ft],l!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:me(e,s,ft,l,r,null)}return;default:if(hu(s)){for(wt in r)r.hasOwnProperty(wt)&&(l=r[wt],l!==void 0&&Qh(e,s,wt,l,r,void 0));return}}for(U in r)r.hasOwnProperty(U)&&(l=r[U],l!=null&&me(e,s,U,l,r,null))}function hb(e,s,r,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,U=null,J=null,ft=null,wt=null;for(vt in r){var kt=r[vt];if(r.hasOwnProperty(vt)&&kt!=null)switch(vt){case"checked":break;case"value":break;case"defaultValue":J=kt;default:l.hasOwnProperty(vt)||me(e,s,vt,null,l,kt)}}for(var gt in l){var vt=l[gt];if(kt=r[gt],l.hasOwnProperty(gt)&&(vt!=null||kt!=null))switch(gt){case"type":y=vt;break;case"name":m=vt;break;case"checked":ft=vt;break;case"defaultChecked":wt=vt;break;case"value":T=vt;break;case"defaultValue":U=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(i(137,s));break;default:vt!==kt&&me(e,s,gt,vt,l,kt)}}cu(e,T,U,J,ft,wt,y,m);return;case"select":vt=T=U=gt=null;for(y in r)if(J=r[y],r.hasOwnProperty(y)&&J!=null)switch(y){case"value":break;case"multiple":vt=J;default:l.hasOwnProperty(y)||me(e,s,y,null,l,J)}for(m in l)if(y=l[m],J=r[m],l.hasOwnProperty(m)&&(y!=null||J!=null))switch(m){case"value":gt=y;break;case"defaultValue":U=y;break;case"multiple":T=y;default:y!==J&&me(e,s,m,y,l,J)}s=U,r=T,l=vt,gt!=null?ha(e,!!r,gt,!1):!!l!=!!r&&(s!=null?ha(e,!!r,s,!0):ha(e,!!r,r?[]:"",!1));return;case"textarea":vt=gt=null;for(U in r)if(m=r[U],r.hasOwnProperty(U)&&m!=null&&!l.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:me(e,s,U,null,l,m)}for(T in l)if(m=l[T],y=r[T],l.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":gt=m;break;case"defaultValue":vt=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==y&&me(e,s,T,m,l,y)}eg(e,gt,vt);return;case"option":for(var Ut in r)if(gt=r[Ut],r.hasOwnProperty(Ut)&&gt!=null&&!l.hasOwnProperty(Ut))switch(Ut){case"selected":e.selected=!1;break;default:me(e,s,Ut,null,l,gt)}for(J in l)if(gt=l[J],vt=r[J],l.hasOwnProperty(J)&&gt!==vt&&(gt!=null||vt!=null))switch(J){case"selected":e.selected=gt&&typeof gt!="function"&&typeof gt!="symbol";break;default:me(e,s,J,gt,l,vt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pt in r)gt=r[Pt],r.hasOwnProperty(Pt)&&gt!=null&&!l.hasOwnProperty(Pt)&&me(e,s,Pt,null,l,gt);for(ft in l)if(gt=l[ft],vt=r[ft],l.hasOwnProperty(ft)&&gt!==vt&&(gt!=null||vt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,s));break;default:me(e,s,ft,gt,l,vt)}return;default:if(hu(s)){for(var pe in r)gt=r[pe],r.hasOwnProperty(pe)&&gt!==void 0&&!l.hasOwnProperty(pe)&&Qh(e,s,pe,void 0,l,gt);for(wt in l)gt=l[wt],vt=r[wt],!l.hasOwnProperty(wt)||gt===vt||gt===void 0&&vt===void 0||Qh(e,s,wt,gt,l,vt);return}}for(var lt in r)gt=r[lt],r.hasOwnProperty(lt)&&gt!=null&&!l.hasOwnProperty(lt)&&me(e,s,lt,null,l,gt);for(kt in l)gt=l[kt],vt=r[kt],!l.hasOwnProperty(kt)||gt===vt||gt==null&&vt==null||me(e,s,kt,gt,l,vt)}function a0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function db(){if(typeof performance.getEntriesByType=="function"){for(var e=0,s=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var m=r[l],y=m.transferSize,T=m.initiatorType,U=m.duration;if(y&&U&&a0(T)){for(T=0,U=m.responseEnd,l+=1;l<r.length;l++){var J=r[l],ft=J.startTime;if(ft>U)break;var wt=J.transferSize,kt=J.initiatorType;wt&&a0(kt)&&(J=J.responseEnd,T+=wt*(J<U?1:(U-ft)/(J-ft)))}if(--l,s+=8*(y+T)/(m.duration/1e3),e++,10<e)break}}if(0<e)return s/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Jh=null,$h=null;function Ol(e){return e.nodeType===9?e:e.ownerDocument}function r0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o0(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function td(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ed=null;function fb(){var e=window.event;return e&&e.type==="popstate"?e===ed?!1:(ed=e,!0):(ed=null,!1)}var l0=typeof setTimeout=="function"?setTimeout:void 0,gb=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(e){return c0.resolve(null).then(e).catch(pb)}:l0;function pb(e){setTimeout(function(){throw e})}function vi(e){return e==="head"}function u0(e,s){var r=s,l=0;do{var m=r.nextSibling;if(e.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(m),Pa(s);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")$r(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,$r(r);for(var y=r.firstChild;y;){var T=y.nextSibling,U=y.nodeName;y[yr]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=T}}else r==="body"&&$r(e.ownerDocument.body);r=m}while(r);Pa(s)}function h0(e,s){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function nd(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":nd(r),ou(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function yb(e,s,r,l){for(;e.nodeType===1;){var m=r;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[yr])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(y=e.getAttribute("rel"),y==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(y!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(y=e.getAttribute("src"),(y!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===y)return e}else return e;if(e=qn(e.nextSibling),e===null)break}return null}function xb(e,s,r){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=qn(e.nextSibling),e===null))return null;return e}function d0(e,s){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=qn(e.nextSibling),e===null))return null;return e}function sd(e){return e.data==="$?"||e.data==="$~"}function id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function vb(e,s){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=s;else if(e.data!=="$?"||r.readyState!=="loading")s();else{var l=function(){s(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function qn(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return e}var ad=null;function f0(e){e=e.nextSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(s===0)return qn(e.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}e=e.nextSibling}return null}function g0(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return e;s--}else r!=="/$"&&r!=="/&"||s++}e=e.previousSibling}return null}function m0(e,s,r){switch(s=Ol(r),e){case"html":if(e=s.documentElement,!e)throw Error(i(452));return e;case"head":if(e=s.head,!e)throw Error(i(453));return e;case"body":if(e=s.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function $r(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);ou(e)}var Wn=new Map,p0=new Set;function El(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fs=Y.d;Y.d={f:bb,r:_b,D:wb,C:Sb,L:Cb,m:Tb,X:kb,S:jb,M:Ob};function bb(){var e=Fs.f(),s=bl();return e||s}function _b(e){var s=la(e);s!==null&&s.tag===5&&s.type==="form"?Mm(s):Fs.r(e)}var Fa=typeof document>"u"?null:document;function y0(e,s,r){var l=Fa;if(l&&typeof s=="string"&&s){var m=Fn(s);m='link[rel="'+e+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),p0.has(m)||(p0.add(m),e={rel:e,crossOrigin:r,href:s},l.querySelector(m)===null&&(s=l.createElement("link"),en(s,"link",e),Ze(s),l.head.appendChild(s)))}}function wb(e){Fs.D(e),y0("dns-prefetch",e,null)}function Sb(e,s){Fs.C(e,s),y0("preconnect",e,s)}function Cb(e,s,r){Fs.L(e,s,r);var l=Fa;if(l&&e&&s){var m='link[rel="preload"][as="'+Fn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+Fn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+Fn(r.imageSizes)+'"]')):m+='[href="'+Fn(e)+'"]';var y=m;switch(s){case"style":y=Ya(e);break;case"script":y=Xa(e)}Wn.has(y)||(e=x({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:e,as:s},r),Wn.set(y,e),l.querySelector(m)!==null||s==="style"&&l.querySelector(to(y))||s==="script"&&l.querySelector(eo(y))||(s=l.createElement("link"),en(s,"link",e),Ze(s),l.head.appendChild(s)))}}function Tb(e,s){Fs.m(e,s);var r=Fa;if(r&&e){var l=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Fn(l)+'"][href="'+Fn(e)+'"]',y=m;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Xa(e)}if(!Wn.has(y)&&(e=x({rel:"modulepreload",href:e},s),Wn.set(y,e),r.querySelector(m)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(eo(y)))return}l=r.createElement("link"),en(l,"link",e),Ze(l),r.head.appendChild(l)}}}function jb(e,s,r){Fs.S(e,s,r);var l=Fa;if(l&&e){var m=ca(l).hoistableStyles,y=Ya(e);s=s||"default";var T=m.get(y);if(!T){var U={loading:0,preload:null};if(T=l.querySelector(to(y)))U.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":s},r),(r=Wn.get(y))&&rd(e,r);var J=T=l.createElement("link");Ze(J),en(J,"link",e),J._p=new Promise(function(ft,wt){J.onload=ft,J.onerror=wt}),J.addEventListener("load",function(){U.loading|=1}),J.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Nl(T,s,l)}T={type:"stylesheet",instance:T,count:1,state:U},m.set(y,T)}}}function kb(e,s){Fs.X(e,s);var r=Fa;if(r&&e){var l=ca(r).hoistableScripts,m=Xa(e),y=l.get(m);y||(y=r.querySelector(eo(m)),y||(e=x({src:e,async:!0},s),(s=Wn.get(m))&&od(e,s),y=r.createElement("script"),Ze(y),en(y,"link",e),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(m,y))}}function Ob(e,s){Fs.M(e,s);var r=Fa;if(r&&e){var l=ca(r).hoistableScripts,m=Xa(e),y=l.get(m);y||(y=r.querySelector(eo(m)),y||(e=x({src:e,async:!0,type:"module"},s),(s=Wn.get(m))&&od(e,s),y=r.createElement("script"),Ze(y),en(y,"link",e),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(m,y))}}function x0(e,s,r,l){var m=(m=_t.current)?El(m):null;if(!m)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Ya(r.href),r=ca(m).hoistableStyles,l=r.get(s),l||(l={type:"style",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Ya(r.href);var y=ca(m).hoistableStyles,T=y.get(e);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(e,T),(y=m.querySelector(to(e)))&&!y._p&&(T.instance=y,T.state.loading=5),Wn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Wn.set(e,r),y||Eb(m,e,r,T.state))),s&&l===null)throw Error(i(528,""));return T}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xa(r),r=ca(m).hoistableScripts,l=r.get(s),l||(l={type:"script",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Ya(e){return'href="'+Fn(e)+'"'}function to(e){return'link[rel="stylesheet"]['+e+"]"}function v0(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Eb(e,s,r,l){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=e.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),en(s,"link",r),Ze(s),e.head.appendChild(s))}function Xa(e){return'[src="'+Fn(e)+'"]'}function eo(e){return"script[async]"+e}function b0(e,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var l=e.querySelector('style[data-href~="'+Fn(r.href)+'"]');if(l)return s.instance=l,Ze(l),l;var m=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ze(l),en(l,"style",m),Nl(l,r.precedence,e),s.instance=l;case"stylesheet":m=Ya(r.href);var y=e.querySelector(to(m));if(y)return s.state.loading|=4,s.instance=y,Ze(y),y;l=v0(r),(m=Wn.get(m))&&rd(l,m),y=(e.ownerDocument||e).createElement("link"),Ze(y);var T=y;return T._p=new Promise(function(U,J){T.onload=U,T.onerror=J}),en(y,"link",l),s.state.loading|=4,Nl(y,r.precedence,e),s.instance=y;case"script":return y=Xa(r.src),(m=e.querySelector(eo(y)))?(s.instance=m,Ze(m),m):(l=r,(m=Wn.get(y))&&(l=x({},r),od(l,m)),e=e.ownerDocument||e,m=e.createElement("script"),Ze(m),en(m,"link",l),e.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Nl(l,r.precedence,e));return s.instance}function Nl(e,s,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=l.length?l[l.length-1]:null,y=m,T=0;T<l.length;T++){var U=l[T];if(U.dataset.precedence===s)y=U;else if(y!==m)break}y?y.parentNode.insertBefore(e,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(e,s.firstChild))}function rd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function od(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Dl=null;function _0(e,s,r){if(Dl===null){var l=new Map,m=Dl=new Map;m.set(r,l)}else m=Dl,l=m.get(r),l||(l=new Map,m.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),m=0;m<r.length;m++){var y=r[m];if(!(y[yr]||y[Qe]||e==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(s)||"";T=e+T;var U=l.get(T);U?U.push(y):l.set(T,[y])}}return l}function w0(e,s,r){e=e.ownerDocument||e,e.head.insertBefore(r,s==="title"?e.querySelector("head > title"):null)}function Nb(e,s,r){if(r===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function S0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Db(e,s,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Ya(l.href),y=s.querySelector(to(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(e.count++,e=Al.bind(e),s.then(e,e)),r.state.loading|=4,r.instance=y,Ze(y);return}y=s.ownerDocument||s,l=v0(l),(m=Wn.get(m))&&rd(l,m),y=y.createElement("link"),Ze(y);var T=y;T._p=new Promise(function(U,J){T.onload=U,T.onerror=J}),en(y,"link",l),r.instance=y}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Al.bind(e),s.addEventListener("load",r),s.addEventListener("error",r))}}var ld=0;function Ab(e,s){return e.stylesheets&&e.count===0&&Rl(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend){var y=e.unsuspend;e.unsuspend=null,y()}},6e4+s);0<e.imgBytes&&ld===0&&(ld=62500*db());var m=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend)){var y=e.unsuspend;e.unsuspend=null,y()}},(e.imgBytes>ld?50:800)+s);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(m)}}:null}function Al(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ml=null;function Rl(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ml=new Map,s.forEach(Mb,e),Ml=null,Al.call(e))}function Mb(e,s){if(!(s.state.loading&4)){var r=Ml.get(e);if(r)var l=r.get(null);else{r=new Map,Ml.set(e,r);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),l=T)}l&&r.set(null,l)}m=s.instance,T=m.getAttribute("data-precedence"),y=r.get(T)||l,y===l&&r.set(null,m),r.set(T,m),this.count++,l=Al.bind(this),m.addEventListener("load",l),m.addEventListener("error",l),y?y.parentNode.insertBefore(m,y.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),s.state.loading|=4}}var no={$$typeof:M,Provider:null,Consumer:null,_currentValue:rt,_currentValue2:rt,_threadCount:0};function Rb(e,s,r,l,m,y,T,U,J){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Un(0),this.hiddenUpdates=Un(null),this.identifierPrefix=l,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function C0(e,s,r,l,m,y,T,U,J,ft,wt,kt){return e=new Rb(e,s,r,T,J,ft,wt,kt,U),s=1,y===!0&&(s|=24),y=En(3,null,null,s),e.current=y,y.stateNode=e,s=Yu(),s.refCount++,e.pooledCache=s,s.refCount++,y.memoizedState={element:l,isDehydrated:r,cache:s},Gu(y),e}function T0(e){return e?(e=va,e):va}function j0(e,s,r,l,m,y){m=T0(m),l.context===null?l.context=m:l.pendingContext=m,l=li(s),l.payload={element:r},y=y===void 0?null:y,y!==null&&(l.callback=y),r=ci(e,l,s),r!==null&&(_n(r,e,s),Rr(r,e,s))}function k0(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function cd(e,s){k0(e,s),(e=e.alternate)&&k0(e,s)}function O0(e){if(e.tag===13||e.tag===31){var s=Ui(e,67108864);s!==null&&_n(s,e,67108864),cd(e,67108864)}}function E0(e){if(e.tag===13||e.tag===31){var s=Rn();s=iu(s);var r=Ui(e,s);r!==null&&_n(r,e,s),cd(e,s)}}var zl=!0;function zb(e,s,r,l){var m=K.T;K.T=null;var y=Y.p;try{Y.p=2,ud(e,s,r,l)}finally{Y.p=y,K.T=m}}function Bb(e,s,r,l){var m=K.T;K.T=null;var y=Y.p;try{Y.p=8,ud(e,s,r,l)}finally{Y.p=y,K.T=m}}function ud(e,s,r,l){if(zl){var m=hd(l);if(m===null)Kh(e,s,l,Bl,r),D0(e,l);else if(Ub(m,e,s,r,l))l.stopPropagation();else if(D0(e,l),s&4&&-1<Lb.indexOf(e)){for(;m!==null;){var y=la(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=zt(y.pendingLanes);if(T!==0){var U=y;for(U.pendingLanes|=2,U.entangledLanes|=2;T;){var J=1<<31-Wt(T);U.entanglements[1]|=J,T&=~J}ps(y),(le&6)===0&&(xl=Tt()+500,Kr(0))}}break;case 31:case 13:U=Ui(y,2),U!==null&&_n(U,y,2),bl(),cd(y,2)}if(y=hd(l),y===null&&Kh(e,s,l,Bl,r),y===m)break;m=y}m!==null&&l.stopPropagation()}else Kh(e,s,l,null,r)}}function hd(e){return e=fu(e),dd(e)}var Bl=null;function dd(e){if(Bl=null,e=oa(e),e!==null){var s=o(e);if(s===null)e=null;else{var r=s.tag;if(r===13){if(e=c(s),e!==null)return e;e=null}else if(r===31){if(e=h(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Bl=e,null}function N0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case Dt:return 2;case Yt:return 8;case Bt:case Ot:return 32;case se:return 268435456;default:return 32}default:return 32}}var fd=!1,bi=null,_i=null,wi=null,so=new Map,io=new Map,Si=[],Lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D0(e,s){switch(e){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":so.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(s.pointerId)}}function ao(e,s,r,l,m,y){return e===null||e.nativeEvent!==y?(e={blockedOn:s,domEventName:r,eventSystemFlags:l,nativeEvent:y,targetContainers:[m]},s!==null&&(s=la(s),s!==null&&O0(s)),e):(e.eventSystemFlags|=l,s=e.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),e)}function Ub(e,s,r,l,m){switch(s){case"focusin":return bi=ao(bi,e,s,r,l,m),!0;case"dragenter":return _i=ao(_i,e,s,r,l,m),!0;case"mouseover":return wi=ao(wi,e,s,r,l,m),!0;case"pointerover":var y=m.pointerId;return so.set(y,ao(so.get(y)||null,e,s,r,l,m)),!0;case"gotpointercapture":return y=m.pointerId,io.set(y,ao(io.get(y)||null,e,s,r,l,m)),!0}return!1}function A0(e){var s=oa(e.target);if(s!==null){var r=o(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){e.blockedOn=s,Vf(e.priority,function(){E0(r)});return}}else if(s===31){if(s=h(r),s!==null){e.blockedOn=s,Vf(e.priority,function(){E0(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ll(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=hd(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);du=l,r.target.dispatchEvent(l),du=null}else return s=la(r),s!==null&&O0(s),e.blockedOn=r,!1;s.shift()}return!0}function M0(e,s,r){Ll(e)&&r.delete(s)}function Hb(){fd=!1,bi!==null&&Ll(bi)&&(bi=null),_i!==null&&Ll(_i)&&(_i=null),wi!==null&&Ll(wi)&&(wi=null),so.forEach(M0),io.forEach(M0)}function Ul(e,s){e.blockedOn===s&&(e.blockedOn=null,fd||(fd=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Hb)))}var Hl=null;function R0(e){Hl!==e&&(Hl=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){Hl===e&&(Hl=null);for(var s=0;s<e.length;s+=3){var r=e[s],l=e[s+1],m=e[s+2];if(typeof l!="function"){if(dd(l||r)===null)continue;break}var y=la(r);y!==null&&(e.splice(s,3),s-=3,hh(y,{pending:!0,data:m,method:r.method,action:l},l,m))}}))}function Pa(e){function s(J){return Ul(J,e)}bi!==null&&Ul(bi,e),_i!==null&&Ul(_i,e),wi!==null&&Ul(wi,e),so.forEach(s),io.forEach(s);for(var r=0;r<Si.length;r++){var l=Si[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Si.length&&(r=Si[0],r.blockedOn===null);)A0(r),r.blockedOn===null&&Si.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var m=r[l],y=r[l+1],T=m[mn]||null;if(typeof y=="function")T||R0(r);else if(T){var U=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[mn]||null)U=T.formAction;else if(dd(m)!==null)continue}else U=T.action;typeof U=="function"?r[l+1]=U:(r.splice(l,3),l-=3),R0(r)}}}function z0(){function e(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,m=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function gd(e){this._internalRoot=e}Fl.prototype.render=gd.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,l=Rn();j0(r,l,e,s,null,null)},Fl.prototype.unmount=gd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;j0(e.current,2,null,e,null,null),bl(),s[ra]=null}};function Fl(e){this._internalRoot=e}Fl.prototype.unstable_scheduleHydration=function(e){if(e){var s=Gf();e={blockedOn:null,target:e,priority:s};for(var r=0;r<Si.length&&s!==0&&s<Si[r].priority;r++);Si.splice(r,0,e),r===0&&A0(e)}};var B0=t.version;if(B0!=="19.2.4")throw Error(i(527,B0,"19.2.4"));Y.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=f(s),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Fb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{Kt=Yl.inject(Fb),xe=Yl}catch{}}return oo.createRoot=function(e,s){if(!a(e))throw Error(i(299));var r=!1,l="",m=Pm,y=Im,T=Gm;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=C0(e,1,!1,null,null,r,l,null,m,y,T,z0),e[ra]=s.current,Zh(e),new gd(s)},oo.hydrateRoot=function(e,s,r){if(!a(e))throw Error(i(299));var l=!1,m="",y=Pm,T=Im,U=Gm,J=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(U=r.onRecoverableError),r.formState!==void 0&&(J=r.formState)),s=C0(e,1,!0,s,r??null,l,m,J,y,T,U,z0),s.context=T0(null),r=s.current,l=Rn(),l=iu(l),m=li(l),m.callback=null,ci(r,m,l),r=l,s.current.lanes=r,je(s,r),ps(s),e[ra]=s.current,Zh(e),new Fl(s)},oo.version="19.2.4",oo}var V0;function Jb(){if(V0)return yd.exports;V0=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),yd.exports=Qb(),yd.exports}var $b=Jb();/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e2=u=>u.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),q0=u=>{const t=e2(u);return t.charAt(0).toUpperCase()+t.slice(1)},dx=(...u)=>u.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),n2=u=>{for(const t in u)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=tt.forwardRef(({color:u="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:c,...h},d)=>tt.createElement("svg",{ref:d,...s2,width:t,height:t,stroke:u,strokeWidth:i?Number(n)*24/Number(t):n,className:dx("lucide",a),...!o&&!n2(h)&&{"aria-hidden":"true"},...h},[...c.map(([f,p])=>tt.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=(u,t)=>{const n=tt.forwardRef(({className:i,...a},o)=>tt.createElement(i2,{ref:o,iconNode:t,className:dx(`lucide-${t2(q0(u))}`,`lucide-${u}`,i),...a}));return n.displayName=q0(u),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Pd=Rt("align-center",a2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Id=Rt("align-left",r2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Gd=Rt("align-right",o2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],c2=Rt("arrow-down-to-line",l2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ir=Rt("arrow-left",u2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ho=Rt("arrow-right",h2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]],f2=Rt("arrow-up-to-line",d2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m2=Rt("badge-check",g2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Vd=Rt("bold",p2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],x2=Rt("chart-column",y2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kc=Rt("check",v2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ar=Rt("chevron-down",b2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],W0=Rt("chevron-left",_2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Oc=Rt("chevron-right",w2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fx=Rt("chevron-up",S2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rr=Rt("circle-alert",C2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],j2=Rt("circle-check",T2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Z0=Rt("circle-x",k2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],K0=Rt("circle",O2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],N2=Rt("clipboard",E2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ec=Rt("copy",D2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],qd=Rt("crop",A2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],tr=Rt("download",M2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wf=Rt("eye",R2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],B2=Rt("file-json",z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gx=Rt("file-text",L2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]],H2=Rt("file-type",U2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],mx=Rt("globe",F2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],X2=Rt("graduation-cap",Y2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],I2=Rt("grip-vertical",P2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],V2=Rt("hammer",G2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],W2=Rt("hash",q2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Q0=Rt("image-plus",Z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],bs=Rt("image",K2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Wd=Rt("italic",Q2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Nc=Rt("layers",J2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],t_=Rt("link",$2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gc=Rt("loader-circle",e_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],s_=Rt("mail",n_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],px=Rt("maximize-2",i_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],r_=Rt("maximize",a_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],l_=Rt("megaphone",o_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],u_=Rt("message-circle",c_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],d_=Rt("mouse-pointer-2",h_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],g_=Rt("move",f_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],Dc=Rt("paintbrush",m_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$i=Rt("palette",p_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],x_=Rt("panel-left-close",y_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],b_=Rt("panel-left-open",v_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],w_=Rt("panel-right-close",__);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],C_=Rt("panel-right-open",S_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zd=Rt("plus",T_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],k_=Rt("redo-2",j_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],E_=Rt("rotate-ccw",O_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],J0=Rt("rotate-cw",N_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yx=Rt("search",D_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],$0=Rt("settings-2",A_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],R_=Rt("shapes",M_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Za=Rt("share-2",z_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_d=Rt("shield-check",B_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],U_=Rt("sparkles",L_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],F_=Rt("tag",H_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ac=Rt("trash-2",Y_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],sa=Rt("type",X_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Kd=Rt("underline",P_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],G_=Rt("undo-2",I_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ko=Rt("upload",V_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],W_=Rt("wand-sparkles",q_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],K_=Rt("wifi-off",Z_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xx=Rt("x",Q_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ty=Rt("zap",J_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],tw=Rt("zoom-in",$_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],nw=Rt("zoom-out",ew),ey=u=>{let t;const n=new Set,i=(f,p)=>{const x=typeof f=="function"?f(t):f;if(!Object.is(x,t)){const v=t;t=p??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(b=>b(t,v))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f))},d=t=u(i,a,h);return h},sw=(u=>u?ey(u):ey),iw=u=>u;function aw(u,t=iw){const n=Ge.useSyncExternalStore(u.subscribe,Ge.useCallback(()=>t(u.getState()),[u,t]),Ge.useCallback(()=>t(u.getInitialState()),[u,t]));return Ge.useDebugValue(n),n}const ny=u=>{const t=sw(u),n=i=>aw(t,i);return Object.assign(n,t),n},vx=(u=>u?ny(u):ny),rw={width:1080,height:1080,background:{type:"solid",color:"#ffffff"},elements:[]},ow={format:"png",quality:90,filenamePattern:"image_{index}"},It=vx(u=>({showLanding:!0,currentStep:"upload",csvData:null,templateConfig:rw,previewRowIndex:0,buildOptions:ow,buildProgress:{status:"idle",completed:0,total:0},uploadedImages:[],shareText:"",generatedImages:[],setShowLanding:t=>u({showLanding:t}),setCsvData:(t,n)=>u({csvData:{headers:t.headers,rows:t.rows,fileName:n},showLanding:!1}),setCurrentStep:t=>u({currentStep:t,showLanding:!1}),setTemplateConfig:t=>u({templateConfig:t}),setPreviewRowIndex:t=>u({previewRowIndex:t}),setBuildOptions:t=>u(n=>({buildOptions:{...n.buildOptions,...t}})),setBuildProgress:t=>u(n=>({buildProgress:{...n.buildProgress,...t}})),toggleColumnType:t=>u(n=>n.csvData?{csvData:{...n.csvData,headers:n.csvData.headers.map(i=>i.name===t?{...i,type:i.type==="image"?"text":"image"}:i)}}:{}),addUploadedImage:t=>u(n=>({uploadedImages:n.uploadedImages.includes(t)?n.uploadedImages:[...n.uploadedImages,t]})),removeUploadedImage:t=>u(n=>({uploadedImages:n.uploadedImages.filter(i=>i!==t)})),setShareText:t=>u({shareText:t}),setGeneratedImages:t=>u({generatedImages:t}),clearGeneratedImages:()=>u(t=>(t.generatedImages.forEach(n=>URL.revokeObjectURL(n.url)),{generatedImages:[]}))}));function ys({text:u,children:t}){return g.jsxs("div",{className:"relative group/tooltip inline-flex",children:[t,g.jsxs("div",{role:"tooltip",className:"absolute top-full left-1/2 -translate-x-1/2 mt-1.5 px-2 py-1 text-[11px] font-medium text-white bg-gray-800 rounded-md whitespace-nowrap opacity-0 pointer-events-none group-hover/tooltip:opacity-100 transition-opacity duration-150 z-50",children:[u,g.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-800"})]})]})}const or={en:{code:"en",name:"English",nativeName:"English",dir:"ltr"},ar:{code:"ar",name:"Arabic",nativeName:"",dir:"rtl"}},lw={app:{title:"CSV Image Generator"},nav:{upload:"Upload",design:"Design",preview:"Preview",build:"Build"},steps:{upload:"Upload your CSV data file",editor:"Design your image template",preview:"Preview with live CSV data",build:"Generate and download images"},upload:{dragDrop:"Drag and drop your CSV file here",or:"or",browseFiles:"Browse Files",supports:"Supports .csv files up to 10 MB",parsing:"Parsing CSV file",failed:"Upload failed",tryAgain:"Try again",csvError:"Please upload a CSV file (.csv extension).",replaceFile:"Replace file",columnTypes:"Column Types",columnHint:"By default, all columns are treated as text. If a column contains image URLs, click on it below to switch it to <b>image</b> type so the actual image is displayed instead of the raw URL.",dataPreview:"Data Preview",first:"first",rows:"rows",row:"row",columns:"columns",column:"column"},editor:{assets:"Assets",canvas:"Canvas",properties:"Properties",collapsePanel:"Collapse panel",showAssetsPanel:"Show Assets panel",showPropertiesPanel:"Show Properties panel",import:"Import",export:"Export",importTitle:"Import template from JSON file",exportTitle:"Export template as JSON file",invalidTemplate:"Invalid template file. Missing required fields.",invalidJson:"Failed to read template file. Make sure it's a valid JSON template."},assetPanel:{csvColumns:"CSV Columns",noCsvLoaded:"No CSV loaded yet.",addElements:"Add Elements",addText:"Add a static or placeholder text element",addTextBtn:"Add Text",elements:"Elements",imageLibrary:"Image Library",uploadImages:"Upload Images",pasteImageUrl:"Paste image URL...",add:"Add",couldNotLoad:"Could not load image from URL",noImagesYet:"No images uploaded yet.",removeFromLibrary:"Remove from library",canvasSize:"Canvas Size",width:"Width",height:"Height",background:"Background",solid:"Solid",gradient:"Gradient",image:"Image",horizontal:"Horizontal",vertical:"Vertical",diagonal:"Diagonal",color1:"Color 1",color2:"Color 2",replaceBackgroundImage:"Replace Background Image",uploadBackgroundImage:"Upload Background Image",bgImageHint:"Click the image on canvas to move or resize it. Drag corners to scale.",removeBackgroundImage:"Remove background image"},elementsBrowser:{icons:"Icons",stickers:"Stickers",illustrations:"Illustrations",searchIcons:"Search icons...",searchStickers:"Search stickers & emoji...",searchIllustrations:"Search illustrations...",noResults:"No elements found. Try a different search.",iconsFooter:"200,000+ free icons. Search or pick a category.",stickersFooter:"Colorful emoji & stickers from Noto, Twemoji & more.",illustrationsFooter:"Free illustrations from unDraw. Search for people, scenes & more.",arrows:"Arrows",social:"Social",business:"Business",people:"People",nature:"Nature",food:"Food",travel:"Travel",weather:"Weather",shapes:"Shapes",stars:"Stars",hearts:"Hearts",music:"Music",sports:"Sports",tech:"Tech",finance:"Finance",medical:"Medical",faces:"Faces",cats:"Cats",objects:"Objects",hands:"Hands",flags:"Flags",technology:"Technology",education:"Education",creative:"Creative",health:"Health",shopping:"Shopping",communication:"Communication"},canvasEditor:{undo:"Undo (Ctrl+Z)",redo:"Redo (Ctrl+Shift+Z)",duplicate:"Duplicate (Ctrl+D)",paste:"Paste (Ctrl+V)",zoomOut:"Zoom out",zoomIn:"Zoom in",fitToView:"Fit to view"},properties:{selectElement:"Select an element on the canvas to edit its properties.",elementsSelected:"elements selected",position:"Position",size:"Size",rotation:"Rotation",font:"Font",style:"Style",alignment:"Alignment",textBackground:"Text Background",opacity:"Opacity",radius:"Radius",color:"Color",borderRadius:"Border Radius",layer:"Layer",front:"Front",back:"Back",bringToFront:"Bring to Front",sendToBack:"Send to Back",moveToTop:"Move element to the top layer",moveToBottom:"Move element to the bottom layer",conditions:"Conditions",addCondition:"Add Condition",addConditionToAll:"Add Condition to All",duplicateOpposite:"Duplicate with opposite condition",duplicateAllOpposite:"Duplicate all with opposite condition",conditionTip:"Tip: Duplicate elements and set opposing conditions for different layouts.",deleteElement:"Delete Element",deleteElements:"Delete {count} Elements",sharp:"Sharp",rounded:"Rounded",circle:"Circle",crop:"Crop",cropImage:"Crop Image",adjustCrop:"Adjust Crop",resetCrop:"Reset Crop",toggleBold:"Toggle bold",toggleItalic:"Toggle italic",toggleUnderline:"Toggle underline",mixed:"Mixed",mixedAngles:"Mixed angles",mixedFonts:"Mixed fonts",mixedSizes:"Mixed sizes",mixedColors:"Mixed colors",mixedBgColors:"Mixed bg colors",mixedOpacities:"Mixed opacities",mixedRadii:"Mixed radii",notSet:"Not set",someIndividual:"Some elements have additional individual conditions not shown here.",selfColumnHint:`"Element's own column" uses each element's bound column (for placeholders) or the first {column} in the text.`},styleOverrides:{title:"Style Overrides",fillColor:"Fill Color",fontFamily:"Font Family",reset:"Reset",bgOpacity:"Bg Opacity",bgRadius:"Bg Radius"},conditionEditor:{if:"If",then:"Then",and:"AND",or:"OR",check:"Check",addCheck:"Add check",removeCheck:"Remove check",deleteCondition:"Delete condition",compareTo:"Compare to:",value:"Value",comparisonValue:"Comparison value",selfColumn:" Element's own column",isEmpty:"Is empty",isNotEmpty:"Is not empty",equals:"Equals",notEquals:"Not equals",contains:"Contains",notContains:"Does not contain",showElement:"Show element",hideElement:"Hide element",changeStyle:"Change style"},cropOverlay:{title:"Crop Image",reset:"Reset",cancel:"Cancel",apply:"Apply"},fontPicker:{searchFonts:"Search fonts",noFonts:"No fonts found"},preview:{title:"Preview",rowData:"Row Data",previous:"Previous",next:"Next",row:"Row",of:"of",empty:"empty",rendering:"Rendering",noPreview:"No preview available",noData:"No CSV data loaded",noDataHint:"Upload a CSV file first to preview your template with real data.",goToUpload:"Go to Upload",noElements:"No template elements",noElementsHint:"Add some elements to your template to see a preview.",goToEditor:"Go to Editor"},build:{exportOptions:"Export Options",outputMode:"Output Mode",downloadZip:"Download ZIP",shareOnly:"Share Only",both:"Both",imageFormat:"Image Format",quality:"Quality",smallest:"1 (smallest)",best:"100 (best)",filenamePattern:"Filename Pattern",showTokens:"Show available column tokens",hideTokens:"Hide available column tokens",filenameHint:"Use {column_name} to insert CSV values. Example: {name}_badge",shareText:"Share Text",shareTextHint:"Write a message template to share alongside each image. Use column tokens to personalise per row.",shareTextPlaceholder:"e.g. Check out {name}'s certificate! ",cardLabel:"Card Label",cardLabelHint:"Pick a column to identify each image card below. Helps you tell rows apart at a glance.",autoFirstColumn:"Auto (first column)",summary:"{count} images will be generated as {format}",summaryQuality:"at {quality}% quality",generating:"Generating images",complete:"Generation complete!",cancelled:"Generation cancelled",failed:"Generation failed",allGenerated:"All {count} images generated",andDownloaded:"and downloaded as ZIP",scrollToShare:". Scroll down to share them",cancelledAfter:"Generation was cancelled after {completed} of {total} images.",cancel:"Cancel",buildAgain:"Build Again",buildImages:"Build {count} Images",generatingBtn:"Generating",shareImages:"Share Images ({count})",shareImagesHint:"Share each image with its personalised text via your preferred platform.",share:"Share",whatsapp:"WhatsApp",copyText:"Copy Text",copied:"Copied",download:"Download",textCopied:"Text copied to clipboard  paste it in the app if needed",noData:"No CSV data loaded",noDataHint:"Upload a CSV file first before building images.",goToUpload:"Go to Upload",noElements:"No template elements",noElementsHint:"Design your template before generating images.",goToEditor:"Go to Editor"},common:{image:"image",text:"text",column:"Column",clickToToggleType:"Click to toggle type"},landing:{heroTitle:"Turn CSV Data Into Stunning Images",heroSubtitle:"Upload a spreadsheet, design a template with dynamic placeholders and conditional logic, then batch-generate hundreds of personalized images in seconds. Certificates, badges, social posts, invitations  all automated. Your data never leaves your browser.",getStarted:"Get Started  It's Free",learnMore:"Learn More",previewUpload:"Upload",previewDesign:"Design",previewPreview:"Preview",previewBuild:"Build",howItWorksTitle:"How It Works",howItWorksSubtitle:"Four simple steps from spreadsheet to finished images",step1Title:"Upload Your CSV",step1Desc:"Drag and drop your CSV file. Columns are auto-detected  mark any column as an image URL with one click.",step2Title:"Design Your Template",step2Desc:"Use the drag-and-drop editor to place text, images, icons, and stickers. Bind CSV columns as dynamic placeholders and set up conditional logic to show, hide, or restyle elements based on your data.",step3Title:"Preview Live Data",step3Desc:"See your template rendered with real CSV data. Navigate through rows to verify every variation looks perfect.",step4Title:"Build & Share",step4Desc:"Batch-generate all images as PNG or JPEG. Download as ZIP or share directly to social media with personalized messages.",featuresTitle:"Packed With Features",featuresSubtitle:"Everything you need to create professional personalized images at scale",feature1Title:"Dynamic Placeholders",feature1Desc:"Bind any CSV column to text or image elements using {column_name} tokens. Each row generates a unique image with its own data  names, photos, dates, anything.",feature2Title:"Conditional Logic",feature2Desc:"Show, hide, or restyle elements based on CSV data. Combine multiple conditions with AND/OR logic. Compare columns, check for empty values, and create different layouts from the same template.",feature3Title:"Drag-and-Drop Editor",feature3Desc:"A visual canvas where you drag, resize, rotate, and style elements with precision. Undo/redo, keyboard shortcuts, zoom controls, and layer management  all built in.",feature4Title:"Privacy First",feature4Desc:"Your data never leaves your browser. All processing happens locally  no uploads, no servers, no tracking. Your spreadsheets stay yours.",feature5Title:"200,000+ Free Assets",feature5Desc:"Browse icons, emoji stickers, and illustrations from top open-source libraries. Search by category or keyword and drop them onto your canvas.",feature6Title:"Batch Generation",feature6Desc:"Generate hundreds of images in one click. Export as PNG or JPEG with adjustable quality. Download everything as a ZIP file.",feature7Title:"Social Media Sharing",feature7Desc:"Write personalized share text with column tokens. Share each image to any social media platform or copy text to clipboard  all from the build screen.",feature8Title:"Image Backgrounds",feature8Desc:"Solid colors, linear gradients (horizontal, vertical, diagonal), or custom background images. Position and scale backgrounds right on the canvas.",feature9Title:"Text Styling",feature9Desc:"Custom fonts, bold, italic, underline, text alignment, color picker, and text backgrounds with opacity and border radius controls.",feature10Title:"Image Editing",feature10Desc:"Crop images interactively, apply border radius from sharp to circular, and load images from URLs with automatic CORS handling.",feature11Title:"Template Import/Export",feature11Desc:"Save your designs as JSON templates and reload them anytime. Share templates with your team for consistent branding.",feature12Title:"Bilingual Interface",feature12Desc:"Full English and Arabic support with right-to-left layout. Switch languages instantly  the entire UI adapts seamlessly.",feature13Title:"Works Offline (PWA)",feature13Desc:"Install Post Factory as a Progressive Web App. Works offline, launches from your home screen, and runs entirely in your browser  no server uploads.",feature14Title:"Custom Filenames",feature14Desc:"Define filename patterns using CSV column tokens. Each generated image gets a meaningful, unique name automatically.",feature15Title:"SVG Icon Recoloring",feature15Desc:"Change the color of any SVG icon directly on the canvas. Match your brand colors without editing source files.",feature16Title:"Responsive & Mobile-Ready",feature16Desc:"Designed for desktop and mobile. Touch-friendly controls, collapsible panels, and a compact mobile layout for designing on the go.",ctaTitle:"Ready to Automate Your Image Creation?",ctaSubtitle:"No sign-up required. No data leaves your browser. Just upload, design, and generate.",ctaButton:"Start Creating Now",footerTagline:"Batch image generation from CSV data.",footerPrivacy:"All processing happens in your browser. Your data never leaves your device.",useCasesTitle:"What Can You Create?",useCasesSubtitle:"Post Factory is perfect for any scenario where you need personalized images from data",useCase1Title:"Certificates & Diplomas",useCase1Desc:"Generate personalized certificates for courses, events, or achievements with names, dates, and custom details from your spreadsheet.",useCase2Title:"Social Media Posts",useCase2Desc:"Create branded social media content at scale. Product announcements, quotes, team spotlights  all personalized from CSV data.",useCase3Title:"Event Badges & Name Tags",useCase3Desc:"Design conference badges, name tags, or ID cards. Upload your attendee list and generate all badges in one batch.",useCase4Title:"Invitations & Cards",useCase4Desc:"Personalized wedding invitations, birthday cards, or thank-you notes. Each guest gets their own custom design.",useCase5Title:"Product Labels",useCase5Desc:"Generate product labels, price tags, or catalog images from your inventory spreadsheet.",useCase6Title:"Marketing Materials",useCase6Desc:"Personalized flyers, coupons, or promotional images. Target different audiences with conditional styling."}},cw={app:{title:"  CSV"},nav:{upload:"",design:"",preview:"",build:""},steps:{upload:"   CSV",editor:"  ",preview:"   CSV ",build:"  "},upload:{dragDrop:"   CSV ",or:"",browseFiles:" ",supports:"  .csv  10 ",parsing:"   CSV",failed:" ",tryAgain:" ",csvError:"   CSV ( .csv).",replaceFile:" ",columnTypes:" ",columnHint:"     .              <b></b>       .",dataPreview:" ",first:"",rows:"",row:"",columns:"",column:""},editor:{assets:"",canvas:"",properties:"",collapsePanel:" ",showAssetsPanel:"  ",showPropertiesPanel:"  ",import:"",export:"",importTitle:"    JSON",exportTitle:"   JSON",invalidTemplate:"   .   .",invalidJson:"    .     JSON ."},assetPanel:{csvColumns:" CSV",noCsvLoaded:"   CSV .",addElements:" ",addText:"     ",addTextBtn:" ",elements:"",imageLibrary:" ",uploadImages:" ",pasteImageUrl:"  ...",add:"",couldNotLoad:"    ",noImagesYet:"    .",removeFromLibrary:"  ",canvasSize:" ",width:"",height:"",background:"",solid:" ",gradient:"",image:"",horizontal:"",vertical:"",diagonal:"",color1:" 1",color2:" 2",replaceBackgroundImage:"  ",uploadBackgroundImage:"  ",bgImageHint:"        .   .",removeBackgroundImage:"  "},elementsBrowser:{icons:"",stickers:"",illustrations:" ",searchIcons:"  ...",searchStickers:"   ...",searchIllustrations:"   ...",noResults:"    .   .",iconsFooter:"  200,000  .    .",stickersFooter:"    Noto  Twemoji .",illustrationsFooter:"    unDraw.     .",arrows:"",social:"",business:"",people:"",nature:"",food:"",travel:"",weather:"",shapes:"",stars:"",hearts:"",music:"",sports:"",tech:"",finance:"",medical:"",faces:"",cats:"",objects:"",hands:"",flags:"",technology:"",education:"",creative:"",health:"",shopping:"",communication:""},canvasEditor:{undo:" (Ctrl+Z)",redo:" (Ctrl+Shift+Z)",duplicate:" (Ctrl+D)",paste:" (Ctrl+V)",zoomOut:"",zoomIn:"",fitToView:" "},properties:{selectElement:"     .",elementsSelected:" ",position:"",size:"",rotation:"",font:"",style:"",alignment:"",textBackground:" ",opacity:"",radius:" ",color:"",borderRadius:"  ",layer:"",front:"",back:"",bringToFront:" ",sendToBack:" ",moveToTop:"    ",moveToBottom:"    ",conditions:"",addCondition:" ",addConditionToAll:"  ",duplicateOpposite:"  ",duplicateAllOpposite:"   ",conditionTip:":       .",deleteElement:" ",deleteElements:" {count} ",sharp:"",rounded:"",circle:"",crop:"",cropImage:" ",adjustCrop:" ",resetCrop:"  ",toggleBold:" ",toggleItalic:" ",toggleUnderline:" ",mixed:"",mixedAngles:" ",mixedFonts:" ",mixedSizes:" ",mixedColors:" ",mixedBgColors:"  ",mixedOpacities:" ",mixedRadii:"  ",notSet:" ",someIndividual:"        .",selfColumnHint:'"  "      ()   {column}  .'},styleOverrides:{title:" ",fillColor:" ",fontFamily:" ",reset:" ",bgOpacity:" ",bgRadius:"  "},conditionEditor:{if:"",then:"",and:"",or:"",check:"",addCheck:" ",removeCheck:" ",deleteCondition:" ",compareTo:" :",value:"",comparisonValue:" ",selfColumn:"   ",isEmpty:"",isNotEmpty:" ",equals:"",notEquals:" ",contains:"",notContains:" ",showElement:" ",hideElement:" ",changeStyle:" "},cropOverlay:{title:" ",reset:" ",cancel:"",apply:""},fontPicker:{searchFonts:"  ",noFonts:"    "},preview:{title:"",rowData:" ",previous:"",next:"",row:"",of:"",empty:"",rendering:" ",noPreview:"   ",noData:"    CSV",noDataHint:"  CSV      .",goToUpload:" ",noElements:"    ",noElementsHint:"      .",goToEditor:" "},build:{exportOptions:" ",outputMode:" ",downloadZip:" ZIP",shareOnly:" ",both:"",imageFormat:" ",quality:"",smallest:"1 ()",best:"100 ()",filenamePattern:"  ",showTokens:"   ",hideTokens:"   ",filenameHint:" {column_name}   CSV. : {name}_badge",shareText:" ",shareTextHint:"      .      .",shareTextPlaceholder:":   {name}! ",cardLabel:" ",cardLabelHint:"      .      .",autoFirstColumn:" ( )",summary:"  {count}   {format}",summaryQuality:" {quality}%",generating:"  ",complete:" !",cancelled:"  ",failed:" ",allGenerated:"    ({count})",andDownloaded:"   ZIP",scrollToShare:".   ",cancelledAfter:"    {completed}  {total} .",cancel:"",buildAgain:" ",buildImages:" {count} ",generatingBtn:" ",shareImages:"  ({count})",shareImagesHint:"         .",share:"",whatsapp:"",copyText:" ",copied:" ",download:"",textCopied:"           ",noData:"    CSV",noDataHint:"  CSV    .",goToUpload:" ",noElements:"    ",noElementsHint:"    .",goToEditor:" "},common:{image:"",text:"",column:"",clickToToggleType:"  "},landing:{heroTitle:"  CSV   ",heroSubtitle:"               .        .     .",getStarted:"   ",learnMore:" ",previewUpload:"",previewDesign:"",previewPreview:"",previewBuild:"",howItWorksTitle:" ",howItWorksSubtitle:"        ",step1Title:"  CSV",step1Desc:"   CSV.            .",step2Title:" ",step2Desc:"        .   CSV               .",step3Title:"  ",step3Desc:"    CSV .          .",step4Title:" ",step4Desc:"      PNG  JPEG.   ZIP         .",featuresTitle:" ",featuresSubtitle:"         ",feature1Title:" ",feature1Desc:"   CSV       {column_name}.             .",feature2Title:" ",feature2Desc:"          CSV.     AND/OR.            .",feature3Title:"  ",feature3Desc:"         . /           .",feature4Title:" ",feature4Desc:"    .           .    .",feature5Title:"  200,000  ",feature5Desc:"         .        .",feature6Title:" ",feature6Desc:"    .   PNG  JPEG   .     ZIP.",feature7Title:"   ",feature7Desc:"     .                 .",feature8Title:" ",feature8Desc:"    (  )    .       .",feature9Title:" ",feature9Desc:"                .",feature10Title:" ",feature10Desc:"                 CORS .",feature11Title:"/ ",feature11Desc:"   JSON     .       .",feature12Title:"  ",feature12Desc:"        .        .",feature13Title:"   (PWA)",feature13Desc:" Post Factory   .               .",feature14Title:"  ",feature14Desc:"       CSV.         .",feature15Title:"   SVG",feature15Desc:"    SVG   .        .",feature16Title:"  ",feature16Desc:"   .            .",ctaTitle:"   ",ctaSubtitle:"  .    .    .",ctaButton:"  ",footerTagline:"     CSV.",footerPrivacy:"    .     .",useCasesTitle:"  ",useCasesSubtitle:"Post Factory         ",useCase1Title:" ",useCase1Desc:"              .",useCase2Title:"  ",useCase2Desc:"         .             CSV.",useCase3Title:"  ",useCase3Desc:"        .        .",useCase4Title:" ",useCase4Desc:"        .      .",useCase5Title:" ",useCase5Desc:"            .",useCase6Title:" ",useCase6Desc:"     .     ."}},sy={en:lw,ar:cw},bx="app-locale";function Qd(){try{const u=localStorage.getItem(bx);if(u&&u in or)return u}catch{}return"en"}function _x(u){const t=or[u];document.documentElement.lang=t.code,document.documentElement.dir=t.dir}_x(Qd());function iy(u){return(t,n)=>{const i=sy[u],a=t.split(".");let o=i;for(const c of a)if(o&&typeof o=="object"&&c in o)o=o[c];else{let h=sy.en;for(const d of a)if(h&&typeof h=="object"&&d in h)h=h[d];else return t;o=h;break}return typeof o!="string"?t:n?o.replace(/\{(\w+)\}/g,(c,h)=>h in n?String(n[h]):`{${h}}`):o}}const Be=vx(u=>({locale:Qd(),t:iy(Qd()),setLocale:t=>{localStorage.setItem(bx,t),_x(t),u({locale:t,t:iy(t)})}})),ay=[{key:"upload",labelKey:"nav.upload",descKey:"steps.upload",icon:ko},{key:"editor",labelKey:"nav.design",descKey:"steps.editor",icon:Dc},{key:"preview",labelKey:"nav.preview",descKey:"steps.preview",icon:wf},{key:"build",labelKey:"nav.build",descKey:"steps.build",icon:V2}],vc=["upload","editor","preview","build"];function Xl(u){return vc.indexOf(u)}const uw={upload:"nav.design",editor:"nav.preview",preview:"nav.build"},hw={editor:"nav.upload",preview:"nav.design",build:"nav.preview"};function ry({compact:u}){const t=It(O=>O.currentStep),n=It(O=>O.setCurrentStep),i=It(O=>O.csvData),a=It(O=>O.templateConfig),o=Be(O=>O.t),c=Be(O=>O.locale),h=or[c].dir==="rtl",d=h?ho:ir,f=h?ir:ho,p=Xl(t),x=O=>{Xl(O)<=p&&n(O)},v=t==="upload"?!!i:t==="editor"||t==="preview"?a.elements.length>0:!1,b=p>0,w=p<vc.length-1?vc[p+1]:null,_=p>0?vc[p-1]:null,k=uw[t],C=hw[t];return u?g.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5",children:[b&&_?g.jsxs("button",{type:"button",onClick:()=>n(_),className:"inline-flex items-center gap-1 px-2 py-1.5 min-h-[36px] text-[11px] font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[g.jsx(d,{className:"w-3 h-3"}),C?o(C):""]}):g.jsx("div",{}),g.jsx("div",{className:"flex items-center gap-1",children:ay.map(O=>{const M=Xl(O.key),X=O.key===t,I=M<p,$=M<=p,V=O.icon;return g.jsx("button",{type:"button",onClick:()=>x(O.key),disabled:!$,className:`flex items-center justify-center w-8 h-8 rounded-full transition-all ${X?"bg-indigo-600 text-white shadow-sm":I?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-400"} ${$?"cursor-pointer":"cursor-not-allowed"}`,title:o(O.descKey),children:I?g.jsx(kc,{className:"w-3.5 h-3.5"}):g.jsx(V,{className:"w-3.5 h-3.5"})},O.key)})}),v&&w?g.jsxs("button",{type:"button",onClick:()=>n(w),className:"inline-flex items-center gap-1 px-2 py-1.5 min-h-[36px] text-[11px] font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm",children:[k?o(k):"",g.jsx(f,{className:"w-3 h-3"})]}):g.jsx("div",{})]}):g.jsxs("div",{className:"flex items-center justify-between px-6 py-2",children:[b&&_?g.jsxs("button",{type:"button",onClick:()=>n(_),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[g.jsx(d,{className:"w-3.5 h-3.5"}),C?o(C):""]}):g.jsx("div",{className:"w-24"}),g.jsx("div",{className:"flex items-center gap-1",children:ay.map((O,M)=>{const X=Xl(O.key),I=O.key===t,$=X<p,V=X<=p,B=O.icon;return g.jsxs("div",{className:"flex items-center",children:[M>0&&g.jsx("div",{className:`w-12 h-px mx-1 ${X<=p?"bg-indigo-300":"bg-gray-200"}`}),g.jsx(ys,{text:o(O.descKey),children:g.jsxs("button",{type:"button",onClick:()=>x(O.key),disabled:!V,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${I?"bg-indigo-600 text-white shadow-sm":$?"bg-indigo-50 text-indigo-700 hover:bg-indigo-100":"text-gray-400"} ${V?"cursor-pointer":"cursor-not-allowed"}`,children:[$?g.jsx(kc,{className:"w-3.5 h-3.5"}):g.jsx(B,{className:"w-3.5 h-3.5"}),g.jsx("span",{children:o(O.labelKey)})]})})]},O.key)})}),v&&w?g.jsxs("button",{type:"button",onClick:()=>n(w),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm",children:[k?o(k):"",g.jsx(f,{className:"w-3.5 h-3.5"})]}):g.jsx("div",{className:"w-24"})]})}function Jd(){const u=Be(c=>c.locale),t=Be(c=>c.setLocale),n=Object.keys(or),i=n.indexOf(u),a=n[(i+1)%n.length],o=or[a];return g.jsxs("button",{type:"button",onClick:()=>t(a),className:"inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",title:o.nativeName,children:[g.jsx(mx,{className:"w-3.5 h-3.5"}),g.jsx("span",{children:o.nativeName})]})}function dw({children:u}){const t=Be(a=>a.t),n=It(a=>a.setShowLanding),i=()=>{n(!0)};return g.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-gray-50",children:[g.jsx("header",{className:"lg:hidden bg-white border-b border-gray-200 shadow-sm shrink-0",children:g.jsxs("div",{className:"px-3 py-1.5 flex items-center gap-2",children:[g.jsxs("button",{onClick:i,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",title:"Back to home",children:[g.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-md bg-indigo-600 text-white shrink-0",children:g.jsx(bs,{className:"w-3.5 h-3.5"})}),g.jsx("h1",{className:"text-sm font-semibold text-gray-900 tracking-tight truncate",children:t("app.title")})]}),g.jsx("div",{className:"flex-1"}),g.jsx(Jd,{})]})}),g.jsx("div",{className:"lg:hidden bg-white border-b border-gray-100 shrink-0",children:g.jsx(ry,{compact:!0})}),g.jsx("header",{className:"hidden lg:block bg-white border-b border-gray-200 shadow-sm shrink-0",children:g.jsxs("div",{className:"px-6 py-2 flex items-center gap-3",children:[g.jsxs("button",{onClick:i,className:"flex items-center gap-3 hover:opacity-80 transition-opacity",title:"Back to home",children:[g.jsx("div",{className:"flex items-center justify-center w-7 h-7 rounded-lg bg-indigo-600 text-white",children:g.jsx(bs,{className:"w-4 h-4"})}),g.jsx("h1",{className:"text-base font-semibold text-gray-900 tracking-tight",children:t("app.title")})]}),g.jsx("div",{className:"flex-1"}),g.jsx(Jd,{})]})}),g.jsx("div",{className:"hidden lg:block bg-white border-b border-gray-100 relative z-10 shrink-0",children:g.jsx(ry,{})}),g.jsx("main",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden px-2 sm:px-3 py-2 sm:py-3",children:u})]})}var bc={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var fw=bc.exports,oy;function gw(){return oy||(oy=1,(function(u,t){((n,i)=>{u.exports=i()})(fw,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},a,o=!i.document&&!!i.postMessage,c=i.IS_PAPA_WORKER||!1,h={},d=0,f={};function p(B){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(z){var Q=I(z);Q.chunkSize=parseInt(Q.chunkSize),z.step||z.chunk||(Q.chunkSize=null),this._handle=new _(Q),(this._handle.streamer=this)._config=Q}).call(this,B),this.parseChunk=function(z,Q){var ct=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ct){let P=this._config.newline;P||(L=this._config.quoteChar||'"',P=this._handle.guessLineEndings(z,L)),z=[...z.split(P).slice(ct)].join(P)}this.isFirstChunk&&V(this._config.beforeFirstChunk)&&(L=this._config.beforeFirstChunk(z))!==void 0&&(z=L),this.isFirstChunk=!1,this._halted=!1;var ct=this._partialLine+z,L=(this._partialLine="",this._handle.parse(ct,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(z=L.meta.cursor,ct=(this._finished||(this._partialLine=ct.substring(z-this._baseIndex),this._baseIndex=z),L&&L.data&&(this._rowCount+=L.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)i.postMessage({results:L,workerId:f.WORKER_ID,finished:ct});else if(V(this._config.chunk)&&!Q){if(this._config.chunk(L,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=L=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(L.data),this._completeResults.errors=this._completeResults.errors.concat(L.errors),this._completeResults.meta=L.meta),this._completed||!ct||!V(this._config.complete)||L&&L.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ct||L&&L.meta.paused||this._nextChunk(),L}this._halted=!0},this._sendError=function(z){V(this._config.error)?this._config.error(z):c&&this._config.error&&i.postMessage({workerId:f.WORKER_ID,error:z,finished:!1})}}function x(B){var z;(B=B||{}).chunkSize||(B.chunkSize=f.RemoteChunkSize),p.call(this,B),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(Q){this._input=Q,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(z=new XMLHttpRequest,this._config.withCredentials&&(z.withCredentials=this._config.withCredentials),o||(z.onload=$(this._chunkLoaded,this),z.onerror=$(this._chunkError,this)),z.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var Q,ct=this._config.downloadRequestHeaders;for(Q in ct)z.setRequestHeader(Q,ct[Q])}var L;this._config.chunkSize&&(L=this._start+this._config.chunkSize-1,z.setRequestHeader("Range","bytes="+this._start+"-"+L));try{z.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}o&&z.status===0&&this._chunkError()}},this._chunkLoaded=function(){z.readyState===4&&(z.status<200||400<=z.status?this._chunkError():(this._start+=this._config.chunkSize||z.responseText.length,this._finished=!this._config.chunkSize||this._start>=(Q=>(Q=Q.getResponseHeader("Content-Range"))!==null?parseInt(Q.substring(Q.lastIndexOf("/")+1)):-1)(z),this.parseChunk(z.responseText)))},this._chunkError=function(Q){Q=z.statusText||Q,this._sendError(new Error(Q))}}function v(B){(B=B||{}).chunkSize||(B.chunkSize=f.LocalChunkSize),p.call(this,B);var z,Q,ct=typeof FileReader<"u";this.stream=function(L){this._input=L,Q=L.slice||L.webkitSlice||L.mozSlice,ct?((z=new FileReader).onload=$(this._chunkLoaded,this),z.onerror=$(this._chunkError,this)):z=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),L=Q.call(L,this._start,P)),z.readAsText(L,this._config.encoding));ct||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(z.error)}}function b(B){var z;p.call(this,B=B||{}),this.stream=function(Q){return z=Q,this._nextChunk()},this._nextChunk=function(){var Q,ct;if(!this._finished)return Q=this._config.chunkSize,z=Q?(ct=z.substring(0,Q),z.substring(Q)):(ct=z,""),this._finished=!z,this.parseChunk(ct)}}function w(B){p.call(this,B=B||{});var z=[],Q=!0,ct=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ct&&z.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),z.length?this.parseChunk(z.shift()):Q=!0},this._streamData=$(function(L){try{z.push(typeof L=="string"?L:L.toString(this._config.encoding)),Q&&(Q=!1,this._checkIsFinished(),this.parseChunk(z.shift()))}catch(P){this._streamError(P)}},this),this._streamError=$(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=$(function(){this._streamCleanUp(),ct=!0,this._streamData("")},this),this._streamCleanUp=$(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function _(B){var z,Q,ct,L,P=Math.pow(2,53),E=-P,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,K=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Y=this,rt=0,et=0,pt=!1,A=!1,j=[],R={data:[],errors:[],meta:{}};function Z(bt){return B.skipEmptyLines==="greedy"?bt.join("").trim()==="":bt.length===1&&bt[0].length===0}function W(){if(R&&ct&&(xt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),ct=!1),B.skipEmptyLines&&(R.data=R.data.filter(function(At){return!Z(At)})),_t()){let At=function(dt,S){V(B.transformHeader)&&(dt=B.transformHeader(dt,S)),j.push(dt)};var St=At;if(R)if(Array.isArray(R.data[0])){for(var bt=0;_t()&&bt<R.data.length;bt++)R.data[bt].forEach(At);R.data.splice(0,1)}else R.data.forEach(At)}function Ct(At,dt){for(var S=B.header?{}:[],F=0;F<At.length;F++){var H=F,N=At[F],N=((D,G)=>(ut=>(B.dynamicTypingFunction&&B.dynamicTyping[ut]===void 0&&(B.dynamicTyping[ut]=B.dynamicTypingFunction(ut)),(B.dynamicTyping[ut]||B.dynamicTyping)===!0))(D)?G==="true"||G==="TRUE"||G!=="false"&&G!=="FALSE"&&((ut=>{if(q.test(ut)&&(ut=parseFloat(ut),E<ut&&ut<P))return 1})(G)?parseFloat(G):K.test(G)?new Date(G):G===""?null:G):G)(H=B.header?F>=j.length?"__parsed_extra":j[F]:H,N=B.transform?B.transform(N,H):N);H==="__parsed_extra"?(S[H]=S[H]||[],S[H].push(N)):S[H]=N}return B.header&&(F>j.length?xt("FieldMismatch","TooManyFields","Too many fields: expected "+j.length+" fields but parsed "+F,et+dt):F<j.length&&xt("FieldMismatch","TooFewFields","Too few fields: expected "+j.length+" fields but parsed "+F,et+dt)),S}var ot;R&&(B.header||B.dynamicTyping||B.transform)&&(ot=1,!R.data.length||Array.isArray(R.data[0])?(R.data=R.data.map(Ct),ot=R.data.length):R.data=Ct(R.data,0),B.header&&R.meta&&(R.meta.fields=j),et+=ot)}function _t(){return B.header&&j.length===0}function xt(bt,Ct,ot,St){bt={type:bt,code:Ct,message:ot},St!==void 0&&(bt.row=St),R.errors.push(bt)}V(B.step)&&(L=B.step,B.step=function(bt){R=bt,_t()?W():(W(),R.data.length!==0&&(rt+=bt.data.length,B.preview&&rt>B.preview?Q.abort():(R.data=R.data[0],L(R,Y))))}),this.parse=function(bt,Ct,ot){var St=B.quoteChar||'"',St=(B.newline||(B.newline=this.guessLineEndings(bt,St)),ct=!1,B.delimiter?V(B.delimiter)&&(B.delimiter=B.delimiter(bt),R.meta.delimiter=B.delimiter):((St=((At,dt,S,F,H)=>{var N,D,G,ut;H=H||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var yt=0;yt<H.length;yt++){for(var st,Et=H[yt],Tt=0,Nt=0,Dt=0,Yt=(G=void 0,new C({comments:F,delimiter:Et,newline:dt,preview:10}).parse(At)),Bt=0;Bt<Yt.data.length;Bt++)S&&Z(Yt.data[Bt])?Dt++:(st=Yt.data[Bt].length,Nt+=st,G===void 0?G=st:0<st&&(Tt+=Math.abs(st-G),G=st));0<Yt.data.length&&(Nt/=Yt.data.length-Dt),(D===void 0||Tt<=D)&&(ut===void 0||ut<Nt)&&1.99<Nt&&(D=Tt,N=Et,ut=Nt)}return{successful:!!(B.delimiter=N),bestDelimiter:N}})(bt,B.newline,B.skipEmptyLines,B.comments,B.delimitersToGuess)).successful?B.delimiter=St.bestDelimiter:(ct=!0,B.delimiter=f.DefaultDelimiter),R.meta.delimiter=B.delimiter),I(B));return B.preview&&B.header&&St.preview++,z=bt,Q=new C(St),R=Q.parse(z,Ct,ot),W(),pt?{meta:{paused:!0}}:R||{meta:{paused:!1}}},this.paused=function(){return pt},this.pause=function(){pt=!0,Q.abort(),z=V(B.chunk)?"":z.substring(Q.getCharIndex())},this.resume=function(){Y.streamer._halted?(pt=!1,Y.streamer.parseChunk(z,!0)):setTimeout(Y.resume,3)},this.aborted=function(){return A},this.abort=function(){A=!0,Q.abort(),R.meta.aborted=!0,V(B.complete)&&B.complete(R),z=""},this.guessLineEndings=function(At,St){At=At.substring(0,1048576);var St=new RegExp(k(St)+"([^]*?)"+k(St),"gm"),ot=(At=At.replace(St,"")).split("\r"),St=At.split(`
`),At=1<St.length&&St[0].length<ot[0].length;if(ot.length===1||At)return`
`;for(var dt=0,S=0;S<ot.length;S++)ot[S][0]===`
`&&dt++;return dt>=ot.length/2?`\r
`:"\r"}}function k(B){return B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(B){var z=(B=B||{}).delimiter,Q=B.newline,ct=B.comments,L=B.step,P=B.preview,E=B.fastMode,q=null,K=!1,Y=B.quoteChar==null?'"':B.quoteChar,rt=Y;if(B.escapeChar!==void 0&&(rt=B.escapeChar),(typeof z!="string"||-1<f.BAD_DELIMITERS.indexOf(z))&&(z=","),ct===z)throw new Error("Comment character same as delimiter");ct===!0?ct="#":(typeof ct!="string"||-1<f.BAD_DELIMITERS.indexOf(ct))&&(ct=!1),Q!==`
`&&Q!=="\r"&&Q!==`\r
`&&(Q=`
`);var et=0,pt=!1;this.parse=function(A,j,R){if(typeof A!="string")throw new Error("Input must be a string");var Z=A.length,W=z.length,_t=Q.length,xt=ct.length,bt=V(L),Ct=[],ot=[],St=[],At=et=0;if(!A)return Tt();if(E||E!==!1&&A.indexOf(Y)===-1){for(var dt=A.split(Q),S=0;S<dt.length;S++){if(St=dt[S],et+=St.length,S!==dt.length-1)et+=Q.length;else if(R)return Tt();if(!ct||St.substring(0,xt)!==ct){if(bt){if(Ct=[],ut(St.split(z)),Nt(),pt)return Tt()}else ut(St.split(z));if(P&&P<=S)return Ct=Ct.slice(0,P),Tt(!0)}}return Tt()}for(var F=A.indexOf(z,et),H=A.indexOf(Q,et),N=new RegExp(k(rt)+k(Y),"g"),D=A.indexOf(Y,et);;)if(A[et]===Y)for(D=et,et++;;){if((D=A.indexOf(Y,D+1))===-1)return R||ot.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ct.length,index:et}),st();if(D===Z-1)return st(A.substring(et,D).replace(N,Y));if(Y===rt&&A[D+1]===rt)D++;else if(Y===rt||D===0||A[D-1]!==rt){F!==-1&&F<D+1&&(F=A.indexOf(z,D+1));var G=yt((H=H!==-1&&H<D+1?A.indexOf(Q,D+1):H)===-1?F:Math.min(F,H));if(A.substr(D+1+G,W)===z){St.push(A.substring(et,D).replace(N,Y)),A[et=D+1+G+W]!==Y&&(D=A.indexOf(Y,et)),F=A.indexOf(z,et),H=A.indexOf(Q,et);break}if(G=yt(H),A.substring(D+1+G,D+1+G+_t)===Q){if(St.push(A.substring(et,D).replace(N,Y)),Et(D+1+G+_t),F=A.indexOf(z,et),D=A.indexOf(Y,et),bt&&(Nt(),pt))return Tt();if(P&&Ct.length>=P)return Tt(!0);break}ot.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ct.length,index:et}),D++}}else if(ct&&St.length===0&&A.substring(et,et+xt)===ct){if(H===-1)return Tt();et=H+_t,H=A.indexOf(Q,et),F=A.indexOf(z,et)}else if(F!==-1&&(F<H||H===-1))St.push(A.substring(et,F)),et=F+W,F=A.indexOf(z,et);else{if(H===-1)break;if(St.push(A.substring(et,H)),Et(H+_t),bt&&(Nt(),pt))return Tt();if(P&&Ct.length>=P)return Tt(!0)}return st();function ut(Dt){Ct.push(Dt),At=et}function yt(Dt){var Yt=0;return Yt=Dt!==-1&&(Dt=A.substring(D+1,Dt))&&Dt.trim()===""?Dt.length:Yt}function st(Dt){return R||(Dt===void 0&&(Dt=A.substring(et)),St.push(Dt),et=Z,ut(St),bt&&Nt()),Tt()}function Et(Dt){et=Dt,ut(St),St=[],H=A.indexOf(Q,et)}function Tt(Dt){if(B.header&&!j&&Ct.length&&!K){var Yt=Ct[0],Bt=Object.create(null),Ot=new Set(Yt);let se=!1;for(let ae=0;ae<Yt.length;ae++){let Te=Yt[ae];if(Bt[Te=V(B.transformHeader)?B.transformHeader(Te,ae):Te]){let Kt,xe=Bt[Te];for(;Kt=Te+"_"+xe,xe++,Ot.has(Kt););Ot.add(Kt),Yt[ae]=Kt,Bt[Te]++,se=!0,(q=q===null?{}:q)[Kt]=Te}else Bt[Te]=1,Yt[ae]=Te;Ot.add(Te)}se&&console.warn("Duplicate headers found and renamed."),K=!0}return{data:Ct,errors:ot,meta:{delimiter:z,linebreak:Q,aborted:pt,truncated:!!Dt,cursor:At+(j||0),renamedHeaders:q}}}function Nt(){L(Tt()),Ct=[],ot=[]}},this.abort=function(){pt=!0},this.getCharIndex=function(){return et}}function O(B){var z=B.data,Q=h[z.workerId],ct=!1;if(z.error)Q.userError(z.error,z.file);else if(z.results&&z.results.data){var L={abort:function(){ct=!0,M(z.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:X,resume:X};if(V(Q.userStep)){for(var P=0;P<z.results.data.length&&(Q.userStep({data:z.results.data[P],errors:z.results.errors,meta:z.results.meta},L),!ct);P++);delete z.results}else V(Q.userChunk)&&(Q.userChunk(z.results,L,z.file),delete z.results)}z.finished&&!ct&&M(z.workerId,z.results)}function M(B,z){var Q=h[B];V(Q.userComplete)&&Q.userComplete(z),Q.terminate(),delete h[B]}function X(){throw new Error("Not implemented.")}function I(B){if(typeof B!="object"||B===null)return B;var z,Q=Array.isArray(B)?[]:{};for(z in B)Q[z]=I(B[z]);return Q}function $(B,z){return function(){B.apply(z,arguments)}}function V(B){return typeof B=="function"}return f.parse=function(B,z){var Q=(z=z||{}).dynamicTyping||!1;if(V(Q)&&(z.dynamicTypingFunction=Q,Q={}),z.dynamicTyping=Q,z.transform=!!V(z.transform)&&z.transform,!z.worker||!f.WORKERS_SUPPORTED)return Q=null,f.NODE_STREAM_INPUT,typeof B=="string"?(B=(ct=>ct.charCodeAt(0)!==65279?ct:ct.slice(1))(B),Q=new(z.download?x:b)(z)):B.readable===!0&&V(B.read)&&V(B.on)?Q=new w(z):(i.File&&B instanceof File||B instanceof Object)&&(Q=new v(z)),Q.stream(B);(Q=(()=>{var ct;return!!f.WORKERS_SUPPORTED&&(ct=(()=>{var L=i.URL||i.webkitURL||null,P=n.toString();return f.BLOB_URL||(f.BLOB_URL=L.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(ct=new i.Worker(ct)).onmessage=O,ct.id=d++,h[ct.id]=ct)})()).userStep=z.step,Q.userChunk=z.chunk,Q.userComplete=z.complete,Q.userError=z.error,z.step=V(z.step),z.chunk=V(z.chunk),z.complete=V(z.complete),z.error=V(z.error),delete z.worker,Q.postMessage({input:B,config:z,workerId:Q.id})},f.unparse=function(B,z){var Q=!1,ct=!0,L=",",P=`\r
`,E='"',q=E+E,K=!1,Y=null,rt=!1,et=((()=>{if(typeof z=="object"){if(typeof z.delimiter!="string"||f.BAD_DELIMITERS.filter(function(j){return z.delimiter.indexOf(j)!==-1}).length||(L=z.delimiter),typeof z.quotes!="boolean"&&typeof z.quotes!="function"&&!Array.isArray(z.quotes)||(Q=z.quotes),typeof z.skipEmptyLines!="boolean"&&typeof z.skipEmptyLines!="string"||(K=z.skipEmptyLines),typeof z.newline=="string"&&(P=z.newline),typeof z.quoteChar=="string"&&(E=z.quoteChar),typeof z.header=="boolean"&&(ct=z.header),Array.isArray(z.columns)){if(z.columns.length===0)throw new Error("Option columns is empty");Y=z.columns}z.escapeChar!==void 0&&(q=z.escapeChar+E),z.escapeFormulae instanceof RegExp?rt=z.escapeFormulae:typeof z.escapeFormulae=="boolean"&&z.escapeFormulae&&(rt=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(E),"g"));if(typeof B=="string"&&(B=JSON.parse(B)),Array.isArray(B)){if(!B.length||Array.isArray(B[0]))return pt(null,B,K);if(typeof B[0]=="object")return pt(Y||Object.keys(B[0]),B,K)}else if(typeof B=="object")return typeof B.data=="string"&&(B.data=JSON.parse(B.data)),Array.isArray(B.data)&&(B.fields||(B.fields=B.meta&&B.meta.fields||Y),B.fields||(B.fields=Array.isArray(B.data[0])?B.fields:typeof B.data[0]=="object"?Object.keys(B.data[0]):[]),Array.isArray(B.data[0])||typeof B.data[0]=="object"||(B.data=[B.data])),pt(B.fields||[],B.data||[],K);throw new Error("Unable to serialize unrecognized input");function pt(j,R,Z){var W="",_t=(typeof j=="string"&&(j=JSON.parse(j)),typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(j)&&0<j.length),xt=!Array.isArray(R[0]);if(_t&&ct){for(var bt=0;bt<j.length;bt++)0<bt&&(W+=L),W+=A(j[bt],bt);0<R.length&&(W+=P)}for(var Ct=0;Ct<R.length;Ct++){var ot=(_t?j:R[Ct]).length,St=!1,At=_t?Object.keys(R[Ct]).length===0:R[Ct].length===0;if(Z&&!_t&&(St=Z==="greedy"?R[Ct].join("").trim()==="":R[Ct].length===1&&R[Ct][0].length===0),Z==="greedy"&&_t){for(var dt=[],S=0;S<ot;S++){var F=xt?j[S]:S;dt.push(R[Ct][F])}St=dt.join("").trim()===""}if(!St){for(var H=0;H<ot;H++){0<H&&!At&&(W+=L);var N=_t&&xt?j[H]:H;W+=A(R[Ct][N],H)}Ct<R.length-1&&(!Z||0<ot&&!At)&&(W+=P)}}return W}function A(j,R){var Z,W;return j==null?"":j.constructor===Date?JSON.stringify(j).slice(1,25):(W=!1,rt&&typeof j=="string"&&rt.test(j)&&(j="'"+j,W=!0),Z=j.toString().replace(et,q),(W=W||Q===!0||typeof Q=="function"&&Q(j,R)||Array.isArray(Q)&&Q[R]||((_t,xt)=>{for(var bt=0;bt<xt.length;bt++)if(-1<_t.indexOf(xt[bt]))return!0;return!1})(Z,f.BAD_DELIMITERS)||-1<Z.indexOf(L)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?E+Z+E:Z)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!o&&!!i.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=C,f.ParserHandle=_,f.NetworkStreamer=x,f.FileStreamer=v,f.StringStreamer=b,f.ReadableStreamStreamer=w,i.jQuery&&((a=i.jQuery).fn.parse=function(B){var z=B.config||{},Q=[];return this.each(function(P){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var E=0;E<this.files.length;E++)Q.push({file:this.files[E],inputElem:this,instanceConfig:a.extend({},z)})}),ct(),this;function ct(){if(Q.length===0)V(B.complete)&&B.complete();else{var P,E,q,K,Y=Q[0];if(V(B.before)){var rt=B.before(Y.file,Y.inputElem);if(typeof rt=="object"){if(rt.action==="abort")return P="AbortError",E=Y.file,q=Y.inputElem,K=rt.reason,void(V(B.error)&&B.error({name:P},E,q,K));if(rt.action==="skip")return void L();typeof rt.config=="object"&&(Y.instanceConfig=a.extend(Y.instanceConfig,rt.config))}else if(rt==="skip")return void L()}var et=Y.instanceConfig.complete;Y.instanceConfig.complete=function(pt){V(et)&&et(pt,Y.file,Y.inputElem),L()},f.parse(Y.file,Y.instanceConfig)}}function L(){Q.splice(0,1),ct()}}),c&&(i.onmessage=function(B){B=B.data,f.WORKER_ID===void 0&&B&&(f.WORKER_ID=B.workerId),typeof B.input=="string"?i.postMessage({workerId:f.WORKER_ID,results:f.parse(B.input,B.config),finished:!0}):(i.File&&B.input instanceof File||B.input instanceof Object)&&(B=f.parse(B.input,B.config))&&i.postMessage({workerId:f.WORKER_ID,results:B,finished:!0})}),(x.prototype=Object.create(p.prototype)).constructor=x,(v.prototype=Object.create(p.prototype)).constructor=v,(b.prototype=Object.create(b.prototype)).constructor=b,(w.prototype=Object.create(p.prototype)).constructor=w,f})})(bc)),bc.exports}var mw=gw();const pw=bf(mw);function yw(u,t){return{name:u,type:"text"}}async function xw(u){return new Promise((t,n)=>{if(!u||u.size===0){n(new Error("The uploaded file is empty. Please upload a valid CSV file."));return}pw.parse(u,{header:!0,skipEmptyLines:!0,complete(i){if(i.errors.length>0&&i.data.length===0){n(new Error(`Failed to parse CSV: ${i.errors[0].message}`));return}const a=i.meta.fields;if(!a||a.length===0){n(new Error("The CSV file contains no columns. Please upload a file with at least one column header."));return}const o=i.data,c=a.map(h=>yw(h));t({headers:c,rows:o,rowCount:o.length})},error(i){n(new Error(`Failed to parse CSV: ${i.message}`))}})})}function ly(){const u=It(O=>O.csvData),t=It(O=>O.setCsvData),n=It(O=>O.toggleColumnType),i=Be(O=>O.t),[a,o]=tt.useState(!1),[c,h]=tt.useState(!1),[d,f]=tt.useState(null),p=tt.useRef(null),x=tt.useCallback(async O=>{if(!O.name.toLowerCase().endsWith(".csv")){f(i("upload.csvError"));return}h(!0),f(null);try{const M=await xw(O);t(M,O.name)}catch(M){f(M instanceof Error?M.message:"An unexpected error occurred while parsing the file.")}finally{h(!1)}},[t,i]),v=tt.useCallback(O=>{O.preventDefault(),o(!0)},[]),b=tt.useCallback(O=>{O.preventDefault(),o(!1)},[]),w=tt.useCallback(O=>{O.preventDefault(),o(!1);const M=O.dataTransfer.files[0];M&&x(M)},[x]),_=tt.useCallback(O=>{var X;const M=(X=O.target.files)==null?void 0:X[0];M&&x(M),O.target.value=""},[x]),k=()=>{var O;(O=p.current)==null||O.click()},C=()=>{f(null)};return g.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 sm:space-y-6",children:[g.jsxs("div",{onDragOver:v,onDragLeave:b,onDrop:w,className:`
          relative rounded-xl border-2 border-dashed p-8 sm:p-12 text-center transition-all duration-200
          ${c?"pointer-events-none opacity-60":""}
          ${a?"border-indigo-500 bg-indigo-50":"border-gray-300 bg-white hover:border-gray-400 hover:bg-gray-50"}
        `,children:[g.jsx("input",{ref:p,type:"file",accept:".csv",onChange:_,className:"hidden"}),c?g.jsxs("div",{className:"flex flex-col items-center gap-3",children:[g.jsx(Gc,{className:"w-10 h-10 text-indigo-500 animate-spin"}),g.jsx("p",{className:"text-sm text-gray-600",children:i("upload.parsing")})]}):g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-full bg-indigo-50 text-indigo-500",children:g.jsx(ko,{className:"w-7 h-7"})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-base font-medium text-gray-700",children:i("upload.dragDrop")}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i("upload.or")})]}),g.jsx("button",{type:"button",onClick:k,className:"px-5 py-2.5 min-h-[44px] text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors",children:i("upload.browseFiles")}),g.jsx("p",{className:"text-xs text-gray-400",children:i("upload.supports")})]})]}),d&&g.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-red-50 border border-red-200",children:[g.jsx(rr,{className:"w-5 h-5 text-red-500 mt-0.5 shrink-0"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-sm font-medium text-red-800",children:i("upload.failed")}),g.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),g.jsx("button",{type:"button",onClick:C,className:"text-sm font-medium text-red-700 hover:text-red-800 underline shrink-0",children:i("upload.tryAgain")})]}),u&&!c&&g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white border border-gray-200",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(gx,{className:"w-5 h-5 text-indigo-500"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.fileName}),g.jsxs("p",{className:"text-xs text-gray-500",children:[u.rows.length," ",u.rows.length!==1?i("upload.rows"):i("upload.row"),"  ",u.headers.length," ",u.headers.length!==1?i("upload.columns"):i("upload.column")]})]})]}),g.jsx("button",{type:"button",onClick:k,className:"text-xs font-medium text-gray-500 hover:text-gray-700 underline",children:i("upload.replaceFile")})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:i("upload.columnTypes")}),g.jsxs("div",{className:"flex items-start gap-2 p-3 mb-3 rounded-lg bg-amber-50 border border-amber-200",children:[g.jsx(rr,{className:"w-4 h-4 text-amber-500 mt-0.5 shrink-0"}),g.jsx("p",{className:"text-xs text-amber-800",dangerouslySetInnerHTML:{__html:i("upload.columnHint")}})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:u.headers.map(O=>g.jsxs("button",{type:"button",onClick:()=>n(O.name),className:`inline-flex items-center gap-1.5 px-3 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 rounded-full text-sm sm:text-xs font-medium transition-colors cursor-pointer ${O.type==="image"?"bg-green-50 text-green-700 border border-green-200 hover:bg-green-100":"bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100"}`,children:[O.type==="image"?g.jsx(bs,{className:"w-3 h-3"}):g.jsx(sa,{className:"w-3 h-3"}),O.name,g.jsx("span",{className:`text-[10px] px-1 rounded ${O.type==="image"?"bg-green-200/60 text-green-600":"bg-blue-200/60 text-blue-600"}`,children:O.type==="image"?i("common.image"):i("common.text")})]},O.name))})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:[i("upload.dataPreview"),g.jsxs("span",{className:"ml-1 font-normal text-gray-400",children:["(",i("upload.first")," ",Math.min(5,u.rows.length)," ",i("upload.rows"),")"]})]}),g.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{children:g.jsx("tr",{className:"bg-gray-50",children:u.headers.map(O=>g.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600 whitespace-nowrap border-b border-gray-200",children:O.name},O.name))})}),g.jsx("tbody",{children:u.rows.slice(0,5).map((O,M)=>g.jsx("tr",{className:M%2===0?"bg-white":"bg-gray-50/50",children:u.headers.map(X=>g.jsx("td",{className:"px-4 py-2 text-gray-700 whitespace-nowrap border-b border-gray-100 max-w-[200px] truncate",title:O[X.name]??"",children:O[X.name]??""},X.name))},M))})]})})]})]})]})}function Vc(){return(Vc=Object.assign||function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u}).apply(this,arguments)}function wx(u,t){if(u==null)return{};var n,i,a={},o=Object.keys(u);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(a[n]=u[n]);return a}function $d(u){var t=tt.useRef(u),n=tt.useRef(function(i){t.current&&t.current(i)});return t.current=u,n.current}var xo=function(u,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),u>n?n:u<t?t:u},fo=function(u){return"touches"in u},tf=function(u){return u&&u.ownerDocument.defaultView||self},cy=function(u,t,n){var i=u.getBoundingClientRect(),a=fo(t)?(function(o,c){for(var h=0;h<o.length;h++)if(o[h].identifier===c)return o[h];return o[0]})(t.touches,n):t;return{left:xo((a.pageX-(i.left+tf(u).pageXOffset))/i.width),top:xo((a.pageY-(i.top+tf(u).pageYOffset))/i.height)}},uy=function(u){!fo(u)&&u.preventDefault()},Sx=Ge.memo(function(u){var t=u.onMove,n=u.onKey,i=wx(u,["onMove","onKey"]),a=tt.useRef(null),o=$d(t),c=$d(n),h=tt.useRef(null),d=tt.useRef(!1),f=tt.useMemo(function(){var b=function(k){uy(k),(fo(k)?k.touches.length>0:k.buttons>0)&&a.current?o(cy(a.current,k,h.current)):_(!1)},w=function(){return _(!1)};function _(k){var C=d.current,O=tf(a.current),M=k?O.addEventListener:O.removeEventListener;M(C?"touchmove":"mousemove",b),M(C?"touchend":"mouseup",w)}return[function(k){var C=k.nativeEvent,O=a.current;if(O&&(uy(C),!(function(X,I){return I&&!fo(X)})(C,d.current)&&O)){if(fo(C)){d.current=!0;var M=C.changedTouches||[];M.length&&(h.current=M[0].identifier)}O.focus(),o(cy(O,C,h.current)),_(!0)}},function(k){var C=k.which||k.keyCode;C<37||C>40||(k.preventDefault(),c({left:C===39?.05:C===37?-.05:0,top:C===40?.05:C===38?-.05:0}))},_]},[c,o]),p=f[0],x=f[1],v=f[2];return tt.useEffect(function(){return v},[v]),Ge.createElement("div",Vc({},i,{onTouchStart:p,onMouseDown:p,className:"react-colorful__interactive",ref:a,onKeyDown:x,tabIndex:0,role:"slider"}))}),Sf=function(u){return u.filter(Boolean).join(" ")},Cx=function(u){var t=u.color,n=u.left,i=u.top,a=i===void 0?.5:i,o=Sf(["react-colorful__pointer",u.className]);return Ge.createElement("div",{className:o,style:{top:100*a+"%",left:100*n+"%"}},Ge.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},nn=function(u,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*u)/n},vw=function(u){return Cw(ef(u))},ef=function(u){return u[0]==="#"&&(u=u.substring(1)),u.length<6?{r:parseInt(u[0]+u[0],16),g:parseInt(u[1]+u[1],16),b:parseInt(u[2]+u[2],16),a:u.length===4?nn(parseInt(u[3]+u[3],16)/255,2):1}:{r:parseInt(u.substring(0,2),16),g:parseInt(u.substring(2,4),16),b:parseInt(u.substring(4,6),16),a:u.length===8?nn(parseInt(u.substring(6,8),16)/255,2):1}},bw=function(u){return Sw(ww(u))},_w=function(u){var t=u.s,n=u.v,i=u.a,a=(200-t)*n/100;return{h:nn(u.h),s:nn(a>0&&a<200?t*n/100/(a<=100?a:200-a)*100:0),l:nn(a/2),a:nn(i,2)}},nf=function(u){var t=_w(u);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},ww=function(u){var t=u.h,n=u.s,i=u.v,a=u.a;t=t/360*6,n/=100,i/=100;var o=Math.floor(t),c=i*(1-n),h=i*(1-(t-o)*n),d=i*(1-(1-t+o)*n),f=o%6;return{r:nn(255*[i,h,c,c,d,i][f]),g:nn(255*[d,i,i,h,c,c][f]),b:nn(255*[c,c,d,i,i,h][f]),a:nn(a,2)}},Pl=function(u){var t=u.toString(16);return t.length<2?"0"+t:t},Sw=function(u){var t=u.r,n=u.g,i=u.b,a=u.a,o=a<1?Pl(nn(255*a)):"";return"#"+Pl(t)+Pl(n)+Pl(i)+o},Cw=function(u){var t=u.r,n=u.g,i=u.b,a=u.a,o=Math.max(t,n,i),c=o-Math.min(t,n,i),h=c?o===t?(n-i)/c:o===n?2+(i-t)/c:4+(t-n)/c:0;return{h:nn(60*(h<0?h+6:h)),s:nn(o?c/o*100:0),v:nn(o/255*100),a}},Tw=Ge.memo(function(u){var t=u.hue,n=u.onChange,i=Sf(["react-colorful__hue",u.className]);return Ge.createElement("div",{className:i},Ge.createElement(Sx,{onMove:function(a){n({h:360*a.left})},onKey:function(a){n({h:xo(t+360*a.left,0,360)})},"aria-label":"Hue","aria-valuenow":nn(t),"aria-valuemax":"360","aria-valuemin":"0"},Ge.createElement(Cx,{className:"react-colorful__hue-pointer",left:t/360,color:nf({h:t,s:100,v:100,a:1})})))}),jw=Ge.memo(function(u){var t=u.hsva,n=u.onChange,i={backgroundColor:nf({h:t.h,s:100,v:100,a:1})};return Ge.createElement("div",{className:"react-colorful__saturation",style:i},Ge.createElement(Sx,{onMove:function(a){n({s:100*a.left,v:100-100*a.top})},onKey:function(a){n({s:xo(t.s+100*a.left,0,100),v:xo(t.v-100*a.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+nn(t.s)+"%, Brightness "+nn(t.v)+"%"},Ge.createElement(Cx,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:nf(t)})))}),Tx=function(u,t){if(u===t)return!0;for(var n in u)if(u[n]!==t[n])return!1;return!0},kw=function(u,t){return u.toLowerCase()===t.toLowerCase()||Tx(ef(u),ef(t))};function Ow(u,t,n){var i=$d(n),a=tt.useState(function(){return u.toHsva(t)}),o=a[0],c=a[1],h=tt.useRef({color:t,hsva:o});tt.useEffect(function(){if(!u.equal(t,h.current.color)){var f=u.toHsva(t);h.current={hsva:f,color:t},c(f)}},[t,u]),tt.useEffect(function(){var f;Tx(o,h.current.hsva)||u.equal(f=u.fromHsva(o),h.current.color)||(h.current={hsva:o,color:f},i(f))},[o,u,i]);var d=tt.useCallback(function(f){c(function(p){return Object.assign({},p,f)})},[]);return[o,d]}var Ew=typeof window<"u"?tt.useLayoutEffect:tt.useEffect,Nw=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},hy=new Map,Dw=function(u){Ew(function(){var t=u.current?u.current.ownerDocument:document;if(t!==void 0&&!hy.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,hy.set(t,n);var i=Nw();i&&n.setAttribute("nonce",i),t.head.appendChild(n)}},[])},Aw=function(u){var t=u.className,n=u.colorModel,i=u.color,a=i===void 0?n.defaultColor:i,o=u.onChange,c=wx(u,["className","colorModel","color","onChange"]),h=tt.useRef(null);Dw(h);var d=Ow(n,a,o),f=d[0],p=d[1],x=Sf(["react-colorful",t]);return Ge.createElement("div",Vc({},c,{ref:h,className:x}),Ge.createElement(jw,{hsva:f,onChange:p}),Ge.createElement(Tw,{hue:f.h,onChange:p,className:"react-colorful__last-control"}))},Mw={defaultColor:"000",toHsva:vw,fromHsva:function(u){return bw({h:u.h,s:u.s,v:u.v,a:1})},equal:kw},Ni=function(u){return Ge.createElement(Aw,Vc({},u,{colorModel:Mw}))};const Rw="https://corsproxy.io/?";async function zw(){if("serviceWorker"in navigator)try{const u=await navigator.serviceWorker.register("/cors-proxy-sw.js",{scope:"/"});u.waiting&&u.waiting.postMessage({type:"SKIP_WAITING"}),u.addEventListener("updatefound",()=>{const t=u.installing;t==null||t.addEventListener("statechange",()=>{t.state})})}catch{}}function Bw(u){return u.replace(/^http:\/\//,"https://")}async function sf(u,t){var a;if(u.startsWith("data:")||u.startsWith("blob:"))return fetch(u,t);const n=Bw(u);if((a=navigator.serviceWorker)!=null&&a.controller)return fetch(n,t);try{const o=await fetch(n,{...t,mode:"cors",credentials:"omit"});if(o.ok)return o}catch{}try{const o=await fetch(`/api/proxy-fetch?url=${encodeURIComponent(n)}`,t);if(o.ok)return o}catch{}const i=Rw+encodeURIComponent(n);return fetch(i,{mode:"cors",credentials:"omit"})}async function jx(u){if(u.startsWith("data:"))return u;const t=await sf(u);if(!t.ok)throw new Error(`Failed to load image: ${t.status}`);const n=await t.blob();return new Promise((i,a)=>{const o=new FileReader;o.onload=()=>i(o.result),o.onerror=a,o.readAsDataURL(n)})}const Lw="https://api.mymemory.translated.net/get",wd=new Map;async function Uw(u,t,n){var o;const i=u.trim();if(!i||t==="en")return i;const a=`${t}:${i}`;if(wd.has(a))return wd.get(a);try{const c=`${Lw}?q=${encodeURIComponent(i)}&langpair=${t}|en`,h=await fetch(c,{signal:n});if(!h.ok)return i;const d=await h.json(),f=((o=d==null?void 0:d.responseData)==null?void 0:o.translatedText)??i;return f.toLowerCase()===i.toLowerCase()?i:(wd.set(a,f),f)}catch{return i}}const Sd="https://api.iconify.design",Hw=64,Fw=[{label:"Arrows",query:"arrow"},{label:"Social",query:"social media"},{label:"Business",query:"business chart"},{label:"People",query:"person user"},{label:"Nature",query:"tree flower"},{label:"Food",query:"food drink"},{label:"Travel",query:"travel plane"},{label:"Weather",query:"weather sun cloud"},{label:"Shapes",query:"shape circle square"},{label:"Stars",query:"star badge"},{label:"Hearts",query:"heart love"},{label:"Music",query:"music note"},{label:"Sports",query:"sport ball"},{label:"Tech",query:"computer phone"},{label:"Finance",query:"money dollar"},{label:"Medical",query:"medical health"}],Yw=[{label:"People",query:"person"},{label:"Faces",query:"face"},{label:"Cats",query:"cat"},{label:"Food",query:"food"},{label:"Nature",query:"flower"},{label:"Sports",query:"sport"},{label:"Travel",query:"airplane"},{label:"Objects",query:"gift"},{label:"Hands",query:"hand"},{label:"Hearts",query:"heart"},{label:"Flags",query:"flag"},{label:"Music",query:"music"}],Xw=[{label:"People",query:"people team"},{label:"Business",query:"business work"},{label:"Technology",query:"technology coding"},{label:"Social",query:"social media"},{label:"Education",query:"education learning"},{label:"Creative",query:"creative design"},{label:"Finance",query:"finance money"},{label:"Health",query:"health fitness"},{label:"Nature",query:"nature environment"},{label:"Shopping",query:"shopping ecommerce"},{label:"Travel",query:"travel adventure"},{label:"Communication",query:"chat message"}],Pw="noto,fluent-emoji-flat,twemoji,openmoji";function Iw({onAddElement:u}){const[t,n]=tt.useState("icons"),i=tt.useRef("icons"),a=Be(Y=>Y.t),o=Be(Y=>Y.locale),[c,h]=tt.useState(""),[d,f]=tt.useState([]),[p,x]=tt.useState([]),[v,b]=tt.useState(!1),[w,_]=tt.useState(!1),[k,C]=tt.useState(null),O=tt.useRef(null),M=tt.useRef(null);tt.useEffect(()=>{i.current=t},[t]);const X=tt.useCallback(async(Y,rt)=>{var pt;if(!Y.trim()){f([]),_(!1);return}(pt=M.current)==null||pt.abort();const et=new AbortController;M.current=et,b(!0),_(!0);try{let A=`${Sd}/search?query=${encodeURIComponent(Y)}&limit=${Hw}`;rt&&(A+=`&prefixes=${rt}`);const j=await fetch(A,{signal:et.signal});if(!j.ok)throw new Error("Search failed");const R=await j.json();f(R.icons||[])}catch(A){A.name!=="AbortError"&&f([])}finally{b(!1)}},[]),I=tt.useCallback(async Y=>{var et;if(!Y.trim()){x([]),_(!1);return}(et=M.current)==null||et.abort();const rt=new AbortController;M.current=rt,b(!0),_(!0);try{const pt=`https://undraw.co/api/search?q=${encodeURIComponent(Y)}`,A=await sf(pt,{signal:rt.signal});if(!A.ok)throw new Error("Search failed");const j=await A.json();x((j.results||[]).slice(0,30))}catch(pt){pt.name!=="AbortError"&&x([])}finally{b(!1)}},[]),$=tt.useCallback(async Y=>{var pt;const rt=i.current,et=o!=="en"?await Uw(Y,o,((pt=M.current)==null?void 0:pt.signal)??void 0):Y;rt==="icons"?X(et):rt==="stickers"?X(et,Pw):I(et)},[X,I,o]),V=tt.useCallback(Y=>{h(Y),C(null),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>$(Y),400)},[$]),B=tt.useCallback(Y=>{h(Y.query),C(Y.label),$(Y.query)},[$]),z=tt.useCallback(Y=>{i.current=Y,n(Y),f([]),x([]),_(!1),C(null),h("")},[]),Q=tt.useCallback(async Y=>{const[rt,...et]=Y.split(":"),pt=et.join(":");try{const A=await fetch(`${Sd}/${rt}/${pt}.svg?height=256`);if(!A.ok)throw new Error("Failed to fetch SVG");const j=await A.text(),R=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(j)))}`;u(R)}catch{}},[u]),ct=tt.useCallback(async Y=>{try{const rt=await sf(Y.media);if(!rt.ok)return;const et=await rt.text();if(!et.includes("<svg"))return;const pt=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(et)))}`;u(pt)}catch{}},[u]);tt.useEffect(()=>()=>{var Y;(Y=M.current)==null||Y.abort(),O.current&&clearTimeout(O.current)},[]);const L=Y=>{const[rt,...et]=Y.split(":"),pt=et.join(":");return`${Sd}/${rt}/${pt}.svg?height=48`},P=t==="icons"?Fw:t==="stickers"?Yw:Xw,E=t==="illustrations"?p.length>0:d.length>0,q=a(t==="icons"?"elementsBrowser.searchIcons":t==="stickers"?"elementsBrowser.searchStickers":"elementsBrowser.searchIllustrations"),K={Arrows:"elementsBrowser.arrows",Social:"elementsBrowser.social",Business:"elementsBrowser.business",People:"elementsBrowser.people",Nature:"elementsBrowser.nature",Food:"elementsBrowser.food",Travel:"elementsBrowser.travel",Weather:"elementsBrowser.weather",Shapes:"elementsBrowser.shapes",Stars:"elementsBrowser.stars",Hearts:"elementsBrowser.hearts",Music:"elementsBrowser.music",Sports:"elementsBrowser.sports",Tech:"elementsBrowser.tech",Finance:"elementsBrowser.finance",Medical:"elementsBrowser.medical",Faces:"elementsBrowser.faces",Cats:"elementsBrowser.cats",Objects:"elementsBrowser.objects",Hands:"elementsBrowser.hands",Flags:"elementsBrowser.flags",Technology:"elementsBrowser.technology",Education:"elementsBrowser.education",Creative:"elementsBrowser.creative",Health:"elementsBrowser.health",Shopping:"elementsBrowser.shopping",Communication:"elementsBrowser.communication"};return g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[{key:"icons",label:a("elementsBrowser.icons")},{key:"stickers",label:a("elementsBrowser.stickers")},{key:"illustrations",label:a("elementsBrowser.illustrations")}].map(Y=>g.jsx("button",{type:"button",onClick:()=>z(Y.key),className:`flex-1 py-2 sm:py-1.5 text-xs sm:text-[11px] font-medium transition-colors ${t===Y.key?"bg-indigo-500 text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:Y.label},Y.key))}),g.jsxs("div",{className:"relative",children:[g.jsx(yx,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400"}),g.jsx("input",{type:"text",value:c,onChange:Y=>V(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&$(c)},placeholder:q,className:"w-full pl-8 pr-3 py-2.5 sm:py-1.5 min-h-[44px] sm:min-h-0 rounded-lg border border-gray-200 text-sm sm:text-xs focus:outline-none focus:ring-1 focus:ring-indigo-300 bg-gray-50"}),v&&g.jsx(Gc,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-indigo-400 animate-spin"})]}),!w&&g.jsx("div",{className:"flex flex-wrap gap-1",children:P.map(Y=>g.jsx("button",{type:"button",onClick:()=>B(Y),className:`px-2.5 py-1.5 sm:py-0.5 rounded-full text-[11px] sm:text-[10px] font-medium transition-colors ${k===Y.label?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-gray-50 text-gray-500 border border-gray-200 hover:bg-gray-100"}`,children:a(K[Y.label]||Y.label)},Y.label))}),w&&!v&&!E&&g.jsx("p",{className:"text-xs text-gray-400 text-center py-4",children:a("elementsBrowser.noResults")}),(t==="icons"||t==="stickers")&&d.length>0&&g.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:d.map(Y=>g.jsx("button",{type:"button",onClick:()=>Q(Y),className:"aspect-square flex items-center justify-center rounded-lg border border-gray-200 bg-white hover:border-indigo-300 hover:bg-indigo-50 transition-all p-2 group",title:Y,children:g.jsx("img",{src:L(Y),alt:Y,className:"w-full h-full object-contain opacity-70 group-hover:opacity-100 transition-opacity pointer-events-none",loading:"lazy",draggable:!1})},Y))}),t==="illustrations"&&p.length>0&&g.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(Y=>g.jsxs("button",{type:"button",onClick:()=>ct(Y),className:"flex flex-col items-center gap-1 p-2 rounded-lg border border-gray-200 bg-white hover:border-indigo-300 hover:bg-indigo-50 transition-all group",title:Y.title,children:[g.jsx("div",{className:"w-full aspect-square flex items-center justify-center overflow-hidden",children:g.jsx("img",{src:Y.media,alt:Y.title,className:"w-full h-full object-contain opacity-80 group-hover:opacity-100 transition-opacity pointer-events-none",loading:"lazy",draggable:!1})}),g.jsx("span",{className:"text-[10px] text-gray-500 group-hover:text-indigo-600 truncate w-full text-center leading-tight",children:Y.title})]},Y._id))}),!w&&!E&&g.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:[t==="icons"&&a("elementsBrowser.iconsFooter"),t==="stickers"&&a("elementsBrowser.stickersFooter"),t==="illustrations"&&a("elementsBrowser.illustrationsFooter")]})]})}const Gw=[{key:"ig-square",platform:"Instagram",label:"Post Square",w:1080,h:1080},{key:"ig-portrait",platform:"Instagram",label:"Post Portrait",w:1080,h:1350},{key:"ig-landscape",platform:"Instagram",label:"Post Landscape",w:1080,h:566},{key:"ig-story",platform:"Instagram",label:"Story / Reel",w:1080,h:1920},{key:"fb-post",platform:"Facebook",label:"Post",w:1080,h:1350},{key:"fb-link",platform:"Facebook",label:"Link Preview",w:1200,h:630},{key:"fb-cover",platform:"Facebook",label:"Cover Photo",w:1640,h:924},{key:"li-square",platform:"LinkedIn",label:"Post Square",w:1200,h:1200},{key:"li-portrait",platform:"LinkedIn",label:"Post Portrait",w:1200,h:1500},{key:"li-banner",platform:"LinkedIn",label:"Banner",w:1584,h:396},{key:"x-post",platform:"X",label:"Post",w:1200,h:675},{key:"x-header",platform:"X",label:"Header",w:1500,h:500},{key:"tt-video",platform:"TikTok",label:"Video / Post",w:1080,h:1920},{key:"pin-standard",platform:"Pinterest",label:"Standard Pin",w:1e3,h:1500},{key:"yt-thumb",platform:"YouTube",label:"Thumbnail",w:1280,h:720},{key:"yt-banner",platform:"YouTube",label:"Channel Banner",w:2560,h:1440}];function dy({onAddText:u,onAddImageFromSrc:t,onSetBackground:n,onCanvasResize:i,onAddPlaceholder:a}){var F,H;const o=It(N=>N.csvData),c=It(N=>N.toggleColumnType),h=It(N=>N.templateConfig),d=tt.useRef(null),[f,p]=tt.useState(h.background.type),[x,v]=tt.useState(h.background.color??"#ffffff"),[b,w]=tt.useState(((F=h.background.gradientColors)==null?void 0:F[0])??"#ffffff"),[_,k]=tt.useState(((H=h.background.gradientColors)==null?void 0:H[1])??"#000000"),[C,O]=tt.useState(h.background.gradientDirection??"horizontal"),[M,X]=tt.useState(1),[I,$]=tt.useState(h.background.imageSrc??null),[V,B]=tt.useState(h.width),[z,Q]=tt.useState(h.height),[ct,L]=tt.useState(null),[P,E]=tt.useState("All"),q=(o==null?void 0:o.headers)??[],K=It(N=>N.uploadedImages),Y=It(N=>N.addUploadedImage),rt=It(N=>N.removeUploadedImage),[et,pt]=tt.useState(""),[A,j]=tt.useState(!1),[R,Z]=tt.useState(""),W=Be(N=>N.t);function _t(N,D,G){N.dataTransfer.setData("text/plain",D),N.dataTransfer.setData("application/x-column-type",G),N.dataTransfer.effectAllowed="copy"}function xt(N){const D=N.target.files;if(D){for(let G=0;G<D.length;G++){const ut=D[G],yt=new FileReader;yt.onload=()=>{Y(yt.result)},yt.readAsDataURL(ut)}N.target.value=""}}function bt(){const N=et.trim();if(!N)return;j(!0),Z("");const D=new Image;D.crossOrigin="anonymous",D.onload=()=>{Y(N),pt(""),j(!1)},D.onerror=()=>{Z(W("assetPanel.couldNotLoad")),j(!1)},D.src=N}function Ct(N){t==null||t(N)}function ot(N){var G;const D=(G=N.target.files)==null?void 0:G[0];if(D){const ut=new FileReader;ut.onload=()=>{const yt=ut.result;$(yt),n({type:"image",imageSrc:yt})},ut.readAsDataURL(D),N.target.value=""}}function St(N){v(N),n({type:"solid",color:N})}function At(N=b,D=_,G=C){n({type:"gradient",gradientColors:[N,D],gradientDirection:G})}function dt(N){const D=parseInt(N,10);!isNaN(D)&&D>0&&(B(D),i(D,z))}function S(N){const D=parseInt(N,10);!isNaN(D)&&D>0&&(Q(D),i(V,D))}return g.jsxs("div",{className:"flex flex-col gap-4 p-3 overflow-y-auto h-full text-sm",children:[g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[g.jsx(Nc,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h3",{className:"font-semibold text-gray-700 text-xs uppercase tracking-wide",children:W("assetPanel.csvColumns")})]}),q.length===0?g.jsx("p",{className:"text-xs text-gray-400",children:W("assetPanel.noCsvLoaded")}):g.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(N=>g.jsxs("div",{draggable:"true",onDragStart:D=>_t(D,N.name,N.type),onClick:()=>a==null?void 0:a(N.name,N.type),role:"button",tabIndex:0,onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(a==null||a(N.name,N.type))},className:`inline-flex items-center gap-1 px-3 py-2 min-h-[44px] sm:min-h-0 sm:px-2 sm:py-1 rounded-md text-sm sm:text-xs font-medium cursor-grab active:cursor-grabbing border select-none ${N.type==="image"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-blue-50 text-blue-700 border-blue-200"}`,children:[g.jsx(I2,{className:"w-3 h-3 opacity-40"}),`{${N.name}}`,g.jsx("span",{role:"button",tabIndex:0,title:W("common.clickToToggleType"),onClick:D=>{D.stopPropagation(),c(N.name)},onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(D.stopPropagation(),c(N.name))},className:`ml-0.5 text-[10px] px-1 rounded cursor-pointer hover:ring-1 hover:ring-offset-1 transition-all ${N.type==="image"?"bg-emerald-200/60 text-emerald-600 hover:ring-emerald-400":"bg-blue-200/60 text-blue-600 hover:ring-blue-400"}`,children:N.type==="image"?W("common.image"):W("common.text")})]},N.name))})]}),g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[g.jsx(sa,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h3",{className:"font-semibold text-gray-700 text-xs uppercase tracking-wide",children:W("assetPanel.addElements")})]}),g.jsx("div",{className:"flex flex-col gap-1.5",children:g.jsx(ys,{text:W("assetPanel.addText"),children:g.jsxs("button",{onClick:u,className:"flex items-center gap-2 w-full px-3 py-3 sm:py-2 min-h-[44px] sm:min-h-0 rounded-lg border border-gray-200 bg-gray-50 hover:bg-indigo-50 hover:border-indigo-200 transition-colors text-sm sm:text-xs font-medium text-gray-700",children:[g.jsx(sa,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5"}),W("assetPanel.addTextBtn")]})})})]}),g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[g.jsx(R_,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h3",{className:"font-semibold text-gray-700 text-xs uppercase tracking-wide",children:W("assetPanel.elements")})]}),g.jsx(Iw,{onAddElement:N=>t==null?void 0:t(N)})]}),g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[g.jsx(bs,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h3",{className:"font-semibold text-gray-700 text-xs uppercase tracking-wide",children:W("assetPanel.imageLibrary")})]}),g.jsxs("div",{className:"flex flex-col gap-1.5 mb-2",children:[g.jsxs("label",{className:"flex items-center gap-2 w-full px-3 py-2.5 sm:py-1.5 min-h-[44px] sm:min-h-0 rounded-lg border border-dashed border-gray-300 hover:border-indigo-300 transition-colors text-sm sm:text-xs font-medium text-gray-500 cursor-pointer",children:[g.jsx(Q0,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5"}),W("assetPanel.uploadImages"),g.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:xt})]}),g.jsxs("div",{className:"flex gap-1",children:[g.jsxs("div",{className:"flex-1 relative",children:[g.jsx(t_,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400"}),g.jsx("input",{type:"text",value:et,onChange:N=>{pt(N.target.value),Z("")},onKeyDown:N=>{N.key==="Enter"&&bt()},placeholder:W("assetPanel.pasteImageUrl"),className:"w-full pl-7 pr-2 py-2 sm:py-1.5 min-h-[44px] sm:min-h-0 rounded-md border border-gray-200 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-300"})]}),g.jsx("button",{type:"button",onClick:bt,disabled:!et.trim()||A,className:"px-3 py-2 sm:py-1.5 min-h-[44px] sm:min-h-0 rounded-md bg-indigo-500 text-white text-xs font-medium hover:bg-indigo-600 disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:A?"...":W("assetPanel.add")})]}),R&&g.jsx("p",{className:"text-[10px] text-red-500",children:R})]}),K.length>0?g.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:K.map((N,D)=>g.jsxs("div",{className:"relative group aspect-square rounded-lg border border-gray-200 overflow-hidden cursor-pointer hover:border-indigo-300 hover:ring-1 hover:ring-indigo-200 transition-all",onClick:()=>Ct(N),role:"button",tabIndex:0,onKeyDown:G=>{G.key==="Enter"&&Ct(N)},children:[g.jsx("img",{src:N,alt:`Library image ${D+1}`,className:"w-full h-full object-cover",crossOrigin:"anonymous"}),g.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),rt(N)},className:"absolute top-0.5 right-0.5 p-0.5 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity",title:W("assetPanel.removeFromLibrary"),children:g.jsx(xx,{className:"w-3 h-3"})})]},D))}):g.jsx("p",{className:"text-xs text-gray-400",children:W("assetPanel.noImagesYet")})]}),g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[g.jsx(px,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h3",{className:"font-semibold text-gray-700 text-xs uppercase tracking-wide",children:W("assetPanel.canvasSize")})]}),g.jsxs("div",{className:"mb-2",children:[g.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-1 mb-1.5",children:["All","Instagram","Facebook","LinkedIn","X","TikTok","Pinterest","YouTube"].map(N=>g.jsx("button",{type:"button",onClick:()=>E(N),className:`px-3 py-1.5 sm:px-2 sm:py-0.5 rounded-full text-xs sm:text-[10px] font-medium transition-colors ${P===N?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-gray-50 text-gray-500 border border-gray-200 hover:bg-gray-100"}`,children:N},N))}),g.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Gw.filter(N=>P==="All"||N.platform===P).map(N=>{const D=ct===N.key,G=36,ut=Math.min(G/N.w,G/N.h),yt=Math.round(N.w*ut),st=Math.round(N.h*ut);return g.jsxs("button",{type:"button",onClick:()=>{L(N.key),B(N.w),Q(N.h),i(N.w,N.h)},className:`flex flex-col items-center gap-1 p-1.5 rounded-lg border transition-colors ${D?"border-indigo-400 bg-indigo-50 ring-1 ring-indigo-300":"border-gray-200 bg-white hover:border-gray-300 hover:bg-gray-50"}`,title:`${N.label} (${N.w}${N.h})`,children:[g.jsx("div",{className:`rounded-sm ${D?"border-indigo-400 bg-indigo-200":"border-gray-300 bg-gray-100"}`,style:{width:yt,height:st,border:"1.5px solid",borderColor:D?"#818cf8":"#d1d5db"}}),g.jsx("span",{className:`text-[9px] font-medium leading-tight text-center ${D?"text-indigo-700":"text-gray-600"}`,children:N.label}),g.jsxs("span",{className:"text-[8px] text-gray-400 leading-none",children:[N.w,"",N.h]})]},N.key)})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-[10px] text-gray-500 uppercase mb-0.5 block",children:W("assetPanel.width")}),g.jsx("input",{type:"number",min:1,value:V,onChange:N=>{dt(N.target.value),L(null)},className:"w-full px-2 py-1.5 rounded-md border border-gray-200 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-300"})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-[10px] text-gray-500 uppercase mb-0.5 block",children:W("assetPanel.height")}),g.jsx("input",{type:"number",min:1,value:z,onChange:N=>{S(N.target.value),L(null)},className:"w-full px-2 py-1.5 rounded-md border border-gray-200 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-300"})]})]})]}),g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[g.jsx($i,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h3",{className:"font-semibold text-gray-700 text-xs uppercase tracking-wide",children:W("assetPanel.background")})]}),g.jsx("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden mb-3",children:["solid","gradient","image"].map(N=>g.jsx("button",{onClick:()=>p(N),className:`flex-1 py-2.5 sm:py-1.5 min-h-[44px] sm:min-h-0 text-xs sm:text-[11px] font-medium capitalize transition-colors ${f===N?"bg-indigo-500 text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:W(`assetPanel.${N}`)},N))}),f==="solid"&&g.jsxs("div",{className:"flex flex-col items-center gap-2 px-4 sm:px-0",children:[g.jsx(Ni,{color:x,onChange:N=>{v(N),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>St(N),60)},style:{width:"100%",maxWidth:220,height:160}}),g.jsx("input",{type:"text",value:x,onChange:N=>St(N.target.value),className:"w-full max-w-[220px] px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 rounded-md border border-gray-200 text-sm sm:text-xs text-center font-mono focus:outline-none focus:ring-1 focus:ring-indigo-300"})]}),f==="gradient"&&g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsxs("select",{value:C,onChange:N=>{const D=N.target.value;O(D),At(b,_,D)},className:"w-full px-2 py-2 sm:py-1.5 min-h-[44px] sm:min-h-0 rounded-md border border-gray-200 text-sm sm:text-xs focus:outline-none focus:ring-1 focus:ring-indigo-300",children:[g.jsx("option",{value:"horizontal",children:W("assetPanel.horizontal")}),g.jsx("option",{value:"vertical",children:W("assetPanel.vertical")}),g.jsx("option",{value:"diagonal",children:W("assetPanel.diagonal")})]}),g.jsxs("div",{className:"flex gap-1.5",children:[g.jsxs("button",{onClick:()=>X(1),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 sm:py-1.5 min-h-[44px] sm:min-h-0 rounded-md text-xs sm:text-[11px] font-medium border ${M===1?"border-indigo-300 bg-indigo-50 text-indigo-700":"border-gray-200 text-gray-600"}`,children:[g.jsx("span",{className:"w-4 h-4 sm:w-3 sm:h-3 rounded-sm border border-gray-300",style:{backgroundColor:b}}),W("assetPanel.color1")]}),g.jsxs("button",{onClick:()=>X(2),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 sm:py-1.5 min-h-[44px] sm:min-h-0 rounded-md text-xs sm:text-[11px] font-medium border ${M===2?"border-indigo-300 bg-indigo-50 text-indigo-700":"border-gray-200 text-gray-600"}`,children:[g.jsx("span",{className:"w-4 h-4 sm:w-3 sm:h-3 rounded-sm border border-gray-300",style:{backgroundColor:_}}),W("assetPanel.color2")]})]}),g.jsx("div",{className:"px-4 sm:px-0 flex justify-center",children:g.jsx(Ni,{color:M===1?b:_,onChange:N=>{M===1?w(N):k(N),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{M===1?At(N,_,C):At(b,N,C)},60)},style:{width:"100%",maxWidth:220,height:160}})}),g.jsx("div",{className:"h-6 rounded-md border border-gray-200",style:{background:C==="horizontal"?`linear-gradient(to right, ${b}, ${_})`:C==="vertical"?`linear-gradient(to bottom, ${b}, ${_})`:`linear-gradient(135deg, ${b}, ${_})`}})]}),f==="image"&&g.jsxs("div",{className:"flex flex-col gap-2.5",children:[g.jsxs("label",{className:"flex items-center justify-center gap-2 w-full px-3 py-4 sm:py-3 min-h-[44px] sm:min-h-0 rounded-lg border-2 border-dashed border-gray-300 hover:border-indigo-300 transition-colors text-sm sm:text-xs font-medium text-gray-500 cursor-pointer",children:[g.jsx(Q0,{className:"w-5 h-5 sm:w-4 sm:h-4"}),W(I?"assetPanel.replaceBackgroundImage":"assetPanel.uploadBackgroundImage"),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ot})]}),I&&g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-[10px] text-gray-400 text-center",children:W("assetPanel.bgImageHint")}),g.jsx("button",{type:"button",onClick:()=>{$(null),n({type:"solid",color:x})},className:"text-[11px] text-red-500 hover:text-red-600 font-medium text-center",children:W("assetPanel.removeBackgroundImage")})]})]})]})]})}function it(u,t,n){return(t=(function(i){var a=(function(o,c){if(typeof o!="object"||!o)return o;var h=o[Symbol.toPrimitive];if(h!==void 0){var d=h.call(o,c);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(o)})(i,"string");return typeof a=="symbol"?a:a+""})(t))in u?Object.defineProperty(u,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[t]=n,u}function fy(u,t){var n=Object.keys(u);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(u);t&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(u,a).enumerable}))),n.push.apply(n,i)}return n}function at(u){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fy(Object(n),!0).forEach((function(i){it(u,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(n)):fy(Object(n)).forEach((function(i){Object.defineProperty(u,i,Object.getOwnPropertyDescriptor(n,i))}))}return u}function Ce(u,t){if(u==null)return{};var n,i,a=(function(c,h){if(c==null)return{};var d={};for(var f in c)if({}.hasOwnProperty.call(c,f)){if(h.indexOf(f)>=0)continue;d[f]=c[f]}return d})(u,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(u,n)&&(a[n]=u[n])}return a}function ws(u,t){return t||(t=u.slice(0)),Object.freeze(Object.defineProperties(u,{raw:{value:Object.freeze(t)}}))}class gy{constructor(){it(this,"browserShadowBlurConstant",1),it(this,"DPI",96),it(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),it(this,"perfLimitSizeTotal",2097152),it(this,"maxCacheSideLimit",4096),it(this,"minCacheSideLimit",256),it(this,"disableStyleCopyPaste",!1),it(this,"enableGLFiltering",!0),it(this,"textureSize",4096),it(this,"forceGLPutImageData",!1),it(this,"cachesBoundsOfCurve",!1),it(this,"fontPaths",{}),it(this,"NUM_FRACTION_DIGITS",4)}}const ie=new class extends gy{constructor(u){super(),this.configure(u)}configure(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,u)}addFonts(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=at(at({},this.fontPaths),u)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach((u=>{delete this.fontPaths[u]}))}clearFonts(){this.fontPaths={}}restoreDefaults(u){const t=new gy,n=(u==null?void 0:u.reduce(((i,a)=>(i[a]=t[a],i)),{}))||t;this.configure(n)}},Di=function(u){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return console[u]("fabric",...n)};class vs extends Error{constructor(t,n){super("fabric: ".concat(t),n)}}class Vw extends vs{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class qw{}class Ww extends qw{testPrecision(t,n){const i="precision ".concat(n,` float;
void main(){}`),a=t.createShader(t.FRAGMENT_SHADER);return!!a&&(t.shaderSource(a,i),t.compileShader(a),!!t.getShaderParameter(a,t.COMPILE_STATUS))}queryWebGL(t){const n=t.getContext("webgl");n&&(this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((i=>this.testPrecision(n,i))),n.getExtension("WEBGL_lose_context").loseContext(),Di("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const Zw={};let my;const _s=()=>my||(my={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Ww,dispose(){},copyPasteData:Zw}),cr=()=>_s().document,qc=()=>_s().window,kx=()=>{var u;return Math.max((u=ie.devicePixelRatio)!==null&&u!==void 0?u:qc().devicePixelRatio,1)},go=new class{constructor(){it(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(u){let{fontFamily:t,fontStyle:n,fontWeight:i}=u;t=t.toLowerCase();const a=this.charWidthsCache;a.has(t)||a.set(t,new Map);const o=a.get(t),c="".concat(n.toLowerCase(),"_").concat((i+"").toLowerCase());return o.has(c)||o.set(c,new Map),o.get(c)}clearFontCache(u){u?this.charWidthsCache.delete((u||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(u){const{perfLimitSizeTotal:t}=ie,n=Math.sqrt(t*u);return[Math.floor(n),Math.floor(t/n)]}},af="6.9.1";function _c(){}const Oo=Math.PI/2,Mc=2*Math.PI,Cf=Math.PI/180,fn=Object.freeze([1,0,0,1,0,0]),Tf=16,ji=.4477152502,Zt="center",ce="left",Sn="top",rf="bottom",Re="right",Cn="none",jf=/\r?\n/,Ox="moving",Wc="scaling",Ex="rotating",kf="rotate",Nx="skewing",vo="resizing",Kw="modifyPoly",Qw="modifyPath",Rc="changed",Zc="scale",jn="scaleX",$n="scaleY",ur="skewX",hr="skewY",qe="fill",Tn="stroke",zc="modified",Ia="json",Cd="svg",Lt=new class{constructor(){this[Ia]=new Map,this[Cd]=new Map}has(u){return this[Ia].has(u)}getClass(u){const t=this[Ia].get(u);if(!t)throw new vs("No class registered for ".concat(u));return t}setClass(u,t){t?this[Ia].set(t,u):(this[Ia].set(u.type,u),this[Ia].set(u.type.toLowerCase(),u))}getSVGClass(u){return this[Cd].get(u)}setSVGClass(u,t){this[Cd].set(t??u.type.toLowerCase(),u)}},Bc=new class extends Array{remove(u){const t=this.indexOf(u);t>-1&&this.splice(t,1)}cancelAll(){const u=this.splice(0);return u.forEach((t=>t.abort())),u}cancelByCanvas(u){if(!u)return[];const t=this.filter((n=>{var i;return n.target===u||typeof n.target=="object"&&((i=n.target)===null||i===void 0?void 0:i.canvas)===u}));return t.forEach((n=>n.abort())),t}cancelByTarget(u){if(!u)return[];const t=this.filter((n=>n.target===u));return t.forEach((n=>n.abort())),t}};class Jw{constructor(){it(this,"__eventListeners",{})}on(t,n){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach((i=>{let[a,o]=i;this.on(a,o)})),()=>this.off(t);if(n){const i=t;return this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(n),()=>this.off(i,n)}return()=>!1}once(t,n){if(typeof t=="object"){const i=[];return Object.entries(t).forEach((a=>{let[o,c]=a;i.push(this.once(o,c))})),()=>i.forEach((a=>a()))}if(n){const i=this.on(t,(function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];n.call(this,...o),i()}));return i}return()=>!1}_removeEventListener(t,n){if(this.__eventListeners[t])if(n){const i=this.__eventListeners[t],a=i.indexOf(n);a>-1&&i.splice(a,1)}else this.__eventListeners[t]=[]}off(t,n){if(this.__eventListeners)if(t===void 0)for(const i in this.__eventListeners)this._removeEventListener(i);else typeof t=="object"?Object.entries(t).forEach((i=>{let[a,o]=i;this._removeEventListener(a,o)})):this._removeEventListener(t,n)}fire(t,n){var i;if(!this.__eventListeners)return;const a=(i=this.__eventListeners[t])===null||i===void 0?void 0:i.concat();if(a)for(let o=0;o<a.length;o++)a[o].call(this,n||{})}}const Ka=(u,t)=>{const n=u.indexOf(t);return n!==-1&&u.splice(n,1),u},Ws=u=>{if(u===0)return 1;switch(Math.abs(u)/Oo){case 1:case 3:return 0;case 2:return-1}return Math.cos(u)},Zs=u=>{if(u===0)return 0;const t=u/Oo,n=Math.sign(u);switch(t){case 1:return n;case 2:return 0;case 3:return-n}return Math.sin(u)};class mt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=n)}add(t){return new mt(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new mt(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new mt(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new mt(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new mt(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new mt(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new mt(this.x/t.x,this.y/t.y)}scalarDivide(t){return new mt(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return n=Math.max(Math.min(1,n),0),new mt(this.x+(t.x-this.x)*n,this.y+(t.y-this.y)*n)}distanceFrom(t){const n=this.x-t.x,i=this.y-t.y;return Math.sqrt(n*n+i*i)}midPointFrom(t){return this.lerp(t)}min(t){return new mt(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new mt(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,n){return this.x=t,this.y=n,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const n=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=n,t.y=i}clone(){return new mt(this.x,this.y)}rotate(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Of;const i=Zs(t),a=Ws(t),o=this.subtract(n);return new mt(o.x*a-o.y*i,o.x*i+o.y*a).add(n)}transform(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new mt(t[0]*this.x+t[2]*this.y+(n?0:t[4]),t[1]*this.x+t[3]*this.y+(n?0:t[5]))}}const Of=new mt(0,0),wc=u=>!!u&&Array.isArray(u._objects);function Dx(u){class t extends u{constructor(){super(...arguments),it(this,"_objects",[])}_onObjectAdded(i){}_onObjectRemoved(i){}_onStackOrderChanged(i){}add(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];const c=this._objects.push(...a);return a.forEach((h=>this._onObjectAdded(h))),c}insertAt(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];return this._objects.splice(i,0,...o),o.forEach((h=>this._onObjectAdded(h))),this._objects.length}remove(){const i=this._objects,a=[];for(var o=arguments.length,c=new Array(o),h=0;h<o;h++)c[h]=arguments[h];return c.forEach((d=>{const f=i.indexOf(d);f!==-1&&(i.splice(f,1),a.push(d),this._onObjectRemoved(d))})),a}forEachObject(i){this.getObjects().forEach(((a,o,c)=>i(a,o,c)))}getObjects(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return a.length===0?[...this._objects]:this._objects.filter((c=>c.isType(...a)))}item(i){return this._objects[i]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(i,a){return!!this._objects.includes(i)||!!a&&this._objects.some((o=>o instanceof t&&o.contains(i,!0)))}complexity(){return this._objects.reduce(((i,a)=>i+=a.complexity?a.complexity():0),0)}sendObjectToBack(i){return!(!i||i===this._objects[0])&&(Ka(this._objects,i),this._objects.unshift(i),this._onStackOrderChanged(i),!0)}bringObjectToFront(i){return!(!i||i===this._objects[this._objects.length-1])&&(Ka(this._objects,i),this._objects.push(i),this._onStackOrderChanged(i),!0)}sendObjectBackwards(i,a){if(!i)return!1;const o=this._objects.indexOf(i);if(o!==0){const c=this.findNewLowerIndex(i,o,a);return Ka(this._objects,i),this._objects.splice(c,0,i),this._onStackOrderChanged(i),!0}return!1}bringObjectForward(i,a){if(!i)return!1;const o=this._objects.indexOf(i);if(o!==this._objects.length-1){const c=this.findNewUpperIndex(i,o,a);return Ka(this._objects,i),this._objects.splice(c,0,i),this._onStackOrderChanged(i),!0}return!1}moveObjectTo(i,a){return i!==this._objects[a]&&(Ka(this._objects,i),this._objects.splice(a,0,i),this._onStackOrderChanged(i),!0)}findNewLowerIndex(i,a,o){let c;if(o){c=a;for(let h=a-1;h>=0;--h)if(i.isOverlapping(this._objects[h])){c=h;break}}else c=a-1;return c}findNewUpperIndex(i,a,o){let c;if(o){c=a;for(let h=a+1;h<this._objects.length;++h)if(i.isOverlapping(this._objects[h])){c=h;break}}else c=a+1;return c}collectObjects(i){let{left:a,top:o,width:c,height:h}=i,{includeIntersecting:d=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],p=new mt(a,o),x=p.add(new mt(c,h));for(let v=this._objects.length-1;v>=0;v--){const b=this._objects[v];b.selectable&&b.visible&&(d&&b.intersectsWithRect(p,x)||b.isContainedWithinRect(p,x)||d&&b.containsPoint(p)||d&&b.containsPoint(x))&&f.push(b)}return f}}return t}class Ax extends Jw{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const n in t)this.set(n,t[n])}_setObject(t){for(const n in t)this._set(n,t[n])}set(t,n){return typeof t=="object"?this._setObject(t):this._set(t,n),this}_set(t,n){this[t]=n}toggle(t){const n=this.get(t);return typeof n=="boolean"&&this.set(t,!n),this}get(t){return this[t]}}function Sc(u){return qc().requestAnimationFrame(u)}function $w(u){return qc().cancelAnimationFrame(u)}let tS=0;const Ai=()=>tS++,Ks=()=>{const u=cr().createElement("canvas");if(!u||u.getContext===void 0)throw new vs("Failed to create `canvas` element");return u},eS=()=>cr().createElement("img"),ts=u=>{const t=Ks();return t.width=u.width,t.height=u.height,t},Mx=(u,t,n)=>u.toDataURL("image/".concat(t),n),Rx=(u,t,n)=>new Promise(((i,a)=>{u.toBlob(i,"image/".concat(t),n)})),ze=u=>u*Cf,Qs=u=>u/Cf,nS=u=>u.every(((t,n)=>t===fn[n])),wn=(u,t,n)=>new mt(u).transform(t,n),ls=u=>{const t=1/(u[0]*u[3]-u[1]*u[2]),n=[t*u[3],-t*u[1],-t*u[2],t*u[0],0,0],{x:i,y:a}=new mt(u[4],u[5]).transform(n,!0);return n[4]=-i,n[5]=-a,n},sn=(u,t,n)=>[u[0]*t[0]+u[2]*t[1],u[1]*t[0]+u[3]*t[1],u[0]*t[2]+u[2]*t[3],u[1]*t[2]+u[3]*t[3],n?0:u[0]*t[4]+u[2]*t[5]+u[4],n?0:u[1]*t[4]+u[3]*t[5]+u[5]],Ef=(u,t)=>u.reduceRight(((n,i)=>i&&n?sn(i,n,t):i||n),void 0)||fn.concat(),zx=u=>{let[t,n]=u;return Math.atan2(n,t)},Lc=u=>{const t=zx(u),n=Math.pow(u[0],2)+Math.pow(u[1],2),i=Math.sqrt(n),a=(u[0]*u[3]-u[2]*u[1])/i,o=Math.atan2(u[0]*u[2]+u[1]*u[3],n);return{angle:Qs(t),scaleX:i,scaleY:a,skewX:Qs(o),skewY:0,translateX:u[4]||0,translateY:u[5]||0}},Eo=function(u){return[1,0,0,1,u,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function dr(){let{angle:u=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:n=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=ze(u),a=Ws(i),o=Zs(i);return[a,o,-o,a,t?t-(a*t-o*n):0,n?n-(o*t+a*n):0]}const Nf=function(u){return[u,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,0,0]},Bx=u=>Math.tan(ze(u)),Lx=u=>[1,0,Bx(u),1,0,0],Ux=u=>[1,Bx(u),0,1,0,0],Kc=u=>{let{scaleX:t=1,scaleY:n=1,flipX:i=!1,flipY:a=!1,skewX:o=0,skewY:c=0}=u,h=Nf(i?-t:t,a?-n:n);return o&&(h=sn(h,Lx(o),!0)),c&&(h=sn(h,Ux(c),!0)),h},sS=u=>{const{translateX:t=0,translateY:n=0,angle:i=0}=u;let a=Eo(t,n);i&&(a=sn(a,dr({angle:i})));const o=Kc(u);return nS(o)||(a=sn(a,o)),a},Cc=function(u){let{signal:t,crossOrigin:n=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((function(i,a){if(t&&t.aborted)return a(new Vw("loadImage"));const o=eS();let c;t&&(c=function(d){o.src="",a(d)},t.addEventListener("abort",c,{once:!0}));const h=function(){o.onload=o.onerror=null,c&&(t==null||t.removeEventListener("abort",c)),i(o)};u?(o.onload=h,o.onerror=function(){c&&(t==null||t.removeEventListener("abort",c)),a(new vs("Error loading ".concat(o.src)))},n&&(o.crossOrigin=n),o.src=u):h()}))},bo=function(u){let{signal:t,reviver:n=_c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((i,a)=>{const o=[];t&&t.addEventListener("abort",a,{once:!0}),Promise.all(u.map((c=>Lt.getClass(c.type).fromObject(c,{signal:t}).then((h=>(n(c,h),o.push(h),h)))))).then(i).catch((c=>{o.forEach((h=>{h.dispose&&h.dispose()})),a(c)})).finally((()=>{t&&t.removeEventListener("abort",a)}))}))},Qc=function(u){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((n,i)=>{const a=[];t&&t.addEventListener("abort",i,{once:!0});const o=Object.values(u).map((h=>h&&h.type&&Lt.has(h.type)?bo([h],{signal:t}).then((d=>{let[f]=d;return a.push(f),f})):h)),c=Object.keys(u);Promise.all(o).then((h=>h.reduce(((d,f,p)=>(d[c[p]]=f,d)),{}))).then(n).catch((h=>{a.forEach((d=>{d.dispose&&d.dispose()})),i(h)})).finally((()=>{t&&t.removeEventListener("abort",i)}))}))},fr=function(u){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce(((t,n)=>(n in u&&(t[n]=u[n]),t)),{})},Df=(u,t)=>Object.keys(u).reduce(((n,i)=>(t(u[i],i,u)&&(n[i]=u[i]),n)),{}),be=(u,t)=>parseFloat(Number(u).toFixed(t)),_o=u=>"matrix("+u.map((t=>be(t,ie.NUM_FRACTION_DIGITS))).join(" ")+")",Qn=u=>!!u&&u.toLive!==void 0,py=u=>!!u&&typeof u.toObject=="function",yy=u=>!!u&&u.offsetX!==void 0&&"source"in u,Qi=u=>!!u&&"multiSelectionStacking"in u;function Hx(u){const t=u&&os(u);let n=0,i=0;if(!u||!t)return{left:n,top:i};let a=u;const o=t.documentElement,c=t.body||{scrollLeft:0,scrollTop:0};for(;a&&(a.parentNode||a.host)&&(a=a.parentNode||a.host,a===t?(n=c.scrollLeft||o.scrollLeft||0,i=c.scrollTop||o.scrollTop||0):(n+=a.scrollLeft||0,i+=a.scrollTop||0),a.nodeType!==1||a.style.position!=="fixed"););return{left:n,top:i}}const os=u=>u.ownerDocument||null,Fx=u=>{var t;return((t=u.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},Yx=function(u,t,n){let{width:i,height:a}=n,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;u.width=i,u.height=a,o>1&&(u.setAttribute("width",(i*o).toString()),u.setAttribute("height",(a*o).toString()),t.scale(o,o))},of=(u,t)=>{let{width:n,height:i}=t;n&&(u.style.width=typeof n=="number"?"".concat(n,"px"):n),i&&(u.style.height=typeof i=="number"?"".concat(i,"px"):i)};function xy(u){return u.onselectstart!==void 0&&(u.onselectstart=()=>!1),u.style.userSelect=Cn,u}class Xx{constructor(t){it(this,"_originalCanvasStyle",void 0),it(this,"lower",void 0);const n=this.createLowerCanvas(t);this.lower={el:n,ctx:n.getContext("2d")}}createLowerCanvas(t){const n=(i=t)&&i.getContext!==void 0?t:t&&cr().getElementById(t)||Ks();var i;if(n.hasAttribute("data-fabric"))throw new vs("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=n.style.cssText,n.setAttribute("data-fabric","main"),n.classList.add("lower-canvas"),n}cleanupDOM(t){let{width:n,height:i}=t;const{el:a}=this.lower;a.classList.remove("lower-canvas"),a.removeAttribute("data-fabric"),a.setAttribute("width","".concat(n)),a.setAttribute("height","".concat(i)),a.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,n){const{el:i,ctx:a}=this.lower;Yx(i,a,t,n)}setCSSDimensions(t){of(this.lower.el,t)}calcOffset(){return(function(t){var n;const i=t&&os(t),a={left:0,top:0};if(!i)return a;const o=((n=Fx(t))===null||n===void 0?void 0:n.getComputedStyle(t,null))||{};a.left+=parseInt(o.borderLeftWidth,10)||0,a.top+=parseInt(o.borderTopWidth,10)||0,a.left+=parseInt(o.paddingLeft,10)||0,a.top+=parseInt(o.paddingTop,10)||0;let c={left:0,top:0};const h=i.documentElement;t.getBoundingClientRect!==void 0&&(c=t.getBoundingClientRect());const d=Hx(t);return{left:c.left+d.left-(h.clientLeft||0)+a.left,top:c.top+d.top-(h.clientTop||0)+a.top}})(this.lower.el)}dispose(){_s().dispose(this.lower.el),delete this.lower}}const iS={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...fn]},aS=["objects"];class gr extends Dx(Ax){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return gr.ownDefaults}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(n),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new Xx(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];const o=super.insertAt(t,...i);return i.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(Di("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?kx():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,n){return this.setDimensions({width:t},n)}setHeight(t,n){return this.setDimensions({height:t},n)}_setDimensionsImpl(t){let{cssOnly:n=!1,backstoreOnly:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!n){const a=at({width:this.width,height:this.height},t);this.elements.setDimensions(a,this.getRetinaScaling()),this.hasLostContext=!0,this.width=a.width,this.height=a.height}i||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,n){this._setDimensionsImpl(t,n),n&&n.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,n){const i=t,a=[...this.viewportTransform],o=wn(t,ls(a));a[0]=n,a[3]=n;const c=wn(o,a);a[4]+=i.x-c.x,a[5]+=i.y-c.y,this.setViewportTransform(a)}setZoom(t){this.zoomToPoint(new mt(0,0),t)}absolutePan(t){const n=[...this.viewportTransform];return n[4]=-t.x,n[5]=-t.y,this.setViewportTransform(n)}relativePan(t){return this.absolutePan(new mt(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Sc((()=>this.renderAndReset())))}calcViewportBoundaries(){const t=this.width,n=this.height,i=ls(this.viewportTransform),a=wn({x:0,y:0},i),o=wn({x:t,y:n},i),c=a.min(o),h=a.max(o);return this.vptCoords={tl:c,tr:new mt(h.x,c.y),bl:new mt(c.x,h.y),br:h}}cancelRequestedRender(){this.nextRenderHandle&&($w(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,n){if(this.destroyed)return;const i=this.viewportTransform,a=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,n),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),a&&(a._set("canvas",this),a.shouldCache(),a._transformDone=!0,a.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,a)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,n){const i=this.viewportTransform;t.save(),t.transform(...i),t.globalCompositeOperation="destination-in",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()}_renderObjects(t,n){for(let i=0,a=n.length;i<a;++i)n[i]&&n[i].render(t)}_renderBackgroundOrOverlay(t,n){const i=this["".concat(n,"Color")],a=this["".concat(n,"Image")],o=this.viewportTransform,c=this["".concat(n,"Vpt")];if(!i&&!a)return;const h=Qn(i);if(i){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=h?i.toLive(t):i,c&&t.transform(...o),h){t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const d=i.gradientTransform||i.patternTransform;d&&t.transform(...d)}t.fill(),t.restore()}if(a){t.save();const{skipOffscreen:d}=this;this.skipOffscreen=c,c&&t.transform(...o),a.render(t),this.skipOffscreen=d,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new mt(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new mt(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new mt(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new mt(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new mt(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return wn(this.getCenterPoint(),ls(this.viewportTransform))}_centerObject(t,n){t.setXY(n,Zt,Zt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,n){const i=this.clipPath,a=i&&!i.excludeFromExport?this._toObject(i,t,n):null;return at(at(at({version:af},fr(this,n)),{},{objects:this._objects.filter((o=>!o.excludeFromExport)).map((o=>this._toObject(o,t,n)))},this.__serializeBgOverlay(t,n)),a?{clipPath:a}:null)}_toObject(t,n,i){let a;this.includeDefaultValues||(a=t.includeDefaultValues,t.includeDefaultValues=!1);const o=t[n](i);return this.includeDefaultValues||(t.includeDefaultValues=!!a),o}__serializeBgOverlay(t,n){const i={},a=this.backgroundImage,o=this.overlayImage,c=this.backgroundColor,h=this.overlayColor;return Qn(c)?c.excludeFromExport||(i.background=c.toObject(n)):c&&(i.background=c),Qn(h)?h.excludeFromExport||(i.overlay=h.toObject(n)):h&&(i.overlay=h),a&&!a.excludeFromExport&&(i.backgroundImage=this._toObject(a,t,n)),o&&!o.excludeFromExport&&(i.overlayImage=this._toObject(o,t,n)),i}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;t.reviver=n;const i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",n),this._setSVGObjects(i,n),this.clipPath&&i.push(`</g>
`),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",n),i.push("</svg>"),i.join("")}_setSVGPreamble(t,n){n.suppressPreamble||t.push('<?xml version="1.0" encoding="',n.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,n){const i=n.width||"".concat(this.width),a=n.height||"".concat(this.height),o=ie.NUM_FRACTION_DIGITS,c=n.viewBox;let h;if(c)h='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const d=this.viewportTransform;h='viewBox="'.concat(be(-d[4]/d[0],o)," ").concat(be(-d[5]/d[3],o)," ").concat(be(this.width/d[0],o)," ").concat(be(this.height/d[3],o),'" ')}else h='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',a,'" ',h,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",af,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(n),`</defs>
`)}createSVGClipPathMarkup(t){const n=this.clipPath;return n?(n.clipPathId="CLIPPATH_".concat(Ai()),'<clipPath id="'.concat(n.clipPathId,`" >
`).concat(n.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map((t=>{const n=this["".concat(t,"Color")];if(Qn(n)){const i=this["".concat(t,"Vpt")],a=this.viewportTransform,o={isType:()=>!1,width:this.width/(i?a[0]:1),height:this.height/(i?a[3]:1)};return n.toSVG(o,{additionalTransform:i?_o(a):""})}})).join("")}createSVGFontFacesMarkup(){const t=[],n={},i=ie.fontPaths;this._objects.forEach((function o(c){t.push(c),wc(c)&&c._objects.forEach(o)})),t.forEach((o=>{if(!(c=o)||typeof c._renderText!="function")return;var c;const{styles:h,fontFamily:d}=o;!n[d]&&i[d]&&(n[d]=!0,h&&Object.values(h).forEach((f=>{Object.values(f).forEach((p=>{let{fontFamily:x=""}=p;!n[x]&&i[x]&&(n[x]=!0)}))})))}));const a=Object.keys(n).map((o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(i[o],`');
		}
`))).join("");return a?`	<style type="text/css"><![CDATA[
`.concat(a,`]]></style>
`):""}_setSVGObjects(t,n){this.forEachObject((i=>{i.excludeFromExport||this._setSVGObject(t,i,n)}))}_setSVGObject(t,n,i){t.push(n.toSVG(i))}_setSVGBgOverlayImage(t,n,i){const a=this[n];a&&!a.excludeFromExport&&a.toSVG&&t.push(a.toSVG(i))}_setSVGBgOverlayColor(t,n){const i=this["".concat(n,"Color")];if(i)if(Qn(i)){const a=i.repeat||"",o=this.width,c=this.height,h=this["".concat(n,"Vpt")]?_o(ls(this.viewportTransform)):"";t.push('<rect transform="'.concat(h," translate(").concat(o/2,",").concat(c/2,')" x="').concat(i.offsetX-o/2,'" y="').concat(i.offsetY-c/2,'" width="').concat(a!=="repeat-y"&&a!=="no-repeat"||!yy(i)?o:i.source.width,'" height="').concat(a!=="repeat-x"&&a!=="no-repeat"||!yy(i)?c:i.source.height,'" fill="url(#SVGID_').concat(i.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',`></rect>
`)}loadFromJSON(t,n){let{signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new vs("`json` is undefined"));const a=typeof t=="string"?JSON.parse(t):t,{objects:o=[]}=a,c=Ce(a,aS),{backgroundImage:h,background:d,overlayImage:f,overlay:p,clipPath:x}=c,v=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([bo(o,{reviver:n,signal:i}),Qc({backgroundImage:h,backgroundColor:d,overlayImage:f,overlayColor:p,clipPath:x},{signal:i})]).then((b=>{let[w,_]=b;return this.clear(),this.add(...w),this.set(c),this.set(_),this.renderOnAddRemove=v,this}))}clone(t){const n=this.toObject(t);return this.cloneWithoutData().loadFromJSON(n)}cloneWithoutData(){const t=ts(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:n="png",quality:i=1,multiplier:a=1,enableRetinaScaling:o=!1}=t,c=a*(o?this.getRetinaScaling():1);return Mx(this.toCanvasElement(c,t),n,i)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:n="png",quality:i=1,multiplier:a=1,enableRetinaScaling:o=!1}=t,c=a*(o?this.getRetinaScaling():1);return Rx(this.toCanvasElement(c,t),n,i)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:n,height:i,left:a,top:o,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=(n||this.width)*t,d=(i||this.height)*t,f=this.getZoom(),p=this.width,x=this.height,v=this.skipControlsDrawing,b=f*t,w=this.viewportTransform,_=[b,0,0,b,(w[4]-(a||0))*t,(w[5]-(o||0))*t],k=this.enableRetinaScaling,C=ts({width:h,height:d}),O=c?this._objects.filter((M=>c(M))):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=h,this.height=d,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),O),this.viewportTransform=w,this.width=p,this.height=x,this.calcViewportBoundaries(),this.enableRetinaScaling=k,this.skipControlsDrawing=v,C}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Bc.cancelByCanvas(this),this.disposed=!0,new Promise(((t,n)=>{const i=()=>{this.destroy(),t(!0)};i.kill=n,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=i:i()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((t=>t.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}it(gr,"ownDefaults",iS);const rS=["touchstart","touchmove","touchend"],oS=u=>{const t=Hx(u.target),n=(function(i){const a=i.changedTouches;return a&&a[0]?a[0]:i})(u);return new mt(n.clientX+t.left,n.clientY+t.top)},lf=u=>rS.includes(u.type)||u.pointerType==="touch",vy=u=>{u.preventDefault(),u.stopPropagation()},Vs=u=>{let t=0,n=0,i=0,a=0;for(let o=0,c=u.length;o<c;o++){const{x:h,y:d}=u[o];(h>i||!o)&&(i=h),(h<t||!o)&&(t=h),(d>a||!o)&&(a=d),(d<n||!o)&&(n=d)}return{left:t,top:n,width:i-t,height:a-n}},lS=["translateX","translateY","scaleX","scaleY"],cS=(u,t)=>Uc(u,sn(t,u.calcOwnMatrix())),Uc=(u,t)=>{const n=Lc(t),{translateX:i,translateY:a,scaleX:o,scaleY:c}=n,h=Ce(n,lS),d=new mt(i,a);u.flipX=!1,u.flipY=!1,Object.assign(u,h),u.set({scaleX:o,scaleY:c}),u.setPositionByOrigin(d,Zt,Zt)},uS=u=>{u.scaleX=1,u.scaleY=1,u.skewX=0,u.skewY=0,u.flipX=!1,u.flipY=!1,u.rotate(0)},Px=u=>({scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,angle:u.angle,left:u.left,flipX:u.flipX,flipY:u.flipY,top:u.top}),Af=(u,t,n)=>{const i=u/2,a=t/2,o=[new mt(-i,-a),new mt(i,-a),new mt(-i,a),new mt(i,a)].map((h=>h.transform(n))),c=Vs(o);return new mt(c.width,c.height)},Jc=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fn;return sn(ls(arguments.length>1&&arguments[1]!==void 0?arguments[1]:fn),u)},er=function(u){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fn,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fn;return u.transform(Jc(t,n))},hS=function(u){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fn,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fn;return u.transform(Jc(t,n),!0)},dS=(u,t,n)=>{const i=Jc(t,n);return Uc(u,sn(i,u.calcOwnMatrix())),i},Ix=(u,t)=>{var n;const{transform:{target:i}}=t;(n=i.canvas)===null||n===void 0||n.fire("object:".concat(u),at(at({},t),{},{target:i})),i.fire(u,t)},fS={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Pe=u=>typeof u=="string"?fS[u]:u-.5,Hc="not-allowed";function Gx(u){return Pe(u.originX)===Pe(Zt)&&Pe(u.originY)===Pe(Zt)}function by(u){return .5-Pe(u)}const hs=(u,t)=>u[t],Vx=(u,t,n,i)=>({e:u,transform:t,pointer:new mt(n,i)});function qx(u,t){const n=u.getTotalAngle()+Qs(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function Mf(u,t,n,i,a){var o;let{target:c,corner:h}=u;const d=c.controls[h],f=((o=c.canvas)===null||o===void 0?void 0:o.getZoom())||1,p=c.padding/f,x=(function(v,b,w,_){const k=v.getRelativeCenterPoint(),C=w!==void 0&&_!==void 0?v.translateToGivenOrigin(k,Zt,Zt,w,_):new mt(v.left,v.top);return(v.angle?b.rotate(-ze(v.angle),k):b).subtract(C)})(c,new mt(i,a),t,n);return x.x>=p&&(x.x-=p),x.x<=-p&&(x.x+=p),x.y>=p&&(x.y-=p),x.y<=p&&(x.y+=p),x.x-=d.offsetX,x.y-=d.offsetY,x}const gS=(u,t,n,i)=>{const{target:a,offsetX:o,offsetY:c}=t,h=n-o,d=i-c,f=!hs(a,"lockMovementX")&&a.left!==h,p=!hs(a,"lockMovementY")&&a.top!==d;return f&&a.set(ce,h),p&&a.set(Sn,d),(f||p)&&Ix(Ox,Vx(u,t,n,i)),f||p},Fc=u=>u.replace(/\s+/g," "),_y={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Td=(u,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?u+6*(t-u)*n:n<.5?t:n<2/3?u+(t-u)*(2/3-n)*6:u),wy=(u,t,n,i)=>{u/=255,t/=255,n/=255;const a=Math.max(u,t,n),o=Math.min(u,t,n);let c,h;const d=(a+o)/2;if(a===o)c=h=0;else{const f=a-o;switch(h=d>.5?f/(2-a-o):f/(a+o),a){case u:c=(t-n)/f+(t<n?6:0);break;case t:c=(n-u)/f+2;break;case n:c=(u-t)/f+4}c/=6}return[Math.round(360*c),Math.round(100*h),Math.round(100*d),i]},Sy=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(u)/(u.endsWith("%")?100:1)},Il=u=>Math.min(Math.round(u),255).toString(16).toUpperCase().padStart(2,"0"),Cy=u=>{let[t,n,i,a=1]=u;const o=Math.round(.3*t+.59*n+.11*i);return[o,o,o,a]};class de{constructor(t){if(it(this,"isUnrecognised",!1),t)if(t instanceof de)this.setSource([...t._source]);else if(Array.isArray(t)){const[n,i,a,o=1]=t;this.setSource([n,i,a,o])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in _y&&(t=_y[t]),t==="transparent"?[255,255,255,0]:de.sourceFromHex(t)||de.sourceFromRgb(t)||de.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,n,i]=this.getSource();return"rgb(".concat(t,",").concat(n,",").concat(i,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,n,i]=wy(...this.getSource());return"hsl(".concat(t,",").concat(n,"%,").concat(i,"%)")}toHsla(){const[t,n,i,a]=wy(...this.getSource());return"hsla(".concat(t,",").concat(n,"%,").concat(i,"%,").concat(a,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,n,i,a]=this.getSource();return"".concat(Il(t)).concat(Il(n)).concat(Il(i)).concat(Il(Math.round(255*a)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(Cy(this.getSource())),this}toBlackWhite(t){const[n,,,i]=Cy(this.getSource()),a=n<(t||127)?0:255;return this.setSource([a,a,a,i]),this}overlayWith(t){t instanceof de||(t=new de(t));const n=this.getSource(),i=t.getSource(),[a,o,c]=n.map(((h,d)=>Math.round(.5*h+.5*i[d])));return this.setSource([a,o,c,n[3]]),this}static fromRgb(t){return de.fromRgba(t)}static fromRgba(t){return new de(de.sourceFromRgb(t))}static sourceFromRgb(t){const n=Fc(t).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(n){const[i,a,o]=n.slice(1,4).map((c=>{const h=parseFloat(c);return c.endsWith("%")?Math.round(2.55*h):h}));return[i,a,o,Sy(n[4])]}}static fromHsl(t){return de.fromHsla(t)}static fromHsla(t){return new de(de.sourceFromHsl(t))}static sourceFromHsl(t){const n=Fc(t).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!n)return;const i=(de.parseAngletoDegrees(n[1])%360+360)%360/360,a=parseFloat(n[2])/100,o=parseFloat(n[3])/100;let c,h,d;if(a===0)c=h=d=o;else{const f=o<=.5?o*(a+1):o+a-o*a,p=2*o-f;c=Td(p,f,i+1/3),h=Td(p,f,i),d=Td(p,f,i-1/3)}return[Math.round(255*c),Math.round(255*h),Math.round(255*d),Sy(n[4])]}static fromHex(t){return new de(de.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const n=t.slice(t.indexOf("#")+1);let i;i=n.length<=4?n.split("").map((d=>d+d)):n.match(/.{2}/g);const[a,o,c,h=255]=i.map((d=>parseInt(d,16)));return[a,o,c,h/255]}}static parseAngletoDegrees(t){const n=t.toLowerCase(),i=parseFloat(n);return n.includes("rad")?Qs(i):n.includes("turn")?360*i:i}}const nr=function(u){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tf;const n=/\D{0,2}$/.exec(u),i=parseFloat(u),a=ie.DPI;switch(n==null?void 0:n[0]){case"mm":return i*a/25.4;case"cm":return i*a/2.54;case"in":return i*a;case"pt":return i*a/72;case"pc":return i*a/72*12;case"em":return i*t;default:return i}},mS=u=>{const[t,n]=u.trim().split(" "),[i,a]=(o=t)&&o!==Cn?[o.slice(1,4),o.slice(5,8)]:o===Cn?[o,o]:["Mid","Mid"];var o;return{meetOrSlice:n||"meet",alignX:i,alignY:a}},wo=function(u,t){let n,i,a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)n="url(#SVGID_".concat(t.id,")");else{const o=new de(t),c=o.getAlpha();n=o.toRgb(),c!==1&&(i=c.toString())}else n="none";return a?"".concat(u,": ").concat(n,"; ").concat(i?"".concat(u,"-opacity: ").concat(i,"; "):""):"".concat(u,'="').concat(n,'" ').concat(i?"".concat(u,'-opacity="').concat(i,'" '):"")};class Wx{getSvgStyles(t){const n=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):Cn,o=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",h=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=this.opacity!==void 0?this.opacity:"1",p=this.visible?"":" visibility: hidden;",x=t?"":this.getSvgFilter(),v=wo(qe,this.fill);return[wo(Tn,this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",h,"; ","stroke-miterlimit: ",d,"; ",v,"fill-rule: ",n,"; ","opacity: ",f,";",x,p].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t?this.calcTransformMatrix():this.calcOwnMatrix(),a='transform="'.concat(_o(i));return"".concat(a).concat(n,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:n,additionalTransform:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=a,n?n(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:n,reviver:i,withShadow:a,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=n?"":'style="'.concat(this.getSvgStyles(),'" '),h=a?'style="'.concat(this.getSvgFilter(),'" '):"",d=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=d&&d.absolutePositioned,x=this.stroke,v=this.fill,b=this.shadow,w=[],_=t.indexOf("COMMON_PARTS");let k;d&&(d.clipPathId="CLIPPATH_".concat(Ai()),k='<clipPath id="'.concat(d.clipPathId,`" >
`).concat(d.toClipPathSVG(i),`</clipPath>
`)),p&&w.push("<g ",h,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),p?"":h+this.getSvgCommons(),` >
`);const C=[c,f,n?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return t[_]=C,Qn(v)&&w.push(v.toSVG(this)),Qn(x)&&w.push(x.toSVG(this)),b&&w.push(b.toSVG(this)),d&&w.push(k),w.push(t.join("")),w.push(`</g>
`),p&&w.push(`</g>
`),i?i(w.join("")):w.join("")}addPaintOrder(){return this.paintFirst!==qe?' paint-order="'.concat(this.paintFirst,'" '):""}}function $c(u){return new RegExp("^("+u.join("|")+")\\b","i")}const ia="textDecorationThickness",Zx=["fontSize","fontWeight","fontFamily","fontStyle"],Kx=["underline","overline","linethrough"],Qx=[...Zx,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Jx=[...Qx,...Kx,"textBackgroundColor","direction",ia],pS=[...Zx,...Kx,Tn,"strokeWidth",qe,"deltaY","textBackgroundColor",ia],yS={_reNewline:jf,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:ce,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:ce,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[ia]:66.667},xs="justify",Yc="justify-left",mo="justify-right",po="justify-center";var Ty,jy,ky;const cs=String.raw(Ty||(Ty=ws(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),jd=String.raw(jy||(jy=ws(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),xS=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+cs+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+cs+"))?\\s+(.*)"),vS={cx:ce,x:ce,r:"radius",cy:Sn,y:Sn,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":ia},kd="font-size",Od="clip-path";$c(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);$c(["symbol","image","marker","pattern","view","svg"]);const Oy=$c(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(ky||(ky=ws(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),cs,jd,cs,jd,cs,jd,cs));const bS=new mt(1,0),$x=new mt,tv=(u,t)=>u.rotate(t),cf=(u,t)=>new mt(t).subtract(u),uf=u=>u.distanceFrom($x),hf=(u,t)=>Math.atan2(yo(u,t),wS(u,t)),_S=u=>hf(bS,u),Rf=u=>u.eq($x)?u:u.scalarDivide(uf(u)),ev=function(u){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Rf(new mt(-u.y,u.x).scalarMultiply(t?1:-1))},yo=(u,t)=>u.x*t.y-u.y*t.x,wS=(u,t)=>u.x*t.x+u.y*t.y,Ey=(u,t,n)=>{if(u.eq(t)||u.eq(n))return!0;const i=yo(t,n),a=yo(t,u),o=yo(n,u);return i>=0?a>=0&&o<=0:!(a<=0&&o>=0)},Ny="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Dy=new RegExp("(?:\\s|^)"+Ny+Ny+"("+cs+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class qs{constructor(t){const n=typeof t=="string"?qs.parseShadow(t):t;Object.assign(this,qs.ownDefaults,n),this.id=Ai()}static parseShadow(t){const n=t.trim(),[,i=0,a=0,o=0]=(Dy.exec(n)||[]).map((c=>parseFloat(c)||0));return{color:(n.replace(Dy,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:a,blur:o}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const n=tv(new mt(this.offsetX,this.offsetY),ze(-t.angle)),i=new de(this.color);let a=40,o=40;return t.width&&t.height&&(a=100*be((Math.abs(n.x)+this.blur)/t.width,ie.NUM_FRACTION_DIGITS)+20,o=100*be((Math.abs(n.y)+this.blur)/t.height,ie.NUM_FRACTION_DIGITS)+20),t.flipX&&(n.x*=-1),t.flipY&&(n.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(o,'%" height="').concat(100+2*o,'%" x="-').concat(a,'%" width="').concat(100+2*a,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(be(this.blur?this.blur/2:0,ie.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(be(n.x,ie.NUM_FRACTION_DIGITS),'" dy="').concat(be(n.y,ie.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},n=qs.ownDefaults;return this.includeDefaultValues?t:Df(t,((i,a)=>i!==n[a]))}static async fromObject(t){return new this(t)}}it(qs,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),it(qs,"type","shadow"),Lt.setClass(qs,"shadow");const lr=(u,t,n)=>Math.max(u,Math.min(t,n)),SS=[Sn,ce,jn,$n,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",ur,hr],Js=[qe,Tn,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],CS={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:ce,originY:Sn,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:qe,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},TS=(u,t,n,i)=>-n*Math.cos(u/i*Oo)+n+t,jS=()=>!1;class zf{constructor(t){let{startValue:n,byValue:i,duration:a=500,delay:o=0,easing:c=TS,onStart:h=_c,onChange:d=_c,onComplete:f=_c,abort:p=jS,target:x}=t;it(this,"_state","pending"),it(this,"durationProgress",0),it(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=a,this.delay=o,this.easing=c,this._onStart=h,this._onChange=d,this._onComplete=f,this._abort=p,this.target=x,this.startValue=n,this.byValue=i,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=n=>{this._state==="pending"&&(this.startTime=n||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>Sc(t)),this.delay):Sc(t)}tick(t){const n=(t||+new Date)-this.startTime,i=Math.min(n,this.duration);this.durationProgress=i/this.duration;const{value:a,valueProgress:o}=this.calculate(i);this.value=Object.freeze(a),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):n>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Sc(this.tick)))}register(){Bc.push(this)}unregister(){Bc.remove(this)}abort(){this._state="aborted",this.unregister()}}const kS=["startValue","endValue"];class OS extends zf{constructor(t){let{startValue:n=0,endValue:i=100}=t;super(at(at({},Ce(t,kS)),{},{startValue:n,byValue:i-n}))}calculate(t){const n=this.easing(t,this.startValue,this.byValue,this.duration);return{value:n,valueProgress:Math.abs((n-this.startValue)/this.byValue)}}}const ES=["startValue","endValue"];class NS extends zf{constructor(t){let{startValue:n=[0],endValue:i=[100]}=t;super(at(at({},Ce(t,ES)),{},{startValue:n,byValue:i.map(((a,o)=>a-n[o]))}))}calculate(t){const n=this.startValue.map(((i,a)=>this.easing(t,i,this.byValue[a],this.duration,a)));return{value:n,valueProgress:Math.abs((n[0]-this.startValue[0])/this.byValue[0])}}}const DS=["startValue","endValue","easing","onChange","onComplete","abort"],AS=(u,t,n,i)=>t+n*(1-Math.cos(u/i*Oo)),Ed=u=>u&&((t,n,i)=>u(new de(t).toRgba(),n,i));class MS extends zf{constructor(t){let{startValue:n,endValue:i,easing:a=AS,onChange:o,onComplete:c,abort:h}=t,d=Ce(t,DS);const f=new de(n).getSource(),p=new de(i).getSource();super(at(at({},d),{},{startValue:f,byValue:p.map(((x,v)=>x-f[v])),easing:a,onChange:Ed(o),onComplete:Ed(c),abort:Ed(h)}))}calculate(t){const[n,i,a,o]=this.startValue.map(((h,d)=>this.easing(t,h,this.byValue[d],this.duration,d))),c=[...[n,i,a].map(Math.round),lr(0,o,1)];return{value:c,valueProgress:c.map(((h,d)=>this.byValue[d]!==0?Math.abs((h-this.startValue[d])/this.byValue[d]):0)).find((h=>h!==0))||0}}}function nv(u){const t=(n=>Array.isArray(n.startValue)||Array.isArray(n.endValue))(u)?new NS(u):new OS(u);return t.start(),t}function RS(u){const t=new MS(u);return t.start(),t}class Ee{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some((n=>n.eq(t)))}append(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.points=this.points.concat(n.filter((a=>!this.includes(a)))),this}static isPointContained(t,n,i){let a=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(n.eq(i))return t.eq(n);if(n.x===i.x)return t.x===n.x&&(a||t.y>=Math.min(n.y,i.y)&&t.y<=Math.max(n.y,i.y));if(n.y===i.y)return t.y===n.y&&(a||t.x>=Math.min(n.x,i.x)&&t.x<=Math.max(n.x,i.x));{const o=cf(n,i),c=cf(n,t).divide(o);return a?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(t,n){const i=new mt(t).setX(Math.min(t.x-1,...n.map((o=>o.x))));let a=0;for(let o=0;o<n.length;o++){const c=this.intersectSegmentSegment(n[o],n[(o+1)%n.length],t,i);if(c.includes(t))return!0;a+=+(c.status==="Intersection")}return a%2==1}static intersectLineLine(t,n,i,a){let o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const h=n.x-t.x,d=n.y-t.y,f=a.x-i.x,p=a.y-i.y,x=t.x-i.x,v=t.y-i.y,b=f*v-p*x,w=h*v-d*x,_=p*h-f*d;if(_!==0){const k=b/_,C=w/_;return(o||0<=k&&k<=1)&&(c||0<=C&&C<=1)?new Ee("Intersection").append(new mt(t.x+k*h,t.y+k*d)):new Ee}if(b===0||w===0){const k=o||c||Ee.isPointContained(t,i,a)||Ee.isPointContained(n,i,a)||Ee.isPointContained(i,t,n)||Ee.isPointContained(a,t,n);return new Ee(k?"Coincident":void 0)}return new Ee("Parallel")}static intersectSegmentLine(t,n,i,a){return Ee.intersectLineLine(t,n,i,a,!1,!0)}static intersectSegmentSegment(t,n,i,a){return Ee.intersectLineLine(t,n,i,a,!1,!1)}static intersectLinePolygon(t,n,i){let a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const o=new Ee,c=i.length;for(let h,d,f,p=0;p<c;p++){if(h=i[p],d=i[(p+1)%c],f=Ee.intersectLineLine(t,n,h,d,a,!1),f.status==="Coincident")return f;o.append(...f.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(t,n,i){return Ee.intersectLinePolygon(t,n,i,!1)}static intersectPolygonPolygon(t,n){const i=new Ee,a=t.length,o=[];for(let c=0;c<a;c++){const h=t[c],d=t[(c+1)%a],f=Ee.intersectSegmentPolygon(h,d,n);f.status==="Coincident"?(o.push(f),i.append(h,d)):i.append(...f.points)}return o.length>0&&o.length===t.length?new Ee("Coincident"):(i.points.length>0&&(i.status="Intersection"),i)}static intersectPolygonRectangle(t,n,i){const a=n.min(i),o=n.max(i),c=new mt(o.x,a.y),h=new mt(a.x,o.y);return Ee.intersectPolygonPolygon(t,[a,c,o,h])}}class zS extends Ax{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?wn(t,this.group.calcTransformMatrix()):t}setXY(t,n,i){this.group&&(t=wn(t,ls(this.group.calcTransformMatrix()))),this.setRelativeXY(t,n,i)}getRelativeXY(){return new mt(this.left,this.top)}setRelativeXY(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,n,i)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:n,br:i,bl:a}=this.aCoords||(this.aCoords=this.calcACoords()),o=[t,n,i,a];if(this.group){const c=this.group.calcTransformMatrix();return o.map((h=>wn(h,c)))}return o}intersectsWithRect(t,n){return Ee.intersectPolygonRectangle(this.getCoords(),t,n).status==="Intersection"}intersectsWithObject(t){const n=Ee.intersectPolygonPolygon(this.getCoords(),t.getCoords());return n.status==="Intersection"||n.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every((n=>t.containsPoint(n)))}isContainedWithinRect(t,n){const{left:i,top:a,width:o,height:c}=this.getBoundingRect();return i>=t.x&&i+o<=n.x&&a>=t.y&&a+c<=n.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Ee.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:n}=this.canvas.vptCoords;return!!this.getCoords().some((i=>i.x<=n.x&&i.x>=t.x&&i.y<=n.y&&i.y>=t.y))||!!this.intersectsWithRect(t,n)||this.containsPoint(t.midPointFrom(n))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:n}=this.canvas.vptCoords;return this.intersectsWithRect(t,n)?!0:this.getCoords().every((i=>(i.x>=n.x||i.x<=t.x)&&(i.y>=n.y||i.y<=t.y)))&&this.containsPoint(t.midPointFrom(n))}getBoundingRect(){return Vs(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(jn,t),this._set($n,t),this.setCoords()}scaleToWidth(t){const n=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/n)}scaleToHeight(t){const n=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/n)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?Qs(zx(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||fn.concat()}calcACoords(){const t=dr({angle:this.angle}),{x:n,y:i}=this.getRelativeCenterPoint(),a=Eo(n,i),o=sn(a,t),c=this._getTransformedDimensions(),h=c.x/2,d=c.y/2;return{tl:wn({x:-h,y:-d},o),tr:wn({x:h,y:-d},o),bl:wn({x:-h,y:d},o),br:wn({x:h,y:d},o)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=[];return!t&&this.group&&(n=this.group.transformMatrixKey(t)),n.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Pe(this.originX),Pe(this.originY)),n}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.calcOwnMatrix();if(t||!this.group)return n;const i=this.transformMatrixKey(t),a=this.matrixCache;return a&&a.key.every(((o,c)=>o===i[c]))?a.value:(this.group&&(n=sn(this.group.calcTransformMatrix(!1),n)),this.matrixCache={key:i,value:n},n)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),n=this.ownMatrixCache;if(n&&n.key===t)return n.value;const i=this.getRelativeCenterPoint(),a={angle:this.angle,translateX:i.x,translateY:i.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=sS(a);return this.ownMatrixCache={key:t,value:o},o}_getNonTransformedDimensions(){return new mt(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=at({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),i=n.strokeWidth;let a=i,o=0;this.strokeUniform&&(a=0,o=i);const c=n.width+a,h=n.height+a;let d;return d=n.skewX===0&&n.skewY===0?new mt(c*n.scaleX,h*n.scaleY):Af(c,h,Kc(n)),d.scalarAdd(o)}translateToGivenOrigin(t,n,i,a,o){let c=t.x,h=t.y;const d=Pe(a)-Pe(n),f=Pe(o)-Pe(i);if(d||f){const p=this._getTransformedDimensions();c+=d*p.x,h+=f*p.y}return new mt(c,h)}translateToCenterPoint(t,n,i){if(n===Zt&&i===Zt)return t;const a=this.translateToGivenOrigin(t,n,i,Zt,Zt);return this.angle?a.rotate(ze(this.angle),t):a}translateToOriginPoint(t,n,i){const a=this.translateToGivenOrigin(t,Zt,Zt,n,i);return this.angle?a.rotate(ze(this.angle),t):a}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?wn(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new mt(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,n){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,n)}setPositionByOrigin(t,n,i){const a=this.translateToCenterPoint(t,n,i),o=this.translateToOriginPoint(a,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),ce,Sn)}}const BS=["type"],LS=["extraParam"];let Ys=class Tc extends zS{static getDefaults(){return Tc.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){Di("warn","Setting type has no effect",t)}constructor(t){super(),it(this,"_cacheContext",null),Object.assign(this,Tc.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Ks(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const n=t.width,i=t.height,a=ie.maxCacheSideLimit,o=ie.minCacheSideLimit;if(n<=a&&i<=a&&n*i<=ie.perfLimitSizeTotal)return n<o&&(t.width=o),i<o&&(t.height=o),t;const c=n/i,[h,d]=go.limitDimsByArea(c),f=lr(o,h,a),p=lr(o,d,a);return n>f&&(t.zoomX/=n/f,t.width=f,t.capped=!0),i>p&&(t.zoomY/=i/p,t.height=p,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),n=this._getTransformedDimensions({skewX:0,skewY:0}),i=n.x*t.x/this.scaleX,a=n.y*t.y/this.scaleY;return{width:Math.ceil(i+2),height:Math.ceil(a+2),zoomX:t.x,zoomY:t.y,x:i,y:a}}_updateCacheCanvas(){const t=this._cacheCanvas,n=this._cacheContext,{width:i,height:a,zoomX:o,zoomY:c,x:h,y:d}=this._limitCacheSize(this._getCacheCanvasDimensions()),f=i!==t.width||a!==t.height,p=this.zoomX!==o||this.zoomY!==c;if(!t||!n)return!1;if(f||p){i!==t.width||a!==t.height?(t.width=i,t.height=a):(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height));const x=h/2,v=d/2;return this.cacheTranslationX=Math.round(t.width/2-x)+x,this.cacheTranslationY=Math.round(t.height/2-v)+v,n.translate(this.cacheTranslationX,this.cacheTranslationY),n.scale(o,c),this.zoomX=o,this.zoomY=c,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const n=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!n);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}getObjectScaling(){if(!this.group)return new mt(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=Lc(this.calcTransformMatrix());return new mt(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const n=this.canvas.getZoom(),i=this.getCanvasRetinaScaling();return t.scalarMultiply(n*i)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,n){t!==jn&&t!==$n||(n=this._constrainScale(n)),t===jn&&n<0?(this.flipX=!this.flipX,n*=-1):t==="scaleY"&&n<0?(this.flipY=!this.flipY,n*=-1):t!=="shadow"||!n||n instanceof qs||(n=new qs(n));const i=this[t]!==n;return this[t]=n,i&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||i&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:n,zoomY:i,cacheTranslationX:a,cacheTranslationY:o}=this,{width:c,height:h}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:n,zoomY:i,cacheTranslationX:a,cacheTranslationY:o,width:c,height:h,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Tn&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,n,i){t.save(),n.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(i,0,0),t.restore()}drawObject(t,n,i){const a=this.fill,o=this.stroke;n?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,i),this.fill=a,this.stroke=o}createClipPathLayer(t,n){const i=ts(n),a=i.getContext("2d");if(a.translate(n.cacheTranslationX,n.cacheTranslationY),a.scale(n.zoomX,n.zoomY),t._cacheCanvas=i,n.parentClipPaths.forEach((o=>{o.transform(a)})),n.parentClipPaths.push(t),t.absolutePositioned){const o=ls(this.calcTransformMatrix());a.transform(o[0],o[1],o[2],o[3],o[4],o[5])}return t.transform(a),t.drawObject(a,!0,n),i}_drawClipPath(t,n,i){if(!n)return;n._transformDone=!0;const a=this.createClipPathLayer(n,i);this.drawClipPathOnCache(t,n,a)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const n=this._cacheCanvas,i=this._cacheContext;return!(!n||!i||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(n&&i&&!t&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,n.width,n.height),i.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const n=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,n){const i=n.stroke;i&&(t.lineWidth=n.strokeWidth,t.lineCap=n.strokeLineCap,t.lineDashOffset=n.strokeDashOffset,t.lineJoin=n.strokeLineJoin,t.miterLimit=n.strokeMiterLimit,Qn(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.strokeStyle=n.stroke)}_setFillStyles(t,n){let{fill:i}=n;i&&(Qn(i)?(t.fillStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.fillStyle=i)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,n){n&&n.length!==0&&t.setLineDash(n)}_setShadow(t){if(!this.shadow)return;const n=this.shadow,i=this.canvas,a=this.getCanvasRetinaScaling(),[o,,,c]=(i==null?void 0:i.viewportTransform)||fn,h=o*a,d=c*a,f=n.nonScaling?new mt(1,1):this.getObjectScaling();t.shadowColor=n.color,t.shadowBlur=n.blur*ie.browserShadowBlurConstant*(h+d)*(f.x+f.y)/4,t.shadowOffsetX=n.offsetX*h*f.x,t.shadowOffsetY=n.offsetY*d*f.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,n){if(!Qn(n))return{offsetX:0,offsetY:0};const i=n.gradientTransform||n.patternTransform,a=-this.width/2+n.offsetX||0,o=-this.height/2+n.offsetY||0;return n.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,a,o):t.transform(1,0,0,1,a,o),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:a,offsetY:o}}_renderPaintInOrder(t){this.paintFirst===Tn?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const n=this.getObjectScaling();t.scale(1/n.x,1/n.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,n){var i;const a=this._limitCacheSize(this._getCacheCanvasDimensions()),o=this.getCanvasRetinaScaling(),c=a.x/this.scaleX/o,h=a.y/this.scaleY/o,d=ts({width:Math.ceil(c),height:Math.ceil(h)}),f=d.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(c,0),f.lineTo(c,h),f.lineTo(0,h),f.closePath(),f.translate(c/2,h/2),f.scale(a.zoomX/this.scaleX/o,a.zoomY/this.scaleY/o),this._applyPatternGradientTransform(f,n),f.fillStyle=n.toLive(t),f.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/a.zoomX,o*this.scaleY/a.zoomY),t.strokeStyle=(i=f.createPattern(d,"no-repeat"))!==null&&i!==void 0?i:"")}_findCenterFromElement(){return new mt(this.left+this.width/2,this.top+this.height/2)}clone(t){const n=this.toObject(t);return this.constructor.fromObject(n)}cloneAsImage(t){const n=this.toCanvasElement(t);return new(Lt.getClass("image"))(n)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=Px(this),i=this.group,a=this.shadow,o=Math.abs,c=t.enableRetinaScaling?kx():1,h=(t.multiplier||1)*c,d=t.canvasProvider||(O=>new gr(O,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&uS(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&dS(this,this.getViewportTransform()),this.setCoords();const f=Ks(),p=this.getBoundingRect(),x=this.shadow,v=new mt;if(x){const O=x.blur,M=x.nonScaling?new mt(1,1):this.getObjectScaling();v.x=2*Math.round(o(x.offsetX)+O)*o(M.x),v.y=2*Math.round(o(x.offsetY)+O)*o(M.y)}const b=p.width+v.x,w=p.height+v.y;f.width=Math.ceil(b),f.height=Math.ceil(w);const _=d(f);t.format==="jpeg"&&(_.backgroundColor="#fff"),this.setPositionByOrigin(new mt(_.width/2,_.height/2),Zt,Zt);const k=this.canvas;_._objects=[this],this.set("canvas",_),this.setCoords();const C=_.toCanvasElement(h||1,t);return this.set("canvas",k),this.shadow=a,i&&(this.group=i),this.set(n),this.setCoords(),_._objects=[],_.destroy(),C}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Mx(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Rx(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.includes(this.constructor.type)||n.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:n,originX:i,originY:a}=this;if(n){const{x:o,y:c}=this.getRelativeCenterPoint();this.originX=Zt,this.originY=Zt,this.left=o,this.top=c}if(this.set("angle",t),n){const{x:o,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),i,a);this.left=o,this.top=c,this.originX=i,this.originY=a}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Bc.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&_s().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,n){return Object.entries(t).reduce(((i,a)=>{let[o,c]=a;return i[o]=this._animate(o,c,n),i}),{})}_animate(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=t.split("."),o=this.constructor.colorProperties.includes(a[a.length-1]),{abort:c,startValue:h,onChange:d,onComplete:f}=i,p=at(at({},i),{},{target:this,startValue:h??a.reduce(((x,v)=>x[v]),this),endValue:n,abort:c==null?void 0:c.bind(this),onChange:(x,v,b)=>{a.reduce(((w,_,k)=>(k===a.length-1&&(w[_]=x),w[_])),this),d&&d(x,v,b)},onComplete:(x,v,b)=>{this.setCoords(),f&&f(x,v,b)}});return o?RS(p):nv(p)}isDescendantOf(t){const{parent:n,group:i}=this;return n===t||i===t||!!n&&n.isDescendantOf(t)||!!i&&i!==n&&i.isDescendantOf(t)}getAncestors(){const t=[];let n=this;do n=n.parent,n&&t.push(n);while(n);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const n=this.getAncestors(),i=t.getAncestors();if(n.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let a,o=0;o<n.length;o++){if(a=n[o],a===t)return{fork:[this,...n.slice(0,o)],otherFork:[],common:n.slice(o)};for(let c=0;c<i.length;c++){if(this===i[c])return{fork:[],otherFork:[t,...i.slice(0,c)],common:[this,...n]};if(a===i[c])return{fork:[this,...n.slice(0,o)],otherFork:[t,...i.slice(0,c)],common:n.slice(o)}}}return{fork:[this,...n],otherFork:[t,...i],common:[]}}hasCommonAncestors(t){const n=this.findCommonAncestors(t);return n&&!!n.common.length}isInFrontOf(t){if(this===t)return;const n=this.findCommonAncestors(t);if(n.fork.includes(t))return!0;if(n.otherFork.includes(this))return!1;const i=n.common[0]||this.canvas;if(!i)return;const a=n.fork.pop(),o=n.otherFork.pop(),c=i._objects.indexOf(a),h=i._objects.indexOf(o);return c>-1&&c>h}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Tc.customProperties,this.constructor.customProperties||[]);let n;const i=ie.NUM_FRACTION_DIGITS,{clipPath:a,fill:o,stroke:c,shadow:h,strokeDashArray:d,left:f,top:p,originX:x,originY:v,width:b,height:w,strokeWidth:_,strokeLineCap:k,strokeDashOffset:C,strokeLineJoin:O,strokeUniform:M,strokeMiterLimit:X,scaleX:I,scaleY:$,angle:V,flipX:B,flipY:z,opacity:Q,visible:ct,backgroundColor:L,fillRule:P,paintFirst:E,globalCompositeOperation:q,skewX:K,skewY:Y}=this;a&&!a.excludeFromExport&&(n=a.toObject(t.concat("inverted","absolutePositioned")));const rt=pt=>be(pt,i),et=at(at({},fr(this,t)),{},{type:this.constructor.type,version:af,originX:x,originY:v,left:rt(f),top:rt(p),width:rt(b),height:rt(w),fill:py(o)?o.toObject():o,stroke:py(c)?c.toObject():c,strokeWidth:rt(_),strokeDashArray:d&&d.concat(),strokeLineCap:k,strokeDashOffset:C,strokeLineJoin:O,strokeUniform:M,strokeMiterLimit:rt(X),scaleX:rt(I),scaleY:rt($),angle:rt(V),flipX:B,flipY:z,opacity:rt(Q),shadow:h&&h.toObject(),visible:ct,backgroundColor:L,fillRule:P,paintFirst:E,globalCompositeOperation:q,skewX:rt(K),skewY:rt(Y)},n?{clipPath:n}:null);return this.includeDefaultValues?et:this._removeDefaultValues(et)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const n=this.constructor.getDefaults(),i=Object.keys(n).length>0?n:Object.getPrototypeOf(this);return Df(t,((a,o)=>{if(o===ce||o===Sn||o==="type")return!0;const c=i[o];return a!==c&&!(Array.isArray(a)&&Array.isArray(c)&&a.length===0&&c.length===0)}))}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let n=Ce(t,BS),i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:a}=i,o=Ce(i,LS);return Qc(n,o).then((c=>a?(delete c[a],new this(n[a],c)):new this(c)))}static fromObject(t,n){return this._fromObject(t,n)}};it(Ys,"stateProperties",SS),it(Ys,"cacheProperties",Js),it(Ys,"ownDefaults",CS),it(Ys,"type","FabricObject"),it(Ys,"colorProperties",[qe,Tn,"backgroundColor"]),it(Ys,"customProperties",[]),Lt.setClass(Ys),Lt.setClass(Ys,"object");const mr=(u,t,n)=>(i,a,o,c)=>{const h=t(i,a,o,c);return h&&Ix(u,at(at({},Vx(i,a,o,c)),n)),h};function pr(u){return(t,n,i,a)=>{const{target:o,originX:c,originY:h}=n,d=o.getRelativeCenterPoint(),f=o.translateToOriginPoint(d,c,h),p=u(t,n,i,a);return o.setPositionByOrigin(f,n.originX,n.originY),p}}const Ay=mr(vo,pr(((u,t,n,i)=>{const a=Mf(t,t.originX,t.originY,n,i);if(Pe(t.originX)===Pe(Zt)||Pe(t.originX)===Pe(Re)&&a.x<0||Pe(t.originX)===Pe(ce)&&a.x>0){const{target:o}=t,c=o.strokeWidth/(o.strokeUniform?o.scaleX:1),h=Gx(t)?2:1,d=o.width,f=Math.abs(a.x*h/o.scaleX)-c;return o.set("width",Math.max(f,1)),d!==o.width}return!1})));function US(u,t,n,i,a){i=i||{};const o=this.sizeX||i.cornerSize||a.cornerSize,c=this.sizeY||i.cornerSize||a.cornerSize,h=i.transparentCorners!==void 0?i.transparentCorners:a.transparentCorners,d=h?Tn:qe,f=!h&&(i.cornerStrokeColor||a.cornerStrokeColor);let p,x=t,v=n;u.save(),u.fillStyle=i.cornerColor||a.cornerColor||"",u.strokeStyle=i.cornerStrokeColor||a.cornerStrokeColor||"",o>c?(p=o,u.scale(1,c/o),v=n*o/c):c>o?(p=c,u.scale(o/c,1),x=t*c/o):p=o,u.beginPath(),u.arc(x,v,p/2,0,Mc,!1),u[d](),f&&u.stroke(),u.restore()}function HS(u,t,n,i,a){i=i||{};const o=this.sizeX||i.cornerSize||a.cornerSize,c=this.sizeY||i.cornerSize||a.cornerSize,h=i.transparentCorners!==void 0?i.transparentCorners:a.transparentCorners,d=h?Tn:qe,f=!h&&(i.cornerStrokeColor||a.cornerStrokeColor),p=o/2,x=c/2;u.save(),u.fillStyle=i.cornerColor||a.cornerColor||"",u.strokeStyle=i.cornerStrokeColor||a.cornerStrokeColor||"",u.translate(t,n);const v=a.getTotalAngle();u.rotate(ze(v)),u["".concat(d,"Rect")](-p,-x,o,c),f&&u.strokeRect(-p,-x,o,c),u.restore()}class as{constructor(t){it(this,"visible",!0),it(this,"actionName",Zc),it(this,"angle",0),it(this,"x",0),it(this,"y",0),it(this,"offsetX",0),it(this,"offsetY",0),it(this,"sizeX",0),it(this,"sizeY",0),it(this,"touchSizeX",0),it(this,"touchSizeY",0),it(this,"cursorStyle","crosshair"),it(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,n,i,a){var o;let{tl:c,tr:h,br:d,bl:f}=a;return((o=n.canvas)===null||o===void 0?void 0:o.getActiveObject())===n&&n.isControlVisible(t)&&Ee.isPointInPolygon(i,[c,h,d,f])}getActionHandler(t,n,i){return this.actionHandler}getMouseDownHandler(t,n,i){return this.mouseDownHandler}getMouseUpHandler(t,n,i){return this.mouseUpHandler}cursorStyleHandler(t,n,i){return n.cursorStyle}getActionName(t,n,i){return n.actionName}getVisibility(t,n){var i,a;return(i=(a=t._controlsVisibility)===null||a===void 0?void 0:a[n])!==null&&i!==void 0?i:this.visible}setVisibility(t,n,i){this.visible=t}positionHandler(t,n,i,a){return new mt(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(n)}calcCornerCoords(t,n,i,a,o,c){const h=Ef([Eo(i,a),dr({angle:t}),Nf((o?this.touchSizeX:this.sizeX)||n,(o?this.touchSizeY:this.sizeY)||n)]);return{tl:new mt(-.5,-.5).transform(h),tr:new mt(.5,-.5).transform(h),br:new mt(.5,.5).transform(h),bl:new mt(-.5,.5).transform(h)}}render(t,n,i,a,o){((a=a||{}).cornerStyle||o.cornerStyle)==="circle"?US.call(this,t,n,i,a,o):HS.call(this,t,n,i,a,o)}}const FS=(u,t,n)=>n.lockRotation?Hc:t.cursorStyle,YS=mr(Ex,pr(((u,t,n,i)=>{let{target:a,ex:o,ey:c,theta:h,originX:d,originY:f}=t;const p=a.translateToOriginPoint(a.getRelativeCenterPoint(),d,f);if(hs(a,"lockRotation"))return!1;const x=Math.atan2(c-p.y,o-p.x),v=Math.atan2(i-p.y,n-p.x);let b=Qs(v-x+h);if(a.snapAngle&&a.snapAngle>0){const _=a.snapAngle,k=a.snapThreshold||_,C=Math.ceil(b/_)*_,O=Math.floor(b/_)*_;Math.abs(b-O)<k?b=O:Math.abs(b-C)<k&&(b=C)}b<0&&(b=360+b),b%=360;const w=a.angle!==b;return a.angle=b,w})));function sv(u,t){const n=t.canvas,i=u[n.uniScaleKey];return n.uniformScaling&&!i||!n.uniformScaling&&i}function iv(u,t,n){const i=hs(u,"lockScalingX"),a=hs(u,"lockScalingY");if(i&&a||!t&&(i||a)&&n||i&&t==="x"||a&&t==="y")return!0;const{width:o,height:c,strokeWidth:h}=u;return o===0&&h===0&&t!=="y"||c===0&&h===0&&t!=="x"}const XS=["e","se","s","sw","w","nw","n","ne","e"],uo=(u,t,n)=>{const i=sv(u,n);if(iv(n,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",i))return Hc;const a=qx(n,t);return"".concat(XS[a],"-resize")};function Bf(u,t,n,i){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=t.target,c=a.by,h=sv(u,o);let d,f,p,x,v,b;if(iv(o,c,h))return!1;if(t.gestureScale)f=t.scaleX*t.gestureScale,p=t.scaleY*t.gestureScale;else{if(d=Mf(t,t.originX,t.originY,n,i),v=c!=="y"?Math.sign(d.x||t.signX||1):1,b=c!=="x"?Math.sign(d.y||t.signY||1):1,t.signX||(t.signX=v),t.signY||(t.signY=b),hs(o,"lockScalingFlip")&&(t.signX!==v||t.signY!==b))return!1;if(x=o._getTransformedDimensions(),h&&!c){const k=Math.abs(d.x)+Math.abs(d.y),{original:C}=t,O=k/(Math.abs(x.x*C.scaleX/o.scaleX)+Math.abs(x.y*C.scaleY/o.scaleY));f=C.scaleX*O,p=C.scaleY*O}else f=Math.abs(d.x*o.scaleX/x.x),p=Math.abs(d.y*o.scaleY/x.y);Gx(t)&&(f*=2,p*=2),t.signX!==v&&c!=="y"&&(t.originX=by(t.originX),f*=-1,t.signX=v),t.signY!==b&&c!=="x"&&(t.originY=by(t.originY),p*=-1,t.signY=b)}const w=o.scaleX,_=o.scaleY;return c?(c==="x"&&o.set(jn,f),c==="y"&&o.set($n,p)):(!hs(o,"lockScalingX")&&o.set(jn,f),!hs(o,"lockScalingY")&&o.set($n,p)),w!==o.scaleX||_!==o.scaleY}const Gl=mr(Wc,pr(((u,t,n,i)=>Bf(u,t,n,i)))),PS=mr(Wc,pr(((u,t,n,i)=>Bf(u,t,n,i,{by:"x"})))),IS=mr(Wc,pr(((u,t,n,i)=>Bf(u,t,n,i,{by:"y"})))),GS=["target","ex","ey","skewingSide"],Nd={x:{counterAxis:"y",scale:jn,skew:ur,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:$n,skew:hr,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},VS=["ns","nesw","ew","nwse"],qS=(u,t,n)=>{if(t.x!==0&&hs(n,"lockSkewingY")||t.y!==0&&hs(n,"lockSkewingX"))return Hc;const i=qx(n,t)%4;return"".concat(VS[i],"-resize")};function av(u,t,n,i,a){const{target:o}=n,{counterAxis:c,origin:h,lockSkewing:d,skew:f,flip:p}=Nd[u];if(hs(o,d))return!1;const{origin:x,flip:v}=Nd[c],b=Pe(n[x])*(o[v]?-1:1),w=-Math.sign(b)*(o[p]?-1:1),_=.5*-((o[f]===0&&Mf(n,Zt,Zt,i,a)[u]>0||o[f]>0?1:-1)*w)+.5;return mr(Nx,pr(((C,O,M,X)=>(function(I,$,V){let{target:B,ex:z,ey:Q,skewingSide:ct}=$,L=Ce($,GS);const{skew:P}=Nd[I],E=V.subtract(new mt(z,Q)).divide(new mt(B.scaleX,B.scaleY))[I],q=B[P],K=L[P],Y=Math.tan(ze(K)),rt=I==="y"?B._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:B._getTransformedDimensions({scaleX:1,scaleY:1}).y,et=2*E*ct/Math.max(rt,1)+Y,pt=Qs(Math.atan(et));B.set(P,pt);const A=q!==B[P];if(A&&I==="y"){const{skewX:j,scaleX:R}=B,Z=B._getTransformedDimensions({skewY:q}),W=B._getTransformedDimensions(),_t=j!==0?Z.x/W.x:1;_t!==1&&B.set(jn,_t*R)}return A})(u,O,new mt(M,X)))))(t,at(at({},n),{},{[h]:_,skewingSide:w}),i,a)}const WS=(u,t,n,i)=>av("x",u,t,n,i),ZS=(u,t,n,i)=>av("y",u,t,n,i);function tu(u,t){return u[t.canvas.altActionKey]}const Vl=(u,t,n)=>{const i=tu(u,n);return t.x===0?i?ur:$n:t.y===0?i?hr:jn:""},Qa=(u,t,n)=>tu(u,n)?qS(0,t,n):uo(u,t,n),My=(u,t,n,i)=>tu(u,t.target)?ZS(u,t,n,i):PS(u,t,n,i),Ry=(u,t,n,i)=>tu(u,t.target)?WS(u,t,n,i):IS(u,t,n,i),rv=()=>({ml:new as({x:-.5,y:0,cursorStyleHandler:Qa,actionHandler:My,getActionName:Vl}),mr:new as({x:.5,y:0,cursorStyleHandler:Qa,actionHandler:My,getActionName:Vl}),mb:new as({x:0,y:.5,cursorStyleHandler:Qa,actionHandler:Ry,getActionName:Vl}),mt:new as({x:0,y:-.5,cursorStyleHandler:Qa,actionHandler:Ry,getActionName:Vl}),tl:new as({x:-.5,y:-.5,cursorStyleHandler:uo,actionHandler:Gl}),tr:new as({x:.5,y:-.5,cursorStyleHandler:uo,actionHandler:Gl}),bl:new as({x:-.5,y:.5,cursorStyleHandler:uo,actionHandler:Gl}),br:new as({x:.5,y:.5,cursorStyleHandler:uo,actionHandler:Gl}),mtr:new as({x:0,y:-.5,actionHandler:YS,cursorStyleHandler:FS,offsetY:-40,withConnection:!0,actionName:kf})}),KS=()=>({mr:new as({x:.5,y:0,actionHandler:Ay,cursorStyleHandler:Qa,actionName:vo}),ml:new as({x:-.5,y:0,actionHandler:Ay,cursorStyleHandler:Qa,actionName:vo})}),QS=()=>at(at({},rv()),KS());class So extends Ys{static getDefaults(){return at(at({},super.getDefaults()),So.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),So.ownDefaults),this.setOptions(t)}static createControls(){return{controls:rv()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const n=t._currentTransform,i=n.target,a=n.action;if(this===i&&a&&a.startsWith(Zc))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const i=Object.entries(this.oCoords);for(let a=i.length-1;a>=0;a--){const[o,c]=i[a],h=this.controls[o];if(h.shouldActivate(o,this,t,n?c.touchCorner:c.corner))return this.__corner=o,{key:o,control:h,coord:this.oCoords[o]}}}calcOCoords(){const t=this.getViewportTransform(),n=this.getCenterPoint(),i=Eo(n.x,n.y),a=dr({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=sn(i,a),c=sn(t,o),h=sn(c,[1/t[0],0,0,1/t[3],0,0]),d=this.group?Lc(this.calcTransformMatrix()):void 0;d&&(d.scaleX=Math.abs(d.scaleX),d.scaleY=Math.abs(d.scaleY));const f=this._calculateCurrentDimensions(d),p={};return this.forEachControl(((x,v)=>{const b=x.positionHandler(f,h,this,x);p[v]=Object.assign(b,this._calcCornerCoords(x,b))})),p}_calcCornerCoords(t,n){const i=this.getTotalAngle();return{corner:t.calcCornerCoords(i,this.cornerSize,n.x,n.y,!1,this),touchCorner:t.calcCornerCoords(i,this.touchCornerSize,n.x,n.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const n in this.controls)t(this.controls[n],n,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const n=this.getRelativeCenterPoint(),i=this._calculateCurrentDimensions(),a=this.getViewportTransform();t.translate(n.x,n.y),t.scale(1/a[0],1/a[3]),t.rotate(ze(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore()}strokeBorders(t,n){t.strokeRect(-n.x/2,-n.y/2,n.x,n.y)}_drawBorders(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=at({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},i);t.save(),t.strokeStyle=a.borderColor,this._setLineDash(t,a.borderDashArray),this.strokeBorders(t,n),a.hasControls&&this.drawControlsConnectingLines(t,n),t.restore()}_renderControls(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:i,hasControls:a}=this,o=at({hasBorders:i,hasControls:a},n),c=this.getViewportTransform(),h=o.hasBorders,d=o.hasControls,f=sn(c,this.calcTransformMatrix()),p=Lc(f);t.save(),t.translate(p.translateX,p.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(p.angle-=180),t.rotate(ze(this.group?p.angle:this.angle)),h&&this.drawBorders(t,p,n),d&&this.drawControls(t,n),t.restore()}drawBorders(t,n,i){let a;if(i&&i.forActiveSelection||this.group){const o=Af(this.width,this.height,Kc(n)),c=this.isStrokeAccountedForInDimensions()?Of:(this.strokeUniform?new mt().scalarAdd(this.canvas?this.canvas.getZoom():1):new mt(n.scaleX,n.scaleY)).scalarMultiply(this.strokeWidth);a=o.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else a=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,a,i)}drawControlsConnectingLines(t,n){let i=!1;t.beginPath(),this.forEachControl(((a,o)=>{a.withConnection&&a.getVisibility(this,o)&&(i=!0,t.moveTo(a.x*n.x,a.y*n.y),t.lineTo(a.x*n.x+a.offsetX,a.y*n.y+a.offsetY))})),i&&t.stroke()}drawControls(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const i=this.getCanvasRetinaScaling(),{cornerStrokeColor:a,cornerDashArray:o,cornerColor:c}=this,h=at({cornerStrokeColor:a,cornerDashArray:o,cornerColor:c},n);t.setTransform(i,0,0,i,0,0),t.strokeStyle=t.fillStyle=h.cornerColor,this.transparentCorners||(t.strokeStyle=h.cornerStrokeColor),this._setLineDash(t,h.cornerDashArray),this.forEachControl(((d,f)=>{if(d.getVisibility(this,f)){const p=this.oCoords[f];d.render(t,p.x,p.y,h,this)}})),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,n){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=n}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach((n=>{let[i,a]=n;return this.setControlVisible(i,a)}))}clearContextTop(t){if(!this.canvas)return;const n=this.canvas.contextTop;if(!n)return;const i=this.canvas.viewportTransform;n.save(),n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(n);const a=this.width+4,o=this.height+4;return n.clearRect(-a/2,-o/2,a,o),t||n.restore(),n}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function ov(u,t){return t.forEach((n=>{Object.getOwnPropertyNames(n.prototype).forEach((i=>{i!=="constructor"&&Object.defineProperty(u.prototype,i,Object.getOwnPropertyDescriptor(n.prototype,i)||Object.create(null))}))})),u}it(So,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class cn extends So{}ov(cn,[Wx]),Lt.setClass(cn),Lt.setClass(cn,"object");const JS=(u,t,n,i)=>{const a=2*(i=Math.round(i))+1,{data:o}=u.getImageData(t-i,n-i,a,a);for(let c=3;c<o.length;c+=4)if(o[c]>0)return!1;return!0};class lv{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new mt(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new mt(1/this.options.scaleX,1/this.options.scaleY):new mt(1,1)}createSideVector(t,n){const i=cf(t,n);return this.options.strokeUniform?i.multiply(this.scale):i}projectOrthogonally(t,n,i){return this.applySkew(t.add(this.calcOrthogonalProjection(t,n,i)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const n=new mt(t);return n.y+=n.x*Math.tan(ze(this.options.skewY)),n.x+=n.y*Math.tan(ze(this.options.skewX)),n}scaleUnitVector(t,n){return t.multiply(this.strokeUniformScalar).scalarMultiply(n)}}const $S=new mt;class sr extends lv{static getOrthogonalRotationFactor(t,n){const i=n?hf(t,n):_S(t);return Math.abs(i)<Oo?-1:1}constructor(t,n,i,a){super(a),it(this,"AB",void 0),it(this,"AC",void 0),it(this,"alpha",void 0),it(this,"bisector",void 0),this.A=new mt(t),this.B=new mt(n),this.C=new mt(i),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=hf(this.AB,this.AC),this.bisector=Rf(tv(this.AB.eq($S)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const a=this.createSideVector(t,n),o=ev(a),c=sr.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,i*c)}projectBevel(){const t=[];return(this.alpha%Mc==0?[this.B]:[this.B,this.C]).forEach((n=>{t.push(this.projectOrthogonally(this.A,n)),t.push(this.projectOrthogonally(this.A,n,-this.strokeProjectionMagnitude))})),t}projectMiter(){const t=[],n=Math.abs(this.alpha),i=1/Math.sin(n/2),a=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*i),o=this.options.strokeUniform?uf(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return uf(a)/this.strokeProjectionMagnitude<=o&&t.push(this.applySkew(this.A.add(a))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,n){const i=[],a=new mt(sr.getOrthogonalRotationFactor(this.bisector),sr.getOrthogonalRotationFactor(new mt(this.bisector.y,this.bisector.x)));return[new mt(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(a),new mt(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(a)].forEach((o=>{Ey(o,t,n)&&i.push(this.A.add(o))})),i}projectRoundWithSkew(t,n){const i=[],{skewX:a,skewY:o,scaleX:c,scaleY:h,strokeUniform:d}=this.options,f=new mt(Math.tan(ze(a)),Math.tan(ze(o))),p=this.strokeProjectionMagnitude,x=d?p/h/Math.sqrt(1/h**2+1/c**2*f.y**2):p/Math.sqrt(1+f.y**2),v=new mt(Math.sqrt(Math.max(p**2-x**2,0)),x),b=d?p/Math.sqrt(1+f.x**2*(1/h)**2/(1/c+1/c*f.x*f.y)**2):p/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),w=new mt(b,Math.sqrt(Math.max(p**2-b**2,0)));return[w,w.scalarMultiply(-1),v,v.scalarMultiply(-1)].map((_=>this.applySkew(d?_.multiply(this.strokeUniformScalar):_))).forEach((_=>{Ey(_,t,n)&&i.push(this.applySkew(this.A).add(_))})),i}projectRound(){const t=[];t.push(...this.projectBevel());const n=this.alpha%Mc==0,i=this.applySkew(this.A),a=t[n?0:2].subtract(i),o=t[n?1:0].subtract(i),c=n?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),h=yo(a,c)>0,d=h?a:o,f=h?o:a;return this.isSkewed()?t.push(...this.projectRoundWithSkew(d,f)):t.push(...this.projectRoundNoSkew(d,f)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector})))}}class zy extends lv{constructor(t,n,i){super(i),this.A=new mt(t),this.T=new mt(n)}calcOrthogonalProjection(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const a=this.createSideVector(t,n);return this.scaleUnitVector(ev(a),i)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const n=new mt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(n)),this.applySkew(this.A.subtract(n)))}else t.push(...new sr(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const n=new mt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(n),this.A.subtract(n))}else{const n=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),i=this.scaleUnitVector(Rf(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),a=this.A.add(i);t.push(a.add(n),a.subtract(n))}return t.map((n=>this.applySkew(n)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t})))}}const tC=function(u,t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=[];if(u.length===0)return i;const a=u.reduce(((o,c)=>(o[o.length-1].eq(c)||o.push(new mt(c)),o)),[new mt(u[0])]);if(a.length===1)n=!0;else if(!n){const o=a[0],c=((h,d)=>{for(let f=h.length-1;f>=0;f--)if(d(h[f],f,h))return f;return-1})(a,(h=>!h.eq(o)));a.splice(c+1)}return a.forEach(((o,c,h)=>{let d,f;c===0?(f=h[1],d=n?o:h[h.length-1]):c===h.length-1?(d=h[c-1],f=n?o:h[0]):(d=h[c-1],f=h[c+1]),n&&h.length===1?i.push(...new zy(o,o,t).project()):!n||c!==0&&c!==h.length-1?i.push(...new sr(o,d,f,t).project()):i.push(...new zy(o,c===0?f:d,t).project())})),i},Lf=u=>{const t={};return Object.keys(u).forEach((n=>{t[n]={},Object.keys(u[n]).forEach((i=>{t[n][i]=at({},u[n][i])}))})),t},eC=u=>u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let lo;const Uf=u=>{if(lo||lo||(lo="Intl"in qc()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),lo){const t=lo.segment(u);return Array.from(t).map((n=>{let{segment:i}=n;return i}))}return nC(u)},nC=u=>{const t=[];for(let n,i=0;i<u.length;i++)(n=sC(u,i))!==!1&&t.push(n);return t},sC=(u,t)=>{const n=u.charCodeAt(t);if(isNaN(n))return"";if(n<55296||n>57343)return u.charAt(t);if(55296<=n&&n<=56319){if(u.length<=t+1)throw"High surrogate without following low surrogate";const a=u.charCodeAt(t+1);if(56320>a||a>57343)throw"High surrogate without following low surrogate";return u.charAt(t)+u.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const i=u.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1},Hf=function(u,t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return u.fill!==t.fill||u.stroke!==t.stroke||u.strokeWidth!==t.strokeWidth||u.fontSize!==t.fontSize||u.fontFamily!==t.fontFamily||u.fontWeight!==t.fontWeight||u.fontStyle!==t.fontStyle||u.textDecorationThickness!==t.textDecorationThickness||u.textBackgroundColor!==t.textBackgroundColor||u.deltaY!==t.deltaY||n&&(u.overline!==t.overline||u.underline!==t.underline||u.linethrough!==t.linethrough)},iC=(u,t)=>{const n=t.split(`
`),i=[];let a=-1,o={};u=Lf(u);for(let c=0;c<n.length;c++){const h=Uf(n[c]);if(u[c])for(let d=0;d<h.length;d++){a++;const f=u[c][d];f&&Object.keys(f).length>0&&(Hf(o,f,!0)?i.push({start:a,end:a+1,style:f}):i[i.length-1].end++),o=f||{}}else a+=h.length,o={}}return i},aC=(u,t)=>{if(!Array.isArray(u))return Lf(u);const n=t.split(jf),i={};let a=-1,o=0;for(let c=0;c<n.length;c++){const h=Uf(n[c]);for(let d=0;d<h.length;d++)a++,u[o]&&u[o].start<=a&&a<u[o].end&&(i[c]=i[c]||{},i[c][d]=at({},u[o].style),a===u[o].end-1&&o++)}return i},Mi=["display","transform",qe,"fill-opacity","fill-rule","opacity",Tn,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function By(u,t){const n=u.nodeName,i=u.getAttribute("class"),a=u.getAttribute("id"),o="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+n,"i"),t=t.replace(c,""),a&&t.length&&(c=new RegExp("#"+a+o,"i"),t=t.replace(c,"")),i&&t.length){const h=i.split(" ");for(let d=h.length;d--;)c=new RegExp("\\."+h[d]+o,"i"),t=t.replace(c,"")}return t.length===0}function rC(u,t){let n=!0;const i=By(u,t.pop());return i&&t.length&&(n=(function(a,o){let c,h=!0;for(;a.parentElement&&a.parentElement.nodeType===1&&o.length;)h&&(c=o.pop()),h=By(a=a.parentElement,c);return o.length===0})(u,t)),i&&n&&t.length===0}const oC=u=>{var t;return(t=vS[u])!==null&&t!==void 0?t:u},lC=new RegExp("(".concat(cs,")"),"gi"),cC=u=>Fc(u.replace(lC," $1 ").replace(/,/gi," "));var Ly,Uy,Hy,Fy,Yy,Xy,Py;const dn="(".concat(cs,")"),uC=String.raw(Ly||(Ly=ws(["(skewX)(",")"],["(skewX)\\(","\\)"])),dn),hC=String.raw(Uy||(Uy=ws(["(skewY)(",")"],["(skewY)\\(","\\)"])),dn),dC=String.raw(Hy||(Hy=ws(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),dn,dn,dn),fC=String.raw(Fy||(Fy=ws(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),dn,dn),gC=String.raw(Yy||(Yy=ws(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),dn,dn),mC=String.raw(Xy||(Xy=ws(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),dn,dn,dn,dn,dn,dn),Ff="(?:".concat(mC,"|").concat(gC,"|").concat(dC,"|").concat(fC,"|").concat(uC,"|").concat(hC,")"),pC="(?:".concat(Ff,"*)"),yC=String.raw(Py||(Py=ws(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),pC),xC=new RegExp(yC),vC=new RegExp(Ff),bC=new RegExp(Ff,"g");function df(u){const t=[];if(!(u=cC(u).replace(/\s*([()])\s*/gi,"$1"))||u&&!xC.test(u))return[...fn];for(const n of u.matchAll(bC)){const i=vC.exec(n[0]);if(!i)continue;let a=fn;const o=i.filter((w=>!!w)),[,c,...h]=o,[d,f,p,x,v,b]=h.map((w=>parseFloat(w)));switch(c){case"translate":a=Eo(d,f);break;case kf:a=dr({angle:d},{x:f,y:p});break;case Zc:a=Nf(d,f);break;case ur:a=Lx(d);break;case hr:a=Ux(d);break;case"matrix":a=[d,f,p,x,v,b]}t.push(a)}return Ef(t)}function _C(u,t,n,i){const a=Array.isArray(t);let o,c=t;if(u!==qe&&u!==Tn||t!==Cn){if(u==="strokeUniform")return t==="non-scaling-stroke";if(u==="strokeDashArray")c=t===Cn?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(u==="transformMatrix")c=n&&n.transformMatrix?sn(n.transformMatrix,df(t)):df(t);else if(u==="visible")c=t!==Cn&&t!=="hidden",n&&n.visible===!1&&(c=!1);else if(u==="opacity")c=parseFloat(t),n&&n.opacity!==void 0&&(c*=n.opacity);else if(u==="textAnchor")c=t==="start"?ce:t==="end"?Re:Zt;else if(u==="charSpacing"||u===ia)o=nr(t,i)/i*1e3;else if(u==="paintFirst"){const h=t.indexOf(qe),d=t.indexOf(Tn);c=qe,(h>-1&&d>-1&&d<h||h===-1&&d>-1)&&(c=Tn)}else{if(u==="href"||u==="xlink:href"||u==="font"||u==="id")return t;if(u==="imageSmoothing")return t==="optimizeQuality";o=a?t.map(nr):nr(t,i)}}else c="";return!a&&isNaN(o)?c:o}function wC(u,t){const n=u.match(xS);if(!n)return;const i=n[1],a=n[3],o=n[4],c=n[5],h=n[6];i&&(t.fontStyle=i),a&&(t.fontWeight=isNaN(parseFloat(a))?a:parseFloat(a)),o&&(t.fontSize=nr(o)),h&&(t.fontFamily=h),c&&(t.lineHeight=c==="normal"?1:c)}function SC(u,t){u.replace(/;\s*$/,"").split(";").forEach((n=>{if(!n)return;const[i,a]=n.split(":");t[i.trim().toLowerCase()]=a.trim()}))}function CC(u){const t={},n=u.getAttribute("style");return n&&(typeof n=="string"?SC(n,t):(function(i,a){Object.entries(i).forEach((o=>{let[c,h]=o;h!==void 0&&(a[c.toLowerCase()]=h)}))})(n,t)),t}const TC={stroke:"strokeOpacity",fill:"fillOpacity"};function $s(u,t,n){if(!u)return{};let i,a={},o=Tf;u.parentNode&&Oy.test(u.parentNode.nodeName)&&(a=$s(u.parentElement,t,n),a.fontSize&&(i=o=nr(a.fontSize)));const c=at(at(at({},t.reduce(((f,p)=>{const x=u.getAttribute(p);return x&&(f[p]=x),f}),{})),(function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={};for(const v in p)rC(f,v.split(" "))&&(x=at(at({},x),p[v]));return x})(u,n)),CC(u));c[Od]&&u.setAttribute(Od,c[Od]),c[kd]&&(i=nr(c[kd],o),c[kd]="".concat(i));const h={};for(const f in c){const p=oC(f),x=_C(p,c[f],a,i);h[p]=x}h&&h.font&&wC(h.font,h);const d=at(at({},a),h);return Oy.test(u.nodeName)?d:(function(f){const p=cn.getDefaults();return Object.entries(TC).forEach((x=>{let[v,b]=x;if(f[b]===void 0||f[v]==="")return;if(f[v]===void 0){if(!p[v])return;f[v]=p[v]}if(f[v].indexOf("url(")===0)return;const w=new de(f[v]);f[v]=w.setAlpha(be(w.getAlpha()*f[b],2)).toRgba()})),f})(d)}const jC=["left","top","width","height","visible"],cv=["rx","ry"];class Ie extends cn{static getDefaults(){return at(at({},super.getDefaults()),Ie.ownDefaults)}constructor(t){super(),Object.assign(this,Ie.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:n}=this;t&&!n?this.ry=t:n&&!t&&(this.rx=n)}_render(t){const{width:n,height:i}=this,a=-n/2,o=-i/2,c=this.rx?Math.min(this.rx,n/2):0,h=this.ry?Math.min(this.ry,i/2):0,d=c!==0||h!==0;t.beginPath(),t.moveTo(a+c,o),t.lineTo(a+n-c,o),d&&t.bezierCurveTo(a+n-ji*c,o,a+n,o+ji*h,a+n,o+h),t.lineTo(a+n,o+i-h),d&&t.bezierCurveTo(a+n,o+i-ji*h,a+n-ji*c,o+i,a+n-c,o+i),t.lineTo(a+c,o+i),d&&t.bezierCurveTo(a+ji*c,o+i,a,o+i-ji*h,a,o+i-h),t.lineTo(a,o+h),d&&t.bezierCurveTo(a,o+ji*h,a+ji*c,o,a+c,o),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...cv,...t])}_toSVG(){const{width:t,height:n,rx:i,ry:a}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-n/2,'" rx="').concat(i,'" ry="').concat(a,'" width="').concat(t,'" height="').concat(n,`" />
`)]}static async fromElement(t,n,i){const a=$s(t,this.ATTRIBUTE_NAMES,i),{left:o=0,top:c=0,width:h=0,height:d=0,visible:f=!0}=a,p=Ce(a,jC);return new this(at(at(at({},n),p),{},{left:o,top:c,width:h,height:d,visible:!!(f&&h&&d)}))}}it(Ie,"type","Rect"),it(Ie,"cacheProperties",[...Js,...cv]),it(Ie,"ownDefaults",{rx:0,ry:0}),it(Ie,"ATTRIBUTE_NAMES",[...Mi,"x","y","rx","ry","width","height"]),Lt.setClass(Ie),Lt.setSVGClass(Ie);const Is="initialization",Xc="added",Yf="removed",Pc="imperative",uv=(u,t)=>{const{strokeUniform:n,strokeWidth:i,width:a,height:o,group:c}=t,h=c&&c!==u?Jc(c.calcTransformMatrix(),u.calcTransformMatrix()):null,d=h?t.getRelativeCenterPoint().transform(h):t.getRelativeCenterPoint(),f=!t.isStrokeAccountedForInDimensions(),p=n&&f?hS(new mt(i,i),void 0,u.calcTransformMatrix()):Of,x=!n&&f?i:0,v=Af(a+x,o+x,Ef([h,t.calcOwnMatrix()],!0)).add(p).scalarDivide(2);return[d.subtract(v),d.add(v)]};class eu{calcLayoutResult(t,n){if(this.shouldPerformLayout(t))return this.calcBoundingBox(n,t)}shouldPerformLayout(t){let{type:n,prevStrategy:i,strategy:a}=t;return n===Is||n===Pc||!!i&&a!==i}shouldLayoutClipPath(t){let{type:n,target:{clipPath:i}}=t;return n!==Is&&i&&!i.absolutePositioned}getInitialSize(t,n){return n.size}calcBoundingBox(t,n){const{type:i,target:a}=n;if(i===Pc&&n.overrides)return n.overrides;if(t.length===0)return;const{left:o,top:c,width:h,height:d}=Vs(t.map((x=>uv(a,x))).reduce(((x,v)=>x.concat(v)),[])),f=new mt(h,d),p=new mt(o,c).add(f.scalarDivide(2));if(i===Is){const x=this.getInitialSize(n,{size:f,center:p});return{center:p,relativeCorrection:new mt(0,0),size:x}}return{center:p.transform(a.calcOwnMatrix()),size:f}}}it(eu,"type","strategy");class ff extends eu{shouldPerformLayout(t){return!0}}it(ff,"type","fit-content"),Lt.setClass(ff);const kC=["strategy"],OC=["target","strategy","bubbles","prevStrategy"],hv="layoutManager";class Co{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ff;it(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const n=at(at({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(n);const i=this.getLayoutResult(n);i&&this.commitLayout(n,i),this.onAfterLayout(n,i),this._prevLayoutStrategy=n.strategy}attachHandlers(t,n){const{target:i}=n;return[zc,Ox,vo,Ex,Wc,Nx,Rc,Kw,Qw].map((a=>t.on(a,(o=>this.performLayout(a===zc?{type:"object_modified",trigger:a,e:o,target:i}:{type:"object_modifying",trigger:a,e:o,target:i})))))}subscribe(t,n){this.unsubscribe(t,n);const i=this.attachHandlers(t,n);this._subscriptions.set(t,i)}unsubscribe(t,n){(this._subscriptions.get(t)||[]).forEach((i=>i())),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach((n=>this.unsubscribe(n,t)))}subscribeTargets(t){t.targets.forEach((n=>this.subscribe(n,t)))}onBeforeLayout(t){const{target:n,type:i}=t,{canvas:a}=n;if(i===Is||i===Xc?this.subscribeTargets(t):i===Yf&&this.unsubscribeTargets(t),n.fire("layout:before",{context:t}),a&&a.fire("object:layout:before",{target:n,context:t}),i===Pc&&t.deep){const o=Ce(t,kC);n.forEachObject((c=>c.layoutManager&&c.layoutManager.performLayout(at(at({},o),{},{bubbles:!1,target:c}))))}}getLayoutResult(t){const{target:n,strategy:i,type:a}=t,o=i.calcLayoutResult(t,n.getObjects());if(!o)return;const c=a===Is?new mt:n.getRelativeCenterPoint(),{center:h,correction:d=new mt,relativeCorrection:f=new mt}=o,p=c.subtract(h).add(d).transform(a===Is?fn:ls(n.calcOwnMatrix()),!0).add(f);return{result:o,prevCenter:c,nextCenter:h,offset:p}}commitLayout(t,n){const{target:i}=t,{result:{size:a},nextCenter:o}=n;var c,h;i.set({width:a.x,height:a.y}),this.layoutObjects(t,n),t.type===Is?i.set({left:(c=t.x)!==null&&c!==void 0?c:o.x+a.x*Pe(i.originX),top:(h=t.y)!==null&&h!==void 0?h:o.y+a.y*Pe(i.originY)}):(i.setPositionByOrigin(o,Zt,Zt),i.setCoords(),i.set("dirty",!0))}layoutObjects(t,n){const{target:i}=t;i.forEachObject((a=>{a.group===i&&this.layoutObject(t,n,a)})),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,n,i.clipPath)}layoutObject(t,n,i){let{offset:a}=n;i.set({left:i.left+a.x,top:i.top+a.y})}onAfterLayout(t,n){const{target:i,strategy:a,bubbles:o,prevStrategy:c}=t,h=Ce(t,OC),{canvas:d}=i;i.fire("layout:after",{context:t,result:n}),d&&d.fire("object:layout:after",{context:t,result:n,target:i});const f=i.parent;o&&f!=null&&f.layoutManager&&((h.path||(h.path=[])).push(i),f.layoutManager.performLayout(at(at({},h),{},{target:f}))),i.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach((n=>n.forEach((i=>i())))),t.clear()}toObject(){return{type:hv,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Lt.setClass(Co,hv);const EC=["type","objects","layoutManager"];class NC extends Co{performLayout(){}}class us extends Dx(cn){static getDefaults(){return at(at({},super.getDefaults()),us.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),it(this,"_activeObjects",[]),it(this,"__objectSelectionTracker",void 0),it(this,"__objectSelectionDisposer",void 0),Object.assign(this,us.ownDefaults),this.setOptions(n),this.groupInit(t,n)}groupInit(t,n){var i;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject((a=>{this.enterGroup(a,!1)})),this.layoutManager=(i=n.layoutManager)!==null&&i!==void 0?i:new Co,this.layoutManager.performLayout({type:Is,target:this,targets:[...t],x:n.left,y:n.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(Di("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(Di("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter(((n,i,a)=>this.canEnterGroup(n)&&a.indexOf(n)===i))}add(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=this._filterObjectsBeforeEnteringGroup(n),o=super.add(...a);return this._onAfterObjectsChange(Xc,a),o}insertAt(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];const o=this._filterObjectsBeforeEnteringGroup(i),c=super.insertAt(t,...o);return this._onAfterObjectsChange(Xc,o),c}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(Yf,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,n){this.exitGroup(t,n),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,n){this.layoutManager.performLayout({type:t,targets:n,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,n){const i=this[t];return super._set(t,n),t==="canvas"&&i!==n&&(this._objects||[]).forEach((a=>{a._set(t,n)})),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,n){let{target:i}=n;const a=this._activeObjects;if(t)a.push(i),this._set("dirty",!0);else if(a.length>0){const o=a.indexOf(i);o>-1&&(a.splice(o,1),this._set("dirty",!0))}}_watchObject(t,n){t&&this._watchObject(!1,n),t?(n.on("selected",this.__objectSelectionTracker),n.on("deselected",this.__objectSelectionDisposer)):(n.off("selected",this.__objectSelectionTracker),n.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,n){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,n)}_enterGroup(t,n){n&&Uc(t,sn(ls(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const i=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();i&&(i===t||t.isDescendantOf(i))&&this._activeObjects.push(t)}exitGroup(t,n){this._exitGroup(t,n),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,n){t._set("group",void 0),n||(Uc(t,sn(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const i=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;i>-1&&this._activeObjects.splice(i,1)}shouldCache(){const t=cn.prototype.shouldCache.call(this);if(t){for(let n=0;n<this._objects.length;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,n,i){this._renderBackground(t);for(let o=0;o<this._objects.length;o++){var a;const c=this._objects[o];(a=this.canvas)!==null&&a!==void 0&&a.preserveObjectStacking&&c.group!==this?(t.save(),t.transform(...ls(this.calcTransformMatrix())),c.render(t),t.restore()):c.group===this&&c.render(t)}this._drawClipPath(t,this.clipPath,i)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((t=>t.setCoords()))}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(at({target:this,type:Pc},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,n){const i=this.includeDefaultValues;return this._objects.filter((function(a){return!a.excludeFromExport})).map((function(a){const o=a.includeDefaultValues;a.includeDefaultValues=i;const c=a[t||"toObject"](n);return a.includeDefaultValues=o,c}))}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=this.layoutManager.toObject();return at(at(at({},super.toObject(["subTargetCheck","interactive",...t])),n.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:n}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject((t=>{this._watchObject(!1,t),t.dispose()})),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const n=Ie.prototype._toSVG.call(this),i=n.indexOf("COMMON_PARTS");n[i]='for="group" ';const a=n.join("");return t?t(a):a}_toSVG(t){const n=["<g ","COMMON_PARTS",` >
`],i=this._createSVGBgRect(t);i&&n.push("		",i);for(let a=0;a<this._objects.length;a++)n.push("		",this._objects[a].toSVG(t));return n.push(`</g>
`),n}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",n=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),n].join("")}toClipPathSVG(t){const n=[],i=this._createSVGBgRect(t);i&&n.push("	",i);for(let a=0;a<this._objects.length;a++)n.push("	",this._objects[a].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(n,{reviver:t})}static fromObject(t,n){let{type:i,objects:a=[],layoutManager:o}=t,c=Ce(t,EC);return Promise.all([bo(a,n),Qc(c,n)]).then((h=>{let[d,f]=h;const p=new this(d,at(at(at({},c),f),{},{layoutManager:new NC}));if(o){const x=Lt.getClass(o.type),v=Lt.getClass(o.strategy);p.layoutManager=new x(new v)}else p.layoutManager=new Co;return p.layoutManager.subscribeTargets({type:Is,target:p,targets:p.getObjects()}),p.setCoords(),p}))}}it(us,"type","Group"),it(us,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Lt.setClass(us);const DC=(u,t)=>Math.min(t.width/u.width,t.height/u.height),AC=(u,t)=>Math.max(t.width/u.width,t.height/u.height),gf="\\s*,?\\s*",co="".concat(gf,"(").concat(cs,")"),MC="".concat(co).concat(co).concat(co).concat(gf,"([01])").concat(gf,"([01])").concat(co).concat(co),RC={m:"l",M:"L"},zC=(u,t,n,i,a,o,c,h,d,f,p)=>{const x=Ws(u),v=Zs(u),b=Ws(t),w=Zs(t),_=n*a*b-i*o*w+c,k=i*a*b+n*o*w+h;return["C",f+d*(-n*a*v-i*o*x),p+d*(-i*a*v+n*o*x),_+d*(n*a*w+i*o*b),k+d*(i*a*w-n*o*b),_,k]},Iy=(u,t,n,i)=>{const a=Math.atan2(t,u),o=Math.atan2(i,n);return o>=a?o-a:2*Math.PI-(a-o)};function Gy(u,t,n,i,a,o,c,h){let d;if(ie.cachesBoundsOfCurve&&(d=[...arguments].join(),go.boundsOfCurveCache[d]))return go.boundsOfCurveCache[d];const f=Math.sqrt,p=Math.abs,x=[],v=[[0,0],[0,0]];let b=6*u-12*n+6*a,w=-3*u+9*n-9*a+3*c,_=3*n-3*u;for(let X=0;X<2;++X){if(X>0&&(b=6*t-12*i+6*o,w=-3*t+9*i-9*o+3*h,_=3*i-3*t),p(w)<1e-12){if(p(b)<1e-12)continue;const z=-_/b;0<z&&z<1&&x.push(z);continue}const I=b*b-4*_*w;if(I<0)continue;const $=f(I),V=(-b+$)/(2*w);0<V&&V<1&&x.push(V);const B=(-b-$)/(2*w);0<B&&B<1&&x.push(B)}let k=x.length;const C=k,O=dv(u,t,n,i,a,o,c,h);for(;k--;){const{x:X,y:I}=O(x[k]);v[0][k]=X,v[1][k]=I}v[0][C]=u,v[1][C]=t,v[0][C+1]=c,v[1][C+1]=h;const M=[new mt(Math.min(...v[0]),Math.min(...v[1])),new mt(Math.max(...v[0]),Math.max(...v[1]))];return ie.cachesBoundsOfCurve&&(go.boundsOfCurveCache[d]=M),M}const BC=(u,t,n)=>{let[i,a,o,c,h,d,f,p]=n;const x=((v,b,w,_,k,C,O)=>{if(w===0||_===0)return[];let M=0,X=0,I=0;const $=Math.PI,V=O*Cf,B=Zs(V),z=Ws(V),Q=.5*(-z*v-B*b),ct=.5*(-z*b+B*v),L=w**2,P=_**2,E=ct**2,q=Q**2,K=L*P-L*E-P*q;let Y=Math.abs(w),rt=Math.abs(_);if(K<0){const ot=Math.sqrt(1-K/(L*P));Y*=ot,rt*=ot}else I=(k===C?-1:1)*Math.sqrt(K/(L*E+P*q));const et=I*Y*ct/rt,pt=-I*rt*Q/Y,A=z*et-B*pt+.5*v,j=B*et+z*pt+.5*b;let R=Iy(1,0,(Q-et)/Y,(ct-pt)/rt),Z=Iy((Q-et)/Y,(ct-pt)/rt,(-Q-et)/Y,(-ct-pt)/rt);C===0&&Z>0?Z-=2*$:C===1&&Z<0&&(Z+=2*$);const W=Math.ceil(Math.abs(Z/$*2)),_t=[],xt=Z/W,bt=8/3*Math.sin(xt/4)*Math.sin(xt/4)/Math.sin(xt/2);let Ct=R+xt;for(let ot=0;ot<W;ot++)_t[ot]=zC(R,Ct,z,B,Y,rt,A,j,bt,M,X),M=_t[ot][5],X=_t[ot][6],R=Ct,Ct+=xt;return _t})(f-u,p-t,a,o,h,d,c);for(let v=0,b=x.length;v<b;v++)x[v][1]+=u,x[v][2]+=t,x[v][3]+=u,x[v][4]+=t,x[v][5]+=u,x[v][6]+=t;return x},LC=u=>{let t=0,n=0,i=0,a=0;const o=[];let c,h=0,d=0;for(const f of u){const p=[...f];let x;switch(p[0]){case"l":p[1]+=t,p[2]+=n;case"L":t=p[1],n=p[2],x=["L",t,n];break;case"h":p[1]+=t;case"H":t=p[1],x=["L",t,n];break;case"v":p[1]+=n;case"V":n=p[1],x=["L",t,n];break;case"m":p[1]+=t,p[2]+=n;case"M":t=p[1],n=p[2],i=p[1],a=p[2],x=["M",t,n];break;case"c":p[1]+=t,p[2]+=n,p[3]+=t,p[4]+=n,p[5]+=t,p[6]+=n;case"C":h=p[3],d=p[4],t=p[5],n=p[6],x=["C",p[1],p[2],h,d,t,n];break;case"s":p[1]+=t,p[2]+=n,p[3]+=t,p[4]+=n;case"S":c==="C"?(h=2*t-h,d=2*n-d):(h=t,d=n),t=p[3],n=p[4],x=["C",h,d,p[1],p[2],t,n],h=x[3],d=x[4];break;case"q":p[1]+=t,p[2]+=n,p[3]+=t,p[4]+=n;case"Q":h=p[1],d=p[2],t=p[3],n=p[4],x=["Q",h,d,t,n];break;case"t":p[1]+=t,p[2]+=n;case"T":c==="Q"?(h=2*t-h,d=2*n-d):(h=t,d=n),t=p[1],n=p[2],x=["Q",h,d,t,n];break;case"a":p[6]+=t,p[7]+=n;case"A":BC(t,n,p).forEach((v=>o.push(v))),t=p[6],n=p[7];break;case"z":case"Z":t=i,n=a,x=["Z"]}x?(o.push(x),c=x[0]):c=""}return o},Ic=(u,t,n,i)=>Math.sqrt((n-u)**2+(i-t)**2),dv=(u,t,n,i,a,o,c,h)=>d=>{const f=d**3,p=(b=>3*b**2*(1-b))(d),x=(b=>3*b*(1-b)**2)(d),v=(b=>(1-b)**3)(d);return new mt(c*f+a*p+n*x+u*v,h*f+o*p+i*x+t*v)},fv=u=>u**2,gv=u=>2*u*(1-u),mv=u=>(1-u)**2,UC=(u,t,n,i,a,o,c,h)=>d=>{const f=fv(d),p=gv(d),x=mv(d),v=3*(x*(n-u)+p*(a-n)+f*(c-a)),b=3*(x*(i-t)+p*(o-i)+f*(h-o));return Math.atan2(b,v)},HC=(u,t,n,i,a,o)=>c=>{const h=fv(c),d=gv(c),f=mv(c);return new mt(a*h+n*d+u*f,o*h+i*d+t*f)},FC=(u,t,n,i,a,o)=>c=>{const h=1-c,d=2*(h*(n-u)+c*(a-n)),f=2*(h*(i-t)+c*(o-i));return Math.atan2(f,d)},Vy=(u,t,n)=>{let i=new mt(t,n),a=0;for(let o=1;o<=100;o+=1){const c=u(o/100);a+=Ic(i.x,i.y,c.x,c.y),i=c}return a},YC=(u,t)=>{let n,i=0,a=0,o={x:u.x,y:u.y},c=at({},o),h=.01,d=0;const f=u.iterator,p=u.angleFinder;for(;a<t&&h>1e-4;)c=f(i),d=i,n=Ic(o.x,o.y,c.x,c.y),n+a>t?(i-=h,h/=2):(o=c,i+=h,a+=n);return at(at({},c),{},{angle:p(d)})},pv=u=>{let t,n,i=0,a=0,o=0,c=0,h=0;const d=[];for(const f of u){const p={x:a,y:o,command:f[0],length:0};switch(f[0]){case"M":n=p,n.x=c=a=f[1],n.y=h=o=f[2];break;case"L":n=p,n.length=Ic(a,o,f[1],f[2]),a=f[1],o=f[2];break;case"C":t=dv(a,o,f[1],f[2],f[3],f[4],f[5],f[6]),n=p,n.iterator=t,n.angleFinder=UC(a,o,f[1],f[2],f[3],f[4],f[5],f[6]),n.length=Vy(t,a,o),a=f[5],o=f[6];break;case"Q":t=HC(a,o,f[1],f[2],f[3],f[4]),n=p,n.iterator=t,n.angleFinder=FC(a,o,f[1],f[2],f[3],f[4]),n.length=Vy(t,a,o),a=f[3],o=f[4];break;case"Z":n=p,n.destX=c,n.destY=h,n.length=Ic(a,o,c,h),a=c,o=h}i+=n.length,d.push(n)}return d.push({length:i,x:a,y:o}),d},XC=function(u,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pv(u),i=0;for(;t-n[i].length>0&&i<n.length-2;)t-=n[i].length,i++;const a=n[i],o=t/a.length,c=u[i];switch(a.command){case"M":return{x:a.x,y:a.y,angle:0};case"Z":return at(at({},new mt(a.x,a.y).lerp(new mt(a.destX,a.destY),o)),{},{angle:Math.atan2(a.destY-a.y,a.destX-a.x)});case"L":return at(at({},new mt(a.x,a.y).lerp(new mt(c[1],c[2]),o)),{},{angle:Math.atan2(c[2]-a.y,c[1]-a.x)});case"C":case"Q":return YC(a,t)}},PC=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),qy=new RegExp(MC,"g"),IC=new RegExp(cs,"gi"),GC={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},VC=u=>{var t;const n=[],i=(t=u.match(PC))!==null&&t!==void 0?t:[];for(const a of i){const o=a[0];if(o==="z"||o==="Z"){n.push([o]);continue}const c=GC[o.toLowerCase()];let h=[];if(o==="a"||o==="A"){qy.lastIndex=0;for(let d=null;d=qy.exec(a);)h.push(...d.slice(1))}else h=a.match(IC)||[];for(let d=0;d<h.length;d+=c){const f=new Array(c),p=RC[o];f[0]=d>0&&p?p:o;for(let x=0;x<c;x++)f[x+1]=parseFloat(h[d+x]);n.push(f)}}return n},qC=(u,t)=>u.map((n=>n.map(((i,a)=>a===0||t===void 0?i:be(i,t))).join(" "))).join(" ");function mf(u,t){const n=u.style;n&&t&&(typeof t=="string"?n.cssText+=";"+t:Object.entries(t).forEach((i=>{let[a,o]=i;return n.setProperty(a,o)})))}class WC extends Xx{constructor(t){let{allowTouchScrolling:n=!1,containerClass:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),it(this,"upper",void 0),it(this,"container",void 0);const{el:a}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(a,{allowTouchScrolling:n}),this.applyCanvasStyle(o,{allowTouchScrolling:n,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(i),a.parentNode&&a.parentNode.replaceChild(c,a),c.append(a,o),this.container=c}createUpperCanvas(){const{el:t}=this.lower,n=Ks();return n.className=t.className,n.classList.remove("lower-canvas"),n.classList.add("upper-canvas"),n.setAttribute("data-fabric","top"),n.style.cssText=t.style.cssText,n.setAttribute("draggable","true"),n}createContainerElement(){const t=cr().createElement("div");return t.setAttribute("data-fabric","wrapper"),mf(t,{position:"relative"}),xy(t),t}applyCanvasStyle(t,n){const{styles:i,allowTouchScrolling:a}=n;mf(t,at(at({},i),{},{"touch-action":a?"manipulation":Cn})),xy(t)}setDimensions(t,n){super.setDimensions(t,n);const{el:i,ctx:a}=this.upper;Yx(i,a,t,n)}setCSSDimensions(t){super.setCSSDimensions(t),of(this.upper.el,t),of(this.container,t)}cleanupDOM(t){const n=this.container,{el:i}=this.lower,{el:a}=this.upper;super.cleanupDOM(t),n.removeChild(a),n.removeChild(i),n.parentNode&&n.parentNode.replaceChild(i,n)}dispose(){super.dispose(),_s().dispose(this.upper.el),delete this.upper,delete this.container}}class nu extends gr{constructor(){super(...arguments),it(this,"targets",[]),it(this,"_hoveredTargets",[]),it(this,"_currentTransform",null),it(this,"_groupSelector",null),it(this,"contextTopDirty",!1)}static getDefaults(){return at(at({},super.getDefaults()),nu.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new WC(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter((n=>!n.group&&n!==t)).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const n=this.getRetinaScaling(),i=Math.ceil((2*t+1)*n);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=i,this.pixelFindContext.scale(n,n)}isTargetTransparent(t,n,i){const a=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-n+a,-i+a),o.transform(...this.viewportTransform);const c=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(o),t.selectionBackgroundColor=c,o.restore();const h=Math.round(a*this.getRetinaScaling());return JS(o,h,h,h)}_isSelectionKeyPressed(t){const n=this.selectionKey;return!!n&&(Array.isArray(n)?!!n.find((i=>!!i&&t[i]===!0)):t[n])}_shouldClearSelection(t,n){const i=this.getActiveObjects(),a=this._activeObject;return!!(!n||n&&a&&i.length>1&&i.indexOf(n)===-1&&a!==n&&!this._isSelectionKeyPressed(t)||n&&!n.evented||n&&!n.selectable&&a&&a!==n)}_shouldCenterTransform(t,n,i){if(!t)return;let a;return n===Zc||n===jn||n===$n||n===vo?a=this.centeredScaling||t.centeredScaling:n===kf&&(a=this.centeredRotation||t.centeredRotation),a?!i:i}_getOriginFromCorner(t,n){const i={x:t.originX,y:t.originY};return n&&(["ml","tl","bl"].includes(n)?i.x=Re:["mr","tr","br"].includes(n)&&(i.x=ce),["tl","mt","tr"].includes(n)?i.y=rf:["bl","mb","br"].includes(n)&&(i.y=Sn)),i}_setupCurrentTransform(t,n,i){var a;const o=n.group?er(this.getScenePoint(t),void 0,n.group.calcTransformMatrix()):this.getScenePoint(t),{key:c="",control:h}=n.getActiveControl()||{},d=i&&h?(a=h.getActionHandler(t,n,h))===null||a===void 0?void 0:a.bind(h):gS,f=((b,w,_,k)=>{if(!w||!b)return"drag";const C=k.controls[w];return C.getActionName(_,C,k)})(i,c,t,n),p=t[this.centeredKey],x=this._shouldCenterTransform(n,f,p)?{x:Zt,y:Zt}:this._getOriginFromCorner(n,c),v={target:n,action:f,actionHandler:d,actionPerformed:!1,corner:c,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:o.x-n.left,offsetY:o.y-n.top,originX:x.x,originY:x.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:ze(n.angle),width:n.width,height:n.height,shiftKey:t.shiftKey,altKey:p,original:at(at({},Px(n)),{},{originX:x.x,originY:x.y})};this._currentTransform=v,this.fire("before:transform",{e:t,transform:v})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:n,y:i,deltaX:a,deltaY:o}=this._groupSelector,c=new mt(n,i).transform(this.viewportTransform),h=new mt(n+a,i+o).transform(this.viewportTransform),d=this.selectionLineWidth/2;let f=Math.min(c.x,h.x),p=Math.min(c.y,h.y),x=Math.max(c.x,h.x),v=Math.max(c.y,h.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(f,p,x-f,v-p)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,f+=d,p+=d,x-=d,v-=d,cn.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(f,p,x-f,v-p))}findTarget(t){if(this.skipTargetFind)return;const n=this.getViewportPoint(t),i=this._activeObject,a=this.getActiveObjects();if(this.targets=[],i&&a.length>=1){if(i.findControl(n,lf(t))||a.length>1&&this.searchPossibleTargets([i],n))return i;if(i===this.searchPossibleTargets([i],n)){if(this.preserveObjectStacking){const o=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,n);return t[this.altSelectionKey]&&c&&c!==i?(this.targets=o,i):c}return i}}return this.searchPossibleTargets(this._objects,n)}_pointIsInObjectSelectionArea(t,n){let i=t.getCoords();const a=this.getZoom(),o=t.padding/a;if(o){const[c,h,d,f]=i,p=Math.atan2(h.y-c.y,h.x-c.x),x=Ws(p)*o,v=Zs(p)*o,b=x+v,w=x-v;i=[new mt(c.x-w,c.y-b),new mt(h.x+b,h.y-w),new mt(d.x+w,d.y+b),new mt(f.x-b,f.y+w)]}return Ee.isPointInPolygon(n,i)}_checkTarget(t,n){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,er(n,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,n.x,n.y)))}_searchPossibleTargets(t,n){let i=t.length;for(;i--;){const a=t[i];if(this._checkTarget(a,n)){if(wc(a)&&a.subTargetCheck){const o=this._searchPossibleTargets(a._objects,n);o&&this.targets.push(o)}return a}}}searchPossibleTargets(t,n){const i=this._searchPossibleTargets(t,n);if(i&&wc(i)&&i.interactive&&this.targets[0]){const a=this.targets;for(let o=a.length-1;o>0;o--){const c=a[o];if(!wc(c)||!c.interactive)return c}return a[0]}return i}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,a=i.getBoundingClientRect();let o=oS(t),c=a.width||0,h=a.height||0;c&&h||(Sn in a&&rf in a&&(h=Math.abs(a.top-a.bottom)),Re in a&&ce in a&&(c=Math.abs(a.right-a.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,n||(o=er(o,void 0,this.viewportTransform));const d=this.getRetinaScaling();d!==1&&(o.x/=d,o.y/=d);const f=c===0||h===0?new mt(1,1):new mt(i.width/c,i.height/h);return o.multiply(f)}_setDimensionsImpl(t,n){this._resetTransformEventData(),super._setDimensionsImpl(t,n),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Ks(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return Qi(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,n){let i=!1,a=!1;const o=this.getActiveObjects(),c=[],h=[];t.forEach((d=>{o.includes(d)||(i=!0,d.fire("deselected",{e:n,target:d}),h.push(d))})),o.forEach((d=>{t.includes(d)||(i=!0,d.fire("selected",{e:n,target:d}),c.push(d))})),t.length>0&&o.length>0?(a=!0,i&&this.fire("selection:updated",{e:n,selected:c,deselected:h})):o.length>0?(a=!0,this.fire("selection:created",{e:n,selected:c})):t.length>0&&(a=!0,this.fire("selection:cleared",{e:n,deselected:h})),a&&(this._objectsToRender=void 0)}setActiveObject(t,n){const i=this.getActiveObjects(),a=this._setActiveObject(t,n);return this._fireSelectionEvents(i,n),a}_setActiveObject(t,n){const i=this._activeObject;return i!==t&&!(!this._discardActiveObject(n,t)&&this._activeObject)&&!t.onSelect({e:n})&&(this._activeObject=t,Qi(t)&&i!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,n){const i=this._activeObject;return!!i&&!i.onDeselect({e:t,object:n})&&(this._currentTransform&&this._currentTransform.target===i&&this.endCurrentTransform(t),Qi(i)&&i===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const n=this.getActiveObjects(),i=this.getActiveObject();n.length&&this.fire("before:selection:cleared",{e:t,deselected:[i]});const a=this._discardActiveObject(t);return this._fireSelectionEvents(n,t),a}endCurrentTransform(t){const n=this._currentTransform;this._finalizeCurrentTransform(t),n&&n.target&&(n.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const n=this._currentTransform,i=n.target,a={e:t,target:i,transform:n,action:n.action};i._scaling&&(i._scaling=!1),i.setCoords(),n.actionPerformed&&(this.fire("object:modified",a),i.fire(zc,a))}setViewportTransform(t){super.setViewportTransform(t);const n=this._activeObject;n&&n.setCoords()}destroy(){const t=this._activeObject;Qi(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const n=this._activeObject;n&&n._renderControls(t)}_toObject(t,n,i){const a=this._realizeGroupTransformOnObject(t),o=super._toObject(t,n,i);return t.set(a),o}_realizeGroupTransformOnObject(t){const{group:n}=t;if(n&&Qi(n)&&this._activeObject===n){const i=fr(t,["angle","flipX","flipY",ce,jn,$n,ur,hr,Sn]);return cS(t,n.calcOwnMatrix()),i}return{}}_setSVGObject(t,n,i){const a=this._realizeGroupTransformOnObject(n);super._setSVGObject(t,n,i),n.set(a)}}it(nu,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class ZC{constructor(t){it(this,"targets",[]),it(this,"__disposer",void 0);const n=()=>{const{hiddenTextarea:a}=t.getActiveObject()||{};a&&a.focus()},i=t.upperCanvasEl;i.addEventListener("click",n),this.__disposer=()=>i.removeEventListener("click",n)}exitTextEditing(){this.target=void 0,this.targets.forEach((t=>{t.isEditing&&t.exitEditing()}))}add(t){this.targets.push(t)}remove(t){this.unregister(t),Ka(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var n;!((n=this.target)===null||n===void 0)&&n.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const KC=["target","oldTarget","fireCanvas","e"],zn={passive:!1},Ga=(u,t)=>{const n=u.getViewportPoint(t),i=u.getScenePoint(t);return{viewportPoint:n,scenePoint:i,pointer:n,absolutePointer:i}},ki=function(u){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return u.addEventListener(...n)},Zn=function(u){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return u.removeEventListener(...n)},QC={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class pf extends nu{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),it(this,"_isClick",void 0),it(this,"textEditingManager",new ZC(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((n=>{this[n]=this[n].bind(this)})),this.addOrRemove(ki,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,n){const i=this.upperCanvasEl,a=this._getEventPrefix();t(Fx(i),"resize",this._onResize),t(i,a+"down",this._onMouseDown),t(i,"".concat(a,"move"),this._onMouseMove,zn),t(i,"".concat(a,"out"),this._onMouseOut),t(i,"".concat(a,"enter"),this._onMouseEnter),t(i,"wheel",this._onMouseWheel,{passive:!1}),t(i,"contextmenu",this._onContextMenu),t(i,"click",this._onClick),t(i,"dblclick",this._onClick),t(i,"dragstart",this._onDragStart),t(i,"dragend",this._onDragEnd),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,zn)}removeListeners(){this.addOrRemove(Zn,"remove");const t=this._getEventPrefix(),n=os(this.upperCanvasEl);Zn(n,"".concat(t,"up"),this._onMouseUp),Zn(n,"touchend",this._onTouchEnd,zn),Zn(n,"".concat(t,"move"),this._onMouseMove,zn),Zn(n,"touchmove",this._onMouseMove,zn),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const n=this._hoveredTarget,i=at({e:t},Ga(this,t));this.fire("mouse:out",at(at({},i),{},{target:n})),this._hoveredTarget=void 0,n&&n.fire("mouseout",at({},i)),this._hoveredTargets.forEach((a=>{this.fire("mouse:out",at(at({},i),{},{target:a})),a&&a.fire("mouseout",at({},i))})),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",at({e:t},Ga(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const n=this.getActiveObject();if(n&&n.onDragStart(t)){this._dragSource=n;const i={e:t,target:n};return this.fire("dragstart",i),n.fire("dragstart",i),void ki(this.upperCanvasEl,"drag",this._onDragProgress)}vy(t)}_renderDragEffects(t,n,i){let a=!1;const o=this._dropTarget;o&&o!==n&&o!==i&&(o.clearContextTop(),a=!0),n==null||n.clearContextTop(),i!==n&&(i==null||i.clearContextTop());const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),n&&(c.save(),n.transform(c),n.renderDragSourceEffect(t),c.restore(),a=!0),i&&(c.save(),i.transform(c),i.renderDropTargetEffect(t),c.restore(),a=!0),c.restore(),a&&(this.contextTopDirty=!0)}_onDragEnd(t){const n=!!t.dataTransfer&&t.dataTransfer.dropEffect!==Cn,i=n?this._activeObject:void 0,a={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:n,dropTarget:i};Zn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",a),this._dragSource&&this._dragSource.fire("dragend",a),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const n={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",n),this._dragSource&&this._dragSource.fire("drag",n)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const n="dragover",{target:i,targets:a}=this.findDragTargets(t),o=this._dragSource,c={e:t,target:i,subTargets:a,dragSource:o,canDrop:!1,dropTarget:void 0};let h;this.fire(n,c),this._fireEnterLeaveEvents(i,c),i&&(i.canDrop(t)&&(h=i),i.fire(n,c));for(let d=0;d<a.length;d++){const f=a[d];f.canDrop(t)&&(h=f),f.fire(n,c)}this._renderDragEffects(t,o,h),this._dropTarget=h}_onDragEnter(t){const{target:n,targets:i}=this.findDragTargets(t),a={e:t,target:n,subTargets:i,dragSource:this._dragSource};this.fire("dragenter",a),this._fireEnterLeaveEvents(n,a)}_onDragLeave(t){const n={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",n),this._fireEnterLeaveEvents(void 0,n),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:n,targets:i}=this.findDragTargets(t),a=this._basicEventHandler("drop:before",at({e:t,target:n,subTargets:i,dragSource:this._dragSource},Ga(this,t)));a.didDrop=!1,a.dropTarget=void 0,this._basicEventHandler("drop",a),this.fire("drop:after",a)}_onContextMenu(t){const n=this.findTarget(t),i=this.targets||[],a=this._basicEventHandler("contextmenu:before",{e:t,target:n,subTargets:i});return this.stopContextMenu&&vy(t),this._basicEventHandler("contextmenu",a),!1}_onClick(t){const n=t.detail;n>3||n<2||(this._cacheTransformEventData(t),n==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),n==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const n=t.changedTouches;return n?n[0]&&n[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let n=!this.allowTouchScrolling;const i=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||i&&this._target===i)&&(n=!0),n&&t.preventDefault(),this._resetTransformEventData();const a=this.upperCanvasEl,o=this._getEventPrefix(),c=os(a);ki(c,"touchend",this._onTouchEnd,zn),n&&ki(c,"touchmove",this._onMouseMove,zn),Zn(a,"".concat(o,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const n=this.upperCanvasEl,i=this._getEventPrefix();Zn(n,"".concat(i,"move"),this._onMouseMove,zn);const a=os(n);ki(a,"".concat(i,"up"),this._onMouseUp),ki(a,"".concat(i,"move"),this._onMouseMove,zn)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const n=this._getEventPrefix(),i=os(this.upperCanvasEl);Zn(i,"touchend",this._onTouchEnd,zn),Zn(i,"touchmove",this._onMouseMove,zn),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{ki(this.upperCanvasEl,"".concat(n,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const n=this.upperCanvasEl,i=this._getEventPrefix();if(this._isMainEvent(t)){const a=os(this.upperCanvasEl);Zn(a,"".concat(i,"up"),this._onMouseUp),Zn(a,"".concat(i,"move"),this._onMouseMove,zn),ki(n,"".concat(i,"move"),this._onMouseMove,zn)}}_onMouseMove(t){const n=this.getActiveObject();!this.allowTouchScrolling&&(!n||!n.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const n=this.getActiveObject();return!!n!=!!t||n&&t&&n!==t}__onMouseUp(t){var n;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const i=this._currentTransform,a=this._isClick,o=this._target,{button:c}=t;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let h,d,f=!1;if(i&&(this._finalizeCurrentTransform(t),f=i.actionPerformed),!a){const p=o===this._activeObject;this.handleSelection(t),f||(f=this._shouldRender(o)||!p&&o===this._activeObject)}if(o){const p=o.findControl(this.getViewportPoint(t),lf(t)),{key:x,control:v}=p||{};if(d=x,o.selectable&&o!==this._activeObject&&o.activeOn==="up")this.setActiveObject(o,t),f=!0;else if(v){const b=v.getMouseUpHandler(t,o,v);b&&(h=this.getScenePoint(t),b.call(v,t,i,h.x,h.y))}o.isMoving=!1}if(i&&(i.target!==o||i.corner!==d)){const p=i.target&&i.target.controls[i.corner],x=p&&p.getMouseUpHandler(t,i.target,p);h=h||this.getScenePoint(t),x&&x.call(p,t,i,h.x,h.y)}this._setCursorFromEvent(t,o),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,o&&(o.__corner=void 0),f?this.requestRenderAll():a||(n=this._activeObject)!==null&&n!==void 0&&n.isEditing||this.renderTop()}_basicEventHandler(t,n){const{target:i,subTargets:a=[]}=n;this.fire(t,n),i&&i.fire(t,n);for(let o=0;o<a.length;o++)a[o]!==i&&a[o].fire(t,n);return n}_handleEvent(t,n,i){const a=this._target,o=this.targets||[],c=at(at(at({e:t,target:a,subTargets:o},Ga(this,t)),{},{transform:this._currentTransform},n==="up:before"||n==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),n==="down:before"||n==="down"?i:{});this.fire("mouse:".concat(n),c),a&&a.fire("mouse".concat(n),c);for(let h=0;h<o.length;h++)o[h]!==a&&o[h].fire("mouse".concat(n),c)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const n=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(n,{e:t,pointer:n}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const n=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(n,{e:t,pointer:n})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const n=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:n}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let n=this._target,i=!!n&&n===this._activeObject;const{button:a}=t;if(a)return(this.fireMiddleClick&&a===1||this.fireRightClick&&a===2)&&this._handleEvent(t,"down",{alreadySelected:i}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let o=this._shouldRender(n),c=!1;if(this.handleMultiSelection(t,n)?(n=this._activeObject,c=!0,o=!0):this._shouldClearSelection(t,n)&&this.discardActiveObject(t),this.selection&&(!n||!n.selectable&&!n.isEditing&&n!==this._activeObject)){const h=this.getScenePoint(t);this._groupSelector={x:h.x,y:h.y,deltaY:0,deltaX:0}}if(i=!!n&&n===this._activeObject,n){n.selectable&&n.activeOn==="down"&&this.setActiveObject(n,t);const h=n.findControl(this.getViewportPoint(t),lf(t));if(n===this._activeObject&&(h||!c)){this._setupCurrentTransform(t,n,i);const d=h?h.control:void 0,f=this.getScenePoint(t),p=d&&d.getMouseDownHandler(t,n,d);p&&p.call(d,t,this._currentTransform,f.x,f.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:i}),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=er(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const n=this._groupSelector;if(n){const i=this.getScenePoint(t);n.deltaX=i.x-n.x,n.deltaY=i.y-n.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const i=this.findTarget(t);this._setCursorFromEvent(t,i),this._fireOverOutEvents(t,i)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,n){const i=this._hoveredTarget,a=this._hoveredTargets,o=this.targets,c=Math.max(a.length,o.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:n,oldTarget:i,fireCanvas:!0});for(let h=0;h<c;h++)o[h]===n||a[h]&&a[h]===i||this.fireSyntheticInOutEvents("mouse",{e:t,target:o[h],oldTarget:a[h]});this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,n){const i=this._draggedoverTarget,a=this._hoveredTargets,o=this.targets,c=Math.max(a.length,o.length);this.fireSyntheticInOutEvents("drag",at(at({},n),{},{target:t,oldTarget:i,fireCanvas:!0}));for(let h=0;h<c;h++)this.fireSyntheticInOutEvents("drag",at(at({},n),{},{target:o[h],oldTarget:a[h]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,n){let{target:i,oldTarget:a,fireCanvas:o,e:c}=n,h=Ce(n,KC);const{targetIn:d,targetOut:f,canvasIn:p,canvasOut:x}=QC[t],v=a!==i;if(a&&v){const b=at(at({},h),{},{e:c,target:a,nextTarget:i},Ga(this,c));o&&this.fire(x,b),a.fire(f,b)}if(i&&v){const b=at(at({},h),{},{e:c,target:i,previousTarget:a},Ga(this,c));o&&this.fire(p,b),i.fire(d,b)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const n=this.getScenePoint(t),i=this._currentTransform,a=i.target,o=a.group?er(n,void 0,a.group.calcTransformMatrix()):n;i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,o),i.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,n,i){const{action:a,actionHandler:o,target:c}=n,h=!!o&&o(t,n,i.x,i.y);h&&c.setCoords(),a==="drag"&&h&&(n.target.isMoving=!0,this.setCursor(n.target.moveCursor||this.moveCursor)),n.actionPerformed=n.actionPerformed||h}_setCursorFromEvent(t,n){if(!n)return void this.setCursor(this.defaultCursor);let i=n.hoverCursor||this.hoverCursor;const a=Qi(this._activeObject)?this._activeObject:null,o=(!a||n.group!==a)&&n.findControl(this.getViewportPoint(t));if(o){const c=o.control;this.setCursor(c.cursorStyleHandler(t,c,n))}else n.subTargetCheck&&this.targets.concat().reverse().map((c=>{i=c.hoverCursor||i})),this.setCursor(i)}handleMultiSelection(t,n){const i=this._activeObject,a=Qi(i);if(i&&this._isSelectionKeyPressed(t)&&this.selection&&n&&n.selectable&&(i!==n||a)&&(a||!n.isDescendantOf(i)&&!i.isDescendantOf(n))&&!n.onSelect({e:t})&&!i.getActiveControl()){if(a){const o=i.getObjects();if(n===i){const c=this.getViewportPoint(t);if(!(n=this.searchPossibleTargets(o,c)||this.searchPossibleTargets(this._objects,c))||!n.selectable)return!1}n.group===i?(i.remove(n),this._hoveredTarget=n,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(n),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(o,t)}else{i.isEditing&&i.exitEditing();const o=new(Lt.getClass("ActiveSelection"))([],{canvas:this});o.multiSelectAdd(i,n),this._hoveredTarget=o,this._setActiveObject(o,t),this._fireSelectionEvents([i],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:n,y:i,deltaX:a,deltaY:o}=this._groupSelector,c=new mt(n,i),h=c.add(new mt(a,o)),d=c.min(h),f=c.max(h).subtract(d),p=this.collectObjects({left:d.x,top:d.y,width:f.x,height:f.y},{includeIntersecting:!this.selectionFullyContained}),x=c.eq(h)?p[0]?[p[0]]:[]:p.length>1?p.filter((v=>!v.onSelect({e:t}))).reverse():p;if(x.length===1)this.setActiveObject(x[0],t);else if(x.length>1){const v=Lt.getClass("ActiveSelection");this.setActiveObject(new v(x,{canvas:this}),t)}return this._groupSelector=null,!0}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;const{upper:i}=this.elements;i.ctx=void 0;const a=super.toCanvasElement(t,n);return i.ctx=i.el.getContext("2d"),a}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const yv={x1:0,y1:0,x2:0,y2:0},JC=at(at({},yv),{},{r1:0,r2:0}),Ja=(u,t)=>isNaN(u)&&typeof t=="number"?t:u;function xv(u){return u&&/%$/.test(u)&&Number.isFinite(parseFloat(u))}function vv(u,t){const n=typeof u=="number"?u:typeof u=="string"?parseFloat(u)/(xv(u)?100:1):NaN;return lr(0,Ja(n,t),1)}const $C=/\s*;\s*/,t5=/\s*:\s*/;function e5(u,t){let n,i;const a=u.getAttribute("style");if(a){const c=a.split($C);c[c.length-1]===""&&c.pop();for(let h=c.length;h--;){const[d,f]=c[h].split(t5).map((p=>p.trim()));d==="stop-color"?n=f:d==="stop-opacity"&&(i=f)}}const o=new de(n||u.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:vv(u.getAttribute("offset"),0),color:o.toRgb(),opacity:Ja(parseFloat(i||u.getAttribute("stop-opacity")||""),1)*o.getAlpha()*t}}function n5(u,t){const n=[],i=u.getElementsByTagName("stop"),a=vv(t,1);for(let o=i.length;o--;)n.push(e5(i[o],a));return n}function bv(u){return u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?"linear":"radial"}function _v(u){return u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function is(u,t){return u.getAttribute(t)}function s5(u,t){return(function(n,i){let a,{width:o,height:c,gradientUnits:h}=i;return Object.entries(n).reduce(((d,f)=>{let[p,x]=f;if(x==="Infinity")a=1;else if(x==="-Infinity")a=0;else{const v=typeof x=="string";a=v?parseFloat(x):x,v&&xv(x)&&(a*=.01,h==="pixels"&&(p!=="x1"&&p!=="x2"&&p!=="r2"||(a*=o),p!=="y1"&&p!=="y2"||(a*=c)))}return d[p]=a,d}),{})})(bv(u)==="linear"?(function(n){return{x1:is(n,"x1")||0,y1:is(n,"y1")||0,x2:is(n,"x2")||"100%",y2:is(n,"y2")||0}})(u):(function(n){return{x1:is(n,"fx")||is(n,"cx")||"50%",y1:is(n,"fy")||is(n,"cy")||"50%",r1:0,x2:is(n,"cx")||"50%",y2:is(n,"cy")||"50%",r2:is(n,"r")||"50%"}})(u),at(at({},t),{},{gradientUnits:_v(u)}))}class ta{constructor(t){const{type:n="linear",gradientUnits:i="pixels",coords:a={},colorStops:o=[],offsetX:c=0,offsetY:h=0,gradientTransform:d,id:f}=t||{};Object.assign(this,{type:n,gradientUnits:i,coords:at(at({},n==="radial"?JC:yv),a),colorStops:o,offsetX:c,offsetY:h,gradientTransform:d,id:f?"".concat(f,"_").concat(Ai()):Ai()})}addColorStop(t){for(const n in t){const i=new de(t[n]);this.colorStops.push({offset:parseFloat(n),color:i.toRgb(),opacity:i.getAlpha()})}return this}toObject(t){return at(at({},fr(this,t)),{},{type:this.type,coords:at({},this.coords),colorStops:this.colorStops.map((n=>at({},n))),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[],a=this.gradientTransform?this.gradientTransform.concat():fn.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map((x=>at({},x))).sort(((x,v)=>x.offset-v.offset));let h=-this.offsetX,d=-this.offsetY;var f;o==="objectBoundingBox"?(h/=t.width,d/=t.height):(h+=t.width/2,d+=t.height/2),(f=t)&&typeof f._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(h-=t.pathOffset.x,d-=t.pathOffset.y),a[4]-=h,a[5]-=d;const p=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(n?n+" ":"").concat(_o(a),'"'),""].join(" ");if(this.type==="linear"){const{x1:x,y1:v,x2:b,y2:w}=this.coords;i.push("<linearGradient ",p,' x1="',x,'" y1="',v,'" x2="',b,'" y2="',w,`">
`)}else if(this.type==="radial"){const{x1:x,y1:v,x2:b,y2:w,r1:_,r2:k}=this.coords,C=_>k;i.push("<radialGradient ",p,' cx="',C?x:b,'" cy="',C?v:w,'" r="',C?_:k,'" fx="',C?b:x,'" fy="',C?w:v,`">
`),C&&(c.reverse(),c.forEach((M=>{M.offset=1-M.offset})));const O=Math.min(_,k);if(O>0){const M=O/Math.max(_,k);c.forEach((X=>{X.offset+=M*(1-X.offset)}))}}return c.forEach((x=>{let{color:v,offset:b,opacity:w}=x;i.push("<stop ",'offset="',100*b+"%",'" style="stop-color:',v,w!==void 0?";stop-opacity: "+w:";",`"/>
`)})),i.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),i.join("")}toLive(t){const{x1:n,y1:i,x2:a,y2:o,r1:c,r2:h}=this.coords,d=this.type==="linear"?t.createLinearGradient(n,i,a,o):t.createRadialGradient(n,i,c,a,o,h);return this.colorStops.forEach((f=>{let{color:p,opacity:x,offset:v}=f;d.addColorStop(v,x!==void 0?new de(p).setAlpha(x).toRgba():p)})),d}static async fromObject(t){const{colorStops:n,gradientTransform:i}=t;return new this(at(at({},t),{},{colorStops:n?n.map((a=>at({},a))):void 0,gradientTransform:i?[...i]:void 0}))}static fromElement(t,n,i){const a=_v(t),o=n._findCenterFromElement();return new this(at({id:t.getAttribute("id")||void 0,type:bv(t),coords:s5(t,{width:i.viewBoxWidth||i.width,height:i.viewBoxHeight||i.height}),colorStops:n5(t,i.opacity),gradientUnits:a,gradientTransform:df(t.getAttribute("gradientTransform")||"")},a==="pixels"?{offsetX:n.width/2-o.x,offsetY:n.height/2-o.y}:{offsetX:0,offsetY:0}))}}it(ta,"type","Gradient"),Lt.setClass(ta,"gradient"),Lt.setClass(ta,"linear"),Lt.setClass(ta,"radial");const i5=["type","source","patternTransform"];class Dd{get type(){return"pattern"}set type(t){Di("warn","Setting type has no effect",t)}constructor(t){it(this,"repeat","repeat"),it(this,"offsetX",0),it(this,"offsetY",0),it(this,"crossOrigin",""),this.id=Ai(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:n,crossOrigin:i}=this;return at(at({},fr(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:n,crossOrigin:i,offsetX:be(this.offsetX,ie.NUM_FRACTION_DIGITS),offsetY:be(this.offsetY,ie.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:n,height:i}=t;const{source:a,repeat:o,id:c}=this,h=Ja(this.offsetX/n,0),d=Ja(this.offsetY/i,0),f=o==="repeat-y"||o==="no-repeat"?1+Math.abs(h||0):Ja(a.width/n,0),p=o==="repeat-x"||o==="no-repeat"?1+Math.abs(d||0):Ja(a.height/i,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(h,'" y="').concat(d,'" width="').concat(f,'" height="').concat(p,'">'),'<image x="0" y="0" width="'.concat(a.width,'" height="').concat(a.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,n){let{type:i,source:a,patternTransform:o}=t,c=Ce(t,i5);const h=await Cc(a,at(at({},n),{},{crossOrigin:c.crossOrigin}));return new this(at(at({},c),{},{patternTransform:o&&o.slice(0),source:h}))}}it(Dd,"type","Pattern"),Lt.setClass(Dd),Lt.setClass(Dd,"pattern");const a5=["path","left","top"],r5=["d"];class Ji extends cn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:i,left:a,top:o}=n,c=Ce(n,a5);super(),Object.assign(this,Ji.ownDefaults),this.setOptions(c),this._setPath(t||[],!0),typeof a=="number"&&this.set(ce,a),typeof o=="number"&&this.set(Sn,o)}_setPath(t,n){this.path=LC(Array.isArray(t)?t:VC(t)),this.setBoundingBox(n)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new mt(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const n=-this.pathOffset.x,i=-this.pathOffset.y;t.beginPath();for(const a of this.path)switch(a[0]){case"L":t.lineTo(a[1]+n,a[2]+i);break;case"M":t.moveTo(a[1]+n,a[2]+i);break;case"C":t.bezierCurveTo(a[1]+n,a[2]+i,a[3]+n,a[4]+i,a[5]+n,a[6]+i);break;case"Q":t.quadraticCurveTo(a[1]+n,a[2]+i,a[3]+n,a[4]+i);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return at(at({},super.toObject(t)),{},{path:this.path.map((n=>n.slice()))})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=this.toObject(t);return this.sourcePath&&(delete n.path,n.sourcePath=this.sourcePath),n}_toSVG(){const t=qC(this.path,ie.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=ie.NUM_FRACTION_DIGITS;return" translate(".concat(be(-this.pathOffset.x,t),", ").concat(be(-this.pathOffset.y,t),")")}toClipPathSVG(t){const n=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:n})}toSVG(t){const n=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:n})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:n,height:i,pathOffset:a}=this._calcDimensions();this.set({width:n,height:i,pathOffset:a}),t&&this.setPositionByOrigin(a,Zt,Zt)}_calcBoundsFromPath(){const t=[];let n=0,i=0,a=0,o=0;for(const c of this.path)switch(c[0]){case"L":a=c[1],o=c[2],t.push({x:n,y:i},{x:a,y:o});break;case"M":a=c[1],o=c[2],n=a,i=o;break;case"C":t.push(...Gy(a,o,c[1],c[2],c[3],c[4],c[5],c[6])),a=c[5],o=c[6];break;case"Q":t.push(...Gy(a,o,c[1],c[2],c[1],c[2],c[3],c[4])),a=c[3],o=c[4];break;case"Z":a=n,o=i}return Vs(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return at(at({},t),{},{pathOffset:new mt(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,n,i){const a=$s(t,this.ATTRIBUTE_NAMES,i),{d:o}=a;return new this(o,at(at(at({},Ce(a,r5)),n),{},{left:void 0,top:void 0}))}}it(Ji,"type","Path"),it(Ji,"cacheProperties",[...Js,"path","fillRule"]),it(Ji,"ATTRIBUTE_NAMES",[...Mi,"d"]),Lt.setClass(Ji),Lt.setSVGClass(Ji);const o5=["left","top","radius"],wv=["radius","startAngle","endAngle","counterClockwise"];class Xs extends cn{static getDefaults(){return at(at({},super.getDefaults()),Xs.ownDefaults)}constructor(t){super(),Object.assign(this,Xs.ownDefaults),this.setOptions(t)}_set(t,n){return super._set(t,n),t==="radius"&&this.setRadius(n),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,ze(this.startAngle),ze(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(jn)}getRadiusY(){return this.get("radius")*this.get($n)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...wv,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:n}=this,i=ze(this.startAngle),a=ze(this.endAngle),o=Ws(i)*n,c=Zs(i)*n,h=Ws(a)*n,d=Zs(a)*n,f=t>180?1:0,p=this.counterClockwise?0:1;return['<path d="M '.concat(o," ").concat(c," A ").concat(n," ").concat(n," 0 ").concat(f," ").concat(p," ").concat(h," ").concat(d,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,n,i){const a=$s(t,this.ATTRIBUTE_NAMES,i),{left:o=0,top:c=0,radius:h=0}=a;return new this(at(at({},Ce(a,o5)),{},{radius:h,left:o-h,top:c-h}))}static fromObject(t){return super._fromObject(t)}}it(Xs,"type","Circle"),it(Xs,"cacheProperties",[...Js,...wv]),it(Xs,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),it(Xs,"ATTRIBUTE_NAMES",["cx","cy","r",...Mi]),Lt.setClass(Xs),Lt.setSVGClass(Xs);const l5=["x1","y1","x2","y2"],c5=["x1","y1","x2","y2"],yf=["x1","x2","y1","y2"];class Ln extends cn{constructor(){let[t,n,i,a]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ln.ownDefaults),this.setOptions(o),this.x1=t,this.x2=i,this.y1=n,this.y2=a,this._setWidthHeight();const{left:c,top:h}=o;typeof c=="number"&&this.set(ce,c),typeof h=="number"&&this.set(Sn,h)}_setWidthHeight(){const{x1:t,y1:n,x2:i,y2:a}=this;this.width=Math.abs(i-t),this.height=Math.abs(a-n);const{left:o,top:c,width:h,height:d}=Vs([{x:t,y:n},{x:i,y:a}]),f=new mt(o+h/2,c+d/2);this.setPositionByOrigin(f,Zt,Zt)}_set(t,n){return super._set(t,n),yf.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const n=this.calcLinePoints();t.moveTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineWidth=this.strokeWidth;const i=t.strokeStyle;var a;Qn(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(a=this.stroke)!==null&&a!==void 0?a:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i}_findCenterFromElement(){return new mt((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return at(at({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:n,y1:i,y2:a,width:o,height:c}=this,h=t<=n?-1:1,d=i<=a?-1:1;return{x1:h*o/2,x2:h*-o/2,y1:d*c/2,y2:d*-c/2}}_toSVG(){const{x1:t,x2:n,y1:i,y2:a}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(i,'" x2="').concat(n,'" y2="').concat(a,`" />
`)]}static async fromElement(t,n,i){const a=$s(t,this.ATTRIBUTE_NAMES,i),{x1:o=0,y1:c=0,x2:h=0,y2:d=0}=a;return new this([o,c,h,d],Ce(a,l5))}static fromObject(t){let{x1:n,y1:i,x2:a,y2:o}=t,c=Ce(t,c5);return this._fromObject(at(at({},c),{},{points:[n,i,a,o]}),{extraParam:"points"})}}it(Ln,"type","Line"),it(Ln,"cacheProperties",[...Js,...yf]),it(Ln,"ATTRIBUTE_NAMES",Mi.concat(yf)),Lt.setClass(Ln),Lt.setSVGClass(Ln);class ea extends cn{static getDefaults(){return at(at({},super.getDefaults()),ea.ownDefaults)}constructor(t){super(),Object.assign(this,ea.ownDefaults),this.setOptions(t)}_render(t){const n=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-n,i),t.lineTo(0,-i),t.lineTo(n,i),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,n=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(n,",0 ").concat(-n,",").concat(t," ").concat(n),'" />']}}it(ea,"type","Triangle"),it(ea,"ownDefaults",{width:100,height:100}),Lt.setClass(ea),Lt.setSVGClass(ea);const Sv=["rx","ry"];class Ps extends cn{static getDefaults(){return at(at({},super.getDefaults()),Ps.ownDefaults)}constructor(t){super(),Object.assign(this,Ps.ownDefaults),this.setOptions(t)}_set(t,n){switch(super._set(t,n),t){case"rx":this.rx=n,this.set("width",2*n);break;case"ry":this.ry=n,this.set("height",2*n)}return this}getRx(){return this.get("rx")*this.get(jn)}getRy(){return this.get("ry")*this.get($n)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Sv,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,Mc,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,n,i){const a=$s(t,this.ATTRIBUTE_NAMES,i);return a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,new this(a)}}function u5(u){if(!u)return[];const t=u.replace(/,/g," ").trim().split(/\s+/),n=[];for(let i=0;i<t.length;i+=2)n.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return n}it(Ps,"type","Ellipse"),it(Ps,"cacheProperties",[...Js,...Sv]),it(Ps,"ownDefaults",{rx:0,ry:0}),it(Ps,"ATTRIBUTE_NAMES",[...Mi,"cx","cy","rx","ry"]),Lt.setClass(Ps),Lt.setSVGClass(Ps);const h5=["left","top"],Cv={exactBoundingBox:!1};class rs extends cn{static getDefaults(){return at(at({},super.getDefaults()),rs.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),it(this,"strokeDiff",void 0),Object.assign(this,rs.ownDefaults),this.setOptions(n),this.points=t;const{left:i,top:a}=n;this.initialized=!0,this.setBoundingBox(!0),typeof i=="number"&&this.set(ce,i),typeof a=="number"&&this.set(Sn,a)}isOpen(){return!0}_projectStrokeOnPoints(t){return tC(this.points,t,this.isOpen())}_calcDimensions(t){t=at({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const n=this.exactBoundingBox?this._projectStrokeOnPoints(t).map((f=>f.projectedPoint)):this.points;if(n.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new mt,strokeOffset:new mt,strokeDiff:new mt};const i=Vs(n),a=Kc(at(at({},t),{},{scaleX:1,scaleY:1})),o=Vs(this.points.map((f=>wn(f,a,!0)))),c=new mt(this.scaleX,this.scaleY);let h=i.left+i.width/2,d=i.top+i.height/2;return this.exactBoundingBox&&(h-=d*Math.tan(ze(this.skewX)),d-=h*Math.tan(ze(this.skewY))),at(at({},i),{},{pathOffset:new mt(h,d),strokeOffset:new mt(o.left,o.top).subtract(new mt(i.left,i.top)).multiply(c),strokeDiff:new mt(i.width,i.height).subtract(new mt(o.width,o.height)).multiply(c)})}_findCenterFromElement(){const t=Vs(this.points);return new mt(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:n,top:i,width:a,height:o,pathOffset:c,strokeOffset:h,strokeDiff:d}=this._calcDimensions();this.set({width:a,height:o,pathOffset:c,strokeOffset:h,strokeDiff:d}),t&&this.setPositionByOrigin(new mt(n+a/2,i+o/2),Zt,Zt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new mt(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(t).some((h=>this.strokeUniform||this.constructor.layoutProperties.includes(h)))){var n,i;const{width:h,height:d}=this._calcDimensions(t);c=new mt((n=t.width)!==null&&n!==void 0?n:h,(i=t.height)!==null&&i!==void 0?i:d)}else{var a,o;c=new mt((a=t.width)!==null&&a!==void 0?a:this.width,(o=t.height)!==null&&o!==void 0?o:this.height)}return c.multiply(new mt(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,n){const i=this.initialized&&this[t]!==n,a=super._set(t,n);return this.exactBoundingBox&&i&&((t===jn||t===$n)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),a}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return at(at({},super.toObject(t)),{},{points:this.points.map((n=>{let{x:i,y:a}=n;return{x:i,y:a}}))})}_toSVG(){const t=[],n=this.pathOffset.x,i=this.pathOffset.y,a=ie.NUM_FRACTION_DIGITS;for(let o=0,c=this.points.length;o<c;o++)t.push(be(this.points[o].x-n,a),",",be(this.points[o].y-i,a)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const n=this.points.length,i=this.pathOffset.x,a=this.pathOffset.y;if(n&&!isNaN(this.points[n-1].y)){t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-a);for(let o=0;o<n;o++){const c=this.points[o];t.lineTo(c.x-i,c.y-a)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,n,i){return new this(u5(t.getAttribute("points")),at(at({},Ce($s(t,this.ATTRIBUTE_NAMES,i),h5)),n))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}it(rs,"ownDefaults",Cv),it(rs,"type","Polyline"),it(rs,"layoutProperties",[ur,hr,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),it(rs,"cacheProperties",[...Js,"points"]),it(rs,"ATTRIBUTE_NAMES",[...Mi]),Lt.setClass(rs),Lt.setSVGClass(rs);class ql extends rs{isOpen(){return!1}}it(ql,"ownDefaults",Cv),it(ql,"type","Polygon"),Lt.setClass(ql),Lt.setSVGClass(ql);class Tv extends cn{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const n=t===void 0?this.styles:{line:this.styles[t]};for(const i in n)for(const a in n[i])for(const o in n[i][a])return!1;return!0}styleHas(t,n){if(!this.styles||n!==void 0&&!this.styles[n])return!1;const i=n===void 0?this.styles:{0:this.styles[n]};for(const a in i)for(const o in i[a])if(i[a][o][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const n=this.styles;let i,a,o=0,c=!0,h=0;for(const d in n){i=0;for(const f in n[d]){const p=n[d][f]||{};o++,p[t]!==void 0?(a?p[t]!==a&&(c=!1):a=p[t],p[t]===this[t]&&delete p[t]):c=!1,Object.keys(p).length!==0?i++:delete n[d][f]}i===0&&delete n[d]}for(let d=0;d<this._textLines.length;d++)h+=this._textLines[d].length;c&&o===h&&(this[t]=a,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const n=this.styles;let i,a,o;for(a in n){for(o in i=n[a],i)delete i[o][t],Object.keys(i[o]).length===0&&delete i[o];Object.keys(i).length===0&&delete n[a]}}_extendStyles(t,n){const{lineIndex:i,charIndex:a}=this.get2DCursorLocation(t);this._getLineStyle(i)||this._setLineStyle(i);const o=Df(at(at({},this._getStyleDeclaration(i,a)),n),(c=>c!==void 0));this._setStyleDeclaration(i,a,o)}getSelectionStyles(t,n,i){const a=[];for(let o=t;o<(n||t);o++)a.push(this.getStyleAtPosition(o,i));return a}getStyleAtPosition(t,n){const{lineIndex:i,charIndex:a}=this.get2DCursorLocation(t);return n?this.getCompleteStyleDeclaration(i,a):this._getStyleDeclaration(i,a)}setSelectionStyles(t,n,i){for(let a=n;a<(i||n);a++)this._extendStyles(a,t);this._forceClearCache=!0}_getStyleDeclaration(t,n){var i;const a=this.styles&&this.styles[t];return a&&(i=a[n])!==null&&i!==void 0?i:{}}getCompleteStyleDeclaration(t,n){return at(at({},fr(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,n))}_setStyleDeclaration(t,n,i){this.styles[t][n]=i}_deleteStyleDeclaration(t,n){delete this.styles[t][n]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}it(Tv,"_styleProperties",pS);const d5=/  +/g,f5=/"/g;function Ad(u,t,n,i,a){return"		".concat((function(o,c){let{left:h,top:d,width:f,height:p}=c,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ie.NUM_FRACTION_DIGITS;const v=wo(qe,o,!1),[b,w,_,k]=[h,d,f,p].map((C=>be(C,x)));return"<rect ".concat(v,' x="').concat(b,'" y="').concat(w,'" width="').concat(_,'" height="').concat(k,'"></rect>')})(u,{left:t,top:n,width:i,height:a}),`
`)}const g5=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Md;class Xe extends Tv{static getDefaults(){return at(at({},super.getDefaults()),Xe.ownDefaults)}constructor(t,n){super(),it(this,"__charBounds",[]),Object.assign(this,Xe.ownDefaults),this.setOptions(n),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=pv(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(xs)&&this.enlargeSpaces()}enlargeSpaces(){let t,n,i,a,o,c,h;for(let d=0,f=this._textLines.length;d<f;d++)if((this.textAlign===xs||d!==f-1&&!this.isEndOfWrapping(d))&&(a=0,o=this._textLines[d],n=this.getLineWidth(d),n<this.width&&(h=this.textLines[d].match(this._reSpacesAndTabs)))){i=h.length,t=(this.width-n)/i;for(let p=0;p<=o.length;p++)c=this.__charBounds[d][p],this._reSpaceAndTab.test(o[p])?(c.width+=t,c.kernedWidth+=t,c.left+=a,a+=t):c.left+=a}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,n){const i=n?this._unwrappedTextLines:this._textLines;let a;for(a=0;a<i.length;a++){if(t<=i[a].length)return{lineIndex:a,charIndex:t};t-=i[a].length+this.missingNewlineOffset(a,n)}return{lineIndex:a-1,charIndex:i[a-1].length<t?i[a-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),n=this.fontSize;return t.width+=n*t.zoomX,t.height+=n*t.zoomY,t}_render(t){const n=this.path;n&&!n.isNotVisible()&&n._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===Tn?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,n,i){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Zt:t.textBaseline="middle";break;case"ascender":t.textBaseline=Sn;break;case"descender":t.textBaseline=rf}t.font=this._getFontDeclaration(n,i)}calcTextWidth(){let t=this.getLineWidth(0);for(let n=1,i=this._textLines.length;n<i;n++){const a=this.getLineWidth(n);a>t&&(t=a)}return t}_renderTextLine(t,n,i,a,o,c){this._renderChars(t,n,i,a,o,c)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const n=t.fillStyle,i=this._getLeftOffset();let a=this._getTopOffset();for(let o=0,c=this._textLines.length;o<c;o++){const h=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){a+=h;continue}const d=this._textLines[o].length,f=this._getLineLeftOffset(o);let p,x,v=0,b=0,w=this.getValueOfPropertyAt(o,0,"textBackgroundColor");const _=this.getHeightOfLineImpl(o);for(let k=0;k<d;k++){const C=this.__charBounds[o][k];x=this.getValueOfPropertyAt(o,k,"textBackgroundColor"),this.path?(t.save(),t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),t.fillStyle=x,x&&t.fillRect(-C.width/2,-_*(1-this._fontSizeFraction),C.width,_),t.restore()):x!==w?(p=i+f+b,this.direction==="rtl"&&(p=this.width-p-v),t.fillStyle=w,w&&t.fillRect(p,a,v,_),b=C.left,v=C.width,w=x):v+=C.kernedWidth}x&&!this.path&&(p=i+f+b,this.direction==="rtl"&&(p=this.width-p-v),t.fillStyle=x,t.fillRect(p,a,v,_)),a+=h}t.fillStyle=n,this._removeShadow(t)}_measureChar(t,n,i,a){const o=go.getFontCache(n),c=this._getFontDeclaration(n),h=i?i+t:t,d=i&&c===this._getFontDeclaration(a),f=n.fontSize/this.CACHE_FONT_SIZE;let p,x,v,b;if(i&&o.has(i)&&(v=o.get(i)),o.has(t)&&(b=p=o.get(t)),d&&o.has(h)&&(x=o.get(h),b=x-v),p===void 0||v===void 0||x===void 0){const w=(function(){return Md||(Md=ts({width:0,height:0}).getContext("2d")),Md})();this._setTextStyles(w,n,!0),p===void 0&&(b=p=w.measureText(t).width,o.set(t,p)),v===void 0&&d&&i&&(v=w.measureText(i).width,o.set(i,v)),d&&x===void 0&&(x=w.measureText(h).width,o.set(h,x),b=x-v)}return{width:p*f,kernedWidth:b*f}}getHeightOfChar(t,n){return this.getValueOfPropertyAt(t,n,"fontSize")}measureLine(t){const n=this._measureLine(t);return this.charSpacing!==0&&(n.width-=this._getWidthOfCharSpacing()),n.width<0&&(n.width=0),n}_measureLine(t){let n,i,a=0;const o=this.pathSide===Re,c=this.path,h=this._textLines[t],d=h.length,f=new Array(d);this.__charBounds[t]=f;for(let p=0;p<d;p++){const x=h[p];i=this._getGraphemeBox(x,t,p,n),f[p]=i,a+=i.kernedWidth,n=x}if(f[d]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let p=0;const x=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case ce:p=o?x-a:0;break;case Zt:p=(x-a)/2;break;case Re:p=o?0:x-a}p+=this.pathStartOffset*(o?-1:1);for(let v=o?d-1:0;o?v>=0:v<d;o?v--:v++)i=f[v],p>x?p%=x:p<0&&(p+=x),this._setGraphemeOnPath(p,i),p+=i.kernedWidth}return{width:a,numOfSpaces:0}}_setGraphemeOnPath(t,n){const i=t+n.kernedWidth/2,a=this.path,o=XC(a.path,i,a.segmentsInfo);n.renderLeft=o.x-a.pathOffset.x,n.renderTop=o.y-a.pathOffset.y,n.angle=o.angle+(this.pathSide===Re?Math.PI:0)}_getGraphemeBox(t,n,i,a,o){const c=this.getCompleteStyleDeclaration(n,i),h=a?this.getCompleteStyleDeclaration(n,i-1):{},d=this._measureChar(t,c,a,h);let f,p=d.kernedWidth,x=d.width;this.charSpacing!==0&&(f=this._getWidthOfCharSpacing(),x+=f,p+=f);const v={width:x,left:0,height:c.fontSize,kernedWidth:p,deltaY:c.deltaY};if(i>0&&!o){const b=this.__charBounds[n][i-1];v.left=b.left+b.width+d.kernedWidth-d.width}return v}getHeightOfLineImpl(t){const n=this.__lineHeights;if(n[t])return n[t];let i=this.getHeightOfChar(t,0);for(let a=1,o=this._textLines[t].length;a<o;a++)i=Math.max(this.getHeightOfChar(t,a),i);return n[t]=i*this._fontSizeMult}getHeightOfLine(t){return this.getHeightOfLineImpl(t)*this.lineHeight}calcTextHeight(){let t=0;for(let n=0,i=this._textLines.length;n<i;n++)t+=n===i-1?this.getHeightOfLineImpl(n):this.getHeightOfLine(n);return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,n){t.save();let i=0;const a=this._getLeftOffset(),o=this._getTopOffset();for(let c=0,h=this._textLines.length;c<h;c++)this._renderTextLine(n,t,this._textLines[c],a+this._getLineLeftOffset(c),o+i+this.getHeightOfLineImpl(c),c),i+=this.getHeightOfLine(c);t.restore()}_renderTextFill(t){(this.fill||this.styleHas(qe))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,n,i,a,o,c){const h=this.textAlign.includes(xs),d=this.path,f=!h&&this.charSpacing===0&&this.isEmptyStyles(c)&&!d,p=this.direction==="ltr",x=this.direction==="ltr"?1:-1,v=n.direction;let b,w,_,k,C,O="",M=0;if(n.save(),v!==this.direction&&(n.canvas.setAttribute("dir",p?"ltr":"rtl"),n.direction=p?"ltr":"rtl",n.textAlign=p?ce:Re),o-=this.getHeightOfLineImpl(c)*this._fontSizeFraction,f)return this._renderChar(t,n,c,0,i.join(""),a,o),void n.restore();for(let X=0,I=i.length-1;X<=I;X++)k=X===I||this.charSpacing||d,O+=i[X],_=this.__charBounds[c][X],M===0?(a+=x*(_.kernedWidth-_.width),M+=_.width):M+=_.kernedWidth,h&&!k&&this._reSpaceAndTab.test(i[X])&&(k=!0),k||(b=b||this.getCompleteStyleDeclaration(c,X),w=this.getCompleteStyleDeclaration(c,X+1),k=Hf(b,w,!1)),k&&(d?(n.save(),n.translate(_.renderLeft,_.renderTop),n.rotate(_.angle),this._renderChar(t,n,c,X,O,-M/2,0),n.restore()):(C=a,this._renderChar(t,n,c,X,O,C,o)),O="",b=w,a+=x*M,M=0);n.restore()}_applyPatternGradientTransformText(t){const n=this.width+this.strokeWidth,i=this.height+this.strokeWidth,a=ts({width:n,height:i}),o=a.getContext("2d");return a.width=n,a.height=i,o.beginPath(),o.moveTo(0,0),o.lineTo(n,0),o.lineTo(n,i),o.lineTo(0,i),o.closePath(),o.translate(n/2,i/2),o.fillStyle=t.toLive(o),this._applyPatternGradientTransform(o,t),o.fill(),o.createPattern(a,"no-repeat")}handleFiller(t,n,i){let a,o;return Qn(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(a=-this.width/2,o=-this.height/2,t.translate(a,o),t[n]=this._applyPatternGradientTransformText(i),{offsetX:a,offsetY:o}):(t[n]=i.toLive(t),this._applyPatternGradientTransform(t,i)):(t[n]=i,{offsetX:0,offsetY:0})}_setStrokeStyles(t,n){let{stroke:i,strokeWidth:a}=n;return t.lineWidth=a,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",i)}_setFillStyles(t,n){let{fill:i}=n;return this.handleFiller(t,"fillStyle",i)}_renderChar(t,n,i,a,o,c,h){const d=this._getStyleDeclaration(i,a),f=this.getCompleteStyleDeclaration(i,a),p=t==="fillText"&&f.fill,x=t==="strokeText"&&f.stroke&&f.strokeWidth;if(x||p){if(n.save(),n.font=this._getFontDeclaration(f),d.textBackgroundColor&&this._removeShadow(n),d.deltaY&&(h+=d.deltaY),p){const v=this._setFillStyles(n,f);n.fillText(o,c-v.offsetX,h-v.offsetY)}if(x){const v=this._setStrokeStyles(n,f);n.strokeText(o,c-v.offsetX,h-v.offsetY)}n.restore()}}setSuperscript(t,n){this._setScript(t,n,this.superscript)}setSubscript(t,n){this._setScript(t,n,this.subscript)}_setScript(t,n,i){const a=this.get2DCursorLocation(t,!0),o=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),c=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),h={fontSize:o*i.size,deltaY:c+o*i.baseline};this.setSelectionStyles(h,t,n)}_getLineLeftOffset(t){const n=this.getLineWidth(t),i=this.width-n,a=this.textAlign,o=this.direction,c=this.isEndOfWrapping(t);let h=0;return a===xs||a===po&&!c||a===mo&&!c||a===Yc&&!c?0:(a===Zt&&(h=i/2),a===Re&&(h=i),a===po&&(h=i/2),a===mo&&(h=i),o==="rtl"&&(a===Re||a===xs||a===mo?h=0:a===ce||a===Yc?h=-i:a!==Zt&&a!==po||(h=-i/2)),h)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:n}=this.measureLine(t);return this.__lineWidths[t]=n,n}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,n,i){var a;return(a=this._getStyleDeclaration(t,n)[i])!==null&&a!==void 0?a:this[i]}_renderTextDecoration(t,n){if(!this[n]&&!this.styleHas(n))return;let i=this._getTopOffset();const a=this._getLeftOffset(),o=this.path,c=this._getWidthOfCharSpacing(),h=n==="linethrough"?.5:n==="overline"?1:0,d=this.offsets[n];for(let f=0,p=this._textLines.length;f<p;f++){const x=this.getHeightOfLine(f);if(!this[n]&&!this.styleHas(n,f)){i+=x;continue}const v=this._textLines[f],b=x/this.lineHeight,w=this._getLineLeftOffset(f);let _=0,k=0,C=this.getValueOfPropertyAt(f,0,n),O=this.getValueOfPropertyAt(f,0,qe),M=this.getValueOfPropertyAt(f,0,ia),X=C,I=O,$=M;const V=i+b*(1-this._fontSizeFraction);let B=this.getHeightOfChar(f,0),z=this.getValueOfPropertyAt(f,0,"deltaY");for(let L=0,P=v.length;L<P;L++){const E=this.__charBounds[f][L];X=this.getValueOfPropertyAt(f,L,n),I=this.getValueOfPropertyAt(f,L,qe),$=this.getValueOfPropertyAt(f,L,ia);const q=this.getHeightOfChar(f,L),K=this.getValueOfPropertyAt(f,L,"deltaY");if(o&&X&&I){const Y=this.fontSize*$/1e3;t.save(),t.fillStyle=O,t.translate(E.renderLeft,E.renderTop),t.rotate(E.angle),t.fillRect(-E.kernedWidth/2,d*q+K-h*Y,E.kernedWidth,Y),t.restore()}else if((X!==C||I!==O||q!==B||$!==M||K!==z)&&k>0){const Y=this.fontSize*M/1e3;let rt=a+w+_;this.direction==="rtl"&&(rt=this.width-rt-k),C&&O&&M&&(t.fillStyle=O,t.fillRect(rt,V+d*B+z-h*Y,k,Y)),_=E.left,k=E.width,C=X,M=$,O=I,B=q,z=K}else k+=E.kernedWidth}let Q=a+w+_;this.direction==="rtl"&&(Q=this.width-Q-k),t.fillStyle=I;const ct=this.fontSize*$/1e3;X&&I&&$&&t.fillRect(Q,V+d*B+z-h*ct,k-c,ct),i+=x}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:n=this.fontStyle,fontWeight:i=this.fontWeight,fontSize:a=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const c=t.includes("'")||t.includes('"')||t.includes(",")||Xe.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[n,i,"".concat(o?this.CACHE_FONT_SIZE:a,"px"),c].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return Uf(t)}_splitTextIntoLines(t){const n=t.split(this._reNewline),i=new Array(n.length),a=[`
`];let o=[];for(let c=0;c<n.length;c++)i[c]=this.graphemeSplit(n[c]),o=o.concat(i[c],a);return o.pop(),{_unwrappedLines:i,lines:n,graphemeText:o,graphemeLines:i}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return at(at({},super.toObject([...Jx,...t])),{},{styles:iC(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,n){const{textLayoutProperties:i}=this.constructor;super.set(t,n);let a=!1,o=!1;if(typeof t=="object")for(const c in t)c==="path"&&this.setPathInfo(),a=a||i.includes(c),o=o||c==="path";else a=i.includes(t),o=t==="path";return o&&this.setPathInfo(),a&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,n,i){const a=$s(t,Xe.ATTRIBUTE_NAMES,i),o=at(at({},n),a),{textAnchor:c=ce,textDecoration:h="",dx:d=0,dy:f=0,top:p=0,left:x=0,fontSize:v=Tf,strokeWidth:b=1}=o,w=Ce(o,g5),_=new this(Fc(t.textContent||"").trim(),at({left:x+d,top:p+f,underline:h.includes("underline"),overline:h.includes("overline"),linethrough:h.includes("line-through"),strokeWidth:0,fontSize:v},w)),k=_.getScaledHeight()/_.height,C=((_.height+_.strokeWidth)*_.lineHeight-_.height)*k,O=_.getScaledHeight()+C;let M=0;return c===Zt&&(M=_.getScaledWidth()/2),c===Re&&(M=_.getScaledWidth()),_.set({left:_.left-M,top:_.top-(O-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:b}),_}static fromObject(t){return this._fromObject(at(at({},t),{},{styles:aC(t.styles||{},t.text)}),{extraParam:"text"})}}it(Xe,"textLayoutProperties",Qx),it(Xe,"cacheProperties",[...Js,...Jx]),it(Xe,"ownDefaults",yS),it(Xe,"type","Text"),it(Xe,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),it(Xe,"ATTRIBUTE_NAMES",Mi.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),ov(Xe,[class extends Wx{_toSVG(){const u=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(u){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0}),n=this.path;return n?t+n._createBaseSVGMarkup(n._toSVG(),{reviver:u,withShadow:!0,additionalTransform:_o(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(u){let{textBgRects:t,textSpans:n}=u;const i=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(f5,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",i?'text-decoration="'.concat(i,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",n.join(""),`</text>
`]}_getSVGTextAndBg(u,t){const n=[],i=[];let a,o=u;this.backgroundColor&&i.push(...Ad(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,h=this._textLines.length;c<h;c++)a=this._getLineLeftOffset(c),this.direction==="rtl"&&(a+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(i,c,t+a,o),this._setSVGTextLineText(n,c,t+a,o),o+=this.getHeightOfLine(c);return{textSpans:n,textBgRects:i}}_createTextCharSpan(u,t,n,i,a){const o=ie.NUM_FRACTION_DIGITS,c=this.getSvgSpanStyles(t,u!==u.trim()||!!u.match(d5)),h=c?'style="'.concat(c,'"'):"",d=t.deltaY,f=d?' dy="'.concat(be(d,o),'" '):"",{angle:p,renderLeft:x,renderTop:v,width:b}=a;let w="";if(x!==void 0){const _=b/2;p&&(w=' rotate="'.concat(be(Qs(p),o),'"'));const k=dr({angle:Qs(p)});k[4]=x,k[5]=v;const C=new mt(-_,0).transform(k);n=C.x,i=C.y}return'<tspan x="'.concat(be(n,o),'" y="').concat(be(i,o),'" ').concat(f).concat(w).concat(h,">").concat(eC(u),"</tspan>")}_setSVGTextLineText(u,t,n,i){const a=this.getHeightOfLine(t),o=this.textAlign.includes(xs),c=this._textLines[t];let h,d,f,p,x,v="",b=0;i+=a*(1-this._fontSizeFraction)/this.lineHeight;for(let w=0,_=c.length-1;w<=_;w++)x=w===_||this.charSpacing||this.path,v+=c[w],f=this.__charBounds[t][w],b===0?(n+=f.kernedWidth-f.width,b+=f.width):b+=f.kernedWidth,o&&!x&&this._reSpaceAndTab.test(c[w])&&(x=!0),x||(h=h||this.getCompleteStyleDeclaration(t,w),d=this.getCompleteStyleDeclaration(t,w+1),x=Hf(h,d,!0)),x&&(p=this._getStyleDeclaration(t,w),u.push(this._createTextCharSpan(v,p,n,i,f)),v="",h=d,this.direction==="rtl"?n-=b:n+=b,b=0)}_setSVGTextLineBg(u,t,n,i){const a=this._textLines[t],o=this.getHeightOfLine(t)/this.lineHeight;let c,h=0,d=0,f=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let p=0;p<a.length;p++){const{left:x,width:v,kernedWidth:b}=this.__charBounds[t][p];c=this.getValueOfPropertyAt(t,p,"textBackgroundColor"),c!==f?(f&&u.push(...Ad(f,n+d,i,h,o)),d=x,h=v,f=c):h+=b}c&&u.push(...Ad(f,n+d,i,h,o))}_getSVGLineTopOffset(u){let t,n=0;for(t=0;t<u;t++)n+=this.getHeightOfLine(t);const i=this.getHeightOfLine(t);return{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(u){return"".concat(super.getSvgStyles(u)," text-decoration-thickness: ").concat(be(this.textDecorationThickness*this.getObjectScaling().y/10,ie.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(u,t){const{fontFamily:n,strokeWidth:i,stroke:a,fill:o,fontSize:c,fontStyle:h,fontWeight:d,deltaY:f,textDecorationThickness:p,linethrough:x,overline:v,underline:b}=u,w=this.getSvgTextDecoration({underline:b??this.underline,overline:v??this.overline,linethrough:x??this.linethrough}),_=p||this.textDecorationThickness;return[a?wo(Tn,a):"",i?"stroke-width: ".concat(i,"; "):"",n?"font-family: ".concat(n.includes("'")||n.includes('"')?n:"'".concat(n,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",h?"font-style: ".concat(h,"; "):"",d?"font-weight: ".concat(d,"; "):"",w?"text-decoration: ".concat(w,"; text-decoration-thickness: ").concat(be(_*this.getObjectScaling().y/10,ie.NUM_FRACTION_DIGITS),"%; "):"",o?wo(qe,o):"",f?"baseline-shift: ".concat(-f,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(u){return["overline","underline","line-through"].filter((t=>u[t.replace("-","")])).join(" ")}}]),Lt.setClass(Xe),Lt.setSVGClass(Xe);class m5{constructor(t){it(this,"target",void 0),it(this,"__mouseDownInPlace",!1),it(this,"__dragStartFired",!1),it(this,"__isDraggingOver",!1),it(this,"__dragStartSelection",void 0),it(this,"__dragImageDisposer",void 0),it(this,"_dispose",void 0),this.target=t;const n=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{n.forEach((i=>i())),this._dispose=void 0}}isPointerOverSelection(t){const n=this.target,i=n.getSelectionStartFromPointer(t);return n.isEditing&&i>=n.selectionStart&&i<=n.selectionEnd&&n.selectionStart<n.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const n=this.isActive();return n&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,n}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,n){var i;let{selectionStart:a,selectionEnd:o}=n;const c=this.target,h=c.canvas,d=new mt(c.flipX?-1:1,c.flipY?-1:1),f=c._getCursorBoundaries(a),p=new mt(f.left+f.leftOffset,f.top+f.topOffset).multiply(d).transform(c.calcTransformMatrix()),x=h.getScenePoint(t).subtract(p),v=c.getCanvasRetinaScaling(),b=c.getBoundingRect(),w=p.subtract(new mt(b.left,b.top)),_=h.viewportTransform,k=w.add(x).transform(_,!0),C=c.backgroundColor,O=Lf(c.styles);c.backgroundColor="";const M={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(M,0,a),c.setSelectionStyles(M,o,c.text.length),c.dirty=!0;const X=c.toCanvasElement({enableRetinaScaling:h.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=C,c.styles=O,c.dirty=!0,mf(X,{position:"fixed",left:"".concat(-X.width,"px"),border:Cn,width:"".concat(X.width/v,"px"),height:"".concat(X.height/v,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{X.remove()},os(t.target||this.target.hiddenTextarea).body.appendChild(X),(i=t.dataTransfer)===null||i===void 0||i.setDragImage(X,k.x,k.y)}onDragStart(t){this.__dragStartFired=!0;const n=this.target,i=this.isActive();if(i&&t.dataTransfer){const a=this.__dragStartSelection={selectionStart:n.selectionStart,selectionEnd:n.selectionEnd},o=n._text.slice(a.selectionStart,a.selectionEnd).join(""),c=at({text:n.text,value:o},a);t.dataTransfer.setData("text/plain",o),t.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:n.getSelectionStyles(a.selectionStart,a.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,c)}return n.abortCursorAnimation(),i}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const n=this.target.getSelectionStartFromPointer(t),i=this.__dragStartSelection;return n<i.selectionStart||n>i.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e:n}=t;const i=this.targetCanDrop(n);!this.__isDraggingOver&&i&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e:n}=t,i=this.targetCanDrop(n);!this.__isDraggingOver&&i?this.__isDraggingOver=!0:this.__isDraggingOver&&!i&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(n.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var n;const{e:i}=t,a=i.defaultPrevented;this.__isDraggingOver=!1,i.preventDefault();let o=(n=i.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain");if(o&&!a){const c=this.target,h=c.canvas;let d=c.getSelectionStartFromPointer(i);const{styles:f}=i.dataTransfer.types.includes("application/fabric")?JSON.parse(i.dataTransfer.getData("application/fabric")):{},p=o[Math.max(0,o.length-1)],x=0;if(this.__dragStartSelection){const v=this.__dragStartSelection.selectionStart,b=this.__dragStartSelection.selectionEnd;d>v&&d<=b?d=v:d>b&&(d-=b-v),c.removeChars(v,b),delete this.__dragStartSelection}c._reNewline.test(p)&&(c._reNewline.test(c._text[d])||d===c._text.length)&&(o=o.trimEnd()),t.didDrop=!0,t.dropTarget=c,c.insertChars(o,f,d),h.setActiveObject(c),c.enterEditing(i),c.selectionStart=Math.min(d+x,c._text.length),c.selectionEnd=Math.min(c.selectionStart+o.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(Rc,{index:d+x,action:"drop"}),h.fire("text:changed",{target:c}),h.contextTopDirty=!0,h.requestRenderAll()}}dragEndHandler(t){let{e:n}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var i;const a=this.target,o=this.target.canvas,{selectionStart:c,selectionEnd:h}=this.__dragStartSelection,d=((i=n.dataTransfer)===null||i===void 0?void 0:i.dropEffect)||Cn;d===Cn?(a.selectionStart=c,a.selectionEnd=h,a._updateTextarea(),a.hiddenTextarea.focus()):(a.clearContextTop(),d==="move"&&(a.removeChars(c,h),a.selectionStart=a.selectionEnd=c,a.hiddenTextarea&&(a.hiddenTextarea.value=a.text),a._updateTextarea(),a.fire(Rc,{index:c,action:"dragend"}),o.fire("text:changed",{target:a}),o.requestRenderAll()),a.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Wy=/[ \n\.,;!\?\-]/;class p5 extends Xe{constructor(){super(...arguments),it(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:n,duration:i,delay:a,onComplete:o}=t;return nv({startValue:this._currentCursorOpacity,endValue:n,duration:i,delay:a,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach((n=>{n&&!n.isDone()&&(t=!0,n.abort())})),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((t=>!t||t.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let n=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)n++,i--;for(;/\S/.test(this._text[i])&&i>-1;)n++,i--;return t-n}findWordBoundaryRight(t){let n=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)n++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)n++,i++;return t+n}findLineBoundaryLeft(t){let n=0,i=t-1;for(;!/\n/.test(this._text[i])&&i>-1;)n++,i--;return t-n}findLineBoundaryRight(t){let n=0,i=t;for(;!/\n/.test(this._text[i])&&i<this._text.length;)n++,i++;return t+n}searchWordBoundary(t,n){const i=this._text;let a=t>0&&this._reSpace.test(i[t])&&(n===-1||!jf.test(i[t-1]))?t-1:t,o=i[a];for(;a>0&&a<i.length&&!Wy.test(o);)a+=n,o=i[a];return n===-1&&Wy.test(o)&&a++,a}selectWord(t){var n;t=(n=t)!==null&&n!==void 0?n:this.selectionStart;const i=this.searchWordBoundary(t,-1),a=Math.max(i,this.searchWordBoundary(t,1));this.selectionStart=i,this.selectionEnd=a,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var n;t=(n=t)!==null&&n!==void 0?n:this.selectionStart;const i=this.findLineBoundaryLeft(t),a=this.findLineBoundaryRight(t);this.selectionStart=i,this.selectionEnd=a,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const n=this.hiddenTextarea;os(n).activeElement!==n&&n.focus();const i=this.getSelectionStartFromPointer(t),a=this.selectionStart,o=this.selectionEnd;(i===this.__selectionStartOnMouseDown&&a!==o||a!==i&&o!==i)&&(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===a&&this.selectionEnd===o||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,n,i){const a=i.slice(0,t),o=this.graphemeSplit(a).length;if(t===n)return{selectionStart:o,selectionEnd:o};const c=i.slice(t,n);return{selectionStart:o,selectionEnd:o+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(t,n,i){const a=i.slice(0,t).join("").length;return t===n?{selectionStart:a,selectionEnd:a}:{selectionStart:a,selectionEnd:a+i.slice(t,n).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const n=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,n=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),a=i.lineIndex,o=i.charIndex,c=this.getValueOfPropertyAt(a,o,"fontSize")*this.lineHeight,h=n.leftOffset,d=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,p=f.width/d,x=f.height/d,v=p-c,b=x-c,w=new mt(n.left+h,n.top+n.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new mt(f.clientWidth/p,f.clientHeight/x));return w.x<0&&(w.x=0),w.x>v&&(w.x=v),w.y<0&&(w.y=0),w.y>b&&(w.y=b),w.x+=this.canvas._offset.left,w.y+=this.canvas._offset.top,{left:"".concat(w.x,"px"),top:"".concat(w.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(zc),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,n){const{lineIndex:i,charIndex:a}=this.get2DCursorLocation(t,!0),{lineIndex:o,charIndex:c}=this.get2DCursorLocation(n,!0);if(i!==o){if(this.styles[i])for(let h=a;h<this._unwrappedTextLines[i].length;h++)delete this.styles[i][h];if(this.styles[o])for(let h=c;h<this._unwrappedTextLines[o].length;h++){const d=this.styles[o][h];d&&(this.styles[i]||(this.styles[i]={}),this.styles[i][a+h-c]=d)}for(let h=i+1;h<=o;h++)delete this.styles[h];this.shiftLineStyles(o,i-o)}else if(this.styles[i]){const h=this.styles[i],d=c-a;for(let f=a;f<c;f++)delete h[f];for(const f in this.styles[i]){const p=parseInt(f,10);p>=c&&(h[p-d]=h[f],delete h[f])}}}shiftLineStyles(t,n){const i=Object.assign({},this.styles);for(const a in this.styles){const o=parseInt(a,10);o>t&&(this.styles[o+n]=i[o],i[o-n]||delete this.styles[o])}}insertNewlineStyleObject(t,n,i,a){const o={},c=this._unwrappedTextLines[t].length,h=c===n;let d=!1;i||(i=1),this.shiftLineStyles(t,i);const f=this.styles[t]?this.styles[t][n===0?n:n-1]:void 0;for(const x in this.styles[t]){const v=parseInt(x,10);v>=n&&(d=!0,o[v-n]=this.styles[t][x],h&&n===0||delete this.styles[t][x])}let p=!1;for(d&&!h&&(this.styles[t+i]=o,p=!0),(p||c>n)&&i--;i>0;)a&&a[i-1]?this.styles[t+i]={0:at({},a[i-1])}:f?this.styles[t+i]={0:at({},f)}:delete this.styles[t+i],i--;this._forceClearCache=!0}insertCharStyleObject(t,n,i,a){this.styles||(this.styles={});const o=this.styles[t],c=o?at({},o):{};i||(i=1);for(const d in c){const f=parseInt(d,10);f>=n&&(o[f+i]=c[f],c[f-i]||delete o[f])}if(this._forceClearCache=!0,a){for(;i--;)Object.keys(a[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][n+i]=at({},a[i]));return}if(!o)return;const h=o[n?n-1:1];for(;h&&i--;)this.styles[t][n+i]=at({},h)}insertNewStyleBlock(t,n,i){const a=this.get2DCursorLocation(n,!0),o=[0];let c,h=0;for(let d=0;d<t.length;d++)t[d]===`
`?(h++,o[h]=0):o[h]++;for(o[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,o[0],i),i=i&&i.slice(o[0]+1)),h&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+o[0],h),c=1;c<h;c++)o[c]>0?this.insertCharStyleObject(a.lineIndex+c,0,o[c],i):i&&this.styles[a.lineIndex+c]&&i[0]&&(this.styles[a.lineIndex+c][0]=i[0]),i=i&&i.slice(o[c]+1);o[c]>0&&this.insertCharStyleObject(a.lineIndex+c,0,o[c],i)}removeChars(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,n),this._text.splice(t,n-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i;a>i&&this.removeStyleFromTo(i,a);const o=this.graphemeSplit(t);this.insertNewStyleBlock(o,i,n),this._text=[...this._text.slice(0,i),...o,...this._text.slice(a)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,n,i){i<=t?(n===t?this._selectionDirection=ce:this._selectionDirection===Re&&(this._selectionDirection=ce,this.selectionEnd=t),this.selectionStart=i):i>t&&i<n?this._selectionDirection===Re?this.selectionEnd=i:this.selectionStart=i:(n===t?this._selectionDirection=Re:this._selectionDirection===ce&&(this._selectionDirection=Re,this.selectionStart=n),this.selectionEnd=i)}}class y5 extends p5{initHiddenTextarea(){const t=this.canvas&&os(this.canvas.getElement())||cr(),n=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map((c=>{let[h,d]=c;return n.setAttribute(h,d)}));const{top:i,left:a,fontSize:o}=this._calcTextareaPosition();n.style.cssText="position: absolute; top: ".concat(i,"; left: ").concat(a,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||t.body).appendChild(n),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map((c=>{let[h,d]=c;return n.addEventListener(h,this[d].bind(this))})),this.hiddenTextarea=n}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const n=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in n)this[n[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const n=this.fromPaste,{value:i,selectionStart:a,selectionEnd:o}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const c=()=>{this.updateFromTextArea(),this.fire(Rc),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void c();const h=this._splitTextIntoLines(i).graphemeText,d=this._text.length,f=h.length,p=this.selectionStart,x=this.selectionEnd,v=p!==x;let b,w,_,k,C=f-d;const O=this.fromStringToGraphemeSelection(a,o,i),M=p>O.selectionStart;v?(w=this._text.slice(p,x),C+=x-p):f<d&&(w=M?this._text.slice(x+C,x):this._text.slice(p,p-C));const X=h.slice(O.selectionEnd-C,O.selectionEnd);if(w&&w.length&&(X.length&&(b=this.getSelectionStyles(p,p+1,!1),b=X.map((()=>b[0]))),v?(_=p,k=x):M?(_=x-w.length,k=x):(_=x,k=x+w.length),this.removeStyleFromTo(_,k)),X.length){const{copyPasteData:I}=_s();n&&X.join("")===I.copiedText&&!ie.disableStyleCopyPaste&&(b=I.copiedTextStyle),this.insertNewStyleBlock(X,p,b)}c()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:n}=t;const{selectionStart:i,selectionEnd:a}=n;this.compositionStart=i,this.compositionEnd=a,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=_s();t.copiedText=this.getSelectedText(),ie.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,n){let i,a=this._getLineLeftOffset(t);return n>0&&(i=this.__charBounds[t][n-1],a+=i.left+i.width),a}getDownCursorOffset(t,n){const i=this._getSelectionForOffset(t,n),a=this.get2DCursorLocation(i),o=a.lineIndex;if(o===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-i;const c=a.charIndex,h=this._getWidthBeforeCursor(o,c),d=this._getIndexOnLine(o+1,h);return this._textLines[o].slice(c).length+d+1+this.missingNewlineOffset(o)}_getSelectionForOffset(t,n){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,n){const i=this._getSelectionForOffset(t,n),a=this.get2DCursorLocation(i),o=a.lineIndex;if(o===0||t.metaKey||t.keyCode===33)return-i;const c=a.charIndex,h=this._getWidthBeforeCursor(o,c),d=this._getIndexOnLine(o-1,h),f=this._textLines[o].slice(0,c),p=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+d-f.length+(1-p)}_getIndexOnLine(t,n){const i=this._textLines[t];let a,o,c=this._getLineLeftOffset(t),h=0;for(let d=0,f=i.length;d<f;d++)if(a=this.__charBounds[t][d].width,c+=a,c>n){o=!0;const p=c-a,x=c,v=Math.abs(p-n);h=Math.abs(x-n)<v?d:d-1;break}return o||(h=i.length-1),h}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,n){const i=this["get".concat(t,"CursorOffset")](n,this._selectionDirection===Re);if(n.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),i!==0){const a=this.text.length;this.selectionStart=lr(0,this.selectionStart,a),this.selectionEnd=lr(0,this.selectionEnd,a),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const n=this._selectionDirection===ce?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,n,i){let a;if(t.altKey)a=this["findWordBoundary".concat(i)](this[n]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[n]+=i==="Left"?-1:1,!0;a=this["findLineBoundary".concat(i)](this[n])}return a!==void 0&&this[n]!==a&&(this[n]=a,!0)}_moveLeft(t,n){return this._move(t,n,"Left")}_moveRight(t,n){return this._move(t,n,"Right")}moveCursorLeftWithoutShift(t){let n=!0;return this._selectionDirection=ce,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(n=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,n}moveCursorLeftWithShift(t){return this._selectionDirection===Re&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=ce,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,n){const i="moveCursor".concat(t).concat(n.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[i](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===ce&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Re,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let n=!0;return this._selectionDirection=Re,this.selectionStart===this.selectionEnd?(n=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n}}const Zy=u=>!!u.button;class x5 extends y5{constructor(){super(...arguments),it(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new m5(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e:n,alreadySelected:i}=t;this.canvas&&this.editable&&!Zy(n)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(n)||(this.canvas.textEditingManager.register(this),i&&(this.inCompositionMode=!1,this.setCursorByClick(n)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=i||this.isEditing)))}mouseUpHandler(t){let{e:n,transform:i}=t;const a=this.draggableTextDelegate.end(n);if(this.canvas){this.canvas.textEditingManager.unregister(this);const o=this.canvas._activeObject;if(o&&o!==this)return}!this.editable||this.group&&!this.group.interactive||i&&i.actionPerformed||Zy(n)||a||this.selected&&!this.getActiveControl()&&(this.enterEditing(n),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const n=this.getSelectionStartFromPointer(t),i=this.selectionStart,a=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,a,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const n=this.canvas.getScenePoint(t).transform(ls(this.calcTransformMatrix())).add(new mt(-this._getLeftOffset(),-this._getTopOffset()));let i=0,a=0,o=0;for(let f=0;f<this._textLines.length&&i<=n.y;f++)i+=this.getHeightOfLine(f),o=f,f>0&&(a+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));let c=Math.abs(this._getLineLeftOffset(o));const h=this._textLines[o].length,d=this.__charBounds[o];for(let f=0;f<h;f++){const p=c+d[f].kernedWidth;if(n.x<=p){Math.abs(n.x-p)<=Math.abs(n.x-c)&&a++;break}c=p,a++}return Math.min(this.flipX?h-a:a,this._text.length)}}const Wl="moveCursorUp",Zl="moveCursorDown",Kl="moveCursorLeft",Ql="moveCursorRight",Jl="exitEditing",Ky=(u,t)=>{const n=t.getRetinaScaling();u.setTransform(n,0,0,n,0,0);const i=t.viewportTransform;u.transform(i[0],i[1],i[2],i[3],i[4],i[5])},v5=at({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Jl,27:Jl,33:Wl,34:Zl,35:Ql,36:Kl,37:Kl,38:Wl,39:Ql,40:Zl},keysMapRtl:{9:Jl,27:Jl,33:Wl,34:Zl,35:Kl,36:Ql,37:Ql,38:Wl,39:Kl,40:Zl},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Gs extends x5{static getDefaults(){return at(at({},super.getDefaults()),Gs.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,n){super(t,at(at({},Gs.ownDefaults),n)),this.initBehavior()}_set(t,n){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=n,this):(t==="canvas"&&(this.canvas instanceof pf&&this.canvas.textEditingManager.remove(this),n instanceof pf&&n.textEditingManager.add(this)),super._set(t,n))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,n){this[t]!==n&&(this._fireSelectionChanged(),this[t]=n),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,i=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,n,i)}setSelectionStyles(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,n,i)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,n=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,n)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const n=this.isEditing;this.isEditing=!1;const i=super.toCanvasElement(t);return this.isEditing=n,i}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const n=this._getCursorBoundaries(),i=this.findAncestorsWithClipPath(),a=i.length>0;let o,c=t;if(a){o=ts(t.canvas),c=o.getContext("2d"),Ky(c,this.canvas);const h=this.calcTransformMatrix();c.transform(h[0],h[1],h[2],h[3],h[4],h[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(c,n):this.renderCursor(c,n),a)for(const h of i){const d=h.clipPath,f=ts(t.canvas),p=f.getContext("2d");if(Ky(p,this.canvas),!d.absolutePositioned){const x=h.calcTransformMatrix();p.transform(x[0],x[1],x[2],x[3],x[4],x[5])}d.transform(p),d.drawObject(p,!0,{}),this.drawClipPathOnCache(c,d,f)}a&&(t.setTransform(1,0,0,1,0,0),t.drawImage(o,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let n=this;for(;n;)n.clipPath&&t.push(n),n=n.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,n=arguments.length>1?arguments[1]:void 0;const i=this._getLeftOffset(),a=this._getTopOffset(),o=this._getCursorBoundariesOffsets(t,n);return{left:i,top:a,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(t,n){return n?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let n=0,i=0;const{charIndex:a,lineIndex:o}=this.get2DCursorLocation(t);for(let f=0;f<o;f++)n+=this.getHeightOfLine(f);const c=this._getLineLeftOffset(o),h=this.__charBounds[o][a];h&&(i=h.left),this.charSpacing!==0&&a===this._textLines[o].length&&(i-=this._getWidthOfCharSpacing());const d={top:n,left:c+(i>0?i:0)};return this.direction==="rtl"&&(this.textAlign===Re||this.textAlign===xs||this.textAlign===mo?d.left*=-1:this.textAlign===ce||this.textAlign===Yc?d.left=c-(i>0?i:0):this.textAlign!==Zt&&this.textAlign!==po||(d.left=c-(i>0?i:0))),d}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,n){this._renderCursor(t,n,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const i=this.get2DCursorLocation(t),a=i.lineIndex,o=i.charIndex>0?i.charIndex-1:0,c=this.getValueOfPropertyAt(a,o,"fontSize"),h=this.getObjectScaling().x*this.canvas.getZoom(),d=this.cursorWidth/h,f=this.getValueOfPropertyAt(a,o,"deltaY"),p=n.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(a,o,"fill"),opacity:this._currentCursorOpacity,left:n.left+n.leftOffset-d/2,top:p+n.top+f,width:d,height:c}}_renderCursor(t,n,i){const{color:a,opacity:o,left:c,top:h,width:d,height:f}=this.getCursorRenderingData(i,n);t.fillStyle=a,t.globalAlpha=o,t.fillRect(c,h,d,f)}renderSelection(t,n){const i={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,i,n)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const n=this.getSelectionStartFromPointer(t);this.renderCursorAt(n)}_renderSelection(t,n,i){const a=n.selectionStart,o=n.selectionEnd,c=this.textAlign.includes(xs),h=this.get2DCursorLocation(a),d=this.get2DCursorLocation(o),f=h.lineIndex,p=d.lineIndex,x=h.charIndex<0?0:h.charIndex,v=d.charIndex<0?0:d.charIndex;for(let b=f;b<=p;b++){const w=this._getLineLeftOffset(b)||0;let _=this.getHeightOfLine(b),k=0,C=0,O=0;if(b===f&&(C=this.__charBounds[f][x].left),b>=f&&b<p)O=c&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===p)if(v===0)O=this.__charBounds[p][v].left;else{const V=this._getWidthOfCharSpacing();O=this.__charBounds[p][v-1].left+this.__charBounds[p][v-1].width-V}k=_,(this.lineHeight<1||b===p&&this.lineHeight>1)&&(_/=this.lineHeight);let M=i.left+w+C,X=_,I=0;const $=O-C;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",X=1,I=_):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Re||this.textAlign===xs||this.textAlign===mo?M=this.width-M-$:this.textAlign===ce||this.textAlign===Yc?M=i.left+w-O:this.textAlign!==Zt&&this.textAlign!==po||(M=i.left+w-O)),t.fillRect(M,i.top+i.topOffset+I,$,X),i.topOffset+=k}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,qe)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),n=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:n}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}it(Gs,"ownDefaults",v5),it(Gs,"type","IText"),Lt.setClass(Gs),Lt.setClass(Gs,"i-text");class Jn extends Gs{static getDefaults(){return at(at({},super.getDefaults()),Jn.ownDefaults)}constructor(t,n){super(t,at(at({},Jn.ownDefaults),n))}static createControls(){return{controls:QS()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(xs)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let n=0,i=0,a=0;const o={};for(let c=0;c<t.graphemeLines.length;c++)t.graphemeText[a]===`
`&&c>0?(i=0,a++,n++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[a])&&c>0&&(i++,a++),o[c]={line:n,offset:i},a+=t.graphemeLines[c].length,i+=t.graphemeLines[c].length;return o}styleHas(t,n){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[n];i&&(n=i.line)}return super.styleHas(t,n)}isEmptyStyles(t){if(!this.styles)return!0;let n,i=0,a=t+1,o=!1;const c=this._styleMap[t],h=this._styleMap[t+1];c&&(t=c.line,i=c.offset),h&&(a=h.line,o=a===t,n=h.offset);const d=t===void 0?this.styles:{line:this.styles[t]};for(const f in d)for(const p in d[f]){const x=parseInt(p,10);if(x>=i&&(!o||x<n))for(const v in d[f][p])return!1}return!0}_getStyleDeclaration(t,n){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[t];if(!i)return{};t=i.line,n=i.offset+n}return super._getStyleDeclaration(t,n)}_setStyleDeclaration(t,n,i){const a=this._styleMap[t];super._setStyleDeclaration(a.line,a.offset+n,i)}_deleteStyleDeclaration(t,n){const i=this._styleMap[t];super._deleteStyleDeclaration(i.line,i.offset+n)}_getLineStyle(t){const n=this._styleMap[t];return!!this.styles[n.line]}_setLineStyle(t){const n=this._styleMap[t];super._setLineStyle(n.line)}_wrapText(t,n){this.isWrapping=!0;const i=this.getGraphemeDataForRender(t),a=[];for(let o=0;o<i.wordsData.length;o++)a.push(...this._wrapLine(o,n,i));return this.isWrapping=!1,a}getGraphemeDataForRender(t){const n=this.splitByGrapheme,i=n?"":" ";let a=0;return{wordsData:t.map(((o,c)=>{let h=0;const d=n?this.graphemeSplit(o):this.wordSplit(o);return d.length===0?[{word:[],width:0}]:d.map((f=>{const p=n?[f]:this.graphemeSplit(f),x=this._measureWord(p,c,h);return a=Math.max(x,a),h+=p.length+i.length,{word:p,width:x}}))})),largestWordWidth:a}}_measureWord(t,n){let i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=0;for(let c=0,h=t.length;c<h;c++)o+=this._getGraphemeBox(t[c],n,c+a,i,!0).kernedWidth,i=t[c];return o}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,n,i){let{largestWordWidth:a,wordsData:o}=i,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const h=this._getWidthOfCharSpacing(),d=this.splitByGrapheme,f=[],p=d?"":" ";let x=0,v=[],b=0,w=0,_=!0;n-=c;const k=Math.max(n,a,this.dynamicMinWidth),C=o[t];let O;for(b=0,O=0;O<C.length;O++){const{word:M,width:X}=C[O];b+=M.length,x+=w+X-h,x>k&&!_?(f.push(v),v=[],x=X,_=!0):x+=h,_||d||v.push(p),v=v.concat(M),w=d?0:this._measureWord([p],t,b),b++,_=!1}return O&&f.push(v),a+c>this.dynamicMinWidth&&(this.dynamicMinWidth=a-h+c),f}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,n){return this.splitByGrapheme&&!n?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const n=super._splitTextIntoLines(t),i=this._wrapText(n.lines,this.width),a=new Array(i.length);for(let o=0;o<i.length;o++)a[o]=i[o].join("");return n.lines=a,n.graphemeLines=i,n}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const n in this._styleMap){const i=parseInt(n,10);if(this._textLines[i]){const a=this._styleMap[n].line;t.set("".concat(a),!0)}}for(const n in this.styles)t.has(n)||delete this.styles[n]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}it(Jn,"type","Textbox"),it(Jn,"textLayoutProperties",[...Gs.textLayoutProperties,"width"]),it(Jn,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Lt.setClass(Jn);class Qy extends eu{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,n){const{target:i}=t,{clipPath:a,group:o}=i;if(!a||!this.shouldPerformLayout(t))return;const{width:c,height:h}=Vs(uv(i,a)),d=new mt(c,h);if(a.absolutePositioned)return{center:er(a.getRelativeCenterPoint(),void 0,o?o.calcTransformMatrix():void 0),size:d};{const f=a.getRelativeCenterPoint().transform(i.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:p=new mt,correction:x=new mt}=this.calcBoundingBox(n,t)||{};return{center:p.add(f),correction:x.subtract(f),size:d}}return{center:i.getRelativeCenterPoint().add(f),size:d}}}}it(Qy,"type","clip-path"),Lt.setClass(Qy);class Jy extends eu{getInitialSize(t,n){let{target:i}=t,{size:a}=n;return new mt(i.width||a.x,i.height||a.y)}}it(Jy,"type","fixed"),Lt.setClass(Jy);class b5 extends Co{subscribeTargets(t){const n=t.target;t.targets.reduce(((i,a)=>(a.parent&&i.add(a.parent),i)),new Set).forEach((i=>{i.layoutManager.subscribeTargets({target:i,targets:[n]})}))}unsubscribeTargets(t){const n=t.target,i=n.getObjects();t.targets.reduce(((a,o)=>(o.parent&&a.add(o.parent),a)),new Set).forEach((a=>{!i.some((o=>o.parent===a))&&a.layoutManager.unsubscribeTargets({target:a,targets:[n]})}))}}class na extends us{static getDefaults(){return at(at({},super.getDefaults()),na.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,na.ownDefaults),this.setOptions(n);const{left:i,top:a,layoutManager:o}=n;this.groupInit(t,{left:i,top:a,layoutManager:o??new b5})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.multiSelectionStacking==="selection-order"?this.add(...n):n.forEach((a=>{const o=this._objects.findIndex((h=>h.isInFrontOf(a))),c=o===-1?this.size():o;this.insertAt(c,a)}))}canEnterGroup(t){return this.getObjects().some((n=>n.isDescendantOf(t)||t.isDescendantOf(n)))?(Di("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,n){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,n)}exitGroup(t,n){this._exitGroup(t,n),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,n){super._onAfterObjectsChange(t,n);const i=new Set;n.forEach((a=>{const{parent:o}=a;o&&i.add(o)})),t===Yf?i.forEach((a=>{a._onAfterObjectsChange(Xc,n)})):i.forEach((a=>{a._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,n,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const a=at(at({hasControls:!1},i),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(t,a);super._renderControls(t,n),t.restore()}}it(na,"type","ActiveSelection"),it(na,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Lt.setClass(na),Lt.setClass(na,"activeSelection");class _5{constructor(){it(this,"resources",{})}applyFilters(t,n,i,a,o){const c=o.getContext("2d");if(!c)return;c.drawImage(n,0,0,i,a);const h={sourceWidth:i,sourceHeight:a,imageData:c.getImageData(0,0,i,a),originalEl:n,originalImageData:c.getImageData(0,0,i,a),canvasEl:o,ctx:c,filterBackend:this};t.forEach((f=>{f.applyTo(h)}));const{imageData:d}=h;return d.width===i&&d.height===a||(o.width=d.width,o.height=d.height),c.putImageData(d,0,0),h}}class jv{constructor(){let{tileSize:t=ie.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};it(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),it(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,n){this.dispose(),this.createWebGLCanvas(t,n)}createWebGLCanvas(t,n){const i=ts({width:t,height:n}),a=i.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});a&&(a.clearColor(0,0,0,0),this.canvas=i,this.gl=a)}applyFilters(t,n,i,a,o,c){const h=this.gl,d=o.getContext("2d");if(!h||!d)return;let f;c&&(f=this.getCachedTexture(c,n));const p={originalWidth:n.width||n.naturalWidth||0,originalHeight:n.height||n.naturalHeight||0,sourceWidth:i,sourceHeight:a,destinationWidth:i,destinationHeight:a,context:h,sourceTexture:this.createTexture(h,i,a,f?void 0:n),targetTexture:this.createTexture(h,i,a),originalTexture:f||this.createTexture(h,i,a,f?void 0:n),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},x=h.createFramebuffer();return h.bindFramebuffer(h.FRAMEBUFFER,x),t.forEach((v=>{v&&v.applyTo(p)})),(function(v){const b=v.targetCanvas,w=b.width,_=b.height,k=v.destinationWidth,C=v.destinationHeight;w===k&&_===C||(b.width=k,b.height=C)})(p),this.copyGLTo2D(h,p),h.bindTexture(h.TEXTURE_2D,null),h.deleteTexture(p.sourceTexture),h.deleteTexture(p.targetTexture),h.deleteFramebuffer(x),d.setTransform(1,0,0,1,0,0),p}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,n,i,a,o){const{NEAREST:c,TEXTURE_2D:h,RGBA:d,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:p,TEXTURE_MAG_FILTER:x,TEXTURE_MIN_FILTER:v,TEXTURE_WRAP_S:b,TEXTURE_WRAP_T:w}=t,_=t.createTexture();return t.bindTexture(h,_),t.texParameteri(h,x,o||c),t.texParameteri(h,v,o||c),t.texParameteri(h,b,p),t.texParameteri(h,w,p),a?t.texImage2D(h,0,d,d,f,a):t.texImage2D(h,0,d,n,i,0,d,f,null),_}getCachedTexture(t,n,i){const{textureCache:a}=this;if(a[t])return a[t];{const o=this.createTexture(this.gl,n.width,n.height,n,i);return o&&(a[t]=o),o}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,n){const i=t.canvas,a=n.targetCanvas,o=a.getContext("2d");if(!o)return;o.translate(0,a.height),o.scale(1,-1);const c=i.height-a.height;o.drawImage(i,0,c,a.width,a.height,0,0,a.width,a.height)}copyGLTo2DPutImageData(t,n){const i=n.targetCanvas.getContext("2d"),a=n.destinationWidth,o=n.destinationHeight,c=a*o*4;if(!i)return;const h=new Uint8Array(this.imageBuffer,0,c),d=new Uint8ClampedArray(this.imageBuffer,0,c);t.readPixels(0,0,a,o,t.RGBA,t.UNSIGNED_BYTE,h);const f=new ImageData(d,a,o);i.putImageData(f,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,n={renderer:"",vendor:""};if(!t)return n;const i=t.getExtension("WEBGL_debug_renderer_info");if(i){const a=t.getParameter(i.UNMASKED_RENDERER_WEBGL),o=t.getParameter(i.UNMASKED_VENDOR_WEBGL);a&&(n.renderer=a.toLowerCase()),o&&(n.vendor=o.toLowerCase())}return this.gpuInfo=n,n}}let Rd;function w5(){const{WebGLProbe:u}=_s();return u.queryWebGL(Ks()),ie.enableGLFiltering&&u.isSupported(ie.textureSize)?new jv({tileSize:ie.textureSize}):new _5}function zd(){return!Rd&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Rd=w5()),Rd}const S5=["filters","resizeFilter","src","crossOrigin","type"],kv=["cropX","cropY"];class Se extends cn{static getDefaults(){return at(at({},super.getDefaults()),Se.ownDefaults)}constructor(t,n){super(),it(this,"_lastScaleX",1),it(this,"_lastScaleY",1),it(this,"_filterScalingX",1),it(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Se.ownDefaults),this.setOptions(n),this.cacheKey="texture".concat(Ai()),this.setElement(typeof t=="string"?(this.canvas&&os(this.canvas.getElement())||cr()).getElementById(t):t,n)}getElement(){return this._element}setElement(t){var n;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(i),(n=t.classList)===null||n===void 0||n.add(Se.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const n=zd(!1);n instanceof jv&&n.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((t=>{const n=this[t];n&&_s().dispose(n),this[t]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const n=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-n,-i),t.lineTo(n,-i),t.lineTo(n,i),t.lineTo(-n,i),t.lineTo(-n,-i),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=[];return this.filters.forEach((i=>{i&&n.push(i.toObject())})),at(at({},super.toObject([...kv,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],n=this._element,i=-this.width/2,a=-this.height/2;let o=[],c=[],h="",d="";if(!n)return[];if(this.hasCrop()){const f=Ai();o.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+i+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),h=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(d=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(i-this.cropX,'" y="').concat(a-this.cropY,'" width="').concat(n.width||n.naturalWidth,'" height="').concat(n.height||n.naturalHeight,'"').concat(d).concat(h,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,c=['	<rect x="'.concat(i,'" y="').concat(a,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return o=this.paintFirst!==qe?o.concat(c,t):o.concat(t,c),o}getSrc(t){const n=t?this._element:this._originalElement;return n?n.toDataURL?n.toDataURL():this.srcFromAttribute?n.getAttribute("src")||"":n.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:n,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Cc(t,{crossOrigin:n,signal:i}).then((a=>{n!==void 0&&this.set({crossOrigin:n}),this.setElement(a)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,n=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),a=i.x,o=i.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||a>n&&o>n)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,void(this._lastScaleY=o);const h=ts(c),{width:d,height:f}=c;this._element=h,this._lastScaleX=t.scaleX=a,this._lastScaleY=t.scaleY=o,zd().applyFilters([t],c,d,f,this._element),this._filterScalingX=h.width/this._originalElement.width,this._filterScalingY=h.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter((o=>o&&!o.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const n=this._originalElement,i=n.naturalWidth||n.width,a=n.naturalHeight||n.height;if(this._element===this._originalElement){const o=ts({width:i,height:a});this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,a),this._lastScaleX=1,this._lastScaleY=1);zd().applyFilters(t,this._originalElement,i,a,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const n=this._element;if(!n)return;const i=this._filterScalingX,a=this._filterScalingY,o=this.width,c=this.height,h=Math.max(this.cropX,0),d=Math.max(this.cropY,0),f=n.naturalWidth||n.width,p=n.naturalHeight||n.height,x=h*i,v=d*a,b=Math.min(o*i,f-x),w=Math.min(c*a,p-v),_=-o/2,k=-c/2,C=Math.min(o,f/i-h),O=Math.min(c,p/a-d);n&&t.drawImage(n,x,v,b,w,_,k,C,O)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=this.getOriginalSize();this.width=t||i.width,this.height=n||i.height}parsePreserveAspectRatioAttribute(){const t=mS(this.preserveAspectRatio||""),n=this.width,i=this.height,a={width:n,height:i};let o,c=this._element.width,h=this._element.height,d=1,f=1,p=0,x=0,v=0,b=0;return!t||t.alignX===Cn&&t.alignY===Cn?(d=n/c,f=i/h):(t.meetOrSlice==="meet"&&(d=f=DC(this._element,a),o=(n-c*d)/2,t.alignX==="Min"&&(p=-o),t.alignX==="Max"&&(p=o),o=(i-h*f)/2,t.alignY==="Min"&&(x=-o),t.alignY==="Max"&&(x=o)),t.meetOrSlice==="slice"&&(d=f=AC(this._element,a),o=c-n/d,t.alignX==="Mid"&&(v=o/2),t.alignX==="Max"&&(v=o),o=h-i/f,t.alignY==="Mid"&&(b=o/2),t.alignY==="Max"&&(b=o),c=n/d,h=i/f)),{width:c,height:h,scaleX:d,scaleY:f,offsetLeft:p,offsetTop:x,cropX:v,cropY:b}}static fromObject(t,n){let{filters:i,resizeFilter:a,src:o,crossOrigin:c,type:h}=t,d=Ce(t,S5);return Promise.all([Cc(o,at(at({},n),{},{crossOrigin:c})),i&&bo(i,n),a&&bo([a],n),Qc(d,n)]).then((f=>{let[p,x=[],[v]=[],b={}]=f;return new this(p,at(at({},d),{},{src:o,filters:x,resizeFilter:v},b))}))}static fromURL(t){let{crossOrigin:n=null,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return Cc(t,{crossOrigin:n,signal:i}).then((o=>new this(o,a)))}static async fromElement(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const a=$s(t,this.ATTRIBUTE_NAMES,i);return this.fromURL(a["xlink:href"]||a.href,n,a).catch((o=>(Di("log","Unable to parse Image",o),null)))}}it(Se,"type","Image"),it(Se,"cacheProperties",[...Js,...kv]),it(Se,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),it(Se,"CSS_CANVAS","canvas-img"),it(Se,"ATTRIBUTE_NAMES",[...Mi,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Lt.setClass(Se),Lt.setSVGClass(Se);$c(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const su=u=>u.webgl!==void 0,Xf="precision highp float",C5=`
    `.concat(Xf,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),T5=["type"],j5=["type"],k5=new RegExp(Xf,"g");class We{get type(){return this.constructor.type}constructor(){let t=Ce(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T5);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return C5}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:a="highp"}}=_s();a!=="highp"&&(n=n.replace(k5,Xf.replace("highp",a)));const o=t.createShader(t.VERTEX_SHADER),c=t.createShader(t.FRAGMENT_SHADER),h=t.createProgram();if(!o||!c||!h)throw new vs("Vertex, fragment shader or program creation error");if(t.shaderSource(o,i),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new vs("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.shaderSource(c,n),t.compileShader(c),!t.getShaderParameter(c,t.COMPILE_STATUS))throw new vs("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(c)));if(t.attachShader(h,o),t.attachShader(h,c),t.linkProgram(h),!t.getProgramParameter(h,t.LINK_STATUS))throw new vs('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(h)));const d=this.getUniformLocations(t,h)||{};return d.uStepW=t.getUniformLocation(h,"uStepW"),d.uStepH=t.getUniformLocation(h,"uStepH"),{program:h,attributeLocations:this.getAttributeLocations(t,h),uniformLocations:d}}getAttributeLocations(t,n){return{aPosition:t.getAttribLocation(n,"aPosition")}}getUniformLocations(t,n){const i=this.constructor.uniformLocations,a={};for(let o=0;o<i.length;o++)a[i[o]]=t.getUniformLocation(n,i[o]);return a}sendAttributeData(t,n,i){const a=n.aPosition,o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(a),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)}_setupFrameBuffer(t){const n=t.context;if(t.passes>1){const i=t.destinationWidth,a=t.destinationHeight;t.sourceWidth===i&&t.sourceHeight===a||(n.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(n,i,a)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.targetTexture,0)}else n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish()}_swapTextures(t){t.passes--,t.pass++;const n=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=n}isNeutralState(t){return!1}applyTo(t){su(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const n=this.getCacheKey();return t.programCache[n]||(t.programCache[n]=this.createProgram(t.context)),t.programCache[n]}applyToWebGL(t){const n=t.context,i=this.retrieveShader(t);t.pass===0&&t.originalTexture?n.bindTexture(n.TEXTURE_2D,t.originalTexture):n.bindTexture(n.TEXTURE_2D,t.sourceTexture),n.useProgram(i.program),this.sendAttributeData(n,i.attributeLocations,t.aPosition),n.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),n.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(n,i.uniformLocations),n.viewport(0,0,t.destinationWidth,t.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,n,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,n),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,n){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:n,sourceHeight:i}=t,a=ts({width:n,height:i});t.helpLayer=a}}toObject(){const t=Object.keys(this.constructor.defaults||{});return at({type:this.type},t.reduce(((n,i)=>(n[i]=this[i],n)),{}))}toJSON(){return this.toObject()}static async fromObject(t,n){return new this(Ce(t,j5))}}it(We,"type","BaseFilter"),it(We,"uniformLocations",[]);const O5={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class $l extends We{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(O5[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:n}}=t;const i=new de(this.color).getSource(),a=this.alpha,o=i[0]*a,c=i[1]*a,h=i[2]*a,d=1-a;for(let f=0;f<n.length;f+=4){const p=n[f],x=n[f+1],v=n[f+2];let b,w,_;switch(this.mode){case"multiply":b=p*o/255,w=x*c/255,_=v*h/255;break;case"screen":b=255-(255-p)*(255-o)/255,w=255-(255-x)*(255-c)/255,_=255-(255-v)*(255-h)/255;break;case"add":b=p+o,w=x+c,_=v+h;break;case"difference":b=Math.abs(p-o),w=Math.abs(x-c),_=Math.abs(v-h);break;case"subtract":b=p-o,w=x-c,_=v-h;break;case"darken":b=Math.min(p,o),w=Math.min(x,c),_=Math.min(v,h);break;case"lighten":b=Math.max(p,o),w=Math.max(x,c),_=Math.max(v,h);break;case"overlay":b=o<128?2*p*o/255:255-2*(255-p)*(255-o)/255,w=c<128?2*x*c/255:255-2*(255-x)*(255-c)/255,_=h<128?2*v*h/255:255-2*(255-v)*(255-h)/255;break;case"exclusion":b=o+p-2*o*p/255,w=c+x-2*c*x/255,_=h+v-2*h*v/255;break;case"tint":b=o+p*d,w=c+x*d,_=h+v*d}n[f]=b,n[f+1]=w,n[f+2]=_}}sendUniformData(t,n){const i=new de(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(n.uColor,i)}}it($l,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),it($l,"type","BlendColor"),it($l,"uniformLocations",["uColor"]),Lt.setClass($l);const E5={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},N5=["type","image"];class tc extends We{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return E5[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const n=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(n,i,n.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(n,n.TEXTURE1)}createTexture(t,n){return t.getCachedTexture(n.cacheKey,n.getElement())}calculateMatrix(){const t=this.image,{width:n,height:i}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/n,-t.top/i,1]}applyTo2d(t){let{imageData:{data:n,width:i,height:a},filterBackend:{resources:o}}=t;const c=this.image;o.blendImage||(o.blendImage=Ks());const h=o.blendImage,d=h.getContext("2d");h.width!==i||h.height!==a?(h.width=i,h.height=a):d.clearRect(0,0,i,a),d.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),d.drawImage(c.getElement(),0,0,i,a);const f=d.getImageData(0,0,i,a).data;for(let p=0;p<n.length;p+=4){const x=n[p],v=n[p+1],b=n[p+2],w=n[p+3],_=f[p],k=f[p+1],C=f[p+2],O=f[p+3];switch(this.mode){case"multiply":n[p]=x*_/255,n[p+1]=v*k/255,n[p+2]=b*C/255,n[p+3]=w*O/255;break;case"mask":n[p+3]=O}}}sendUniformData(t,n){const i=this.calculateMatrix();t.uniform1i(n.uImage,1),t.uniformMatrix3fv(n.uTransformMatrix,!1,i)}toObject(){return at(at({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,n){let{type:i,image:a}=t,o=Ce(t,N5);return Se.fromObject(a,n).then((c=>new this(at(at({},o),{},{image:c}))))}}it(tc,"type","BlendImage"),it(tc,"defaults",{mode:"multiply",alpha:1}),it(tc,"uniformLocations",["uTransformMatrix","uImage"]),Lt.setClass(tc);class ec extends We{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){su(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:n,width:i,height:a}}=t;this.aspectRatio=i/a,this.horizontal=!0;let o=this.getBlurValue()*i;const c=new Uint8ClampedArray(n),h=15,d=4*i;for(let f=0;f<n.length;f+=4){let p=0,x=0,v=0,b=0,w=0;const _=f-f%d,k=_+d;for(let C=-14;C<h;C++){const O=C/h,M=4*Math.floor(o*O),X=1-Math.abs(O);let I=f+M;I<_?I=_:I>k&&(I=k);const $=n[I+3]*X;p+=n[I]*$,x+=n[I+1]*$,v+=n[I+2]*$,b+=$,w+=X}c[f]=p/b,c[f+1]=x/b,c[f+2]=v/b,c[f+3]=b/w}this.horizontal=!1,o=this.getBlurValue()*a;for(let f=0;f<c.length;f+=4){let p=0,x=0,v=0,b=0,w=0;const _=f%d,k=c.length-d+_;for(let C=-14;C<h;C++){const O=C/h,M=Math.floor(o*O)*d,X=1-Math.abs(O);let I=f+M;I<_?I=_:I>k&&(I=k);const $=c[I+3]*X;p+=c[I]*$,x+=c[I+1]*$,v+=c[I+2]*$,b+=$,w+=X}n[f]=p/b,n[f+1]=x/b,n[f+2]=v/b,n[f+3]=b/w}}sendUniformData(t,n){const i=this.chooseRightDelta();t.uniform2fv(n.uDelta,i)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:n,aspectRatio:i}=this;return n?i>1&&(t=1/i):i<1&&(t=i),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}it(ec,"type","Blur"),it(ec,"defaults",{blur:0}),it(ec,"uniformLocations",["uDelta"]),Lt.setClass(ec);class nc extends We{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:n}}=t;const i=Math.round(255*this.brightness);for(let a=0;a<n.length;a+=4)n[a]+=i,n[a+1]+=i,n[a+2]+=i}isNeutralState(){return this.brightness===0}sendUniformData(t,n){t.uniform1f(n.uBrightness,this.brightness)}}it(nc,"type","Brightness"),it(nc,"defaults",{brightness:0}),it(nc,"uniformLocations",["uBrightness"]),Lt.setClass(nc);const Ov={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class $a extends We{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const n=t.imageData.data,i=this.matrix,a=this.colorsOnly;for(let o=0;o<n.length;o+=4){const c=n[o],h=n[o+1],d=n[o+2];if(n[o]=c*i[0]+h*i[1]+d*i[2]+255*i[4],n[o+1]=c*i[5]+h*i[6]+d*i[7]+255*i[9],n[o+2]=c*i[10]+h*i[11]+d*i[12]+255*i[14],!a){const f=n[o+3];n[o]+=f*i[3],n[o+1]+=f*i[8],n[o+2]+=f*i[13],n[o+3]=c*i[15]+h*i[16]+d*i[17]+f*i[18]+255*i[19]}}}sendUniformData(t,n){const i=this.matrix,a=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],o=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(n.uColorMatrix,!1,a),t.uniform4fv(n.uConstants,o)}toObject(){return at(at({},super.toObject()),{},{matrix:[...this.matrix]})}}function aa(u,t){var n;const i=(it(n=class extends $a{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",u),it(n,"defaults",{colorsOnly:!1,matrix:t}),n);return Lt.setClass(i,u),i}it($a,"type","ColorMatrix"),it($a,"defaults",Ov),it($a,"uniformLocations",["uColorMatrix","uConstants"]),Lt.setClass($a);aa("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);aa("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);aa("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);aa("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);aa("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);aa("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);aa("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class $y extends We{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){su(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach((n=>{n.applyTo(t)}))}toObject(){return{type:this.type,subFilters:this.subFilters.map((t=>t.toObject()))}}isNeutralState(){return!this.subFilters.some((t=>!t.isNeutralState()))}static fromObject(t,n){return Promise.all((t.subFilters||[]).map((i=>Lt.getClass(i.type).fromObject(i,n)))).then((i=>new this({subFilters:i})))}}it($y,"type","Composed"),Lt.setClass($y);class sc extends We{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:n}}=t;const i=Math.floor(255*this.contrast),a=259*(i+255)/(255*(259-i));for(let o=0;o<n.length;o+=4)n[o]=a*(n[o]-128)+128,n[o+1]=a*(n[o+1]-128)+128,n[o+2]=a*(n[o+2]-128)+128}sendUniformData(t,n){t.uniform1f(n.uContrast,this.contrast)}}it(sc,"type","Contrast"),it(sc,"defaults",{contrast:0}),it(sc,"uniformLocations",["uContrast"]),Lt.setClass(sc);const D5={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class ic extends We{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return D5[this.getCacheKey()]}applyTo2d(t){const n=t.imageData,i=n.data,a=this.matrix,o=Math.round(Math.sqrt(a.length)),c=Math.floor(o/2),h=n.width,d=n.height,f=t.ctx.createImageData(h,d),p=f.data,x=this.opaque?1:0;let v,b,w,_,k,C,O,M,X,I,$,V,B;for($=0;$<d;$++)for(I=0;I<h;I++){for(k=4*($*h+I),v=0,b=0,w=0,_=0,B=0;B<o;B++)for(V=0;V<o;V++)O=$+B-c,C=I+V-c,O<0||O>=d||C<0||C>=h||(M=4*(O*h+C),X=a[B*o+V],v+=i[M]*X,b+=i[M+1]*X,w+=i[M+2]*X,x||(_+=i[M+3]*X));p[k]=v,p[k+1]=b,p[k+2]=w,p[k+3]=x?i[k+3]:_}t.imageData=f}sendUniformData(t,n){t.uniform1fv(n.uMatrix,this.matrix)}toObject(){return at(at({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}it(ic,"type","Convolute"),it(ic,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),it(ic,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Lt.setClass(ic);const Ev="Gamma";class ac extends We{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:n}}=t;const i=this.gamma,a=1/i[0],o=1/i[1],c=1/i[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const h=this.rgbValues;for(let d=0;d<256;d++)h.r[d]=255*Math.pow(d/255,a),h.g[d]=255*Math.pow(d/255,o),h.b[d]=255*Math.pow(d/255,c);for(let d=0;d<n.length;d+=4)n[d]=h.r[n[d]],n[d+1]=h.g[n[d+1]],n[d+2]=h.b[n[d+2]]}sendUniformData(t,n){t.uniform3fv(n.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:Ev,gamma:this.gamma.concat()}}}it(ac,"type",Ev),it(ac,"defaults",{gamma:[1,1,1]}),it(ac,"uniformLocations",["uGamma"]),Lt.setClass(ac);const A5={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class rc extends We{applyTo2d(t){let{imageData:{data:n}}=t;for(let i,a=0;a<n.length;a+=4){const o=n[a],c=n[a+1],h=n[a+2];switch(this.mode){case"average":i=(o+c+h)/3;break;case"lightness":i=(Math.min(o,c,h)+Math.max(o,c,h))/2;break;case"luminosity":i=.21*o+.72*c+.07*h}n[a+2]=n[a+1]=n[a]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return A5[this.mode]}sendUniformData(t,n){t.uniform1i(n.uMode,1)}isNeutralState(){return!1}}it(rc,"type","Grayscale"),it(rc,"defaults",{mode:"average"}),it(rc,"uniformLocations",["uMode"]),Lt.setClass(rc);const M5=at(at({},Ov),{},{rotation:0});class Bd extends $a{calculateMatrix(){const t=this.rotation*Math.PI,n=Ws(t),i=Zs(t),a=1/3,o=Math.sqrt(a)*i,c=1-n;this.matrix=[n+c/3,a*c-o,a*c+o,0,0,a*c+o,n+a*c,a*c-o,0,0,a*c-o,a*c+o,n+a*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}it(Bd,"type","HueRotation"),it(Bd,"defaults",M5),Lt.setClass(Bd);class oc extends We{applyTo2d(t){let{imageData:{data:n}}=t;for(let i=0;i<n.length;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2],this.alpha&&(n[i+3]=255-n[i+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,n){t.uniform1i(n.uInvert,Number(this.invert)),t.uniform1i(n.uAlpha,Number(this.alpha))}}it(oc,"type","Invert"),it(oc,"defaults",{alpha:!1,invert:!0}),it(oc,"uniformLocations",["uInvert","uAlpha"]),Lt.setClass(oc);class lc extends We{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:n}}=t;const i=this.noise;for(let a=0;a<n.length;a+=4){const o=(.5-Math.random())*i;n[a]+=o,n[a+1]+=o,n[a+2]+=o}}sendUniformData(t,n){t.uniform1f(n.uNoise,this.noise/255),t.uniform1f(n.uSeed,Math.random())}isNeutralState(){return this.noise===0}}it(lc,"type","Noise"),it(lc,"defaults",{noise:0}),it(lc,"uniformLocations",["uNoise","uSeed"]),Lt.setClass(lc);class cc extends We{applyTo2d(t){let{imageData:{data:n,width:i,height:a}}=t;for(let o=0;o<a;o+=this.blocksize)for(let c=0;c<i;c+=this.blocksize){const h=4*o*i+4*c,d=n[h],f=n[h+1],p=n[h+2],x=n[h+3];for(let v=o;v<Math.min(o+this.blocksize,a);v++)for(let b=c;b<Math.min(c+this.blocksize,i);b++){const w=4*v*i+4*b;n[w]=d,n[w+1]=f,n[w+2]=p,n[w+3]=x}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,n){t.uniform1f(n.uBlocksize,this.blocksize)}}it(cc,"type","Pixelate"),it(cc,"defaults",{blocksize:4}),it(cc,"uniformLocations",["uBlocksize"]),Lt.setClass(cc);class uc extends We{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:n}}=t;const i=255*this.distance,a=new de(this.color).getSource(),o=[a[0]-i,a[1]-i,a[2]-i],c=[a[0]+i,a[1]+i,a[2]+i];for(let h=0;h<n.length;h+=4){const d=n[h],f=n[h+1],p=n[h+2];d>o[0]&&f>o[1]&&p>o[2]&&d<c[0]&&f<c[1]&&p<c[2]&&(n[h+3]=0)}}sendUniformData(t,n){const i=new de(this.color).getSource(),a=this.distance,o=[0+i[0]/255-a,0+i[1]/255-a,0+i[2]/255-a,1],c=[i[0]/255+a,i[1]/255+a,i[2]/255+a,1];t.uniform4fv(n.uLow,o),t.uniform4fv(n.uHigh,c)}}it(uc,"type","RemoveColor"),it(uc,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),it(uc,"uniformLocations",["uLow","uHigh"]),Lt.setClass(uc);class hc extends We{sendUniformData(t,n){t.uniform2fv(n.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(n.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),n=this.tempScale,i=this.getFilterWindow(),a=new Array(i);for(let o=1;o<=i;o++)a[o-1]=t(o*n);return a}generateShader(t){const n=new Array(t);for(let i=1;i<=t;i++)n[i-1]="".concat(i,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(n.map(((i,a)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(i,") * uTaps[").concat(a,"] + texture2D(uTexture, vTexCoord - ").concat(i,") * uTaps[").concat(a,`];
              sum += 2.0 * uTaps[`).concat(a,`];
            `))).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){su(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return n=>{if(n>=t||n<=-t)return 0;if(n<11920929e-14&&n>-11920929e-14)return 1;const i=(n*=Math.PI)/t;return Math.sin(n)/n*Math.sin(i)/i}}applyTo2d(t){const n=t.imageData,i=this.scaleX,a=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/a;const o=n.width,c=n.height,h=Math.round(o*i),d=Math.round(c*a);let f;f=this.resizeType==="sliceHack"?this.sliceByTwo(t,o,c,h,d):this.resizeType==="hermite"?this.hermiteFastResize(t,o,c,h,d):this.resizeType==="bilinear"?this.bilinearFiltering(t,o,c,h,d):this.resizeType==="lanczos"?this.lanczosResize(t,o,c,h,d):new ImageData(h,d),t.imageData=f}sliceByTwo(t,n,i,a,o){const c=t.imageData,h=.5;let d=!1,f=!1,p=n*h,x=i*h;const v=t.filterBackend.resources;let b=0,w=0;const _=n;let k=0;v.sliceByTwo||(v.sliceByTwo=Ks());const C=v.sliceByTwo;(C.width<1.5*n||C.height<i)&&(C.width=1.5*n,C.height=i);const O=C.getContext("2d");for(O.clearRect(0,0,1.5*n,i),O.putImageData(c,0,0),a=Math.floor(a),o=Math.floor(o);!d||!f;)n=p,i=x,a<Math.floor(p*h)?p=Math.floor(p*h):(p=a,d=!0),o<Math.floor(x*h)?x=Math.floor(x*h):(x=o,f=!0),O.drawImage(C,b,w,n,i,_,k,p,x),b=_,w=k,k+=x;return O.getImageData(b,w,a,o)}lanczosResize(t,n,i,a,o){const c=t.imageData.data,h=t.ctx.createImageData(a,o),d=h.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,x=this.rcpScaleY,v=2/this.rcpScaleX,b=2/this.rcpScaleY,w=Math.ceil(p*this.lanczosLobes/2),_=Math.ceil(x*this.lanczosLobes/2),k={},C={x:0,y:0},O={x:0,y:0};return(function M(X){let I,$,V,B,z,Q,ct,L,P,E,q;for(C.x=(X+.5)*p,O.x=Math.floor(C.x),I=0;I<o;I++){for(C.y=(I+.5)*x,O.y=Math.floor(C.y),z=0,Q=0,ct=0,L=0,P=0,$=O.x-w;$<=O.x+w;$++)if(!($<0||$>=n)){E=Math.floor(1e3*Math.abs($-C.x)),k[E]||(k[E]={});for(let K=O.y-_;K<=O.y+_;K++)K<0||K>=i||(q=Math.floor(1e3*Math.abs(K-C.y)),k[E][q]||(k[E][q]=f(Math.sqrt(Math.pow(E*v,2)+Math.pow(q*b,2))/1e3)),V=k[E][q],V>0&&(B=4*(K*n+$),z+=V,Q+=V*c[B],ct+=V*c[B+1],L+=V*c[B+2],P+=V*c[B+3]))}B=4*(I*a+X),d[B]=Q/z,d[B+1]=ct/z,d[B+2]=L/z,d[B+3]=P/z}return++X<a?M(X):h})(0)}bilinearFiltering(t,n,i,a,o){let c,h,d,f,p,x,v,b,w,_,k,C,O,M=0;const X=this.rcpScaleX,I=this.rcpScaleY,$=4*(n-1),V=t.imageData.data,B=t.ctx.createImageData(a,o),z=B.data;for(v=0;v<o;v++)for(b=0;b<a;b++)for(p=Math.floor(X*b),x=Math.floor(I*v),w=X*b-p,_=I*v-x,O=4*(x*n+p),k=0;k<4;k++)c=V[O+k],h=V[O+4+k],d=V[O+$+k],f=V[O+$+4+k],C=c*(1-w)*(1-_)+h*w*(1-_)+d*_*(1-w)+f*w*_,z[M++]=C;return B}hermiteFastResize(t,n,i,a,o){const c=this.rcpScaleX,h=this.rcpScaleY,d=Math.ceil(c/2),f=Math.ceil(h/2),p=t.imageData.data,x=t.ctx.createImageData(a,o),v=x.data;for(let b=0;b<o;b++)for(let w=0;w<a;w++){const _=4*(w+b*a);let k=0,C=0,O=0,M=0,X=0,I=0,$=0;const V=(b+.5)*h;for(let B=Math.floor(b*h);B<(b+1)*h;B++){const z=Math.abs(V-(B+.5))/f,Q=(w+.5)*c,ct=z*z;for(let L=Math.floor(w*c);L<(w+1)*c;L++){let P=Math.abs(Q-(L+.5))/d;const E=Math.sqrt(ct+P*P);E>1&&E<-1||(k=2*E*E*E-3*E*E+1,k>0&&(P=4*(L+B*n),$+=k*p[P+3],O+=k,p[P+3]<255&&(k=k*p[P+3]/250),M+=k*p[P],X+=k*p[P+1],I+=k*p[P+2],C+=k))}}v[_]=M/C,v[_+1]=X/C,v[_+2]=I/C,v[_+3]=$/O}return x}}it(hc,"type","Resize"),it(hc,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),it(hc,"uniformLocations",["uDelta","uTaps"]),Lt.setClass(hc);class dc extends We{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:n}}=t;const i=-this.saturation;for(let a=0;a<n.length;a+=4){const o=n[a],c=n[a+1],h=n[a+2],d=Math.max(o,c,h);n[a]+=d!==o?(d-o)*i:0,n[a+1]+=d!==c?(d-c)*i:0,n[a+2]+=d!==h?(d-h)*i:0}}sendUniformData(t,n){t.uniform1f(n.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}it(dc,"type","Saturation"),it(dc,"defaults",{saturation:0}),it(dc,"uniformLocations",["uSaturation"]),Lt.setClass(dc);class fc extends We{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:n}}=t;const i=-this.vibrance;for(let a=0;a<n.length;a+=4){const o=n[a],c=n[a+1],h=n[a+2],d=Math.max(o,c,h),f=(o+c+h)/3,p=2*Math.abs(d-f)/255*i;n[a]+=d!==o?(d-o)*p:0,n[a+1]+=d!==c?(d-c)*p:0,n[a+2]+=d!==h?(d-h)*p:0}}sendUniformData(t,n){t.uniform1f(n.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}it(fc,"type","Vibrance"),it(fc,"defaults",{vibrance:0}),it(fc,"uniformLocations",["uVibrance"]),Lt.setClass(fc);let R5=0;function gc(){return`el_${Date.now()}_${++R5}`}async function Ld(u){if(u.startsWith("data:"))return Se.fromURL(u);const t=await jx(u);return Se.fromURL(t)}function tx(u){var f;let t=u.left??0,n=u.top??0,i=u.angle??0,a=u.scaleX??1,o=u.scaleY??1;const c=u.group;if(c&&c.type==="activeselection"){const p=c.getCenterPoint(),x=(c.angle??0)*Math.PI/180,v=c.scaleX??1,b=c.scaleY??1,w=(u.left??0)*v,_=(u.top??0)*b,k=Math.cos(x),C=Math.sin(x);t=p.x+w*k-_*C,n=p.y+w*C+_*k,i=(u.angle??0)+(c.angle??0),a=(u.scaleX??1)*v,o=(u.scaleY??1)*b}const h={left:t,top:n,width:u.width??0,height:u.height??0,angle:i,scaleX:a,scaleY:o};if(u instanceof Xe&&(h.text=u.text,h.fontFamily=u.fontFamily,h.fontSize=u.fontSize,h.fontWeight=u.fontWeight,h.fontStyle=u.fontStyle,h.underline=u.underline,h.fill=u.fill,h.textAlign=u.textAlign,h.textBgColor=u._textBgColor??void 0,h.textBgOpacity=u._textBgOpacity??void 0,h.textBgRadius=u._textBgRadius??void 0),u instanceof Se){const p=((f=u.getSrc)==null?void 0:f.call(u))||u._originalSrc||"";p&&(h.src=p),h.borderRadius=u._borderRadius??0,u._svgFill&&(h.fill=u._svgFill),u._cropX!==void 0&&(h.cropX=u._cropX,h.cropY=u._cropY,h.cropWidth=u._cropWidth,h.cropHeight=u._cropHeight)}return u.elementType==="placeholder-image"&&(h.borderRadius=u._borderRadius??0),h}class z5{constructor(t){Ti(this,"canvas");Ti(this,"undoStack",[]);Ti(this,"redoStack",[]);Ti(this,"_isRestoring",!1);Ti(this,"_lastSaveTime",0);Ti(this,"_saveThrottleMs",300);this.canvas=t}get isRestoring(){return this._isRestoring}get canUndo(){return this.undoStack.length>0}get canRedo(){return this.redoStack.length>0}saveState(){if(this._isRestoring)return;const t=Date.now();t-this._lastSaveTime<this._saveThrottleMs||(this._lastSaveTime=t,this.undoStack.push(this.getTemplate()),this.redoStack=[])}async undo(){if(this.undoStack.length===0)return;const t=this.getTemplate();this.redoStack.push(t);const n=this.undoStack.pop();this._isRestoring=!0;try{await this.loadTemplate(n)}finally{this._isRestoring=!1}}async redo(){if(this.redoStack.length===0)return;const t=this.getTemplate();this.undoStack.push(t);const n=this.redoStack.pop();this._isRestoring=!0;try{await this.loadTemplate(n)}finally{this._isRestoring=!1}}findObjectById(t){return this.canvas.getObjects().find(n=>n.elementId===t)}updateElementConditions(t,n){const i=this.findObjectById(t);i&&(this.saveState(),i.conditions=n.length>0?n:void 0)}applyBorderRadius(t,n){if(t._borderRadius=n,n>0){const i=t.width||1,a=t.height||1,o=Math.min(t.scaleX??1,t.scaleY??1),c=o>0?n/o:n,h=t.clipPath;h instanceof Ie?(h.set({rx:c,ry:c,width:i,height:a,left:-i/2,top:-a/2}),h.dirty=!0):t.clipPath=new Ie({width:i,height:a,rx:c,ry:c,left:-i/2,top:-a/2,originX:"left",originY:"top"})}else t.clipPath=void 0;t.dirty=!0,this.canvas.renderAll()}applyTextBackground(t){const n=t._textBgColor,i=t._textBgOpacity,a=t._textBgRadius;if(t.set({backgroundColor:""}),n&&i!==void 0&&i>0){const o=parseInt(n.slice(1,3),16),c=parseInt(n.slice(3,5),16),h=parseInt(n.slice(5,7),16),d=`rgba(${o},${c},${h},${i})`,f=a??0;t._origRender||(t._origRender=t.render.bind(t)),t.render=function(p){p.save();const x=this.calcTransformMatrix();p.transform(x[0],x[1],x[2],x[3],x[4],x[5]);const v=this.width,b=this.height,w=6,_=-v/2-w,k=-b/2-w,C=v+w*2,O=b+w*2,M=Math.min(f,C/2,O/2);p.beginPath(),M>0?(p.moveTo(_+M,k),p.lineTo(_+C-M,k),p.quadraticCurveTo(_+C,k,_+C,k+M),p.lineTo(_+C,k+O-M),p.quadraticCurveTo(_+C,k+O,_+C-M,k+O),p.lineTo(_+M,k+O),p.quadraticCurveTo(_,k+O,_,k+O-M),p.lineTo(_,k+M),p.quadraticCurveTo(_,k,_+M,k)):p.rect(_,k,C,O),p.closePath(),p.fillStyle=d,p.fill(),p.restore(),this._origRender(p)}}else t._origRender&&(t.render=t._origRender,delete t._origRender);t.dirty=!0,this.canvas.renderAll()}async recolorSvg(t,n){const i=t._svgSource;if(!i)return;let a=i.replace(/fill="(?!none)[^"]*"/gi,`fill="${n}"`).replace(/stroke="(?!none)[^"]*"/gi,`stroke="${n}"`).replace(/fill:\s*(?!none)[^;"]+/gi,`fill: ${n}`).replace(/stroke:\s*(?!none)[^;"]+/gi,`stroke: ${n}`);!i.match(/fill="/i)&&!i.match(/fill:/i)&&(a=a.replace(/<svg/i,`<svg fill="${n}"`));const o=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(a)))}`,c=t.left,h=t.top,d=t.scaleX,f=t.scaleY,p=t.angle;try{const x=await Se.fromURL(o,{crossOrigin:"anonymous"});t.setElement(x.getElement()),t.set({left:c,top:h,scaleX:d,scaleY:f,angle:p}),t._originalSrc=o,t._svgSource=a,t._svgFill=n,t.dirty=!0,t.setCoords(),this.canvas.renderAll()}catch{}}setCustomProps(t,n,i,a){t.elementId=n,t.elementType=i,a!==void 0&&(t.columnName=a)}addTextElement(t){this.saveState();const n=gc(),i=this.canvas.getZoom()||1,a=this.canvas.getWidth()/i,o=this.canvas.getHeight()/i,c=Math.min(a,o),h=Math.round(a*.4),d=t.fontSize||Math.round(c*.045),f=new Jn(t.text,{left:t.left,top:t.top,fontFamily:t.fontFamily,fontSize:d,fontWeight:t.fontWeight,fontStyle:t.fontStyle,underline:t.underline,fill:t.fill,textAlign:t.textAlign,width:h,editable:!0});return this.setCustomProps(f,n,"text"),this.canvas.add(f),this.sendBgToBack(),this.canvas.setActiveObject(f),this.canvas.renderAll(),n}async addImageElement(t){this.saveState();const n=gc(),i=await Ld(t.src),a=this.canvas.getZoom()||1,o=this.canvas.getWidth()/a,c=this.canvas.getHeight()/a,h=i.width||1,d=i.height||1,f=Math.min(t.width,o*.6),p=Math.min(t.height,c*.6),x=Math.min(f/h,p/d,1);if(i.set({left:t.left,top:t.top,scaleX:x,scaleY:x}),i._originalSrc=t.src,i._borderRadius=0,i._fullWidth=i.width,i._fullHeight=i.height,t.src.startsWith("data:image/svg+xml"))try{let v;t.src.includes(";base64,")?v=decodeURIComponent(escape(atob(t.src.split(",")[1]))):v=decodeURIComponent(t.src.split(",")[1]),i._svgSource=v,i._svgFill=null}catch{}return this.setCustomProps(i,n,"image"),this.canvas.add(i),this.sendBgToBack(),this.canvas.setActiveObject(i),this.canvas.renderAll(),n}addPlaceholder(t,n){this.saveState();const i=gc(),a=t.type==="image"?"placeholder-image":"placeholder-text",o=this.canvas.getWidth()/(this.canvas.getZoom()||1),c=this.canvas.getHeight()/(this.canvas.getZoom()||1),h=Math.min(o,c);if(a==="placeholder-text"){const d=Math.round(o*.4),f=Math.round(h*.04),p=new Jn(`{${t.name}}`,{left:n.left,top:n.top,fontFamily:"Arial",fontSize:f,fill:"#333333",width:d,editable:!0});this.setCustomProps(p,i,a,t.name),this.canvas.add(p),this.sendBgToBack()}else{const d=Math.round(h*.25),f=new Ie({left:n.left,top:n.top,width:d,height:d,fill:"#e0e0e0",stroke:"#999999",strokeWidth:1});this.setCustomProps(f,i,a,t.name);const p=Math.round(h*.025),x=new Xe(`{${t.name}}`,{left:n.left+10,top:n.top+d/2-p/2,fontFamily:"Arial",fontSize:p,fill:"#666666"}),v=new us([f,x],{left:n.left,top:n.top});v._borderRadius=0,this.setCustomProps(v,i,a,t.name),this.canvas.add(v),this.sendBgToBack()}return this.canvas.renderAll(),i}removeElement(t){const n=this.findObjectById(t);n&&(this.saveState(),this.canvas.remove(n),this.canvas.renderAll())}async duplicateElement(t){const n=this.findObjectById(t);if(!n)return null;this.saveState();const i=n.elementType,a=n.columnName,o=tx(n),c=gc();o.left+=20,o.top+=20;const h={id:c,type:i,properties:o};a&&(h.columnName=a);const d=n.conditions;d&&Array.isArray(d)&&d.length>0&&(h.conditions=JSON.parse(JSON.stringify(d))),await this.loadElement(h),this.sendBgToBack();const f=this.findObjectById(c);return f&&this.canvas.setActiveObject(f),this.canvas.renderAll(),c}updateElementVisual(t,n){const i=this.findObjectById(t);if(!i)return;if(i instanceof Se&&n.borderRadius!==void 0&&this.applyBorderRadius(i,n.borderRadius),i.elementType==="placeholder-image"&&i instanceof us&&n.borderRadius!==void 0){i._borderRadius=n.borderRadius;const o=i.getObjects().find(c=>c instanceof Ie);o&&o.set({rx:n.borderRadius,ry:n.borderRadius}),this.canvas.renderAll()}}updateElement(t,n){const i=this.findObjectById(t);if(!i)return;this.saveState();const a={};if(n.left!==void 0&&(a.left=n.left),n.top!==void 0&&(a.top=n.top),n.angle!==void 0&&(a.angle=n.angle),n.scaleX!==void 0&&(a.scaleX=n.scaleX),n.scaleY!==void 0&&(a.scaleY=n.scaleY),n.width!==void 0&&(a.width=n.width),n.height!==void 0&&(a.height=n.height),i instanceof Xe&&(n.text!==void 0&&(a.text=n.text),n.fontFamily!==void 0&&(a.fontFamily=n.fontFamily),n.fontSize!==void 0&&(a.fontSize=n.fontSize),n.fontWeight!==void 0&&(a.fontWeight=n.fontWeight),n.fontStyle!==void 0&&(a.fontStyle=n.fontStyle),n.underline!==void 0&&(a.underline=n.underline),n.fill!==void 0&&(a.fill=n.fill),n.textAlign!==void 0&&(a.textAlign=n.textAlign),n.textBgColor!==void 0&&(i._textBgColor=n.textBgColor),n.textBgOpacity!==void 0&&(i._textBgOpacity=n.textBgOpacity),n.textBgRadius!==void 0&&(i._textBgRadius=n.textBgRadius),this.applyTextBackground(i)),i instanceof Se&&n.fill!==void 0&&i._svgSource&&this.recolorSvg(i,n.fill),i.set(a),i.setCoords(),i instanceof Se&&n.borderRadius!==void 0&&this.applyBorderRadius(i,n.borderRadius),i.elementType==="placeholder-image"&&i instanceof us&&n.borderRadius!==void 0){i._borderRadius=n.borderRadius;const c=i.getObjects().find(h=>h instanceof Ie);c&&c.set({rx:n.borderRadius,ry:n.borderRadius}),this.canvas.renderAll()}if(i instanceof Se&&n.cropX!==void 0){i._cropX=n.cropX,i._cropY=n.cropY,i._cropWidth=n.cropWidth,i._cropHeight=n.cropHeight;const c=i._fullWidth||i.width||1,h=i._fullHeight||i.height||1;i.set({cropX:(n.cropX??0)*c,cropY:(n.cropY??0)*h,width:(n.cropWidth??1)*c,height:(n.cropHeight??1)*h});const d=i._borderRadius??0;d>0&&this.applyBorderRadius(i,d),i.setCoords()}this.canvas.renderAll()}removeBgImageObject(){const t=this.canvas.getObjects().find(n=>n._isBgImage);t&&this.canvas.remove(t)}sendBgToBack(){const t=this.canvas.getObjects().find(n=>n._isBgImage);t&&this.canvas.sendObjectToBack(t)}async setBackground(t){if(!this.isDisposed){if(this.saveState(),this.canvas.backgroundImage=void 0,t.type==="solid"&&t.color)this.removeBgImageObject(),this.canvas.backgroundColor=t.color,this.canvas.renderAll();else if(t.type==="gradient"&&t.gradientColors){this.removeBgImageObject();const[n,i]=t.gradientColors,a=t.gradientDirection??"vertical",o=this.canvas.getWidth()/(this.canvas.getZoom()||1),c=this.canvas.getHeight()/(this.canvas.getZoom()||1);let h;switch(a){case"horizontal":h={x1:0,y1:0,x2:o,y2:0};break;case"diagonal":h={x1:0,y1:0,x2:o,y2:c};break;case"vertical":default:h={x1:0,y1:0,x2:0,y2:c};break}const d=new ta({type:"linear",coords:h,colorStops:[{offset:0,color:n},{offset:1,color:i}]});this.canvas.backgroundColor=d,this.canvas.renderAll()}else if(t.type==="image"&&t.imageSrc){this.removeBgImageObject();const n=await Ld(t.imageSrc),i=this.canvas.getWidth()/(this.canvas.getZoom()||1),a=this.canvas.getHeight()/(this.canvas.getZoom()||1),o=n.width||1,c=n.height||1;let h=t.imageScale??Math.max(i/o,a/c),d=t.imageLeft??(i-o*h)/2,f=t.imageTop??(a-c*h)/2;n.set({left:d,top:f,scaleX:h,scaleY:h,lockUniScaling:!0}),n.on("scaling",()=>{const p=n.scaleX??1,x=n.scaleY??1,v=Math.max(p,x);n.set({scaleX:v,scaleY:v})}),n._originalSrc=t.imageSrc,n._isBgImage=!0,this.canvas.backgroundColor="",this.canvas.add(n),this.canvas.sendObjectToBack(n),this.canvas.renderAll()}}}bringToFront(t){const n=this.findObjectById(t);n&&(this.saveState(),this.canvas.bringObjectToFront(n),this.canvas.renderAll())}sendToBack(t){const n=this.findObjectById(t);n&&(this.saveState(),this.canvas.sendObjectToBack(n),this.sendBgToBack(),this.canvas.renderAll())}getTemplate(){const t=[];for(const i of this.canvas.getObjects()){if(i._isBgImage)continue;const a=i.elementId,o=i.elementType;if(!a||!o)continue;const c={id:a,type:o,properties:tx(i)},h=i.columnName;h!==void 0&&(c.columnName=h);const d=i.conditions;d&&Array.isArray(d)&&d.length>0&&(c.conditions=d),t.push(c)}const n=this.serializeBackground();return{width:Math.round(this.canvas.getWidth()/(this.canvas.getZoom()||1)),height:Math.round(this.canvas.getHeight()/(this.canvas.getZoom()||1)),background:n,elements:t}}serializeBackground(){var a,o,c,h;const t=this.canvas.backgroundColor,n=this.canvas.getObjects().find(d=>d._isBgImage);if(n&&n instanceof Se)return{type:"image",imageSrc:((a=n.getSrc)==null?void 0:a.call(n))||n._originalSrc||"",imageLeft:n.left??0,imageTop:n.top??0,imageScale:n.scaleX??1};const i=this.canvas.backgroundImage;if(i&&i instanceof Se)return{type:"image",imageSrc:((o=i.getSrc)==null?void 0:o.call(i))||i._originalSrc||""};if(t instanceof ta){const d=t,f=d.colorStops??[],p=((c=f[0])==null?void 0:c.color)??"#ffffff",x=((h=f[1])==null?void 0:h.color)??"#000000",v=d.coords;let b="vertical";if(v){const w=v.y1===v.y2&&v.x1!==v.x2,_=v.x1!==v.x2&&v.y1!==v.y2;w?b="horizontal":_&&(b="diagonal")}return{type:"gradient",gradientColors:[p,x],gradientDirection:b}}return typeof t=="string"&&t?{type:"solid",color:t}:{type:"solid",color:"#ffffff"}}get isDisposed(){try{return!this.canvas.lowerCanvasEl}catch{return!0}}async loadTemplate(t){if(this.isDisposed)return;const n=this._isRestoring;this._isRestoring=!0;try{if(this.canvas.clear(),this.isDisposed)return;const i=this.canvas.getZoom();if(this.canvas.setZoom(1),this.canvas.setWidth(t.width),this.canvas.setHeight(t.height),await this.setBackground(t.background),this.isDisposed)return;for(const a of t.elements){if(this.isDisposed)return;await this.loadElement(a)}if(this.isDisposed)return;this.canvas.setZoom(i),this.canvas.setDimensions({width:t.width*i,height:t.height*i}),this.canvas.renderAll()}finally{this._isRestoring=n}}async loadElement(t){const{id:n,type:i,columnName:a,properties:o}=t;if(i==="text"||i==="placeholder-text"){const c=new Jn(o.text??"",{left:o.left,top:o.top,width:o.width||250,angle:o.angle,scaleX:o.scaleX,scaleY:o.scaleY,fontFamily:o.fontFamily??"Arial",fontSize:o.fontSize??20,fontWeight:o.fontWeight??"normal",fontStyle:o.fontStyle??"normal",underline:o.underline??!1,fill:o.fill??"#000000",textAlign:o.textAlign??"left",editable:!0});this.setCustomProps(c,n,i,a),t.conditions&&t.conditions.length>0&&(c.conditions=t.conditions),o.textBgColor&&(c._textBgColor=o.textBgColor,c._textBgOpacity=o.textBgOpacity??1,c._textBgRadius=o.textBgRadius??0,this.applyTextBackground(c)),this.canvas.add(c)}else if(i==="image"){if(o.src)try{const c=await Ld(o.src);if(c.set({left:o.left,top:o.top,angle:o.angle,scaleX:o.scaleX,scaleY:o.scaleY}),c._originalSrc=o.src,c._borderRadius=o.borderRadius??0,c._fullWidth=c.width,c._fullHeight=c.height,o.src.startsWith("data:image/svg+xml"))try{let h;o.src.includes(";base64,")?h=decodeURIComponent(escape(atob(o.src.split(",")[1]))):h=decodeURIComponent(o.src.split(",")[1]),c._svgSource=h,c._svgFill=o.fill??null}catch{}if(o.cropX!==void 0&&o.cropWidth!==void 0){const h=c.width||1,d=c.height||1;c._cropX=o.cropX,c._cropY=o.cropY,c._cropWidth=o.cropWidth,c._cropHeight=o.cropHeight,c.set({cropX:(o.cropX??0)*h,cropY:(o.cropY??0)*d,width:(o.cropWidth??1)*h,height:(o.cropHeight??1)*d})}this.setCustomProps(c,n,i),t.conditions&&t.conditions.length>0&&(c.conditions=t.conditions),this.canvas.add(c),o.borderRadius&&o.borderRadius>0&&this.applyBorderRadius(c,o.borderRadius),c._svgSource&&c._svgFill&&await this.recolorSvg(c,c._svgFill)}catch{}}else if(i==="placeholder-image"){const c=new Ie({width:o.width||150,height:o.height||150,fill:"#e0e0e0",stroke:"#999999",strokeWidth:1,rx:o.borderRadius??0,ry:o.borderRadius??0}),h=new Xe(`{${a??""}}`,{left:10,top:(o.height||150)/2-10,fontFamily:"Arial",fontSize:14,fill:"#666666"}),d=new us([c,h],{left:o.left,top:o.top,angle:o.angle,scaleX:o.scaleX,scaleY:o.scaleY});d._borderRadius=o.borderRadius??0,this.setCustomProps(d,n,i,a),t.conditions&&t.conditions.length>0&&(d.conditions=t.conditions),this.canvas.add(d)}}}const ve=6,B5="#ff4081",ex=1.5,L5="rgba(255, 64, 129, 0.3)",Ud="#2ecc71",U5="rgba(46, 204, 113, 0.4)",Va=6,Hd=.1,Fd=3;function H5({onSelectionChange:u,engineRef:t,onCanvasChange:n,onImagePaste:i}){const a=tt.useRef(null),o=tt.useRef(null),c=tt.useRef(null),h=tt.useRef([]),d=tt.useRef(null),f=tt.useRef(null),p=It(j=>j.templateConfig),x=Be(j=>j.t),[v,b]=tt.useState(1),[w,_]=tt.useState(!1),[k,C]=tt.useState(!1),O=tt.useCallback(()=>{const j=t.current;j&&(_(j.canUndo),C(j.canRedo))},[t]),M=tt.useRef({width:p.width,height:p.height});M.current={width:p.width,height:p.height};const X=tt.useRef(n);X.current=n;const I=tt.useRef(i);I.current=i;const $=tt.useRef(O);$.current=O;const V=tt.useRef(!1),B=tt.useRef(!1),z=tt.useRef(null),Q=tt.useCallback(j=>{var xt;if(!j)return null;const R=j.elementId,Z=j.elementType;if(!R||!Z)return null;const W={left:j.left??0,top:j.top??0,width:j.width??0,height:j.height??0,angle:j.angle??0,scaleX:j.scaleX??1,scaleY:j.scaleY??1};if(j instanceof Xe&&(W.text=j.text,W.fontFamily=j.fontFamily,W.fontSize=j.fontSize,W.fontWeight=j.fontWeight,W.fontStyle=j.fontStyle,W.underline=j.underline,W.fill=j.fill,W.textAlign=j.textAlign,W.textBgColor=j._textBgColor??void 0,W.textBgOpacity=j._textBgOpacity??void 0,W.textBgRadius=j._textBgRadius??void 0),j instanceof Se){const bt=((xt=j.getSrc)==null?void 0:xt.call(j))||j._originalSrc||"";bt&&(W.src=bt),W.borderRadius=j._borderRadius??0,j._svgFill&&(W.fill=j._svgFill),j._cropX!==void 0&&(W.cropX=j._cropX,W.cropY=j._cropY,W.cropWidth=j._cropWidth,W.cropHeight=j._cropHeight)}Z==="placeholder-image"&&(W.borderRadius=j._borderRadius??0);const _t=j.conditions||[];return{id:R,type:Z,properties:W,conditions:_t}},[]),ct=tt.useCallback(()=>{const j=c.current;if(j){for(const R of h.current)j.remove(R);h.current=[]}},[]),L=tt.useCallback((j,R,Z,W)=>{const _t=c.current;if(!_t)return;const xt=new Ln([j,R,Z,W],{stroke:L5,strokeWidth:ex+4,selectable:!1,evented:!1,excludeFromExport:!0});xt._isGuideline=!0,_t.add(xt),h.current.push(xt);const bt=new Ln([j,R,Z,W],{stroke:B5,strokeWidth:ex,selectable:!1,evented:!1,excludeFromExport:!0});bt._isGuideline=!0,_t.add(bt),h.current.push(bt)},[]),P=tt.useCallback((j,R,Z,W)=>{const _t=c.current;if(!_t)return;const xt=Math.abs(R-W)<1,bt=4,Ct=new Ln([j,R,Z,W],{stroke:U5,strokeWidth:5,selectable:!1,evented:!1,excludeFromExport:!0});Ct._isGuideline=!0,_t.add(Ct),h.current.push(Ct);const ot=new Ln([j,R,Z,W],{stroke:Ud,strokeWidth:2,selectable:!1,evented:!1,excludeFromExport:!0});if(ot._isGuideline=!0,_t.add(ot),h.current.push(ot),xt)for(const St of[j,Z]){const At=new Ln([St,R-bt,St,R+bt],{stroke:Ud,strokeWidth:2,selectable:!1,evented:!1,excludeFromExport:!0});At._isGuideline=!0,_t.add(At),h.current.push(At)}else for(const St of[R,W]){const At=new Ln([j-bt,St,j+bt,St],{stroke:Ud,strokeWidth:2,selectable:!1,evented:!1,excludeFromExport:!0});At._isGuideline=!0,_t.add(At),h.current.push(At)}},[]),E=tt.useCallback((j,R)=>{if(!j.lowerCanvasEl)return;const Z=M.current.width,W=M.current.height;j.setZoom(R),j.setDimensions({width:Z*R,height:W*R}),j.renderAll(),b(R)},[]),q=tt.useCallback(()=>{const j=c.current,R=o.current;if(!j||!R||!j.lowerCanvasEl)return;const Z=R.clientWidth-48,W=R.clientHeight-48,_t=M.current.width,xt=M.current.height,bt=Math.min(Z/_t,W/xt,1);E(j,bt)},[E]),K=tt.useCallback(j=>{const R=c.current;if(!R)return;let Z=R.getZoom()+j;Z=Math.min(Fd,Math.max(Hd,Z)),E(R,Z)},[E]);tt.useEffect(()=>{if(!a.current||c.current)return;const j=new pf(a.current,{width:p.width,height:p.height,backgroundColor:p.background.color??"#ffffff",selection:!0,preserveObjectStacking:!0});j.selectionKey=["shiftKey","ctrlKey","metaKey"],c.current=j;const R=new z5(j);t.current=R;const Z=()=>{const F=j.getActiveObject();if(F&&F.type==="activeselection"){const N=F.getObjects().map(D=>Q(D)).filter(D=>D!==null);N.length>0?u(N[0],N):u(null)}else u(Q(F))};j.on("selection:created",Z),j.on("selection:updated",Z),j.on("selection:cleared",()=>u(null)),j.on("object:modified",()=>{Z()}),j.on("text:changed",Z);const W=()=>{var F,H;V.current&&!((F=t.current)!=null&&F.isRestoring)&&((H=X.current)==null||H.call(X),$.current())};j.on("object:added",W),j.on("object:removed",W),j.on("object:modified",W),j.on("text:changed",W),j.on("before:transform",()=>{var F,H;V.current&&!((F=t.current)!=null&&F.isRestoring)&&((H=t.current)==null||H.saveState())}),j.on("text:editing:entered",()=>{var F,H;V.current&&!((F=t.current)!=null&&F.isRestoring)&&((H=t.current)==null||H.saveState())});const _t=F=>{ct();const H=M.current.width,N=M.current.height,D=F.getBoundingRect(),G=D.left+D.width/2,ut=D.top+D.height/2,yt=D.left,st=D.left+D.width,Et=D.top,Tt=D.top+D.height,Nt=H/2,Dt=N/2;Math.abs(G-Nt)<ve&&L(Nt,0,Nt,N),Math.abs(ut-Dt)<ve&&L(0,Dt,H,Dt),Math.abs(yt)<ve&&L(0,0,0,N),Math.abs(st-H)<ve&&L(H,0,H,N),Math.abs(Et)<ve&&L(0,0,H,0),Math.abs(Tt-N)<ve&&L(0,N,H,N);const Yt=j.getObjects().filter(Bt=>Bt!==F&&!Bt._isGuideline&&Bt.elementId);for(const Bt of Yt){const Ot=Bt.getBoundingRect(),se=Ot.left+Ot.width/2,ae=Ot.top+Ot.height/2;Math.abs(G-se)<ve&&L(se,0,se,N),Math.abs(ut-ae)<ve&&L(0,ae,H,ae),Math.abs(yt-Ot.left)<ve&&L(Ot.left,0,Ot.left,N),Math.abs(st-(Ot.left+Ot.width))<ve&&L(Ot.left+Ot.width,0,Ot.left+Ot.width,N),Math.abs(Et-Ot.top)<ve&&L(0,Ot.top,H,Ot.top),Math.abs(Tt-(Ot.top+Ot.height))<ve&&L(0,Ot.top+Ot.height,H,Ot.top+Ot.height),Math.abs(D.width-Ot.width)<ve&&(L(Ot.left,Ot.top,Ot.left+Ot.width,Ot.top),L(yt,Et,st,Et)),Math.abs(D.height-Ot.height)<ve&&(L(Ot.left,Ot.top,Ot.left,Ot.top+Ot.height),L(yt,Et,yt,Tt))}};d.current=_t,j.on("object:moving",F=>{const H=F.target;if(!H)return;ct();const N=M.current.width,D=M.current.height,G=H.getBoundingRect(),ut=G.left+G.width/2,yt=G.top+G.height/2,st=G.left,Et=G.left+G.width,Tt=G.top,Nt=G.top+G.height,Dt=N/2,Yt=D/2,Bt=[],Ot=[],se=Dt-ut;Math.abs(se)<ve&&Bt.push({delta:se,draw:()=>L(Dt,0,Dt,D)});const ae=Yt-yt;Math.abs(ae)<ve&&Ot.push({delta:ae,draw:()=>L(0,Yt,N,Yt)});const Te=-st;Math.abs(Te)<ve&&Bt.push({delta:Te,draw:()=>L(0,0,0,D)});const Kt=N-Et;Math.abs(Kt)<ve&&Bt.push({delta:Kt,draw:()=>L(N,0,N,D)});const xe=-Tt;Math.abs(xe)<ve&&Ot.push({delta:xe,draw:()=>L(0,0,N,0)});const Qt=D-Nt;Math.abs(Qt)<ve&&Ot.push({delta:Qt,draw:()=>L(0,D,N,D)});const Wt=j.getObjects().filter(Mt=>Mt!==H&&!Mt._isGuideline&&Mt.elementId);for(const Mt of Wt){const Ht=Mt.getBoundingRect(),zt=Ht.left+Ht.width/2,fe=Ht.top+Ht.height/2,Le=zt-ut;Math.abs(Le)<ve&&Bt.push({delta:Le,draw:()=>L(zt,0,zt,D)});const rn=fe-yt;Math.abs(rn)<ve&&Ot.push({delta:rn,draw:()=>L(0,fe,N,fe)});const kn=Ht.left-st;Math.abs(kn)<ve&&Bt.push({delta:kn,draw:()=>L(Ht.left,0,Ht.left,D)});const Un=Ht.left+Ht.width-Et;Math.abs(Un)<ve&&Bt.push({delta:Un,draw:()=>L(Ht.left+Ht.width,0,Ht.left+Ht.width,D)});const je=Ht.top-Tt;Math.abs(je)<ve&&Ot.push({delta:je,draw:()=>L(0,Ht.top,N,Ht.top)});const ds=Ht.top+Ht.height-Nt;Math.abs(ds)<ve&&Ot.push({delta:ds,draw:()=>L(0,Ht.top+Ht.height,N,Ht.top+Ht.height)})}if(Bt.length>0){const Mt=Bt.reduce((Ht,zt)=>Math.abs(Ht.delta)<=Math.abs(zt.delta)?Ht:zt);H.set("left",(H.left??0)+Mt.delta),Mt.draw();for(const Ht of Bt)Ht!==Mt&&Math.abs(Ht.delta-Mt.delta)<.5&&Ht.draw()}if(Ot.length>0){const Mt=Ot.reduce((Ht,zt)=>Math.abs(Ht.delta)<=Math.abs(zt.delta)?Ht:zt);H.set("top",(H.top??0)+Mt.delta),Mt.draw();for(const Ht of Ot)Ht!==Mt&&Math.abs(Ht.delta-Mt.delta)<.5&&Ht.draw()}const Oe=H.getBoundingRect(),un=(Mt,Ht=!1)=>({left:Mt.left,top:Mt.top,right:Mt.left+Mt.width,bottom:Mt.top+Mt.height,cx:Mt.left+Mt.width/2,cy:Mt.top+Mt.height/2,isTarget:Ht}),an=un(Oe,!0),gn=Wt.map(Mt=>{const Ht=Mt.getBoundingRect();return un(Ht)});if(gn.length>=2){const Mt=[...gn,an].sort((zt,fe)=>zt.cx-fe.cx),Ht=Mt.findIndex(zt=>zt.isTarget);if(Ht>0&&Ht<Mt.length-1){const zt=Mt[Ht-1],fe=Mt[Ht+1],Le=an.left-zt.right,rn=fe.left-an.right;if(Le>0&&rn>0&&Math.abs(Le-rn)<Va){const Un=(zt.right+fe.left-Oe.width)/2-Oe.left;if(Math.abs(Un)<Va){H.set("left",(H.left??0)+Un),H.setCoords();const je=H.getBoundingRect(),ds=(zt.cy+(je.top+je.height/2))/2,ti=(je.top+je.height/2+fe.cy)/2;P(zt.right,ds,je.left,ds),P(je.left+je.width,ti,fe.left,ti)}}}for(let zt=0;zt<Mt.length-1;zt++){const fe=Mt[zt+1].left-Mt[zt].right;if(zt+2<Mt.length){const Le=Mt[zt+2].left-Mt[zt+1].right;if(fe>0&&Le>0&&Math.abs(fe-Le)<Va){const rn=(Mt[zt].cy+Mt[zt+1].cy)/2,kn=(Mt[zt+1].cy+Mt[zt+2].cy)/2;P(Mt[zt].right,rn,Mt[zt+1].left,rn),P(Mt[zt+1].right,kn,Mt[zt+2].left,kn)}}}}if(gn.length>=2){const Mt=[...gn,an].sort((zt,fe)=>zt.cy-fe.cy),Ht=Mt.findIndex(zt=>zt.isTarget);if(Ht>0&&Ht<Mt.length-1){const zt=Mt[Ht-1],fe=Mt[Ht+1],Le=an.top-zt.bottom,rn=fe.top-an.bottom;if(Le>0&&rn>0&&Math.abs(Le-rn)<Va){const Un=(zt.bottom+fe.top-Oe.height)/2-Oe.top;if(Math.abs(Un)<Va){H.set("top",(H.top??0)+Un),H.setCoords();const je=H.getBoundingRect(),ds=(zt.cx+(je.left+je.width/2))/2,ti=(je.left+je.width/2+fe.cx)/2;P(ds,zt.bottom,ds,je.top),P(ti,je.top+je.height,ti,fe.top)}}}for(let zt=0;zt<Mt.length-1;zt++){const fe=Mt[zt+1].top-Mt[zt].bottom;if(zt+2<Mt.length){const Le=Mt[zt+2].top-Mt[zt+1].bottom;if(fe>0&&Le>0&&Math.abs(fe-Le)<Va){const rn=(Mt[zt].cx+Mt[zt+1].cx)/2,kn=(Mt[zt+1].cx+Mt[zt+2].cx)/2;P(rn,Mt[zt].bottom,rn,Mt[zt+1].top),P(kn,Mt[zt+1].bottom,kn,Mt[zt+2].top)}}}}H.setCoords()}),j.on("object:scaling",F=>{const H=F.target;H&&_t(H)}),j.on("object:resizing",F=>{const H=F.target;H&&_t(H)}),j.on("mouse:up",()=>{setTimeout(()=>{ct(),j.renderAll()},150)}),j.on("mouse:wheel",F=>{const H=F.e;if(!H.ctrlKey&&!H.metaKey)return;H.preventDefault(),H.stopPropagation();const N=H.deltaY>0?-.05:.05;let D=j.getZoom()+N;D=Math.min(Fd,Math.max(Hd,D));const G=M.current.width,ut=M.current.height;j.setZoom(D),j.setDimensions({width:G*D,height:ut*D}),b(D)});let xt=null;const bt=(F,H)=>Math.hypot(H.clientX-F.clientX,H.clientY-F.clientY),Ct=(F,H)=>({x:(F.clientX+H.clientX)/2,y:(F.clientY+H.clientY)/2}),ot=F=>{if(F.touches.length===2){F.preventDefault(),F.stopPropagation(),j.discardActiveObject(),j.renderAll();const[H,N]=[F.touches[0],F.touches[1]],D=Ct(H,N);xt={dist:bt(H,N),midX:D.x,midY:D.y,zoom:j.getZoom(),vpt:[...j.viewportTransform||[1,0,0,1,0,0]]}}},St=F=>{if(F.touches.length===2&&xt){F.preventDefault(),F.stopPropagation();const[H,N]=[F.touches[0],F.touches[1]],D=bt(H,N),G=Ct(H,N),ut=D/xt.dist;let yt=xt.zoom*ut;yt=Math.min(Fd,Math.max(Hd,yt));const st=G.x-xt.midX,Et=G.y-xt.midY,Tt=[...xt.vpt],Nt=yt/xt.zoom;Tt[0]=yt,Tt[3]=yt,Tt[4]=xt.vpt[4]*Nt+st,Tt[5]=xt.vpt[5]*Nt+Et,j.setViewportTransform(Tt),b(yt)}},At=F=>{if(F.touches.length<2&&xt){const H=j.getZoom(),N=j.viewportTransform,D=N[4],G=N[5],ut=M.current.width,yt=M.current.height;j.setViewportTransform([H,0,0,H,0,0]),j.setDimensions({width:ut*H,height:yt*H}),j.renderAll();const st=o.current;st&&(st.scrollLeft-=D,st.scrollTop-=G),xt=null}},dt=j.upperCanvasEl;dt&&(dt.addEventListener("touchstart",ot,{passive:!1}),dt.addEventListener("touchmove",St,{passive:!1}),dt.addEventListener("touchend",At));const S=It.getState().templateConfig;return S.elements.length>0||S.background.type!=="solid"?R.loadTemplate(S).then(()=>{requestAnimationFrame(()=>{V.current=!0})}):requestAnimationFrame(()=>{V.current=!0}),()=>{dt&&(dt.removeEventListener("touchstart",ot),dt.removeEventListener("touchmove",St),dt.removeEventListener("touchend",At)),j.dispose(),c.current=null,t.current=null}},[]),tt.useEffect(()=>{const j=c.current;if(!j||B.current||!j.lowerCanvasEl)return;const R=Math.round(j.getWidth()/j.getZoom()),Z=Math.round(j.getHeight()/j.getZoom());if(R!==p.width||Z!==p.height){const _t=j.getZoom();j.setZoom(1),j.setWidth(p.width),j.setHeight(p.height),j.setZoom(_t)}const W=setTimeout(q,20);return()=>clearTimeout(W)},[p.width,p.height,q]),tt.useEffect(()=>{const j=setTimeout(q,50);return()=>clearTimeout(j)},[]),tt.useEffect(()=>{const j=()=>q();return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[q]);const Y=tt.useCallback(()=>{const j=t.current,R=c.current;!j||!R||j.undo().then(()=>{B.current=!0;const Z=j.getTemplate();It.getState().setTemplateConfig(Z),b(R.getZoom()),O(),requestAnimationFrame(()=>{B.current=!1})})},[t,O]),rt=tt.useCallback(()=>{const j=t.current,R=c.current;!j||!R||j.redo().then(()=>{B.current=!0;const Z=j.getTemplate();It.getState().setTemplateConfig(Z),b(R.getZoom()),O(),requestAnimationFrame(()=>{B.current=!1})})},[t,O]),et=tt.useCallback(()=>{const j=t.current,R=c.current;if(!j||!R)return;const Z=R.getActiveObject(),W=Z==null?void 0:Z.elementId;W&&j.duplicateElement(W).then(()=>{O()})},[t,O]);tt.useEffect(()=>{const j=R=>{var xt,bt,Ct;const Z=t.current,W=c.current;if(!Z||!W)return;const _t=(xt=R.target)==null?void 0:xt.tagName;if(!(_t==="INPUT"||_t==="TEXTAREA"||_t==="SELECT"||(bt=R.target)!=null&&bt.isContentEditable)){if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(R.key)){const ot=W.getActiveObject();if(!ot||ot.isEditing)return;R.preventDefault();const St=R.shiftKey?10:1;switch(R.key){case"ArrowLeft":ot.set("left",(ot.left??0)-St);break;case"ArrowRight":ot.set("left",(ot.left??0)+St);break;case"ArrowUp":ot.set("top",(ot.top??0)-St);break;case"ArrowDown":ot.set("top",(ot.top??0)+St);break}ot.setCoords(),(Ct=d.current)==null||Ct.call(d,ot),W.renderAll(),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{var At;ct(),(At=c.current)==null||At.renderAll()},400),W.fire("object:modified",{target:ot});return}if(R.key==="Delete"||R.key==="Backspace"){const ot=W.getActiveObject();if(ot&&ot.isEditing)return;const St=ot==null?void 0:ot.elementId;St&&(Z.removeElement(St),u(null))}if(R.key==="z"&&(R.ctrlKey||R.metaKey)&&!R.shiftKey&&(R.preventDefault(),Y()),R.key==="z"&&(R.ctrlKey||R.metaKey)&&R.shiftKey&&(R.preventDefault(),rt()),R.key==="c"&&(R.ctrlKey||R.metaKey)){const ot=W.getActiveObject();if(ot&&ot.isEditing)return;const St=ot==null?void 0:ot.elementId;St&&(R.preventDefault(),z.current=St)}if(R.key==="v"&&(R.ctrlKey||R.metaKey)){const ot=W.getActiveObject();if(ot&&ot.isEditing)return;if(z.current){R.preventDefault(),Z.duplicateElement(z.current).then(St=>{St&&(z.current=St),$.current()});return}}if(R.key==="d"&&(R.ctrlKey||R.metaKey)){const ot=W.getActiveObject();if(ot&&ot.isEditing)return;const St=ot==null?void 0:ot.elementId;St&&(R.preventDefault(),Z.duplicateElement(St).then(()=>{$.current()}))}}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[t,u,Y,rt]),tt.useEffect(()=>{const j=R=>{var _t,xt,bt;const Z=(_t=R.target)==null?void 0:_t.tagName;if(Z==="INPUT"||Z==="TEXTAREA"||Z==="SELECT"||(xt=R.target)!=null&&xt.isContentEditable||z.current)return;const W=(bt=R.clipboardData)==null?void 0:bt.items;if(W){for(let Ct=0;Ct<W.length;Ct++)if(W[Ct].type.startsWith("image/")){R.preventDefault();const ot=W[Ct].getAsFile();if(!ot)continue;const St=new FileReader;St.onload=()=>{var dt;const At=St.result;(dt=I.current)==null||dt.call(I,At)},St.readAsDataURL(ot);break}}};return window.addEventListener("paste",j),()=>window.removeEventListener("paste",j)},[]);const pt=tt.useCallback(j=>{j.preventDefault(),j.dataTransfer.dropEffect="copy"},[]),A=tt.useCallback(j=>{j.preventDefault();const R=t.current,Z=c.current;if(!R||!Z)return;const W=j.dataTransfer.getData("text/plain"),_t=j.dataTransfer.getData("application/x-column-type");if(!W)return;const xt=a.current;if(!xt)return;const bt=xt.getBoundingClientRect(),Ct=Z.getZoom(),ot=(j.clientX-bt.left)/Ct,St=(j.clientY-bt.top)/Ct;R.addPlaceholder({name:W,type:_t==="image"?"image":"text"},{left:ot,top:St})},[t]);return g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[g.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 border-b border-gray-100 bg-gray-50/50",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-[11px] text-gray-500",children:[p.width,"  ",p.height,"px"]}),g.jsx("div",{className:"w-px h-4 bg-gray-200"}),g.jsx("button",{type:"button",onClick:Y,disabled:!w,className:"p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent",title:x("canvasEditor.undo"),children:g.jsx(G_,{className:"w-3.5 h-3.5"})}),g.jsx("button",{type:"button",onClick:rt,disabled:!k,className:"p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent",title:x("canvasEditor.redo"),children:g.jsx(k_,{className:"w-3.5 h-3.5"})}),g.jsx("div",{className:"w-px h-4 bg-gray-200"}),g.jsx("button",{type:"button",onClick:et,className:"p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors",title:x("canvasEditor.duplicate"),children:g.jsx(Ec,{className:"w-3.5 h-3.5"})}),g.jsx("button",{type:"button",onClick:()=>{const j=t.current;!j||!z.current||j.duplicateElement(z.current).then(R=>{R&&(z.current=R),O()})},className:"p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors",title:x("canvasEditor.paste"),children:g.jsx(N2,{className:"w-3.5 h-3.5"})})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{type:"button",onClick:()=>K(-.1),className:"p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors",title:x("canvasEditor.zoomOut"),children:g.jsx(nw,{className:"w-3.5 h-3.5"})}),g.jsxs("span",{className:"text-[11px] text-gray-600 font-medium w-10 text-center",children:[Math.round(v*100),"%"]}),g.jsx("button",{type:"button",onClick:()=>K(.1),className:"p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors",title:x("canvasEditor.zoomIn"),children:g.jsx(tw,{className:"w-3.5 h-3.5"})}),g.jsx("button",{type:"button",onClick:q,className:"p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors ml-1",title:x("canvasEditor.fitToView"),children:g.jsx(r_,{className:"w-3.5 h-3.5"})})]})]}),g.jsx("div",{ref:o,className:"flex-1 overflow-auto bg-gray-100/50",style:{backgroundImage:"radial-gradient(circle, #d1d5db 1px, transparent 1px)",backgroundSize:"20px 20px",WebkitOverflowScrolling:"touch"},onDragOver:pt,onDrop:A,children:g.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"100%",minHeight:"100%",padding:"1.5rem"},children:g.jsx("div",{className:"shadow-lg ring-1 ring-black/5 shrink-0",children:g.jsx("canvas",{ref:a})})})})]})}const F5=["Arial","Archivo","Barlow","Cabin","Crimson Text","DM Sans","Fira Sans","Inter","Josefin Sans","Karla","Lato","Libre Baskerville","Manrope","Merriweather","Montserrat","Mulish","Nunito","Open Sans","Oswald","Playfair Display","Poppins","PT Sans","Quicksand","Raleway","Roboto","Rubik","Source Sans Pro","Space Grotesk","Ubuntu","Work Sans"],nx=new Set;function Yd(u){if(u==="Arial"||nx.has(u))return;nx.add(u);const t=encodeURIComponent(u),n=document.createElement("link");n.rel="stylesheet",n.href=`https://fonts.googleapis.com/css2?family=${t}&display=swap`,document.head.appendChild(n)}function xf({value:u,onChange:t}){const[n,i]=tt.useState(!1),[a,o]=tt.useState(""),c=Be(x=>x.t),h=tt.useRef(null),d=tt.useRef(null),f=F5.filter(x=>x.toLowerCase().includes(a.toLowerCase()));tt.useEffect(()=>{n&&f.forEach(Yd)},[n,f]),tt.useEffect(()=>{Yd(u)},[u]),tt.useEffect(()=>{function x(v){h.current&&!h.current.contains(v.target)&&(i(!1),o(""))}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),tt.useEffect(()=>{n&&d.current&&d.current.focus()},[n]);const p=tt.useCallback(x=>{Yd(x),t(x),i(!1),o("")},[t]);return g.jsxs("div",{ref:h,className:"relative",children:[g.jsxs("button",{type:"button",onClick:()=>i(!n),className:"flex items-center justify-between w-full px-2 py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50 bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-400",children:[g.jsx("span",{className:"truncate",style:{fontFamily:u},children:u}),g.jsx(ar,{className:`w-3.5 h-3.5 text-gray-400 shrink-0 ml-1 transition-transform ${n?"rotate-180":""}`})]}),n&&g.jsxs("div",{className:"absolute z-20 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[g.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 border-b border-gray-100",children:[g.jsx(yx,{className:"w-3.5 h-3.5 text-gray-400 shrink-0"}),g.jsx("input",{ref:d,type:"text",value:a,onChange:x=>o(x.target.value),placeholder:c("fontPicker.searchFonts"),className:"w-full text-xs bg-transparent focus:outline-none placeholder-gray-400"})]}),g.jsx("ul",{className:"max-h-48 overflow-y-auto py-1",children:f.length===0?g.jsx("li",{className:"px-2 py-1.5 text-xs text-gray-400 text-center",children:c("fontPicker.noFonts")}):f.map(x=>g.jsx("li",{children:g.jsx("button",{type:"button",onClick:()=>p(x),className:`w-full text-left px-2 py-1.5 text-xs hover:bg-indigo-50 transition-colors ${x===u?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,style:{fontFamily:x},children:x})},x))})]})]})}const Y5=new Set(["show","hide","change_style"]),To="__self__";function X5(u){return u.checks&&u.checks.length>0?u.checks:u.columnName&&u.operator?[{columnName:u.columnName,operator:u.operator,value:u.value??"",valueSource:u.valueSource}]:[]}function P5(u,t){return u.columnName===To&&t?{...u,columnName:t}:u.valueSource==="column"&&u.value===To&&t?{...u,value:t}:u}function sx(u,t){const n=t[u.columnName],i=u.valueSource==="column"?t[u.value]??"":u.value??"";switch(u.operator){case"is_empty":return n==null||n.trim()==="";case"is_not_empty":return n!=null&&n.trim()!=="";case"equals":return n==null?!1:n.toLowerCase()===i.toLowerCase();case"not_equals":return n==null?!0:n.toLowerCase()!==i.toLowerCase();case"contains":return n==null?!1:n.toLowerCase().includes(i.toLowerCase());case"not_contains":return n==null?!0:!n.toLowerCase().includes(i.toLowerCase());default:return!1}}function I5(u,t,n){const i=X5(u).map(o=>P5(o,n));return i.length===0?!1:(u.logic||"and")==="or"?i.some(o=>sx(o,t)):i.every(o=>sx(o,t))}function G5(u,t,n){if(!u||u.length===0)return{visible:!0};for(const i of u)if(Y5.has(i.action)&&I5(i,t,n))return V5(i.action,i);return{visible:!0}}function V5(u,t){switch(u){case"hide":return{visible:!1};case"show":return{visible:!0};case"change_style":return{visible:!0,styleOverrides:t.styleOverrides}}}const q5={is_empty:"conditionEditor.isEmpty",is_not_empty:"conditionEditor.isNotEmpty",equals:"conditionEditor.equals",not_equals:"conditionEditor.notEquals",contains:"conditionEditor.contains",not_contains:"conditionEditor.notContains"},W5={show:"conditionEditor.showElement",hide:"conditionEditor.hideElement",change_style:"conditionEditor.changeStyle"},Z5=["is_empty","is_not_empty","equals","not_equals","contains","not_contains"],K5=["show","hide","change_style"];function ix(u){return u==="equals"||u==="not_equals"||u==="contains"||u==="not_contains"}function Q5(u){return u.checks&&u.checks.length>0?u.checks:u.columnName&&u.operator?[{columnName:u.columnName,operator:u.operator,value:u.value??"",valueSource:u.valueSource}]:[]}function J5(u,t){const n=Q5(u);return n.length===0?{checks:[{columnName:t[0]||"",operator:"is_empty",value:""}],logic:u.logic||"and",action:u.action,styleOverrides:u.styleOverrides}:{checks:n,logic:u.logic||"and",action:u.action,styleOverrides:u.styleOverrides}}function $5({check:u,index:t,columns:n,canDelete:i,showSelfColumn:a,onChange:o,onDelete:c}){const h=u.valueSource||"custom",d=Be(p=>p.t),f=p=>{o({...u,...p})};return g.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 p-2 space-y-1.5",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("span",{className:"text-[10px] text-gray-400 font-medium",children:[d("conditionEditor.check")," ",t+1]}),i&&g.jsx("button",{type:"button",title:d("conditionEditor.removeCheck"),onClick:c,className:"p-1 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center rounded text-gray-400 hover:text-red-500 transition-colors",children:g.jsx(Ac,{className:"w-3 h-3"})})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5",children:[g.jsxs("select",{value:u.columnName,onChange:p=>f({columnName:p.target.value}),className:"w-full px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 text-sm sm:text-xs border border-gray-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-indigo-400",children:[a&&g.jsx("option",{value:To,children:d("conditionEditor.selfColumn")}),n.map(p=>g.jsx("option",{value:p,children:p},p))]}),g.jsx("select",{value:u.operator,onChange:p=>{const x=p.target.value,v={operator:x};ix(x)||(v.value="",v.valueSource="custom"),f(v)},className:"w-full px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 text-sm sm:text-xs border border-gray-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-indigo-400",children:Z5.map(p=>g.jsx("option",{value:p,children:d(q5[p])},p))})]}),ix(u.operator)&&g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-gray-500",children:d("conditionEditor.compareTo")}),g.jsxs("div",{className:"flex rounded-md border border-gray-200 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>f({valueSource:"custom",value:""}),className:`px-2 py-0.5 text-[10px] font-medium transition-colors ${h==="custom"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-400 hover:bg-gray-50"}`,children:d("conditionEditor.value")}),g.jsx("button",{type:"button",onClick:()=>f({valueSource:"column",value:n[0]||""}),className:`px-2 py-0.5 text-[10px] font-medium transition-colors ${h==="column"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-400 hover:bg-gray-50"}`,children:d("common.column")})]})]}),h==="column"?g.jsxs("select",{value:u.value,onChange:p=>f({value:p.target.value}),className:"w-full px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 text-sm sm:text-xs border border-gray-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-indigo-400",children:[a&&g.jsx("option",{value:To,children:d("conditionEditor.selfColumn")}),n.map(p=>g.jsx("option",{value:p,children:p},p))]}):g.jsx("input",{type:"text",value:u.value,onChange:p=>f({value:p.target.value}),placeholder:d("conditionEditor.comparisonValue"),className:"w-full px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 text-sm sm:text-xs border border-gray-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-indigo-400"})]})]})}function ax({rule:u,index:t,columns:n,showSelfColumn:i,onChange:a,onDelete:o}){const c=J5(u,n),h=c.checks,d=c.logic||"and",f=Be(w=>w.t),p=w=>{a(t,{...c,...w})},x=(w,_)=>{const k=[...h];k[w]=_,p({checks:k})},v=w=>{p({checks:h.filter((_,k)=>k!==w)})},b=()=>{const w=i?To:n[0]||"";p({checks:[...h,{columnName:w,operator:"is_empty",value:""}]})};return g.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-2.5 space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-indigo-100 text-indigo-700 text-[10px] font-semibold",children:t+1}),g.jsx("button",{type:"button",title:f("conditionEditor.deleteCondition"),onClick:()=>o(t),className:"p-1.5 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center rounded-md text-gray-400 hover:text-red-600 hover:bg-red-50 transition-colors",children:g.jsx(Ac,{className:"w-3.5 h-3.5"})})]}),g.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-400",children:f("conditionEditor.if")}),h.map((w,_)=>g.jsxs("div",{children:[_>0&&g.jsx("div",{className:"flex items-center justify-center py-1",children:g.jsxs("div",{className:"flex rounded-md border border-gray-200 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>p({logic:"and"}),className:`px-3 py-0.5 text-[10px] font-semibold transition-colors ${d==="and"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-400 hover:bg-gray-50"}`,children:f("conditionEditor.and")}),g.jsx("button",{type:"button",onClick:()=>p({logic:"or"}),className:`px-3 py-0.5 text-[10px] font-semibold transition-colors ${d==="or"?"bg-amber-100 text-amber-700":"bg-white text-gray-400 hover:bg-gray-50"}`,children:f("conditionEditor.or")})]})}),g.jsx($5,{check:w,index:_,columns:n,canDelete:h.length>1,showSelfColumn:i,onChange:k=>x(_,k),onDelete:()=>v(_)})]},_)),g.jsxs("button",{type:"button",onClick:b,className:"flex items-center gap-1 px-2 py-1.5 min-h-[44px] sm:min-h-0 text-[11px] text-indigo-600 hover:bg-indigo-50 rounded transition-colors w-full justify-center border border-dashed border-indigo-200",children:[g.jsx(Zd,{className:"w-3 h-3"}),f("conditionEditor.addCheck")]}),g.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-400 pt-1 border-t border-gray-100",children:f("conditionEditor.then")}),g.jsx("select",{value:c.action,onChange:w=>p({action:w.target.value}),className:"w-full px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 text-sm sm:text-xs border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-400",children:K5.map(w=>g.jsx("option",{value:w,children:f(W5[w])},w))})]})}function rx({overrides:u,elementType:t,onChange:n}){const i=t==="text"||t==="placeholder-text",a=t==="image"||t==="placeholder-image",o=Be(q=>q.t),[c,h]=tt.useState(!1),[d,f]=tt.useState(u.fill||"#000000"),p=tt.useRef(null),x=tt.useRef(null),[v,b]=tt.useState(!1),[w,_]=tt.useState(u.textBgColor||"#000000"),k=tt.useRef(null),C=tt.useRef(null),O=tt.useRef(u.fill);u.fill!==O.current&&(O.current=u.fill,f(u.fill||"#000000"));const M=tt.useRef(u.textBgColor);u.textBgColor!==M.current&&(M.current=u.textBgColor,_(u.textBgColor||"#000000")),tt.useEffect(()=>{if(!c)return;const q=Y=>{p.current&&!p.current.contains(Y.target)&&h(!1)},K=setTimeout(()=>{document.addEventListener("mousedown",q),document.addEventListener("touchstart",q)},10);return()=>{clearTimeout(K),document.removeEventListener("mousedown",q),document.removeEventListener("touchstart",q)}},[c]),tt.useEffect(()=>{if(!v)return;const q=Y=>{k.current&&!k.current.contains(Y.target)&&b(!1)},K=setTimeout(()=>{document.addEventListener("mousedown",q),document.addEventListener("touchstart",q)},10);return()=>{clearTimeout(K),document.removeEventListener("mousedown",q),document.removeEventListener("touchstart",q)}},[v]);const X=q=>{n({...u,...q})},I=q=>{const K={...u};delete K[q],n(K)},[$,V]=tt.useState(String(u.fontSize??"")),B=tt.useRef(u.fontSize);u.fontSize!==B.current&&(B.current=u.fontSize,V(String(u.fontSize??"")));const z=()=>{const q=Number($);if($===""||isNaN(q)){V(String(u.fontSize??""));return}X({fontSize:q})},[Q,ct]=tt.useState(String(u.borderRadius??"")),L=tt.useRef(u.borderRadius);u.borderRadius!==L.current&&(L.current=u.borderRadius,ct(String(u.borderRadius??"")));const P=()=>{const q=Number(Q);if(Q===""||isNaN(q)){ct(String(u.borderRadius??""));return}X({borderRadius:q})},E=q=>`p-1.5 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center rounded-md border transition-colors ${q?"bg-indigo-100 border-indigo-300 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`;return g.jsxs("div",{className:"space-y-2 pl-2 border-l-2 border-indigo-200",children:[g.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-gray-400",children:o("styleOverrides.title")}),g.jsxs("div",{children:[g.jsx("span",{className:"text-xs text-gray-500",children:o("styleOverrides.fillColor")}),g.jsxs("div",{className:"relative mt-0.5",ref:p,children:[g.jsxs("button",{type:"button",onClick:()=>h(!c),className:"flex items-center gap-2 w-full px-2 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50",children:[g.jsx("span",{className:"w-5 h-5 sm:w-4 sm:h-4 rounded border border-gray-300",style:{backgroundColor:u.fill||"#000000"}}),g.jsx("span",{className:"text-gray-600",children:u.fill||o("properties.notSet")})]}),c&&g.jsxs("div",{className:"absolute z-10 mt-1 p-3 sm:p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:[g.jsx(Ni,{color:d,onChange:q=>{f(q),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>X({fill:q}),60)},style:{width:"100%",height:180}}),g.jsx("input",{type:"text",value:d,onChange:q=>{f(q.target.value),X({fill:q.target.value})},className:"w-full mt-2 px-2 py-1.5 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400"})]})]})]}),i&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-xs text-gray-500",children:o("styleOverrides.fontFamily")}),g.jsxs("div",{className:"mt-0.5",children:[g.jsx(xf,{value:u.fontFamily||"",onChange:q=>X({fontFamily:q})}),u.fontFamily&&g.jsx("button",{type:"button",onClick:()=>I("fontFamily"),className:"text-[10px] text-gray-400 hover:text-red-500 mt-0.5",children:o("styleOverrides.reset")})]})]}),g.jsxs("label",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs text-gray-500 w-12 shrink-0",children:o("properties.size")}),g.jsx("input",{type:"number",value:$,onChange:q=>V(q.target.value),onBlur:z,onKeyDown:q=>{q.key==="Enter"&&(z(),q.target.blur())},min:1,max:500,placeholder:"px",className:"w-full px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 text-sm sm:text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400 bg-gray-50"})]}),g.jsxs("div",{className:"flex gap-1.5",children:[g.jsx("button",{type:"button",title:"Bold",onClick:()=>X({fontWeight:u.fontWeight==="bold"?"normal":"bold"}),className:E(u.fontWeight==="bold"),children:g.jsx(Vd,{className:"w-3.5 h-3.5"})}),g.jsx("button",{type:"button",title:"Italic",onClick:()=>X({fontStyle:u.fontStyle==="italic"?"normal":"italic"}),className:E(u.fontStyle==="italic"),children:g.jsx(Wd,{className:"w-3.5 h-3.5"})}),g.jsx("button",{type:"button",title:"Underline",onClick:()=>X({underline:!u.underline}),className:E(u.underline===!0),children:g.jsx(Kd,{className:"w-3.5 h-3.5"})})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-xs text-gray-500",children:o("properties.alignment")}),g.jsxs("div",{className:"flex gap-1.5 mt-0.5",children:[g.jsx("button",{type:"button",title:"Left",onClick:()=>X({textAlign:"left"}),className:E(u.textAlign==="left"),children:g.jsx(Id,{className:"w-3.5 h-3.5"})}),g.jsx("button",{type:"button",title:"Center",onClick:()=>X({textAlign:"center"}),className:E(u.textAlign==="center"),children:g.jsx(Pd,{className:"w-3.5 h-3.5"})}),g.jsx("button",{type:"button",title:"Right",onClick:()=>X({textAlign:"right"}),className:E(u.textAlign==="right"),children:g.jsx(Gd,{className:"w-3.5 h-3.5"})})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-xs text-gray-500",children:o("properties.textBackground")}),g.jsxs("div",{className:"relative mt-0.5",ref:k,children:[g.jsxs("button",{type:"button",onClick:()=>b(!v),className:"flex items-center gap-2 w-full px-2 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50",children:[g.jsx("span",{className:"w-5 h-5 sm:w-4 sm:h-4 rounded border border-gray-300",style:{backgroundColor:u.textBgColor||"#000000"}}),g.jsx("span",{className:"text-gray-600",children:u.textBgColor||o("properties.notSet")})]}),v&&g.jsxs("div",{className:"absolute z-10 mt-1 p-3 sm:p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:[g.jsx(Ni,{color:w,onChange:q=>{_(q),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>X({textBgColor:q}),60)},style:{width:"100%",height:180}}),g.jsx("input",{type:"text",value:w,onChange:q=>{_(q.target.value),X({textBgColor:q.target.value})},className:"w-full mt-2 px-2 py-1.5 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400"})]})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs text-gray-500 w-12 shrink-0",children:o("styleOverrides.bgOpacity")}),g.jsx("input",{type:"range",min:0,max:1,step:.05,value:u.textBgOpacity??0,onChange:q=>X({textBgOpacity:Number(q.target.value)}),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),g.jsxs("span",{className:"text-[10px] text-gray-500 font-mono w-8 text-right",children:[Math.round((u.textBgOpacity??0)*100),"%"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs text-gray-500 w-12 shrink-0",children:o("styleOverrides.bgRadius")}),g.jsx("input",{type:"range",min:0,max:30,step:1,value:u.textBgRadius??0,onChange:q=>X({textBgRadius:Number(q.target.value)}),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),g.jsxs("span",{className:"text-[10px] text-gray-500 font-mono w-8 text-right",children:[u.textBgRadius??0,"px"]})]})]}),a&&g.jsxs("label",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs text-gray-500 w-12 shrink-0",children:o("properties.radius")}),g.jsx("input",{type:"number",value:Q,onChange:q=>ct(q.target.value),onBlur:P,onKeyDown:q=>{q.key==="Enter"&&(P(),q.target.blur())},min:0,placeholder:"px",className:"w-full px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 text-sm sm:text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400 bg-gray-50"})]})]})}function Oi({label:u,value:t,onChange:n,min:i,max:a,step:o=1}){const[c,h]=tt.useState(String(Math.round(t*100)/100)),d=tt.useRef(t);Math.round(t*100)/100!==Math.round(d.current*100)/100&&(d.current=t,h(String(Math.round(t*100)/100)));const f=()=>{const p=Number(c);if(c===""||isNaN(p)){h(String(Math.round(t*100)/100));return}n(p)};return g.jsxs("label",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs text-gray-500 w-8 shrink-0",children:u}),g.jsx("input",{type:"number",value:c,onChange:p=>h(p.target.value),onBlur:f,onKeyDown:p=>{p.key==="Enter"&&(f(),p.target.blur())},min:i,max:a,step:o,className:"w-full px-2 py-2 sm:py-1 min-h-[44px] sm:min-h-0 text-sm sm:text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400 bg-gray-50"})]})}function Bn({icon:u,label:t}){return g.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[g.jsx(u,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:t})]})}function Kn({active:u,onClick:t,children:n,title:i}){return g.jsx("button",{type:"button",title:i,onClick:t,className:`p-1.5 sm:p-1.5 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center rounded-md border transition-colors ${u?"bg-indigo-100 border-indigo-300 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:n})}function ox({selectedElement:u,selectedElements:t,onUpdateElement:n,onDeleteElement:i,onBringToFront:a,onSendToBack:o,onCropImage:c,columns:h,onUpdateConditions:d,onDuplicateWithOpposite:f}){var bt,Ct;const p=Be(ot=>ot.t),[x,v]=tt.useState(!1),b=tt.useRef(null),[w,_]=tt.useState(!1),[k,C]=tt.useState(!1),O=tt.useRef(null),[M,X]=tt.useState((u==null?void 0:u.properties.textBgColor)||"#000000"),I=tt.useRef(null),$=tt.useRef(u==null?void 0:u.properties.textBgColor);(u==null?void 0:u.properties.textBgColor)!==$.current&&($.current=u==null?void 0:u.properties.textBgColor,X((u==null?void 0:u.properties.textBgColor)||"#000000"));const V=t&&t.length>1?t:null,B=(()=>{if(V){const ot=V.map(St=>St.properties.fill);return ot.every(St=>St===ot[0])?ot[0]:void 0}return u==null?void 0:u.properties.fill})(),[z,Q]=tt.useState(B||"#000000"),ct=tt.useRef(null),L=tt.useRef(B);B!==L.current&&(L.current=B,Q(B||"#000000"));const P=tt.useCallback(ot=>{u&&n(u.id,{fill:ot})},[u,n]),E=tt.useCallback(ot=>{Q(ot),ct.current&&clearTimeout(ct.current),ct.current=setTimeout(()=>P(ot),60)},[P]);tt.useEffect(()=>{if(!x)return;const ot=At=>{b.current&&!b.current.contains(At.target)&&v(!1)},St=setTimeout(()=>{document.addEventListener("mousedown",ot),document.addEventListener("touchstart",ot)},10);return()=>{clearTimeout(St),document.removeEventListener("mousedown",ot),document.removeEventListener("touchstart",ot)}},[x]);const[q,K]=tt.useState(!1),Y=tt.useRef(null),[rt,et]=tt.useState("#000000"),pt=tt.useRef(null);if(tt.useEffect(()=>{if(!k)return;const ot=At=>{O.current&&!O.current.contains(At.target)&&C(!1)},St=setTimeout(()=>{document.addEventListener("mousedown",ot),document.addEventListener("touchstart",ot)},10);return()=>{clearTimeout(St),document.removeEventListener("mousedown",ot),document.removeEventListener("touchstart",ot)}},[k]),tt.useEffect(()=>{if(!q)return;const ot=At=>{Y.current&&!Y.current.contains(At.target)&&K(!1)},St=setTimeout(()=>{document.addEventListener("mousedown",ot),document.addEventListener("touchstart",ot)},10);return()=>{clearTimeout(St),document.removeEventListener("mousedown",ot),document.removeEventListener("touchstart",ot)}},[q]),!u&&(!t||t.length===0))return g.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:g.jsx("p",{className:"text-xs text-gray-400 text-center",children:p("properties.selectElement")})});if(V){const ot=V.every(Ot=>Ot.type==="text"||Ot.type==="placeholder-text"),At=V.some(Ot=>Ot.type==="text"||Ot.type==="placeholder-text")||V.some(Ot=>(Ot.type==="image"||Ot.type==="placeholder-image")&&Ot.properties.fill!==void 0),dt=Ot=>{const se=V.map(ae=>ae.properties[Ot]);return se.every(ae=>ae===se[0])?se[0]:void 0},S=Ot=>{for(const se of V)n(se.id,Ot)},F=()=>{for(const Ot of V)i(Ot.id)},H=V.every(Ot=>Ot.type==="image"||Ot.type==="placeholder-image"),N=dt("fill"),D=dt("fontFamily"),G=dt("fontSize"),ut=dt("fontWeight"),yt=dt("fontStyle"),st=dt("underline"),Et=dt("textAlign"),Tt=dt("angle"),Nt=dt("textBgColor"),Dt=dt("textBgOpacity"),Yt=dt("textBgRadius"),Bt=dt("borderRadius");return g.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-4 text-sm",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsxs("span",{className:"text-[10px] font-medium uppercase tracking-wider text-indigo-500",children:[V.length," ",p("properties.elementsSelected")]})}),g.jsxs("section",{children:[g.jsx(Bn,{icon:J0,label:p("properties.rotation")}),g.jsx(Oi,{label:"",value:Tt??0,min:0,max:360,onChange:Ot=>S({angle:Ot})}),Tt===void 0&&g.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:p("properties.mixedAngles")})]}),ot&&g.jsxs(g.Fragment,{children:[g.jsxs("section",{children:[g.jsx(Bn,{icon:sa,label:p("properties.font")}),g.jsx(xf,{value:D||"Arial",onChange:Ot=>S({fontFamily:Ot})}),!D&&g.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:p("properties.mixedFonts")})]}),g.jsxs("section",{children:[g.jsx("div",{className:"flex items-center gap-1.5 mb-2",children:g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.size")})}),g.jsx(Oi,{label:"px",value:G||16,min:1,max:500,onChange:Ot=>S({fontSize:Ot})}),!G&&g.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:p("properties.mixedSizes")})]}),g.jsxs("section",{children:[g.jsx("div",{className:"flex items-center gap-1.5 mb-2",children:g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.style")})}),g.jsxs("div",{className:"flex gap-1.5",children:[g.jsx(ys,{text:p("properties.toggleBold"),children:g.jsx(Kn,{active:ut==="bold",onClick:()=>S({fontWeight:ut==="bold"?"normal":"bold"}),title:p("properties.toggleBold"),children:g.jsx(Vd,{className:"w-3.5 h-3.5"})})}),g.jsx(ys,{text:p("properties.toggleItalic"),children:g.jsx(Kn,{active:yt==="italic",onClick:()=>S({fontStyle:yt==="italic"?"normal":"italic"}),title:p("properties.toggleItalic"),children:g.jsx(Wd,{className:"w-3.5 h-3.5"})})}),g.jsx(ys,{text:p("properties.toggleUnderline"),children:g.jsx(Kn,{active:st===!0,onClick:()=>S({underline:!st}),title:p("properties.toggleUnderline"),children:g.jsx(Kd,{className:"w-3.5 h-3.5"})})})]})]}),g.jsxs("section",{children:[g.jsx("div",{className:"flex items-center gap-1.5 mb-2",children:g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.alignment")})}),g.jsxs("div",{className:"flex gap-1.5",children:[g.jsx(Kn,{active:Et==="left",onClick:()=>S({textAlign:"left"}),title:"Align Left",children:g.jsx(Id,{className:"w-3.5 h-3.5"})}),g.jsx(Kn,{active:Et==="center",onClick:()=>S({textAlign:"center"}),title:"Align Center",children:g.jsx(Pd,{className:"w-3.5 h-3.5"})}),g.jsx(Kn,{active:Et==="right",onClick:()=>S({textAlign:"right"}),title:"Align Right",children:g.jsx(Gd,{className:"w-3.5 h-3.5"})})]})]}),g.jsxs("section",{children:[g.jsx(Bn,{icon:$i,label:p("properties.textBackground")}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"relative",ref:Y,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",checked:Dt!==void 0?(Dt??0)>0:V.some(Ot=>(Ot.properties.textBgOpacity??0)>0),onChange:Ot=>{Ot.target.checked?S({textBgColor:rt||"#000000",textBgOpacity:.5,textBgRadius:Yt??0}):S({textBgOpacity:0})},className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),g.jsxs("button",{type:"button",onClick:()=>K(!q),className:"flex items-center gap-2 flex-1 px-2 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50",children:[g.jsx("span",{className:"w-5 h-5 sm:w-4 sm:h-4 rounded border border-gray-300",style:{backgroundColor:Nt||rt}}),g.jsx("span",{className:"text-gray-600",children:Nt||p("properties.mixed")})]})]}),q&&g.jsxs("div",{className:"absolute z-10 mt-1 p-3 sm:p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:[g.jsx(Ni,{color:rt,onChange:Ot=>{et(Ot),pt.current&&clearTimeout(pt.current),pt.current=setTimeout(()=>S({textBgColor:Ot}),60)},style:{width:"100%",height:180}}),g.jsx("input",{type:"text",value:rt,onChange:Ot=>{et(Ot.target.value),S({textBgColor:Ot.target.value})},className:"w-full mt-2 px-2 py-1.5 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400"})]})]}),!Nt&&g.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:p("properties.mixedBgColors")}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-gray-500 w-14",children:p("properties.opacity")}),g.jsx("input",{type:"range",min:0,max:1,step:.05,value:Dt??0,onChange:Ot=>S({textBgOpacity:Number(Ot.target.value),textBgColor:Nt||rt}),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),g.jsxs("span",{className:"text-[10px] text-gray-500 font-mono w-8 text-right",children:[Math.round((Dt??0)*100),"%"]})]}),Dt===void 0&&g.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:p("properties.mixedOpacities")}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-gray-500 w-14",children:p("properties.radius")}),g.jsx("input",{type:"range",min:0,max:30,step:1,value:Yt??0,onChange:Ot=>S({textBgRadius:Number(Ot.target.value)}),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),g.jsxs("span",{className:"text-[10px] text-gray-500 font-mono w-8 text-right",children:[Yt??0,"px"]})]}),Yt===void 0&&g.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:p("properties.mixedRadii")})]})]})]}),H&&g.jsxs("section",{children:[g.jsx(Bn,{icon:K0,label:p("properties.borderRadius")}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"range",min:0,max:200,step:1,value:Bt??0,onChange:Ot=>S({borderRadius:Number(Ot.target.value)}),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),g.jsxs("span",{className:"text-[10px] text-gray-500 font-mono w-8 text-right",children:[Bt??0,"px"]})]}),Bt===void 0&&g.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:p("properties.mixedRadii")}),g.jsxs("div",{className:"flex gap-1.5 mt-1.5",children:[g.jsx("button",{type:"button",onClick:()=>S({borderRadius:0}),className:`flex-1 py-2 min-h-[44px] sm:min-h-0 sm:py-1 text-[11px] sm:text-[10px] font-medium rounded border transition-colors ${Bt===0?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:p("properties.sharp")}),g.jsx("button",{type:"button",onClick:()=>S({borderRadius:12}),className:`flex-1 py-2 min-h-[44px] sm:min-h-0 sm:py-1 text-[11px] sm:text-[10px] font-medium rounded border transition-colors ${Bt===12?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:p("properties.rounded")})]})]}),At&&g.jsxs("section",{children:[g.jsx(Bn,{icon:$i,label:p("properties.color")}),g.jsxs("div",{className:"relative",ref:b,children:[g.jsxs("button",{type:"button",onClick:()=>v(!x),className:"flex items-center gap-2 w-full px-2 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50",children:[g.jsx("span",{className:"w-5 h-5 sm:w-4 sm:h-4 rounded border border-gray-300",style:{backgroundColor:N||"#000000"}}),g.jsx("span",{className:"text-gray-600",children:N||p("properties.mixed")})]}),x&&g.jsxs("div",{className:"absolute z-10 mt-1 p-3 sm:p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:[g.jsx(Ni,{color:z,onChange:Ot=>{Q(Ot),ct.current&&clearTimeout(ct.current),ct.current=setTimeout(()=>S({fill:Ot}),60)},style:{width:"100%",height:180}}),g.jsx("input",{type:"text",value:z,onChange:Ot=>{Q(Ot.target.value),S({fill:Ot.target.value})},className:"w-full mt-2 px-2 py-1.5 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400"})]})]}),!N&&g.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:p("properties.mixedColors")})]}),h&&d&&g.jsxs("section",{className:"border-t border-gray-100 pt-2",children:[g.jsxs("button",{type:"button",onClick:()=>_(!w),className:"flex items-center gap-1.5 w-full py-1 text-left",children:[w?g.jsx(ar,{className:"w-3.5 h-3.5 text-gray-400"}):g.jsx(Oc,{className:"w-3.5 h-3.5 text-gray-400"}),g.jsx(ty,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.conditions")})]}),w&&(()=>{const Ot=V.map(Qt=>Qt.conditions??[]),se=[];if(Ot[0])for(const Qt of Ot[0]){const Wt=JSON.stringify(Qt);Ot.every(Oe=>Oe.some(un=>JSON.stringify(un)===Wt))&&se.push(Qt)}const ae=V.some(Qt=>(Qt.conditions??[]).length>se.length),Te=(Qt,Wt)=>{const Oe=JSON.stringify(se[Qt]);for(const un of V){const an=[...un.conditions??[]],gn=an.findIndex(Mt=>JSON.stringify(Mt)===Oe);gn>=0&&(an[gn]=Wt,d(un.id,an))}},Kt=Qt=>{const Wt=JSON.stringify(se[Qt]);for(const Oe of V){const un=(Oe.conditions??[]).filter(an=>JSON.stringify(an)!==Wt);d(Oe.id,un)}},xe=Qt=>{for(const Wt of V)d(Wt.id,[...Wt.conditions??[],Qt])};return g.jsxs("div",{className:"mt-2 space-y-2",children:[se.length>0&&g.jsxs("p",{className:"text-[10px] text-gray-500 font-medium",children:[p("properties.conditions")," (",se.length,")"]}),se.map((Qt,Wt)=>g.jsxs("div",{children:[g.jsx(ax,{rule:Qt,index:Wt,columns:h,elementType:V[0].type,showSelfColumn:!0,onChange:(Oe,un)=>Te(Oe,un),onDelete:Oe=>Kt(Oe)}),Qt.action==="change_style"&&g.jsx("div",{className:"mt-1",children:g.jsx(rx,{overrides:Qt.styleOverrides??{},elementType:V[0].type,onChange:Oe=>{Te(Wt,{...Qt,styleOverrides:Oe})}})})]},`shared-${Wt}`)),ae&&g.jsx("p",{className:"text-[10px] text-gray-400 italic",children:p("properties.someIndividual")}),g.jsxs("button",{type:"button",onClick:()=>{xe({checks:[{columnName:"__self__",operator:"is_empty",value:""}],logic:"and",action:"hide"})},className:"flex items-center justify-center gap-1.5 w-full px-3 py-2.5 min-h-[44px] sm:min-h-0 sm:py-2 text-xs font-medium text-indigo-700 bg-indigo-50 border border-indigo-200 rounded-md hover:bg-indigo-100 transition-colors",children:[g.jsx(Zd,{className:"w-3.5 h-3.5"}),p("properties.addConditionToAll")]}),se.some(Qt=>Qt.action==="hide")&&f&&g.jsxs("button",{type:"button",onClick:()=>{for(const Qt of V)f(Qt.id)},className:"flex items-center justify-center gap-1.5 w-full px-3 py-2.5 min-h-[44px] sm:min-h-0 sm:py-2 text-xs font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-md hover:bg-gray-100 transition-colors",children:[g.jsx(Ec,{className:"w-3.5 h-3.5"}),p("properties.duplicateAllOpposite")]}),g.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:p("properties.selfColumnHint",{column:"{column}"})})]})})()]}),g.jsx("section",{className:"pt-2 border-t border-gray-100",children:g.jsxs("button",{type:"button",onClick:F,className:"flex items-center justify-center gap-1.5 w-full px-3 py-2.5 min-h-[44px] sm:min-h-0 sm:py-2 text-xs font-medium text-red-600 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 transition-colors",children:[g.jsx(Ac,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5"}),p("properties.deleteElements",{count:String(V.length)})]})})]})}if(!u)return g.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:g.jsx("p",{className:"text-xs text-gray-400 text-center",children:p("properties.selectElement")})});const{id:A,type:j,properties:R}=u,Z=j==="text"||j==="placeholder-text",W=j==="image"||j==="placeholder-image",_t=W&&R.fill!==void 0,xt=ot=>{n(A,ot)};return g.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-4 text-sm",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-gray-400",children:j.replace("-"," ")})}),g.jsxs("section",{children:[g.jsx(Bn,{icon:g_,label:p("properties.position")}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsx(Oi,{label:"X",value:R.left,onChange:ot=>xt({left:ot})}),g.jsx(Oi,{label:"Y",value:R.top,onChange:ot=>xt({top:ot})})]})]}),g.jsxs("section",{children:[g.jsx(Bn,{icon:px,label:p("properties.size")}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsx(Oi,{label:"W",value:R.width*(R.scaleX||1),min:1,onChange:ot=>xt({width:ot,scaleX:1})}),g.jsx(Oi,{label:"H",value:R.height*(R.scaleY||1),min:1,onChange:ot=>xt({height:ot,scaleY:1})})]})]}),g.jsxs("section",{children:[g.jsx(Bn,{icon:J0,label:p("properties.rotation")}),g.jsx(Oi,{label:"",value:R.angle,min:0,max:360,onChange:ot=>xt({angle:ot})})]}),W&&g.jsxs("section",{children:[g.jsx(Bn,{icon:K0,label:p("properties.borderRadius")}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"range",min:0,max:Math.round(Math.min(R.width*(R.scaleX||1),R.height*(R.scaleY||1))/2),step:1,value:R.borderRadius??0,onChange:ot=>xt({borderRadius:Number(ot.target.value)}),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),g.jsxs("span",{className:"text-[10px] text-gray-500 font-mono w-8 text-right",children:[R.borderRadius??0,"px"]})]}),g.jsxs("div",{className:"flex gap-1.5 mt-1.5",children:[g.jsx("button",{type:"button",onClick:()=>xt({borderRadius:0}),className:`flex-1 py-2 min-h-[44px] sm:min-h-0 sm:py-1 text-[11px] sm:text-[10px] font-medium rounded border transition-colors ${(R.borderRadius??0)===0?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:p("properties.sharp")}),g.jsx("button",{type:"button",onClick:()=>xt({borderRadius:12}),className:`flex-1 py-2 min-h-[44px] sm:min-h-0 sm:py-1 text-[11px] sm:text-[10px] font-medium rounded border transition-colors ${R.borderRadius===12?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:p("properties.rounded")}),g.jsx("button",{type:"button",onClick:()=>{const ot=Math.round(Math.min(R.width*(R.scaleX||1),R.height*(R.scaleY||1))/2);xt({borderRadius:ot})},className:`flex-1 py-2 min-h-[44px] sm:min-h-0 sm:py-1 text-[11px] sm:text-[10px] font-medium rounded border transition-colors ${R.borderRadius===Math.round(Math.min(R.width*(R.scaleX||1),R.height*(R.scaleY||1))/2)?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:p("properties.circle")})]})]}),j==="image"&&g.jsxs("section",{children:[g.jsx(Bn,{icon:qd,label:p("properties.crop")}),g.jsxs("button",{type:"button",onClick:()=>c==null?void 0:c(A),className:"flex items-center justify-center gap-1.5 w-full px-3 py-2.5 min-h-[44px] sm:min-h-0 sm:py-2 text-xs font-medium text-indigo-700 bg-indigo-50 border border-indigo-200 rounded-md hover:bg-indigo-100 transition-colors",children:[g.jsx(qd,{className:"w-3.5 h-3.5"}),(R.cropX??0)>0||(R.cropY??0)>0||(R.cropWidth??1)<1||(R.cropHeight??1)<1?p("properties.adjustCrop"):p("properties.cropImage")]}),((R.cropX??0)>0||(R.cropY??0)>0||(R.cropWidth??1)<1||(R.cropHeight??1)<1)&&g.jsx("button",{type:"button",onClick:()=>xt({cropX:0,cropY:0,cropWidth:1,cropHeight:1}),className:"mt-1.5 w-full py-1 text-[10px] font-medium text-gray-500 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:p("properties.resetCrop")})]}),Z&&g.jsxs(g.Fragment,{children:[g.jsxs("section",{children:[g.jsx(Bn,{icon:sa,label:p("properties.font")}),g.jsx(xf,{value:R.fontFamily||"Arial",onChange:ot=>xt({fontFamily:ot})})]}),g.jsxs("section",{children:[g.jsx("div",{className:"flex items-center gap-1.5 mb-2",children:g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.size")})}),g.jsx(Oi,{label:"px",value:R.fontSize||16,min:1,max:500,onChange:ot=>xt({fontSize:ot})})]}),g.jsxs("section",{children:[g.jsx("div",{className:"flex items-center gap-1.5 mb-2",children:g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.style")})}),g.jsxs("div",{className:"flex gap-1.5",children:[g.jsx(ys,{text:p("properties.toggleBold"),children:g.jsx(Kn,{active:R.fontWeight==="bold",onClick:()=>xt({fontWeight:R.fontWeight==="bold"?"normal":"bold"}),title:p("properties.toggleBold"),children:g.jsx(Vd,{className:"w-3.5 h-3.5"})})}),g.jsx(ys,{text:p("properties.toggleItalic"),children:g.jsx(Kn,{active:R.fontStyle==="italic",onClick:()=>xt({fontStyle:R.fontStyle==="italic"?"normal":"italic"}),title:p("properties.toggleItalic"),children:g.jsx(Wd,{className:"w-3.5 h-3.5"})})}),g.jsx(ys,{text:p("properties.toggleUnderline"),children:g.jsx(Kn,{active:R.underline===!0,onClick:()=>xt({underline:!R.underline}),title:p("properties.toggleUnderline"),children:g.jsx(Kd,{className:"w-3.5 h-3.5"})})})]})]}),g.jsxs("section",{children:[g.jsx("div",{className:"flex items-center gap-1.5 mb-2",children:g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.alignment")})}),g.jsxs("div",{className:"flex gap-1.5",children:[g.jsx(Kn,{active:R.textAlign==="left",onClick:()=>xt({textAlign:"left"}),title:"Align Left",children:g.jsx(Id,{className:"w-3.5 h-3.5"})}),g.jsx(Kn,{active:R.textAlign==="center",onClick:()=>xt({textAlign:"center"}),title:"Align Center",children:g.jsx(Pd,{className:"w-3.5 h-3.5"})}),g.jsx(Kn,{active:R.textAlign==="right",onClick:()=>xt({textAlign:"right"}),title:"Align Right",children:g.jsx(Gd,{className:"w-3.5 h-3.5"})})]})]})]}),Z&&g.jsxs("section",{children:[g.jsx(Bn,{icon:$i,label:p("properties.textBackground")}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"relative",ref:O,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",checked:!!R.textBgColor&&(R.textBgOpacity??0)>0,onChange:ot=>{ot.target.checked?xt({textBgColor:M||"#000000",textBgOpacity:R.textBgOpacity||.5,textBgRadius:R.textBgRadius??0}):xt({textBgOpacity:0})},className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),g.jsxs("button",{type:"button",onClick:()=>C(!k),className:"flex items-center gap-2 flex-1 px-2 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50",children:[g.jsx("span",{className:"w-5 h-5 sm:w-4 sm:h-4 rounded border border-gray-300",style:{backgroundColor:R.textBgColor||M}}),g.jsx("span",{className:"text-gray-600",children:R.textBgColor||M})]})]}),k&&g.jsxs("div",{className:"absolute z-10 mt-1 p-3 sm:p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:[g.jsx(Ni,{color:M,onChange:ot=>{X(ot),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>xt({textBgColor:ot}),60)},style:{width:"100%",height:180}}),g.jsx("input",{type:"text",value:M,onChange:ot=>{X(ot.target.value),xt({textBgColor:ot.target.value})},className:"w-full mt-2 px-2 py-1.5 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400"})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-gray-500 w-14",children:p("properties.opacity")}),g.jsx("input",{type:"range",min:0,max:1,step:.05,value:R.textBgOpacity??0,onChange:ot=>xt({textBgOpacity:Number(ot.target.value),textBgColor:R.textBgColor||M}),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),g.jsxs("span",{className:"text-[10px] text-gray-500 font-mono w-8 text-right",children:[Math.round((R.textBgOpacity??0)*100),"%"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-gray-500 w-14",children:p("properties.radius")}),g.jsx("input",{type:"range",min:0,max:30,step:1,value:R.textBgRadius??0,onChange:ot=>xt({textBgRadius:Number(ot.target.value)}),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),g.jsxs("span",{className:"text-[10px] text-gray-500 font-mono w-8 text-right",children:[R.textBgRadius??0,"px"]})]})]})]}),(Z||_t)&&g.jsxs("section",{children:[g.jsx(Bn,{icon:$i,label:p("properties.color")}),g.jsxs("div",{className:"relative",ref:b,children:[g.jsxs("button",{type:"button",onClick:()=>v(!x),className:"flex items-center gap-2 w-full px-2 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50",children:[g.jsx("span",{className:"w-5 h-5 sm:w-4 sm:h-4 rounded border border-gray-300",style:{backgroundColor:z}}),g.jsx("span",{className:"text-gray-600",children:z})]}),x&&g.jsxs("div",{className:"absolute z-10 mt-1 p-3 sm:p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:[g.jsx(Ni,{color:z,onChange:E,style:{width:"100%",height:180}}),g.jsx("input",{type:"text",value:z,onChange:ot=>{Q(ot.target.value),P(ot.target.value)},className:"w-full mt-2 px-2 py-1.5 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-400"})]})]})]}),g.jsxs("section",{children:[g.jsx("div",{className:"flex items-center gap-1.5 mb-2",children:g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.layer")})}),g.jsxs("div",{className:"flex gap-1.5",children:[g.jsx(ys,{text:p("properties.moveToTop"),children:g.jsxs("button",{type:"button",onClick:()=>a(A),title:p("properties.bringToFront"),className:"flex items-center justify-center gap-1 px-3 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50 text-gray-600",children:[g.jsx(f2,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5"}),p("properties.front")]})}),g.jsx(ys,{text:p("properties.moveToBottom"),children:g.jsxs("button",{type:"button",onClick:()=>o(A),title:p("properties.sendToBack"),className:"flex items-center justify-center gap-1 px-3 py-2 min-h-[44px] sm:min-h-0 sm:py-1.5 text-xs border border-gray-200 rounded-md hover:bg-gray-50 text-gray-600",children:[g.jsx(c2,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5"}),p("properties.back")]})})]})]}),h&&d&&g.jsxs("section",{className:"border-t border-gray-100 pt-2",children:[g.jsxs("button",{type:"button",onClick:()=>_(!w),className:"flex items-center gap-1.5 w-full py-1 text-left",children:[w?g.jsx(ar,{className:"w-3.5 h-3.5 text-gray-400"}):g.jsx(Oc,{className:"w-3.5 h-3.5 text-gray-400"}),g.jsx(ty,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("span",{className:"text-xs font-semibold text-gray-700",children:p("properties.conditions")}),(((bt=u.conditions)==null?void 0:bt.length)??0)>0&&g.jsx("span",{className:"ml-1 inline-flex items-center justify-center px-1.5 py-0.5 rounded-full bg-indigo-100 text-indigo-700 text-[10px] font-semibold",children:u.conditions.length})]}),w&&g.jsxs("div",{className:"mt-2 space-y-2",children:[(u.conditions??[]).map((ot,St)=>g.jsxs("div",{children:[g.jsx(ax,{rule:ot,index:St,columns:h,elementType:j,onChange:(At,dt)=>{const S=[...u.conditions??[]];S[At]=dt,d(A,S)},onDelete:At=>{const dt=(u.conditions??[]).filter((S,F)=>F!==At);d(A,dt)}}),ot.action==="change_style"&&g.jsx("div",{className:"mt-1",children:g.jsx(rx,{overrides:ot.styleOverrides??{},elementType:j,onChange:At=>{const dt=[...u.conditions??[]];dt[St]={...ot,styleOverrides:At},d(A,dt)}})})]},St)),g.jsxs("button",{type:"button",onClick:()=>{const ot={checks:[{columnName:h[0]||"",operator:"is_empty",value:""}],logic:"and",action:"hide"};d(A,[...u.conditions??[],ot])},className:"flex items-center justify-center gap-1.5 w-full px-3 py-2.5 min-h-[44px] sm:min-h-0 sm:py-2 text-xs font-medium text-indigo-700 bg-indigo-50 border border-indigo-200 rounded-md hover:bg-indigo-100 transition-colors",children:[g.jsx(Zd,{className:"w-3.5 h-3.5"}),p("properties.addCondition")]}),((Ct=u.conditions)==null?void 0:Ct.some(ot=>ot.action==="hide"))&&f&&g.jsxs("button",{type:"button",onClick:()=>f(A),className:"flex items-center justify-center gap-1.5 w-full px-3 py-2.5 min-h-[44px] sm:min-h-0 sm:py-2 text-xs font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-md hover:bg-gray-100 transition-colors",children:[g.jsx(Ec,{className:"w-3.5 h-3.5"}),p("properties.duplicateOpposite")]}),g.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:p("properties.conditionTip")})]})]}),g.jsx("section",{className:"pt-2 border-t border-gray-100",children:g.jsxs("button",{type:"button",onClick:()=>i(A),className:"flex items-center justify-center gap-1.5 w-full px-3 py-2.5 min-h-[44px] sm:min-h-0 sm:py-2 text-xs font-medium text-red-600 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 transition-colors",children:[g.jsx(Ac,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5"}),p("properties.deleteElement")]})})]})}const mc=.05;function tT({imageSrc:u,cropX:t,cropY:n,cropWidth:i,cropHeight:a,onApply:o,onCancel:c}){const h=tt.useRef(null),d=tt.useRef(null),f=Be(j=>j.t),[p,x]=tt.useState({w:0,h:0}),[v,b]=tt.useState({w:0,h:0,ox:0,oy:0}),[w,_]=tt.useState(t),[k,C]=tt.useState(n),[O,M]=tt.useState(i),[X,I]=tt.useState(a),$=tt.useRef(null),V=tt.useCallback(()=>{const j=h.current;if(!j||p.w===0)return;const R=j.clientWidth-48,Z=j.clientHeight-48,W=Math.min(R/p.w,Z/p.h,1),_t=Math.round(p.w*W),xt=Math.round(p.h*W);b({w:_t,h:xt,ox:Math.round((j.clientWidth-_t)/2),oy:Math.round((j.clientHeight-xt)/2)})},[p]);tt.useEffect(()=>(V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)),[V]),tt.useEffect(()=>{const j=document.body.style.overflow;document.body.style.overflow="hidden";const R=d.current,Z=W=>W.preventDefault();return R==null||R.addEventListener("touchmove",Z,{passive:!1}),R==null||R.addEventListener("wheel",Z,{passive:!1}),()=>{document.body.style.overflow=j,R==null||R.removeEventListener("touchmove",Z),R==null||R.removeEventListener("wheel",Z)}},[]);const B=j=>{x({w:j.currentTarget.naturalWidth,h:j.currentTarget.naturalHeight})},z=j=>R=>{R.preventDefault(),R.stopPropagation(),$.current={edge:j,sx:R.clientX,sy:R.clientY,cx0:w,cy0:k,cw0:O,ch0:X},R.target.setPointerCapture(R.pointerId)},Q=j=>{const R=$.current;if(!R)return;const{edge:Z,sx:W,sy:_t,cx0:xt,cy0:bt,cw0:Ct,ch0:ot}=R,St=(j.clientX-W)/v.w,At=(j.clientY-_t)/v.h;let dt=xt,S=bt,F=Ct,H=ot;if(Z==="move")dt=qa(xt+St,0,1-Ct),S=qa(bt+At,0,1-ot);else{if(Z==="left"||Z==="tl"||Z==="bl"){const N=xt+Ct-mc,D=qa(xt+St,0,N);F=Ct+(xt-D),dt=D}if((Z==="right"||Z==="tr"||Z==="br")&&(F=qa(Ct+St,mc,1-xt)),Z==="top"||Z==="tl"||Z==="tr"){const N=bt+ot-mc,D=qa(bt+At,0,N);H=ot+(bt-D),S=D}(Z==="bottom"||Z==="bl"||Z==="br")&&(H=qa(ot+At,mc,1-bt))}_(dt),C(S),M(F),I(H)},ct=()=>{$.current=null},L=()=>{_(0),C(0),M(1),I(1)},{w:P,h:E,ox:q,oy:K}=v,Y=Math.round(w*P),rt=Math.round(k*E),et=Math.round(O*P),pt=Math.round(X*E),A="crop-mask";return g.jsxs("div",{ref:d,className:"fixed inset-0 z-[60] flex flex-col bg-black",onPointerMove:Q,onPointerUp:ct,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-900 border-b border-gray-700 shrink-0",children:[g.jsx("span",{className:"text-sm font-medium text-white",children:f("cropOverlay.title")}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:L,className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600 transition-colors",children:[g.jsx(E_,{className:"w-3 h-3"})," ",f("cropOverlay.reset")]}),g.jsxs("button",{type:"button",onClick:c,className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600 transition-colors",children:[g.jsx(xx,{className:"w-3 h-3"})," ",f("cropOverlay.cancel")]}),g.jsxs("button",{type:"button",onClick:()=>o({cropX:w,cropY:k,cropWidth:O,cropHeight:X}),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors",children:[g.jsx(kc,{className:"w-3 h-3"})," ",f("cropOverlay.apply")]})]})]}),g.jsxs("div",{ref:h,className:"flex-1 relative overflow-hidden select-none",children:[g.jsx("img",{src:u,alt:"Crop source",onLoad:B,draggable:!1,className:"absolute",style:{left:q,top:K,width:P||"auto",height:E||"auto",pointerEvents:"none",userSelect:"none"}}),P>0&&g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:1},children:[g.jsx("defs",{children:g.jsxs("mask",{id:A,children:[g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),g.jsx("rect",{x:q+Y,y:K+rt,width:et,height:pt,fill:"black"})]})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:`url(#${A})`})]}),g.jsx("div",{className:"absolute border-2 border-white/90 pointer-events-none",style:{left:q+Y,top:K+rt,width:et,height:pt,zIndex:2},children:g.jsxs("div",{className:"absolute inset-0",children:[g.jsx("div",{className:"absolute left-1/3 top-0 bottom-0 w-px bg-white/25"}),g.jsx("div",{className:"absolute left-2/3 top-0 bottom-0 w-px bg-white/25"}),g.jsx("div",{className:"absolute top-1/3 left-0 right-0 h-px bg-white/25"}),g.jsx("div",{className:"absolute top-2/3 left-0 right-0 h-px bg-white/25"})]})}),g.jsxs("div",{className:"absolute inset-0",style:{zIndex:3},children:[g.jsx("div",{className:"absolute cursor-move",style:{left:q+Y+6,top:K+rt+6,width:et-12,height:pt-12,touchAction:"none"},onPointerDown:z("move")}),g.jsx(pc,{edge:"top",style:{left:q+Y+8,top:K+rt-4,width:et-16,height:8},cursor:"n-resize",onDown:z}),g.jsx(pc,{edge:"bottom",style:{left:q+Y+8,top:K+rt+pt-4,width:et-16,height:8},cursor:"s-resize",onDown:z}),g.jsx(pc,{edge:"left",style:{left:q+Y-4,top:K+rt+8,width:8,height:pt-16},cursor:"w-resize",onDown:z}),g.jsx(pc,{edge:"right",style:{left:q+Y+et-4,top:K+rt+8,width:8,height:pt-16},cursor:"e-resize",onDown:z}),[{edge:"tl",x:q+Y-5,y:K+rt-5,cursor:"nw-resize"},{edge:"tr",x:q+Y+et-5,y:K+rt-5,cursor:"ne-resize"},{edge:"bl",x:q+Y-5,y:K+rt+pt-5,cursor:"sw-resize"},{edge:"br",x:q+Y+et-5,y:K+rt+pt-5,cursor:"se-resize"}].map(({edge:j,x:R,y:Z,cursor:W})=>g.jsx("div",{className:"absolute w-[10px] h-[10px] bg-white border border-gray-400 rounded-sm shadow",style:{left:R,top:Z,cursor:W,touchAction:"none"},onPointerDown:z(j)},j))]}),g.jsxs("div",{className:"absolute text-[10px] text-white/80 font-mono bg-black/60 px-1.5 py-0.5 rounded pointer-events-none",style:{left:q+Y+et/2-30,top:K+rt+pt+8,zIndex:4},children:[Math.round(O*100),"%  ",Math.round(X*100),"%"]})]})]})]})}function qa(u,t,n){return Math.min(n,Math.max(t,u))}function pc({edge:u,style:t,cursor:n,onDown:i}){return g.jsx("div",{className:"absolute",style:{...t,cursor:n,touchAction:"none"},onPointerDown:i(u)})}function eT(){tt.useEffect(()=>{const F=document.body.style.overflow;document.body.style.overflow="hidden";const H=document.querySelector("main"),N=(H==null?void 0:H.style.overflow)??"",D=(H==null?void 0:H.style.padding)??"";return H&&(H.style.overflow="hidden",H.style.padding="0"),()=>{document.body.style.overflow=F,H&&(H.style.overflow=N,H.style.padding=D)}},[]);const u=It(F=>F.setTemplateConfig),t=It(F=>F.templateConfig),i=It(F=>{var H;return((H=F.csvData)==null?void 0:H.headers)??[]}).map(F=>F.name),a=Be(F=>F.t),o=tt.useRef(null),[c,h]=tt.useState(null),[d,f]=tt.useState([]),[p,x]=tt.useState(!0),[v,b]=tt.useState(!0),[w,_]=tt.useState(null),[k,C]=tt.useState("peek"),O=c||d.length>0?"properties":"assets",[M,X]=tt.useState(null),I=tt.useRef(null),$=tt.useRef(null),V=tt.useRef(null),B=tt.useCallback(()=>{const F=window.innerHeight;return{collapsed:32,peek:F*.4,full:F*.75}},[]),z=tt.useCallback(F=>B()[F],[B]),Q=tt.useCallback(F=>{var N;const H=((N=$.current)==null?void 0:N.offsetHeight)??z(k);I.current={startY:F,startHeight:H}},[k,z]),ct=tt.useCallback(F=>{if(!I.current)return;const H=I.current.startY-F,N=Math.max(32,Math.min(window.innerHeight*.85,I.current.startHeight+H));X(N)},[]),L=tt.useCallback(()=>{if(!I.current)return;const F=M??z(k),H=B(),D=[{mode:"collapsed",d:Math.abs(F-H.collapsed)},{mode:"peek",d:Math.abs(F-H.peek)},{mode:"full",d:Math.abs(F-H.full)}].reduce((G,ut)=>G.d<ut.d?G:ut);C(D.mode),X(null),I.current=null},[M,k,z,B]);tt.useEffect(()=>{const F=V.current,H=$.current;if(!F||!H)return;const N=G=>{G.touches.length===1&&(G.preventDefault(),ct(G.touches[0].clientY))},D=G=>{G.stopPropagation()};return F.addEventListener("touchmove",N,{passive:!1}),H.addEventListener("touchmove",D,{passive:!1}),()=>{F.removeEventListener("touchmove",N),H.removeEventListener("touchmove",D)}},[ct]);const P=tt.useRef(null),E=tt.useCallback((F,H)=>{h(F),f(H&&H.length>1?H:[])},[]);tt.useEffect(()=>{const F=(c==null?void 0:c.id)??(d.length>0?"multi":null);F!==P.current&&(P.current=F,F&&k==="collapsed"&&C("peek"))},[c,d,k]);const q=tt.useCallback(()=>{const F=o.current;F&&u(F.getTemplate())},[u]),K=()=>{var F;(F=o.current)==null||F.addTextElement({text:"New Text",fontFamily:"Arial",fontSize:24,fontWeight:"normal",fontStyle:"normal",underline:!1,fill:"#000000",textAlign:"left",left:100,top:100})},Y=F=>{var H;(H=o.current)==null||H.addImageElement({src:F,left:100,top:100,width:200,height:200})},rt=async F=>{var H;u({...t,background:F}),await((H=o.current)==null?void 0:H.setBackground(F))},et=(F,H)=>{u({...t,width:F,height:H})},pt=tt.useCallback((F,H)=>{var N;(N=o.current)==null||N.updateElement(F,H),h(D=>D&&D.id===F?{...D,properties:{...D.properties,...H}}:D),f(D=>D.map(G=>G.id===F?{...G,properties:{...G.properties,...H}}:G)),q()},[q]),A=tt.useCallback(F=>{var H;(H=o.current)==null||H.removeElement(F),h(null)},[]),j=tt.useCallback(F=>{var H;(H=o.current)==null||H.bringToFront(F),q()},[q]),R=tt.useCallback(F=>{var H;(H=o.current)==null||H.sendToBack(F),q()},[q]),Z=tt.useCallback((F,H)=>{const N=o.current;N&&(N.updateElementConditions(F,H),h(D=>D&&D.id===F?{...D,conditions:H}:D),f(D=>D.map(G=>G.id===F?{...G,conditions:H}:G)),q())},[q]),W=tt.useCallback(async F=>{const H=o.current;if(!H)return;const N=await H.duplicateElement(F);if(!N)return;const G=H.canvas.getObjects().find(st=>st.elementId===N);if(!G)return;const ut=G.conditions?JSON.parse(JSON.stringify(G.conditions)):[],yt=ut.findIndex(st=>st.action==="hide");if(yt>=0){const st={...ut[yt]};if(st.checks&&st.checks.length>0)st.checks=st.checks.map(Et=>{const Tt={...Et};switch(Et.operator){case"is_empty":Tt.operator="is_not_empty";break;case"is_not_empty":Tt.operator="is_empty";break;case"equals":Tt.operator="not_equals";break;case"not_equals":Tt.operator="equals";break}return Tt});else if(st.operator)switch(st.operator){case"is_empty":st.operator="is_not_empty";break;case"is_not_empty":st.operator="is_empty";break;case"equals":st.operator="not_equals";break;case"not_equals":st.operator="equals";break}st.action="show",ut[yt]=st}H.updateElementConditions(N,ut),q()},[q]),_t=tt.useCallback((F,H)=>{const N=o.current;if(!N)return;const D=t.width/2,G=t.height/2;N.addPlaceholder({name:F,type:H},{left:D-75,top:G-10})},[t.width,t.height]),xt=tt.useCallback(F=>{if(!c||c.id!==F)return;const H=c.properties,N=H.src;N&&(_({id:F,src:N,cropX:H.cropX??0,cropY:H.cropY??0,cropWidth:H.cropWidth??1,cropHeight:H.cropHeight??1}),C("collapsed"))},[c]),bt=tt.useCallback(F=>{w&&(pt(w.id,F),_(null))},[w,pt]),Ct=tt.useCallback(()=>{const F=o.current;if(!F)return;const H=F.getTemplate(),N=JSON.stringify(H,null,2),D=new Blob([N],{type:"application/json"}),G=URL.createObjectURL(D),ut=document.createElement("a");ut.href=G,ut.download=`template-${t.width}x${t.height}.json`,ut.click(),URL.revokeObjectURL(G)},[t.width,t.height]),ot=tt.useRef(null),St=tt.useCallback(()=>{var F;(F=ot.current)==null||F.click()},[]),At=tt.useCallback(async F=>{var N;const H=(N=F.target.files)==null?void 0:N[0];if(H){try{const D=await H.text(),G=JSON.parse(D);if(!G.width||!G.height||!G.elements||!G.background){alert(a("editor.invalidTemplate"));return}u(G);const ut=o.current;ut&&await ut.loadTemplate(G),h(null),f([])}catch{alert(a("editor.invalidJson"))}F.target.value=""}},[u]),dt=M!=null?{height:M,transition:"none"}:{transition:"height 0.3s ease-out"},S=M!=null?"":k==="collapsed"?"h-8":k==="peek"?"h-[40vh]":"h-[75vh]";return g.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[w&&g.jsx(tT,{imageSrc:w.src,cropX:w.cropX,cropY:w.cropY,cropWidth:w.cropWidth,cropHeight:w.cropHeight,onApply:bt,onCancel:()=>_(null)}),g.jsxs("div",{className:"flex flex-1 min-h-0 gap-0",children:[p&&g.jsxs("aside",{className:"hidden lg:flex w-[240px] xl:w-[260px] shrink-0 bg-white border-r border-gray-200 flex-col overflow-hidden",children:[g.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx(Nc,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h2",{className:"text-xs font-semibold text-gray-800",children:a("editor.assets")})]}),g.jsx("button",{type:"button",onClick:()=>x(!1),className:"p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors",title:a("editor.collapsePanel"),children:g.jsx(x_,{className:"w-3.5 h-3.5"})})]}),g.jsx("div",{className:"flex-1 overflow-hidden",children:g.jsx(dy,{onAddText:K,onAddImageFromSrc:Y,onSetBackground:rt,onCanvasResize:et,onAddPlaceholder:_t})})]}),g.jsxs("section",{className:"flex-1 bg-white flex flex-col overflow-hidden min-w-0",children:[g.jsxs("div",{className:"px-2 py-1.5 border-b border-gray-100 flex items-center gap-2 shrink-0",children:[!p&&g.jsx("button",{type:"button",onClick:()=>x(!0),className:"hidden lg:flex p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors",title:a("editor.showAssetsPanel"),children:g.jsx(b_,{className:"w-3.5 h-3.5"})}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx(d_,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h2",{className:"text-xs font-semibold text-gray-800",children:a("editor.canvas")})]}),g.jsx("div",{className:"flex-1"}),g.jsx("input",{ref:ot,type:"file",accept:".json",className:"hidden",onChange:At}),g.jsxs("button",{type:"button",onClick:St,className:"flex items-center gap-1 px-2 py-1 text-[11px] text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:a("editor.importTitle"),children:[g.jsx(ko,{className:"w-3.5 h-3.5"}),g.jsx("span",{className:"hidden sm:inline",children:a("editor.import")})]}),g.jsxs("button",{type:"button",onClick:Ct,className:"flex items-center gap-1 px-2 py-1 text-[11px] text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:a("editor.exportTitle"),children:[g.jsx(tr,{className:"w-3.5 h-3.5"}),g.jsx("span",{className:"hidden sm:inline",children:a("editor.export")})]}),!v&&g.jsx("button",{type:"button",onClick:()=>b(!0),className:"hidden lg:flex p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors",title:a("editor.showPropertiesPanel"),children:g.jsx(C_,{className:"w-3.5 h-3.5"})})]}),g.jsx(H5,{onSelectionChange:E,engineRef:o,onCanvasChange:q,onImagePaste:F=>{It.getState().addUploadedImage(F),Y(F)}})]}),v&&g.jsxs("aside",{className:"hidden lg:flex w-[240px] xl:w-[260px] shrink-0 bg-white border-l border-gray-200 flex-col overflow-hidden",children:[g.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx($0,{className:"w-3.5 h-3.5 text-indigo-500"}),g.jsx("h2",{className:"text-xs font-semibold text-gray-800",children:a("editor.properties")})]}),g.jsx("button",{type:"button",onClick:()=>b(!1),className:"p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors",title:a("editor.collapsePanel"),children:g.jsx(w_,{className:"w-3.5 h-3.5"})})]}),g.jsx(ox,{selectedElement:c,selectedElements:d,onUpdateElement:pt,onDeleteElement:A,onBringToFront:j,onSendToBack:R,onCropImage:xt,columns:i,onUpdateConditions:Z,onDuplicateWithOpposite:W})]})]}),g.jsxs("div",{ref:$,className:`lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-gray-200 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] rounded-t-2xl flex flex-col ${S}`,style:dt,onTouchStart:F=>F.stopPropagation(),children:[g.jsxs("div",{ref:V,className:"flex flex-col items-center pt-2 pb-1 px-4 shrink-0 cursor-grab active:cursor-grabbing select-none touch-none",onClick:()=>{I.current||C(k==="collapsed"?"peek":k==="peek"?"full":"peek")},onTouchStart:F=>{F.touches.length===1&&Q(F.touches[0].clientY)},onTouchEnd:()=>L(),onMouseDown:F=>{Q(F.clientY);const H=D=>ct(D.clientY),N=()=>{L(),window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",N)};window.addEventListener("mousemove",H),window.addEventListener("mouseup",N)},children:[g.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300 mb-2"}),g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("div",{className:"flex items-center gap-2",children:O==="assets"?g.jsxs(g.Fragment,{children:[g.jsx(Nc,{className:"w-4 h-4 text-indigo-500"}),g.jsx("span",{className:"text-xs font-semibold text-gray-800",children:a("editor.assets")})]}):g.jsxs(g.Fragment,{children:[g.jsx($0,{className:"w-4 h-4 text-indigo-500"}),g.jsx("span",{className:"text-xs font-semibold text-gray-800",children:a("editor.properties")})]})}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[k!=="collapsed"&&g.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),C("collapsed"),X(null)},className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-400",children:g.jsx(ar,{className:"w-4 h-4"})}),k!=="full"&&g.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),C("full"),X(null)},className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-400",children:g.jsx(fx,{className:"w-4 h-4"})})]})]})]}),(k!=="collapsed"||M!=null)&&g.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain min-h-0",children:O==="assets"?g.jsx(dy,{onAddText:()=>{K(),C("collapsed")},onAddImageFromSrc:F=>{Y(F),C("collapsed")},onSetBackground:rt,onCanvasResize:et,onAddPlaceholder:(F,H)=>{_t(F,H),C("collapsed")}}):g.jsx(ox,{selectedElement:c,selectedElements:d,onUpdateElement:pt,onDeleteElement:A,onBringToFront:j,onSendToBack:R,onCropImage:xt,columns:i,onUpdateConditions:Z,onDuplicateWithOpposite:W})})]})]})}function jo(u,t){return u&&u.replace(/\{([^{}]+)\}/g,(n,i)=>Object.prototype.hasOwnProperty.call(t,i)?t[i]:n)}async function vf(u){try{if(u.startsWith("data:"))return await Se.fromURL(u);const t=await jx(u);return await Se.fromURL(t)}catch{return null}}async function nT(u,t){if(t.type==="solid"&&t.color)u.backgroundColor=t.color;else if(t.type==="gradient"&&t.gradientColors){const[n,i]=t.gradientColors,a=t.gradientDirection??"vertical",o=u.getWidth(),c=u.getHeight();let h;switch(a){case"horizontal":h={x1:0,y1:0,x2:o,y2:0};break;case"diagonal":h={x1:0,y1:0,x2:o,y2:c};break;case"vertical":default:h={x1:0,y1:0,x2:0,y2:c};break}u.backgroundColor=new ta({type:"linear",coords:h,colorStops:[{offset:0,color:n},{offset:1,color:i}]})}else if(t.type==="image"&&t.imageSrc){const n=await vf(t.imageSrc);if(n){const i=u.getWidth(),a=u.getHeight(),o=n.width||1,c=n.height||1,h=t.imageScale??Math.max(i/o,a/c),d=t.imageLeft??(i-o*h)/2,f=t.imageTop??(a-c*h)/2;n.set({scaleX:h,scaleY:h,left:d,top:f}),u.add(n),u.sendObjectToBack(n)}}}async function sT(u,t,n){var d;let i=t.columnName;if(!i&&t.properties.text){const f=t.properties.text.match(/\{([^}]+)\}/);f&&(i=f[1])}const a=G5(t.conditions,n,i);if(!a.visible)return;const o=a.styleOverrides?{...t.properties,...a.styleOverrides}:t.properties,{type:c,columnName:h}=t;if(c==="text"){const f=o.text??"",p=jo(f,n),x=new Jn(p,{left:o.left,top:o.top,width:o.width||250,angle:o.angle,scaleX:o.scaleX,scaleY:o.scaleY,fontFamily:o.fontFamily??"Arial",fontSize:o.fontSize??20,fontWeight:o.fontWeight??"normal",fontStyle:o.fontStyle??"normal",underline:o.underline??!1,fill:o.fill??"#000000",textAlign:o.textAlign??"left"});if(o.textBgColor&&(o.textBgOpacity??0)>0){const v=parseInt(o.textBgColor.slice(1,3),16),b=parseInt(o.textBgColor.slice(3,5),16),w=parseInt(o.textBgColor.slice(5,7),16),_=o.textBgOpacity??1,k=o.textBgRadius??0,C=4,O=(o.width||250)+C*2,M=x.height+C*2,X=new Ie({left:o.left-C,top:o.top-C,width:O,height:M,angle:o.angle,scaleX:o.scaleX,scaleY:o.scaleY,fill:`rgba(${v},${b},${w},${_})`,rx:k,ry:k});u.add(X)}u.add(x)}else if(c==="placeholder-text"){const f=o.text??`{${h??""}}`,p=jo(f,n),x=new Jn(p,{left:o.left,top:o.top,width:o.width||250,angle:o.angle,scaleX:o.scaleX,scaleY:o.scaleY,fontFamily:o.fontFamily??"Arial",fontSize:o.fontSize??20,fontWeight:o.fontWeight??"normal",fontStyle:o.fontStyle??"normal",underline:o.underline??!1,fill:o.fill??"#000000",textAlign:o.textAlign??"left"});if(o.textBgColor&&(o.textBgOpacity??0)>0){const v=parseInt(o.textBgColor.slice(1,3),16),b=parseInt(o.textBgColor.slice(3,5),16),w=parseInt(o.textBgColor.slice(5,7),16),_=o.textBgOpacity??1,k=o.textBgRadius??0,C=4,O=(o.width||250)+C*2,M=x.height+C*2,X=new Ie({left:o.left-C,top:o.top-C,width:O,height:M,angle:o.angle,scaleX:o.scaleX,scaleY:o.scaleY,fill:`rgba(${v},${b},${w},${_})`,rx:k,ry:k});u.add(X)}u.add(x)}else if(c==="image"){if(o.src){const f=await vf(o.src);if(f){const p=f.width||1,x=f.height||1;let v=p,b=x;if(o.cropX!==void 0&&o.cropWidth!==void 0&&(f.set({cropX:(o.cropX??0)*p,cropY:(o.cropY??0)*x,width:(o.cropWidth??1)*p,height:(o.cropHeight??1)*x}),v=(o.cropWidth??1)*p,b=(o.cropHeight??1)*x),f.set({left:o.left,top:o.top,angle:o.angle,scaleX:o.scaleX,scaleY:o.scaleY}),o.borderRadius&&o.borderRadius>0){const w=Math.min(o.scaleX??1,o.scaleY??1),_=o.borderRadius/w;f.clipPath=new Ie({width:v,height:b,rx:_,ry:_,left:-v/2,top:-b/2,originX:"left",originY:"top"})}u.add(f)}}}else if(c==="placeholder-image"){const f=h?(d=n[h])==null?void 0:d.trim():void 0;if(!f)return;const p=o.width||150,x=o.height||150,v=await vf(f);if(v){const b=v.width||1,w=v.height||1,_=p*(o.scaleX??1)/b,k=x*(o.scaleY??1)/w;if(v.set({left:o.left,top:o.top,angle:o.angle,scaleX:_,scaleY:k}),o.borderRadius&&o.borderRadius>0){const C=o.borderRadius/Math.min(_,k);v.clipPath=new Ie({width:b,height:w,rx:C,ry:C,left:-b/2,top:-w/2,originX:"left",originY:"top"})}u.add(v)}}}function iT(u){var c;const t=u.split(","),n=((c=t[0].match(/:(.*?);/))==null?void 0:c[1])??"image/png",i=atob(t[1]),a=new ArrayBuffer(i.length),o=new Uint8Array(a);for(let h=0;h<i.length;h++)o[h]=i.charCodeAt(h);return new Blob([o],{type:n})}async function Nv(u,t,n){const i=new gr(void 0,{width:u.width,height:u.height});await nT(i,u.background);for(const c of u.elements)await sT(i,c,t);i.renderAll();const a=n.format==="jpeg"?n.quality/100:void 0,o=i.toDataURL({format:n.format,quality:a,multiplier:1});return i.dispose(),iT(o)}function aT(){const u=It(P=>P.csvData),t=It(P=>P.templateConfig),n=It(P=>P.previewRowIndex),i=It(P=>P.setPreviewRowIndex),a=It(P=>P.setCurrentStep),o=Be(P=>P.t),c=Be(P=>P.locale),h=or[c].dir==="rtl",[d,f]=tt.useState(null),[p,x]=tt.useState(!1),[v,b]=tt.useState(null),w=tt.useRef(null),_=(u==null?void 0:u.rows)??[],k=(u==null?void 0:u.headers)??[],C=_.length,O=_[n]??null,M=C>0,X=t.elements.length>0,[I,$]=tt.useState(String(n+1));tt.useEffect(()=>{$(String(n+1))},[n]);const V=()=>{const P=parseInt(I,10);!isNaN(P)&&P>=1&&P<=C?i(P-1):$(String(n+1))},B=tt.useCallback(()=>{w.current&&(URL.revokeObjectURL(w.current),w.current=null)},[]);tt.useEffect(()=>{if(!M||!O){B(),f(null);return}let P=!1;async function E(){x(!0),b(null);try{const q=await Nv(t,O,{format:"png",quality:100});if(P)return;B();const K=URL.createObjectURL(q);w.current=K,f(K)}catch(q){if(P)return;b(q instanceof Error?q.message:"Failed to render preview."),B(),f(null)}finally{P||x(!1)}}return E(),()=>{P=!0}},[n,t,O,M,B]),tt.useEffect(()=>()=>{B()},[B]);const z=()=>{n>0&&i(n-1)},Q=()=>{n<C-1&&i(n+1)};tt.useEffect(()=>{const P=E=>{var rt;const q=(rt=E.target)==null?void 0:rt.tagName;if(q==="INPUT"||q==="TEXTAREA"||q==="SELECT")return;const K=h?"ArrowRight":"ArrowLeft",Y=h?"ArrowLeft":"ArrowRight";E.key===K?(E.preventDefault(),n>0&&i(n-1)):E.key===Y&&(E.preventDefault(),n<C-1&&i(n+1))};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[n,C,i,h]);const ct=h?Oc:W0,L=h?W0:Oc;return M?X?g.jsxs("div",{className:"max-w-5xl mx-auto space-y-4 sm:space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-white rounded-lg border border-gray-200",children:[g.jsxs("button",{type:"button",onClick:z,disabled:n===0,className:"inline-flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:[g.jsx(ct,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:o("preview.previous")})]}),g.jsxs("div",{className:"flex items-center gap-1 text-xs sm:text-sm font-medium text-gray-600",children:[g.jsx("span",{children:o("preview.row")}),g.jsx("input",{type:"text",inputMode:"numeric",min:1,max:C,value:I,onChange:P=>$(P.target.value),onBlur:V,onKeyDown:P=>{P.key==="Enter"&&V()},className:"w-16 px-1.5 py-0.5 text-center border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-300 text-xs sm:text-sm font-medium"}),g.jsxs("span",{children:[o("preview.of")," ",C]})]}),g.jsxs("button",{type:"button",onClick:Q,disabled:n>=C-1,className:"inline-flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:[g.jsx("span",{className:"hidden sm:inline",children:o("preview.next")}),g.jsx(L,{className:"w-4 h-4"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6",children:[g.jsx("div",{className:"md:col-span-2",children:g.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:o("preview.title")}),g.jsxs("div",{className:"relative flex items-center justify-center min-h-[300px] bg-gray-50 rounded-lg overflow-hidden",children:[p&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 z-10",children:g.jsxs("div",{className:"flex flex-col items-center gap-2",children:[g.jsx(Gc,{className:"w-8 h-8 text-indigo-500 animate-spin"}),g.jsx("p",{className:"text-sm text-gray-500",children:o("preview.rendering")})]})}),v&&!p&&g.jsxs("div",{className:"flex flex-col items-center gap-2 text-center p-6",children:[g.jsx(rr,{className:"w-8 h-8 text-red-400"}),g.jsx("p",{className:"text-sm text-red-600",children:v})]}),d&&!v&&g.jsx("img",{src:d,alt:`Preview for row ${n+1}`,className:"max-w-full max-h-[500px] object-contain"}),!d&&!p&&!v&&g.jsx("p",{className:"text-sm text-gray-400",children:o("preview.noPreview")})]})]})}),g.jsx("div",{className:"md:col-span-1",children:g.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:o("preview.rowData")}),O&&g.jsx("div",{className:"space-y-0 divide-y divide-gray-100",children:k.map(P=>g.jsxs("div",{className:"py-2.5 first:pt-0 last:pb-0",children:[g.jsx("dt",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:P.name}),g.jsx("dd",{className:"mt-0.5 text-sm text-gray-900 break-all",title:O[P.name]??"",children:O[P.name]||g.jsx("span",{className:"text-gray-400 italic",children:o("preview.empty")})})]},P.name))})]})})]})]}):g.jsx("div",{className:"max-w-4xl mx-auto",children:g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx(bs,{className:"w-12 h-12 text-gray-300 mb-4"}),g.jsx("h2",{className:"text-lg font-medium text-gray-700",children:o("preview.noElements")}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o("preview.noElementsHint")}),g.jsxs("button",{type:"button",onClick:()=>a("editor"),className:"mt-4 inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[g.jsx(ir,{className:"w-4 h-4"})," ",o("preview.goToEditor")]})]})}):g.jsx("div",{className:"max-w-4xl mx-auto",children:g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx(rr,{className:"w-12 h-12 text-gray-300 mb-4"}),g.jsx("h2",{className:"text-lg font-medium text-gray-700",children:o("preview.noData")}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o("preview.noDataHint")}),g.jsxs("button",{type:"button",onClick:()=>a("upload"),className:"mt-4 inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[g.jsx(ir,{className:"w-4 h-4"})," ",o("preview.goToUpload")]})]})})}function yc(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xd={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var lx;function rT(){return lx||(lx=1,(function(u,t){(function(n){u.exports=n()})(function(){return(function n(i,a,o){function c(f,p){if(!a[f]){if(!i[f]){var x=typeof yc=="function"&&yc;if(!p&&x)return x(f,!0);if(h)return h(f,!0);var v=new Error("Cannot find module '"+f+"'");throw v.code="MODULE_NOT_FOUND",v}var b=a[f]={exports:{}};i[f][0].call(b.exports,function(w){var _=i[f][1][w];return c(_||w)},b,b.exports,n,i,a,o)}return a[f].exports}for(var h=typeof yc=="function"&&yc,d=0;d<o.length;d++)c(o[d]);return c})({1:[function(n,i,a){var o=n("./utils"),c=n("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(d){for(var f,p,x,v,b,w,_,k=[],C=0,O=d.length,M=O,X=o.getTypeOf(d)!=="string";C<d.length;)M=O-C,x=X?(f=d[C++],p=C<O?d[C++]:0,C<O?d[C++]:0):(f=d.charCodeAt(C++),p=C<O?d.charCodeAt(C++):0,C<O?d.charCodeAt(C++):0),v=f>>2,b=(3&f)<<4|p>>4,w=1<M?(15&p)<<2|x>>6:64,_=2<M?63&x:64,k.push(h.charAt(v)+h.charAt(b)+h.charAt(w)+h.charAt(_));return k.join("")},a.decode=function(d){var f,p,x,v,b,w,_=0,k=0,C="data:";if(d.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var O,M=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===h.charAt(64)&&M--,d.charAt(d.length-2)===h.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(O=c.uint8array?new Uint8Array(0|M):new Array(0|M);_<d.length;)f=h.indexOf(d.charAt(_++))<<2|(v=h.indexOf(d.charAt(_++)))>>4,p=(15&v)<<4|(b=h.indexOf(d.charAt(_++)))>>2,x=(3&b)<<6|(w=h.indexOf(d.charAt(_++))),O[k++]=f,b!==64&&(O[k++]=p),w!==64&&(O[k++]=x);return O}},{"./support":30,"./utils":32}],2:[function(n,i,a){var o=n("./external"),c=n("./stream/DataWorker"),h=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function f(p,x,v,b,w){this.compressedSize=p,this.uncompressedSize=x,this.crc32=v,this.compression=b,this.compressedContent=w}f.prototype={getContentWorker:function(){var p=new c(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),x=this;return p.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new c(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(p,x,v){return p.pipe(new h).pipe(new d("uncompressedSize")).pipe(x.compressWorker(v)).pipe(new d("compressedSize")).withStreamInfo("compression",x)},i.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,a){var o=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,a){var o=n("./utils"),c=(function(){for(var h,d=[],f=0;f<256;f++){h=f;for(var p=0;p<8;p++)h=1&h?3988292384^h>>>1:h>>>1;d[f]=h}return d})();i.exports=function(h,d){return h!==void 0&&h.length?o.getTypeOf(h)!=="string"?(function(f,p,x,v){var b=c,w=v+x;f^=-1;for(var _=v;_<w;_++)f=f>>>8^b[255&(f^p[_])];return-1^f})(0|d,h,h.length,0):(function(f,p,x,v){var b=c,w=v+x;f^=-1;for(var _=v;_<w;_++)f=f>>>8^b[255&(f^p.charCodeAt(_))];return-1^f})(0|d,h,h.length,0):0}},{"./utils":32}],5:[function(n,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,i,a){var o=null;o=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:o}},{lie:37}],7:[function(n,i,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=n("pako"),h=n("./utils"),d=n("./stream/GenericWorker"),f=o?"uint8array":"array";function p(x,v){d.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=v,this.meta={}}a.magic="\b\0",h.inherits(p,d),p.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(f,x.data),!1)},p.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(v){x.push({data:v,meta:x.meta})}},a.compressWorker=function(x){return new p("Deflate",x)},a.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,a){function o(b,w){var _,k="";for(_=0;_<w;_++)k+=String.fromCharCode(255&b),b>>>=8;return k}function c(b,w,_,k,C,O){var M,X,I=b.file,$=b.compression,V=O!==f.utf8encode,B=h.transformTo("string",O(I.name)),z=h.transformTo("string",f.utf8encode(I.name)),Q=I.comment,ct=h.transformTo("string",O(Q)),L=h.transformTo("string",f.utf8encode(Q)),P=z.length!==I.name.length,E=L.length!==Q.length,q="",K="",Y="",rt=I.dir,et=I.date,pt={crc32:0,compressedSize:0,uncompressedSize:0};w&&!_||(pt.crc32=b.crc32,pt.compressedSize=b.compressedSize,pt.uncompressedSize=b.uncompressedSize);var A=0;w&&(A|=8),V||!P&&!E||(A|=2048);var j=0,R=0;rt&&(j|=16),C==="UNIX"?(R=798,j|=(function(W,_t){var xt=W;return W||(xt=_t?16893:33204),(65535&xt)<<16})(I.unixPermissions,rt)):(R=20,j|=(function(W){return 63&(W||0)})(I.dosPermissions)),M=et.getUTCHours(),M<<=6,M|=et.getUTCMinutes(),M<<=5,M|=et.getUTCSeconds()/2,X=et.getUTCFullYear()-1980,X<<=4,X|=et.getUTCMonth()+1,X<<=5,X|=et.getUTCDate(),P&&(K=o(1,1)+o(p(B),4)+z,q+="up"+o(K.length,2)+K),E&&(Y=o(1,1)+o(p(ct),4)+L,q+="uc"+o(Y.length,2)+Y);var Z="";return Z+=`
\0`,Z+=o(A,2),Z+=$.magic,Z+=o(M,2),Z+=o(X,2),Z+=o(pt.crc32,4),Z+=o(pt.compressedSize,4),Z+=o(pt.uncompressedSize,4),Z+=o(B.length,2),Z+=o(q.length,2),{fileRecord:x.LOCAL_FILE_HEADER+Z+B+q,dirRecord:x.CENTRAL_FILE_HEADER+o(R,2)+Z+o(ct.length,2)+"\0\0\0\0"+o(j,4)+o(k,4)+B+q+ct}}var h=n("../utils"),d=n("../stream/GenericWorker"),f=n("../utf8"),p=n("../crc32"),x=n("../signature");function v(b,w,_,k){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=_,this.encodeFileName=k,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(v,d),v.prototype.push=function(b){var w=b.meta.percent||0,_=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,d.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:_?(w+100*(_-k-1))/_:100}}))},v.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var w=this.streamFiles&&!b.file.dir;if(w){var _=c(b,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(b){this.accumulate=!1;var w=this.streamFiles&&!b.file.dir,_=c(b,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),w)this.push({data:(function(k){return x.DATA_DESCRIPTOR+o(k.crc32,4)+o(k.compressedSize,4)+o(k.uncompressedSize,4)})(b),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var b=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var _=this.bytesWritten-b,k=(function(C,O,M,X,I){var $=h.transformTo("string",I(X));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(C,2)+o(C,2)+o(O,4)+o(M,4)+o($.length,2)+$})(this.dirRecords.length,_,b,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(b){this._sources.push(b);var w=this;return b.on("data",function(_){w.processChunk(_)}),b.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),b.on("error",function(_){w.error(_)}),this},v.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(b){var w=this._sources;if(!d.prototype.error.call(this,b))return!1;for(var _=0;_<w.length;_++)try{w[_].error(b)}catch{}return!0},v.prototype.lock=function(){d.prototype.lock.call(this);for(var b=this._sources,w=0;w<b.length;w++)b[w].lock()},i.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,a){var o=n("../compressions"),c=n("./ZipFileWorker");a.generateWorker=function(h,d,f){var p=new c(d.streamFiles,f,d.platform,d.encodeFileName),x=0;try{h.forEach(function(v,b){x++;var w=(function(O,M){var X=O||M,I=o[X];if(!I)throw new Error(X+" is not a valid compression method !");return I})(b.options.compression,d.compression),_=b.options.compressionOptions||d.compressionOptions||{},k=b.dir,C=b.date;b._compressWorker(w,_).withStreamInfo("file",{name:v,dir:k,date:C,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(p)}),p.entriesCount=x}catch(v){p.error(v)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,a){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new o;for(var h in this)typeof this[h]!="function"&&(c[h]=this[h]);return c}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(c,h){return new o().loadAsync(c,h)},o.external=n("./external"),i.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,a){var o=n("./utils"),c=n("./external"),h=n("./utf8"),d=n("./zipEntries"),f=n("./stream/Crc32Probe"),p=n("./nodejsUtils");function x(v){return new c.Promise(function(b,w){var _=v.decompressed.getContentWorker().pipe(new f);_.on("error",function(k){w(k)}).on("end",function(){_.streamInfo.crc32!==v.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}i.exports=function(v,b){var w=this;return b=o.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),p.isNode&&p.isStream(v)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",v,!0,b.optimizedBinaryString,b.base64).then(function(_){var k=new d(b);return k.load(_),k}).then(function(_){var k=[c.Promise.resolve(_)],C=_.files;if(b.checkCRC32)for(var O=0;O<C.length;O++)k.push(x(C[O]));return c.Promise.all(k)}).then(function(_){for(var k=_.shift(),C=k.files,O=0;O<C.length;O++){var M=C[O],X=M.fileNameStr,I=o.resolve(M.fileNameStr);w.file(I,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:b.createFolders}),M.dir||(w.file(I).unsafeOriginalName=X)}return k.zipComment.length&&(w.comment=k.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,a){var o=n("../utils"),c=n("../stream/GenericWorker");function h(d,f){c.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(h,c),h.prototype._bindStream=function(d){var f=this;(this._stream=d).pause(),d.on("data",function(p){f.push({data:p,meta:{percent:0}})}).on("error",function(p){f.isPaused?this.generatedError=p:f.error(p)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},h.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,a){var o=n("readable-stream").Readable;function c(h,d,f){o.call(this,d),this._helper=h;var p=this;h.on("data",function(x,v){p.push(x)||p._helper.pause(),f&&f(v)}).on("error",function(x){p.emit("error",x)}).on("end",function(){p.push(null)})}n("../utils").inherits(c,o),c.prototype._read=function(){this._helper.resume()},i.exports=c},{"../utils":32,"readable-stream":16}],14:[function(n,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,c);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,c)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var c=new Buffer(o);return c.fill(0),c},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,i,a){function o(I,$,V){var B,z=h.getTypeOf($),Q=h.extend(V||{},p);Q.date=Q.date||new Date,Q.compression!==null&&(Q.compression=Q.compression.toUpperCase()),typeof Q.unixPermissions=="string"&&(Q.unixPermissions=parseInt(Q.unixPermissions,8)),Q.unixPermissions&&16384&Q.unixPermissions&&(Q.dir=!0),Q.dosPermissions&&16&Q.dosPermissions&&(Q.dir=!0),Q.dir&&(I=C(I)),Q.createFolders&&(B=k(I))&&O.call(this,B,!0);var ct=z==="string"&&Q.binary===!1&&Q.base64===!1;V&&V.binary!==void 0||(Q.binary=!ct),($ instanceof x&&$.uncompressedSize===0||Q.dir||!$||$.length===0)&&(Q.base64=!1,Q.binary=!0,$="",Q.compression="STORE",z="string");var L=null;L=$ instanceof x||$ instanceof d?$:w.isNode&&w.isStream($)?new _(I,$):h.prepareContent(I,$,Q.binary,Q.optimizedBinaryString,Q.base64);var P=new v(I,L,Q);this.files[I]=P}var c=n("./utf8"),h=n("./utils"),d=n("./stream/GenericWorker"),f=n("./stream/StreamHelper"),p=n("./defaults"),x=n("./compressedObject"),v=n("./zipObject"),b=n("./generate"),w=n("./nodejsUtils"),_=n("./nodejs/NodejsStreamInputAdapter"),k=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var $=I.lastIndexOf("/");return 0<$?I.substring(0,$):""},C=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},O=function(I,$){return $=$!==void 0?$:p.createFolders,I=C(I),this.files[I]||o.call(this,I,null,{dir:!0,createFolders:$}),this.files[I]};function M(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var X={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var $,V,B;for($ in this.files)B=this.files[$],(V=$.slice(this.root.length,$.length))&&$.slice(0,this.root.length)===this.root&&I(V,B)},filter:function(I){var $=[];return this.forEach(function(V,B){I(V,B)&&$.push(B)}),$},file:function(I,$,V){if(arguments.length!==1)return I=this.root+I,o.call(this,I,$,V),this;if(M(I)){var B=I;return this.filter(function(Q,ct){return!ct.dir&&B.test(Q)})}var z=this.files[this.root+I];return z&&!z.dir?z:null},folder:function(I){if(!I)return this;if(M(I))return this.filter(function(z,Q){return Q.dir&&I.test(z)});var $=this.root+I,V=O.call(this,$),B=this.clone();return B.root=V.name,B},remove:function(I){I=this.root+I;var $=this.files[I];if($||(I.slice(-1)!=="/"&&(I+="/"),$=this.files[I]),$&&!$.dir)delete this.files[I];else for(var V=this.filter(function(z,Q){return Q.name.slice(0,I.length)===I}),B=0;B<V.length;B++)delete this.files[V[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var $,V={};try{if((V=h.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=V.type.toLowerCase(),V.compression=V.compression.toUpperCase(),V.type==="binarystring"&&(V.type="string"),!V.type)throw new Error("No output type specified.");h.checkSupport(V.type),V.platform!=="darwin"&&V.platform!=="freebsd"&&V.platform!=="linux"&&V.platform!=="sunos"||(V.platform="UNIX"),V.platform==="win32"&&(V.platform="DOS");var B=V.comment||this.comment||"";$=b.generateWorker(this,V,B)}catch(z){($=new d("error")).error(z)}return new f($,V.type||"string",V.mimeType)},generateAsync:function(I,$){return this.generateInternalStream(I).accumulate($)},generateNodeStream:function(I,$){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream($)}};i.exports=X},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,a){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,a){var o=n("./DataReader");function c(h){o.call(this,h);for(var d=0;d<this.data.length;d++)h[d]=255&h[d]}n("../utils").inherits(c,o),c.prototype.byteAt=function(h){return this.data[this.zero+h]},c.prototype.lastIndexOfSignature=function(h){for(var d=h.charCodeAt(0),f=h.charCodeAt(1),p=h.charCodeAt(2),x=h.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===d&&this.data[v+1]===f&&this.data[v+2]===p&&this.data[v+3]===x)return v-this.zero;return-1},c.prototype.readAndCheckSignature=function(h){var d=h.charCodeAt(0),f=h.charCodeAt(1),p=h.charCodeAt(2),x=h.charCodeAt(3),v=this.readData(4);return d===v[0]&&f===v[1]&&p===v[2]&&x===v[3]},c.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=c},{"../utils":32,"./DataReader":18}],18:[function(n,i,a){var o=n("../utils");function c(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var d,f=0;for(this.checkOffset(h),d=this.index+h-1;d>=this.index;d--)f=(f<<8)+this.byteAt(d);return this.index+=h,f},readString:function(h){return o.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},i.exports=c},{"../utils":32}],19:[function(n,i,a){var o=n("./Uint8ArrayReader");function c(h){o.call(this,h)}n("../utils").inherits(c,o),c.prototype.readData=function(h){this.checkOffset(h);var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,a){var o=n("./DataReader");function c(h){o.call(this,h)}n("../utils").inherits(c,o),c.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},c.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},c.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},c.prototype.readData=function(h){this.checkOffset(h);var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=c},{"../utils":32,"./DataReader":18}],21:[function(n,i,a){var o=n("./ArrayReader");function c(h){o.call(this,h)}n("../utils").inherits(c,o),c.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,a){var o=n("../utils"),c=n("../support"),h=n("./ArrayReader"),d=n("./StringReader"),f=n("./NodeBufferReader"),p=n("./Uint8ArrayReader");i.exports=function(x){var v=o.getTypeOf(x);return o.checkSupport(v),v!=="string"||c.uint8array?v==="nodebuffer"?new f(x):c.uint8array?new p(o.transformTo("uint8array",x)):new h(o.transformTo("array",x)):new d(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,a){var o=n("./GenericWorker"),c=n("../utils");function h(d){o.call(this,"ConvertWorker to "+d),this.destType=d}c.inherits(h,o),h.prototype.processChunk=function(d){this.push({data:c.transformTo(this.destType,d.data),meta:d.meta})},i.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,a){var o=n("./GenericWorker"),c=n("../crc32");function h(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(h,o),h.prototype.processChunk=function(d){this.streamInfo.crc32=c(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,a){var o=n("../utils"),c=n("./GenericWorker");function h(d){c.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}o.inherits(h,c),h.prototype.processChunk=function(d){if(d){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+d.data.length}c.prototype.processChunk.call(this,d)},i.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,a){var o=n("../utils"),c=n("./GenericWorker");function h(d){c.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(p){f.dataIsReady=!0,f.data=p,f.max=p&&p.length||0,f.type=o.getTypeOf(p),f.isPaused||f._tickAndRepeat()},function(p){f.error(p)})}o.inherits(h,c),h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,f);break;case"uint8array":d=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":d=this.data.slice(this.index,f)}return this.index=f,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,a){function o(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,h){return this._listeners[c].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,h){if(this._listeners[c])for(var d=0;d<this._listeners[c].length;d++)this._listeners[c][d].call(this,h)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var h=this;return c.on("data",function(d){h.processChunk(d)}),c.on("end",function(){h.end()}),c.on("error",function(d){h.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,h){return this.extraStreamInfo[c]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},i.exports=o},{}],29:[function(n,i,a){var o=n("../utils"),c=n("./ConvertWorker"),h=n("./GenericWorker"),d=n("../base64"),f=n("../support"),p=n("../external"),x=null;if(f.nodestream)try{x=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(w,_){return new p.Promise(function(k,C){var O=[],M=w._internalType,X=w._outputType,I=w._mimeType;w.on("data",function($,V){O.push($),_&&_(V)}).on("error",function($){O=[],C($)}).on("end",function(){try{var $=(function(V,B,z){switch(V){case"blob":return o.newBlob(o.transformTo("arraybuffer",B),z);case"base64":return d.encode(B);default:return o.transformTo(V,B)}})(X,(function(V,B){var z,Q=0,ct=null,L=0;for(z=0;z<B.length;z++)L+=B[z].length;switch(V){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(ct=new Uint8Array(L),z=0;z<B.length;z++)ct.set(B[z],Q),Q+=B[z].length;return ct;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+V+"'")}})(M,O),I);k($)}catch(V){C(V)}O=[]}).resume()})}function b(w,_,k){var C=_;switch(_){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=_,this._mimeType=k,o.checkSupport(C),this._worker=w.pipe(new c(C)),w.lock()}catch(O){this._worker=new h("error"),this._worker.error(O)}}b.prototype={accumulate:function(w){return v(this,w)},on:function(w,_){var k=this;return w==="data"?this._worker.on(w,function(C){_.call(k,C.data,C.meta)}):this._worker.on(w,function(){o.delay(_,arguments,k)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var o=new ArrayBuffer(0);try{a.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(o),a.blob=c.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,a){for(var o=n("./utils"),c=n("./support"),h=n("./nodejsUtils"),d=n("./stream/GenericWorker"),f=new Array(256),p=0;p<256;p++)f[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;f[254]=f[254]=1;function x(){d.call(this,"utf-8 decode"),this.leftOver=null}function v(){d.call(this,"utf-8 encode")}a.utf8encode=function(b){return c.nodebuffer?h.newBufferFrom(b,"utf-8"):(function(w){var _,k,C,O,M,X=w.length,I=0;for(O=0;O<X;O++)(64512&(k=w.charCodeAt(O)))==55296&&O+1<X&&(64512&(C=w.charCodeAt(O+1)))==56320&&(k=65536+(k-55296<<10)+(C-56320),O++),I+=k<128?1:k<2048?2:k<65536?3:4;for(_=c.uint8array?new Uint8Array(I):new Array(I),O=M=0;M<I;O++)(64512&(k=w.charCodeAt(O)))==55296&&O+1<X&&(64512&(C=w.charCodeAt(O+1)))==56320&&(k=65536+(k-55296<<10)+(C-56320),O++),k<128?_[M++]=k:(k<2048?_[M++]=192|k>>>6:(k<65536?_[M++]=224|k>>>12:(_[M++]=240|k>>>18,_[M++]=128|k>>>12&63),_[M++]=128|k>>>6&63),_[M++]=128|63&k);return _})(b)},a.utf8decode=function(b){return c.nodebuffer?o.transformTo("nodebuffer",b).toString("utf-8"):(function(w){var _,k,C,O,M=w.length,X=new Array(2*M);for(_=k=0;_<M;)if((C=w[_++])<128)X[k++]=C;else if(4<(O=f[C]))X[k++]=65533,_+=O-1;else{for(C&=O===2?31:O===3?15:7;1<O&&_<M;)C=C<<6|63&w[_++],O--;1<O?X[k++]=65533:C<65536?X[k++]=C:(C-=65536,X[k++]=55296|C>>10&1023,X[k++]=56320|1023&C)}return X.length!==k&&(X.subarray?X=X.subarray(0,k):X.length=k),o.applyFromCharCode(X)})(b=o.transformTo(c.uint8array?"uint8array":"array",b))},o.inherits(x,d),x.prototype.processChunk=function(b){var w=o.transformTo(c.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var _=w;(w=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),w.set(_,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var k=(function(O,M){var X;for((M=M||O.length)>O.length&&(M=O.length),X=M-1;0<=X&&(192&O[X])==128;)X--;return X<0||X===0?M:X+f[O[X]]>M?X:M})(w),C=w;k!==w.length&&(c.uint8array?(C=w.subarray(0,k),this.leftOver=w.subarray(k,w.length)):(C=w.slice(0,k),this.leftOver=w.slice(k,w.length))),this.push({data:a.utf8decode(C),meta:b.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=x,o.inherits(v,d),v.prototype.processChunk=function(b){this.push({data:a.utf8encode(b.data),meta:b.meta})},a.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,a){var o=n("./support"),c=n("./base64"),h=n("./nodejsUtils"),d=n("./external");function f(_){return _}function p(_,k){for(var C=0;C<_.length;++C)k[C]=255&_.charCodeAt(C);return k}n("setimmediate"),a.newBlob=function(_,k){a.checkSupport("blob");try{return new Blob([_],{type:k})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(_),C.getBlob(k)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(_,k,C){var O=[],M=0,X=_.length;if(X<=C)return String.fromCharCode.apply(null,_);for(;M<X;)k==="array"||k==="nodebuffer"?O.push(String.fromCharCode.apply(null,_.slice(M,Math.min(M+C,X)))):O.push(String.fromCharCode.apply(null,_.subarray(M,Math.min(M+C,X)))),M+=C;return O.join("")},stringifyByChar:function(_){for(var k="",C=0;C<_.length;C++)k+=String.fromCharCode(_[C]);return k},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}})()}};function v(_){var k=65536,C=a.getTypeOf(_),O=!0;if(C==="uint8array"?O=x.applyCanBeUsed.uint8array:C==="nodebuffer"&&(O=x.applyCanBeUsed.nodebuffer),O)for(;1<k;)try{return x.stringifyByChunk(_,C,k)}catch{k=Math.floor(k/2)}return x.stringifyByChar(_)}function b(_,k){for(var C=0;C<_.length;C++)k[C]=_[C];return k}a.applyFromCharCode=v;var w={};w.string={string:f,array:function(_){return p(_,new Array(_.length))},arraybuffer:function(_){return w.string.uint8array(_).buffer},uint8array:function(_){return p(_,new Uint8Array(_.length))},nodebuffer:function(_){return p(_,h.allocBuffer(_.length))}},w.array={string:v,array:f,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return h.newBufferFrom(_)}},w.arraybuffer={string:function(_){return v(new Uint8Array(_))},array:function(_){return b(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:f,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return h.newBufferFrom(new Uint8Array(_))}},w.uint8array={string:v,array:function(_){return b(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:f,nodebuffer:function(_){return h.newBufferFrom(_)}},w.nodebuffer={string:v,array:function(_){return b(_,new Array(_.length))},arraybuffer:function(_){return w.nodebuffer.uint8array(_).buffer},uint8array:function(_){return b(_,new Uint8Array(_.length))},nodebuffer:f},a.transformTo=function(_,k){if(k=k||"",!_)return k;a.checkSupport(_);var C=a.getTypeOf(k);return w[C][_](k)},a.resolve=function(_){for(var k=_.split("/"),C=[],O=0;O<k.length;O++){var M=k[O];M==="."||M===""&&O!==0&&O!==k.length-1||(M===".."?C.pop():C.push(M))}return C.join("/")},a.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":o.nodebuffer&&h.isBuffer(_)?"nodebuffer":o.uint8array&&_ instanceof Uint8Array?"uint8array":o.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(_){if(!o[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(_){var k,C,O="";for(C=0;C<(_||"").length;C++)O+="\\x"+((k=_.charCodeAt(C))<16?"0":"")+k.toString(16).toUpperCase();return O},a.delay=function(_,k,C){setImmediate(function(){_.apply(C||null,k||[])})},a.inherits=function(_,k){function C(){}C.prototype=k.prototype,_.prototype=new C},a.extend=function(){var _,k,C={};for(_=0;_<arguments.length;_++)for(k in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],k)&&C[k]===void 0&&(C[k]=arguments[_][k]);return C},a.prepareContent=function(_,k,C,O,M){return d.Promise.resolve(k).then(function(X){return o.blob&&(X instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(X))!==-1)&&typeof FileReader<"u"?new d.Promise(function(I,$){var V=new FileReader;V.onload=function(B){I(B.target.result)},V.onerror=function(B){$(B.target.error)},V.readAsArrayBuffer(X)}):X}).then(function(X){var I=a.getTypeOf(X);return I?(I==="arraybuffer"?X=a.transformTo("uint8array",X):I==="string"&&(M?X=c.decode(X):C&&O!==!0&&(X=(function($){return p($,o.uint8array?new Uint8Array($.length):new Array($.length))})(X))),X):d.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,a){var o=n("./reader/readerFor"),c=n("./utils"),h=n("./signature"),d=n("./zipEntry"),f=n("./support");function p(x){this.files=[],this.loadOptions=x}p.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(v)+", expected "+c.pretty(x)+")")}},isSignature:function(x,v){var b=this.reader.index;this.reader.setIndex(x);var w=this.reader.readString(4)===v;return this.reader.setIndex(b),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),v=f.uint8array?"uint8array":"array",b=c.transformTo(v,x);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,v,b,w=this.zip64EndOfCentralSize-44;0<w;)x=this.reader.readInt(2),v=this.reader.readInt(4),b=this.reader.readData(v),this.zip64ExtensibleData[x]={id:x,length:v,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,v;for(x=0;x<this.files.length;x++)v=this.files[x],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(x=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var v=x;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var w=v-b;if(0<w)this.isSignature(v,h.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(x){this.reader=o(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,a){var o=n("./reader/readerFor"),c=n("./utils"),h=n("./compressedObject"),d=n("./crc32"),f=n("./utf8"),p=n("./compressions"),x=n("./support");function v(b,w){this.options=b,this.loadOptions=w}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var w,_;if(b.skip(22),this.fileNameLength=b.readInt(2),_=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(k){for(var C in p)if(Object.prototype.hasOwnProperty.call(p,C)&&p[C].magic===k)return p[C];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,w,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var w=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(w),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=o(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var w,_,k,C=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<C;)w=b.readInt(2),_=b.readInt(2),k=b.readData(_),this.extraFields[w]={id:w,length:_,value:k};b.setIndex(C)},handleUTF8:function(){var b=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var _=c.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var C=c.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var w=o(b.value);return w.readInt(1)!==1||d(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var w=o(b.value);return w.readInt(1)!==1||d(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(b.length-5))}return null}},i.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,a){function o(w,_,k){this.name=w,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=_,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var c=n("./stream/StreamHelper"),h=n("./stream/DataWorker"),d=n("./utf8"),f=n("./compressedObject"),p=n("./stream/GenericWorker");o.prototype={internalStream:function(w){var _=null,k="string";try{if(!w)throw new Error("No output type specified.");var C=(k=w.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),_=this._decompressWorker();var O=!this._dataBinary;O&&!C&&(_=_.pipe(new d.Utf8EncodeWorker)),!O&&C&&(_=_.pipe(new d.Utf8DecodeWorker))}catch(M){(_=new p("error")).error(M)}return new c(_,k,"")},async:function(w,_){return this.internalStream(w).accumulate(_)},nodeStream:function(w,_){return this.internalStream(w||"nodebuffer").toNodejsStream(_)},_compressWorker:function(w,_){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new d.Utf8EncodeWorker)),f.createWorkerFrom(k,w,_)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof p?this._data:new h(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<x.length;b++)o.prototype[x[b]]=v;i.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,a){(function(o){var c,h,d=o.MutationObserver||o.WebKitMutationObserver;if(d){var f=0,p=new d(w),x=o.document.createTextNode("");p.observe(x,{characterData:!0}),c=function(){x.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)c="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var _=o.document.createElement("script");_.onreadystatechange=function(){w(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},o.document.documentElement.appendChild(_)}:function(){setTimeout(w,0)};else{var v=new o.MessageChannel;v.port1.onmessage=w,c=function(){v.port2.postMessage(0)}}var b=[];function w(){var _,k;h=!0;for(var C=b.length;C;){for(k=b,b=[],_=-1;++_<C;)k[_]();C=b.length}h=!1}i.exports=function(_){b.push(_)!==1||h||c()}}).call(this,typeof Ei<"u"?Ei:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,a){var o=n("immediate");function c(){}var h={},d=["REJECTED"],f=["FULFILLED"],p=["PENDING"];function x(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,C!==c&&_(this,C)}function v(C,O,M){this.promise=C,typeof O=="function"&&(this.onFulfilled=O,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function b(C,O,M){o(function(){var X;try{X=O(M)}catch(I){return h.reject(C,I)}X===C?h.reject(C,new TypeError("Cannot resolve promise with itself")):h.resolve(C,X)})}function w(C){var O=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof O=="function")return function(){O.apply(C,arguments)}}function _(C,O){var M=!1;function X(V){M||(M=!0,h.reject(C,V))}function I(V){M||(M=!0,h.resolve(C,V))}var $=k(function(){O(I,X)});$.status==="error"&&X($.value)}function k(C,O){var M={};try{M.value=C(O),M.status="success"}catch(X){M.status="error",M.value=X}return M}(i.exports=x).prototype.finally=function(C){if(typeof C!="function")return this;var O=this.constructor;return this.then(function(M){return O.resolve(C()).then(function(){return M})},function(M){return O.resolve(C()).then(function(){throw M})})},x.prototype.catch=function(C){return this.then(null,C)},x.prototype.then=function(C,O){if(typeof C!="function"&&this.state===f||typeof O!="function"&&this.state===d)return this;var M=new this.constructor(c);return this.state!==p?b(M,this.state===f?C:O,this.outcome):this.queue.push(new v(M,C,O)),M},v.prototype.callFulfilled=function(C){h.resolve(this.promise,C)},v.prototype.otherCallFulfilled=function(C){b(this.promise,this.onFulfilled,C)},v.prototype.callRejected=function(C){h.reject(this.promise,C)},v.prototype.otherCallRejected=function(C){b(this.promise,this.onRejected,C)},h.resolve=function(C,O){var M=k(w,O);if(M.status==="error")return h.reject(C,M.value);var X=M.value;if(X)_(C,X);else{C.state=f,C.outcome=O;for(var I=-1,$=C.queue.length;++I<$;)C.queue[I].callFulfilled(O)}return C},h.reject=function(C,O){C.state=d,C.outcome=O;for(var M=-1,X=C.queue.length;++M<X;)C.queue[M].callRejected(O);return C},x.resolve=function(C){return C instanceof this?C:h.resolve(new this(c),C)},x.reject=function(C){var O=new this(c);return h.reject(O,C)},x.all=function(C){var O=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=C.length,X=!1;if(!M)return this.resolve([]);for(var I=new Array(M),$=0,V=-1,B=new this(c);++V<M;)z(C[V],V);return B;function z(Q,ct){O.resolve(Q).then(function(L){I[ct]=L,++$!==M||X||(X=!0,h.resolve(B,I))},function(L){X||(X=!0,h.reject(B,L))})}},x.race=function(C){var O=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=C.length,X=!1;if(!M)return this.resolve([]);for(var I=-1,$=new this(c);++I<M;)V=C[I],O.resolve(V).then(function(B){X||(X=!0,h.resolve($,B))},function(B){X||(X=!0,h.reject($,B))});var V;return $}},{immediate:36}],38:[function(n,i,a){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,a){var o=n("./zlib/deflate"),c=n("./utils/common"),h=n("./utils/strings"),d=n("./zlib/messages"),f=n("./zlib/zstream"),p=Object.prototype.toString,x=0,v=-1,b=0,w=8;function _(C){if(!(this instanceof _))return new _(C);this.options=c.assign({level:v,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},C||{});var O=this.options;O.raw&&0<O.windowBits?O.windowBits=-O.windowBits:O.gzip&&0<O.windowBits&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var M=o.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(M!==x)throw new Error(d[M]);if(O.header&&o.deflateSetHeader(this.strm,O.header),O.dictionary){var X;if(X=typeof O.dictionary=="string"?h.string2buf(O.dictionary):p.call(O.dictionary)==="[object ArrayBuffer]"?new Uint8Array(O.dictionary):O.dictionary,(M=o.deflateSetDictionary(this.strm,X))!==x)throw new Error(d[M]);this._dict_set=!0}}function k(C,O){var M=new _(O);if(M.push(C,!0),M.err)throw M.msg||d[M.err];return M.result}_.prototype.push=function(C,O){var M,X,I=this.strm,$=this.options.chunkSize;if(this.ended)return!1;X=O===~~O?O:O===!0?4:0,typeof C=="string"?I.input=h.string2buf(C):p.call(C)==="[object ArrayBuffer]"?I.input=new Uint8Array(C):I.input=C,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new c.Buf8($),I.next_out=0,I.avail_out=$),(M=o.deflate(I,X))!==1&&M!==x)return this.onEnd(M),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||X!==4&&X!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(c.shrinkBuf(I.output,I.next_out))):this.onData(c.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&M!==1);return X===4?(M=o.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===x):X!==2||(this.onEnd(x),!(I.avail_out=0))},_.prototype.onData=function(C){this.chunks.push(C)},_.prototype.onEnd=function(C){C===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},a.Deflate=_,a.deflate=k,a.deflateRaw=function(C,O){return(O=O||{}).raw=!0,k(C,O)},a.gzip=function(C,O){return(O=O||{}).gzip=!0,k(C,O)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,a){var o=n("./zlib/inflate"),c=n("./utils/common"),h=n("./utils/strings"),d=n("./zlib/constants"),f=n("./zlib/messages"),p=n("./zlib/zstream"),x=n("./zlib/gzheader"),v=Object.prototype.toString;function b(_){if(!(this instanceof b))return new b(_);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},_||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||_&&_.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&(15&k.windowBits)==0&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var C=o.inflateInit2(this.strm,k.windowBits);if(C!==d.Z_OK)throw new Error(f[C]);this.header=new x,o.inflateGetHeader(this.strm,this.header)}function w(_,k){var C=new b(k);if(C.push(_,!0),C.err)throw C.msg||f[C.err];return C.result}b.prototype.push=function(_,k){var C,O,M,X,I,$,V=this.strm,B=this.options.chunkSize,z=this.options.dictionary,Q=!1;if(this.ended)return!1;O=k===~~k?k:k===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof _=="string"?V.input=h.binstring2buf(_):v.call(_)==="[object ArrayBuffer]"?V.input=new Uint8Array(_):V.input=_,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new c.Buf8(B),V.next_out=0,V.avail_out=B),(C=o.inflate(V,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&z&&($=typeof z=="string"?h.string2buf(z):v.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,C=o.inflateSetDictionary(this.strm,$)),C===d.Z_BUF_ERROR&&Q===!0&&(C=d.Z_OK,Q=!1),C!==d.Z_STREAM_END&&C!==d.Z_OK)return this.onEnd(C),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&C!==d.Z_STREAM_END&&(V.avail_in!==0||O!==d.Z_FINISH&&O!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=h.utf8border(V.output,V.next_out),X=V.next_out-M,I=h.buf2string(V.output,M),V.next_out=X,V.avail_out=B-X,X&&c.arraySet(V.output,V.output,M,X,0),this.onData(I)):this.onData(c.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(Q=!0)}while((0<V.avail_in||V.avail_out===0)&&C!==d.Z_STREAM_END);return C===d.Z_STREAM_END&&(O=d.Z_FINISH),O===d.Z_FINISH?(C=o.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===d.Z_OK):O!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(V.avail_out=0))},b.prototype.onData=function(_){this.chunks.push(_)},b.prototype.onEnd=function(_){_===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},a.Inflate=b,a.inflate=w,a.inflateRaw=function(_,k){return(k=k||{}).raw=!0,w(_,k)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(d){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var p=f.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var x in p)p.hasOwnProperty(x)&&(d[x]=p[x])}}return d},a.shrinkBuf=function(d,f){return d.length===f?d:d.subarray?d.subarray(0,f):(d.length=f,d)};var c={arraySet:function(d,f,p,x,v){if(f.subarray&&d.subarray)d.set(f.subarray(p,p+x),v);else for(var b=0;b<x;b++)d[v+b]=f[p+b]},flattenChunks:function(d){var f,p,x,v,b,w;for(f=x=0,p=d.length;f<p;f++)x+=d[f].length;for(w=new Uint8Array(x),f=v=0,p=d.length;f<p;f++)b=d[f],w.set(b,v),v+=b.length;return w}},h={arraySet:function(d,f,p,x,v){for(var b=0;b<x;b++)d[v+b]=f[p+b]},flattenChunks:function(d){return[].concat.apply([],d)}};a.setTyped=function(d){d?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,c)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,h))},a.setTyped(o)},{}],42:[function(n,i,a){var o=n("./common"),c=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var d=new o.Buf8(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function p(x,v){if(v<65537&&(x.subarray&&h||!x.subarray&&c))return String.fromCharCode.apply(null,o.shrinkBuf(x,v));for(var b="",w=0;w<v;w++)b+=String.fromCharCode(x[w]);return b}d[254]=d[254]=1,a.string2buf=function(x){var v,b,w,_,k,C=x.length,O=0;for(_=0;_<C;_++)(64512&(b=x.charCodeAt(_)))==55296&&_+1<C&&(64512&(w=x.charCodeAt(_+1)))==56320&&(b=65536+(b-55296<<10)+(w-56320),_++),O+=b<128?1:b<2048?2:b<65536?3:4;for(v=new o.Buf8(O),_=k=0;k<O;_++)(64512&(b=x.charCodeAt(_)))==55296&&_+1<C&&(64512&(w=x.charCodeAt(_+1)))==56320&&(b=65536+(b-55296<<10)+(w-56320),_++),b<128?v[k++]=b:(b<2048?v[k++]=192|b>>>6:(b<65536?v[k++]=224|b>>>12:(v[k++]=240|b>>>18,v[k++]=128|b>>>12&63),v[k++]=128|b>>>6&63),v[k++]=128|63&b);return v},a.buf2binstring=function(x){return p(x,x.length)},a.binstring2buf=function(x){for(var v=new o.Buf8(x.length),b=0,w=v.length;b<w;b++)v[b]=x.charCodeAt(b);return v},a.buf2string=function(x,v){var b,w,_,k,C=v||x.length,O=new Array(2*C);for(b=w=0;b<C;)if((_=x[b++])<128)O[w++]=_;else if(4<(k=d[_]))O[w++]=65533,b+=k-1;else{for(_&=k===2?31:k===3?15:7;1<k&&b<C;)_=_<<6|63&x[b++],k--;1<k?O[w++]=65533:_<65536?O[w++]=_:(_-=65536,O[w++]=55296|_>>10&1023,O[w++]=56320|1023&_)}return p(O,w)},a.utf8border=function(x,v){var b;for((v=v||x.length)>x.length&&(v=x.length),b=v-1;0<=b&&(192&x[b])==128;)b--;return b<0||b===0?v:b+d[x[b]]>v?b:v}},{"./common":41}],43:[function(n,i,a){i.exports=function(o,c,h,d){for(var f=65535&o|0,p=o>>>16&65535|0,x=0;h!==0;){for(h-=x=2e3<h?2e3:h;p=p+(f=f+c[d++]|0)|0,--x;);f%=65521,p%=65521}return f|p<<16|0}},{}],44:[function(n,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,a){var o=(function(){for(var c,h=[],d=0;d<256;d++){c=d;for(var f=0;f<8;f++)c=1&c?3988292384^c>>>1:c>>>1;h[d]=c}return h})();i.exports=function(c,h,d,f){var p=o,x=f+d;c^=-1;for(var v=f;v<x;v++)c=c>>>8^p[255&(c^h[v])];return-1^c}},{}],46:[function(n,i,a){var o,c=n("../utils/common"),h=n("./trees"),d=n("./adler32"),f=n("./crc32"),p=n("./messages"),x=0,v=4,b=0,w=-2,_=-1,k=4,C=2,O=8,M=9,X=286,I=30,$=19,V=2*X+1,B=15,z=3,Q=258,ct=Q+z+1,L=42,P=113,E=1,q=2,K=3,Y=4;function rt(S,F){return S.msg=p[F],F}function et(S){return(S<<1)-(4<S?9:0)}function pt(S){for(var F=S.length;0<=--F;)S[F]=0}function A(S){var F=S.state,H=F.pending;H>S.avail_out&&(H=S.avail_out),H!==0&&(c.arraySet(S.output,F.pending_buf,F.pending_out,H,S.next_out),S.next_out+=H,F.pending_out+=H,S.total_out+=H,S.avail_out-=H,F.pending-=H,F.pending===0&&(F.pending_out=0))}function j(S,F){h._tr_flush_block(S,0<=S.block_start?S.block_start:-1,S.strstart-S.block_start,F),S.block_start=S.strstart,A(S.strm)}function R(S,F){S.pending_buf[S.pending++]=F}function Z(S,F){S.pending_buf[S.pending++]=F>>>8&255,S.pending_buf[S.pending++]=255&F}function W(S,F){var H,N,D=S.max_chain_length,G=S.strstart,ut=S.prev_length,yt=S.nice_match,st=S.strstart>S.w_size-ct?S.strstart-(S.w_size-ct):0,Et=S.window,Tt=S.w_mask,Nt=S.prev,Dt=S.strstart+Q,Yt=Et[G+ut-1],Bt=Et[G+ut];S.prev_length>=S.good_match&&(D>>=2),yt>S.lookahead&&(yt=S.lookahead);do if(Et[(H=F)+ut]===Bt&&Et[H+ut-1]===Yt&&Et[H]===Et[G]&&Et[++H]===Et[G+1]){G+=2,H++;do;while(Et[++G]===Et[++H]&&Et[++G]===Et[++H]&&Et[++G]===Et[++H]&&Et[++G]===Et[++H]&&Et[++G]===Et[++H]&&Et[++G]===Et[++H]&&Et[++G]===Et[++H]&&Et[++G]===Et[++H]&&G<Dt);if(N=Q-(Dt-G),G=Dt-Q,ut<N){if(S.match_start=F,yt<=(ut=N))break;Yt=Et[G+ut-1],Bt=Et[G+ut]}}while((F=Nt[F&Tt])>st&&--D!=0);return ut<=S.lookahead?ut:S.lookahead}function _t(S){var F,H,N,D,G,ut,yt,st,Et,Tt,Nt=S.w_size;do{if(D=S.window_size-S.lookahead-S.strstart,S.strstart>=Nt+(Nt-ct)){for(c.arraySet(S.window,S.window,Nt,Nt,0),S.match_start-=Nt,S.strstart-=Nt,S.block_start-=Nt,F=H=S.hash_size;N=S.head[--F],S.head[F]=Nt<=N?N-Nt:0,--H;);for(F=H=Nt;N=S.prev[--F],S.prev[F]=Nt<=N?N-Nt:0,--H;);D+=Nt}if(S.strm.avail_in===0)break;if(ut=S.strm,yt=S.window,st=S.strstart+S.lookahead,Et=D,Tt=void 0,Tt=ut.avail_in,Et<Tt&&(Tt=Et),H=Tt===0?0:(ut.avail_in-=Tt,c.arraySet(yt,ut.input,ut.next_in,Tt,st),ut.state.wrap===1?ut.adler=d(ut.adler,yt,Tt,st):ut.state.wrap===2&&(ut.adler=f(ut.adler,yt,Tt,st)),ut.next_in+=Tt,ut.total_in+=Tt,Tt),S.lookahead+=H,S.lookahead+S.insert>=z)for(G=S.strstart-S.insert,S.ins_h=S.window[G],S.ins_h=(S.ins_h<<S.hash_shift^S.window[G+1])&S.hash_mask;S.insert&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[G+z-1])&S.hash_mask,S.prev[G&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=G,G++,S.insert--,!(S.lookahead+S.insert<z)););}while(S.lookahead<ct&&S.strm.avail_in!==0)}function xt(S,F){for(var H,N;;){if(S.lookahead<ct){if(_t(S),S.lookahead<ct&&F===x)return E;if(S.lookahead===0)break}if(H=0,S.lookahead>=z&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+z-1])&S.hash_mask,H=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),H!==0&&S.strstart-H<=S.w_size-ct&&(S.match_length=W(S,H)),S.match_length>=z)if(N=h._tr_tally(S,S.strstart-S.match_start,S.match_length-z),S.lookahead-=S.match_length,S.match_length<=S.max_lazy_match&&S.lookahead>=z){for(S.match_length--;S.strstart++,S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+z-1])&S.hash_mask,H=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart,--S.match_length!=0;);S.strstart++}else S.strstart+=S.match_length,S.match_length=0,S.ins_h=S.window[S.strstart],S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+1])&S.hash_mask;else N=h._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++;if(N&&(j(S,!1),S.strm.avail_out===0))return E}return S.insert=S.strstart<z-1?S.strstart:z-1,F===v?(j(S,!0),S.strm.avail_out===0?K:Y):S.last_lit&&(j(S,!1),S.strm.avail_out===0)?E:q}function bt(S,F){for(var H,N,D;;){if(S.lookahead<ct){if(_t(S),S.lookahead<ct&&F===x)return E;if(S.lookahead===0)break}if(H=0,S.lookahead>=z&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+z-1])&S.hash_mask,H=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),S.prev_length=S.match_length,S.prev_match=S.match_start,S.match_length=z-1,H!==0&&S.prev_length<S.max_lazy_match&&S.strstart-H<=S.w_size-ct&&(S.match_length=W(S,H),S.match_length<=5&&(S.strategy===1||S.match_length===z&&4096<S.strstart-S.match_start)&&(S.match_length=z-1)),S.prev_length>=z&&S.match_length<=S.prev_length){for(D=S.strstart+S.lookahead-z,N=h._tr_tally(S,S.strstart-1-S.prev_match,S.prev_length-z),S.lookahead-=S.prev_length-1,S.prev_length-=2;++S.strstart<=D&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+z-1])&S.hash_mask,H=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),--S.prev_length!=0;);if(S.match_available=0,S.match_length=z-1,S.strstart++,N&&(j(S,!1),S.strm.avail_out===0))return E}else if(S.match_available){if((N=h._tr_tally(S,0,S.window[S.strstart-1]))&&j(S,!1),S.strstart++,S.lookahead--,S.strm.avail_out===0)return E}else S.match_available=1,S.strstart++,S.lookahead--}return S.match_available&&(N=h._tr_tally(S,0,S.window[S.strstart-1]),S.match_available=0),S.insert=S.strstart<z-1?S.strstart:z-1,F===v?(j(S,!0),S.strm.avail_out===0?K:Y):S.last_lit&&(j(S,!1),S.strm.avail_out===0)?E:q}function Ct(S,F,H,N,D){this.good_length=S,this.max_lazy=F,this.nice_length=H,this.max_chain=N,this.func=D}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*V),this.dyn_dtree=new c.Buf16(2*(2*I+1)),this.bl_tree=new c.Buf16(2*(2*$+1)),pt(this.dyn_ltree),pt(this.dyn_dtree),pt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(B+1),this.heap=new c.Buf16(2*X+1),pt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*X+1),pt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function St(S){var F;return S&&S.state?(S.total_in=S.total_out=0,S.data_type=C,(F=S.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?L:P,S.adler=F.wrap===2?0:1,F.last_flush=x,h._tr_init(F),b):rt(S,w)}function At(S){var F=St(S);return F===b&&(function(H){H.window_size=2*H.w_size,pt(H.head),H.max_lazy_match=o[H.level].max_lazy,H.good_match=o[H.level].good_length,H.nice_match=o[H.level].nice_length,H.max_chain_length=o[H.level].max_chain,H.strstart=0,H.block_start=0,H.lookahead=0,H.insert=0,H.match_length=H.prev_length=z-1,H.match_available=0,H.ins_h=0})(S.state),F}function dt(S,F,H,N,D,G){if(!S)return w;var ut=1;if(F===_&&(F=6),N<0?(ut=0,N=-N):15<N&&(ut=2,N-=16),D<1||M<D||H!==O||N<8||15<N||F<0||9<F||G<0||k<G)return rt(S,w);N===8&&(N=9);var yt=new ot;return(S.state=yt).strm=S,yt.wrap=ut,yt.gzhead=null,yt.w_bits=N,yt.w_size=1<<yt.w_bits,yt.w_mask=yt.w_size-1,yt.hash_bits=D+7,yt.hash_size=1<<yt.hash_bits,yt.hash_mask=yt.hash_size-1,yt.hash_shift=~~((yt.hash_bits+z-1)/z),yt.window=new c.Buf8(2*yt.w_size),yt.head=new c.Buf16(yt.hash_size),yt.prev=new c.Buf16(yt.w_size),yt.lit_bufsize=1<<D+6,yt.pending_buf_size=4*yt.lit_bufsize,yt.pending_buf=new c.Buf8(yt.pending_buf_size),yt.d_buf=1*yt.lit_bufsize,yt.l_buf=3*yt.lit_bufsize,yt.level=F,yt.strategy=G,yt.method=H,At(S)}o=[new Ct(0,0,0,0,function(S,F){var H=65535;for(H>S.pending_buf_size-5&&(H=S.pending_buf_size-5);;){if(S.lookahead<=1){if(_t(S),S.lookahead===0&&F===x)return E;if(S.lookahead===0)break}S.strstart+=S.lookahead,S.lookahead=0;var N=S.block_start+H;if((S.strstart===0||S.strstart>=N)&&(S.lookahead=S.strstart-N,S.strstart=N,j(S,!1),S.strm.avail_out===0)||S.strstart-S.block_start>=S.w_size-ct&&(j(S,!1),S.strm.avail_out===0))return E}return S.insert=0,F===v?(j(S,!0),S.strm.avail_out===0?K:Y):(S.strstart>S.block_start&&(j(S,!1),S.strm.avail_out),E)}),new Ct(4,4,8,4,xt),new Ct(4,5,16,8,xt),new Ct(4,6,32,32,xt),new Ct(4,4,16,16,bt),new Ct(8,16,32,32,bt),new Ct(8,16,128,128,bt),new Ct(8,32,128,256,bt),new Ct(32,128,258,1024,bt),new Ct(32,258,258,4096,bt)],a.deflateInit=function(S,F){return dt(S,F,O,15,8,0)},a.deflateInit2=dt,a.deflateReset=At,a.deflateResetKeep=St,a.deflateSetHeader=function(S,F){return S&&S.state?S.state.wrap!==2?w:(S.state.gzhead=F,b):w},a.deflate=function(S,F){var H,N,D,G;if(!S||!S.state||5<F||F<0)return S?rt(S,w):w;if(N=S.state,!S.output||!S.input&&S.avail_in!==0||N.status===666&&F!==v)return rt(S,S.avail_out===0?-5:w);if(N.strm=S,H=N.last_flush,N.last_flush=F,N.status===L)if(N.wrap===2)S.adler=0,R(N,31),R(N,139),R(N,8),N.gzhead?(R(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),R(N,255&N.gzhead.time),R(N,N.gzhead.time>>8&255),R(N,N.gzhead.time>>16&255),R(N,N.gzhead.time>>24&255),R(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),R(N,255&N.gzhead.os),N.gzhead.extra&&N.gzhead.extra.length&&(R(N,255&N.gzhead.extra.length),R(N,N.gzhead.extra.length>>8&255)),N.gzhead.hcrc&&(S.adler=f(S.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=69):(R(N,0),R(N,0),R(N,0),R(N,0),R(N,0),R(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),R(N,3),N.status=P);else{var ut=O+(N.w_bits-8<<4)<<8;ut|=(2<=N.strategy||N.level<2?0:N.level<6?1:N.level===6?2:3)<<6,N.strstart!==0&&(ut|=32),ut+=31-ut%31,N.status=P,Z(N,ut),N.strstart!==0&&(Z(N,S.adler>>>16),Z(N,65535&S.adler)),S.adler=1}if(N.status===69)if(N.gzhead.extra){for(D=N.pending;N.gzindex<(65535&N.gzhead.extra.length)&&(N.pending!==N.pending_buf_size||(N.gzhead.hcrc&&N.pending>D&&(S.adler=f(S.adler,N.pending_buf,N.pending-D,D)),A(S),D=N.pending,N.pending!==N.pending_buf_size));)R(N,255&N.gzhead.extra[N.gzindex]),N.gzindex++;N.gzhead.hcrc&&N.pending>D&&(S.adler=f(S.adler,N.pending_buf,N.pending-D,D)),N.gzindex===N.gzhead.extra.length&&(N.gzindex=0,N.status=73)}else N.status=73;if(N.status===73)if(N.gzhead.name){D=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>D&&(S.adler=f(S.adler,N.pending_buf,N.pending-D,D)),A(S),D=N.pending,N.pending===N.pending_buf_size)){G=1;break}G=N.gzindex<N.gzhead.name.length?255&N.gzhead.name.charCodeAt(N.gzindex++):0,R(N,G)}while(G!==0);N.gzhead.hcrc&&N.pending>D&&(S.adler=f(S.adler,N.pending_buf,N.pending-D,D)),G===0&&(N.gzindex=0,N.status=91)}else N.status=91;if(N.status===91)if(N.gzhead.comment){D=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>D&&(S.adler=f(S.adler,N.pending_buf,N.pending-D,D)),A(S),D=N.pending,N.pending===N.pending_buf_size)){G=1;break}G=N.gzindex<N.gzhead.comment.length?255&N.gzhead.comment.charCodeAt(N.gzindex++):0,R(N,G)}while(G!==0);N.gzhead.hcrc&&N.pending>D&&(S.adler=f(S.adler,N.pending_buf,N.pending-D,D)),G===0&&(N.status=103)}else N.status=103;if(N.status===103&&(N.gzhead.hcrc?(N.pending+2>N.pending_buf_size&&A(S),N.pending+2<=N.pending_buf_size&&(R(N,255&S.adler),R(N,S.adler>>8&255),S.adler=0,N.status=P)):N.status=P),N.pending!==0){if(A(S),S.avail_out===0)return N.last_flush=-1,b}else if(S.avail_in===0&&et(F)<=et(H)&&F!==v)return rt(S,-5);if(N.status===666&&S.avail_in!==0)return rt(S,-5);if(S.avail_in!==0||N.lookahead!==0||F!==x&&N.status!==666){var yt=N.strategy===2?(function(st,Et){for(var Tt;;){if(st.lookahead===0&&(_t(st),st.lookahead===0)){if(Et===x)return E;break}if(st.match_length=0,Tt=h._tr_tally(st,0,st.window[st.strstart]),st.lookahead--,st.strstart++,Tt&&(j(st,!1),st.strm.avail_out===0))return E}return st.insert=0,Et===v?(j(st,!0),st.strm.avail_out===0?K:Y):st.last_lit&&(j(st,!1),st.strm.avail_out===0)?E:q})(N,F):N.strategy===3?(function(st,Et){for(var Tt,Nt,Dt,Yt,Bt=st.window;;){if(st.lookahead<=Q){if(_t(st),st.lookahead<=Q&&Et===x)return E;if(st.lookahead===0)break}if(st.match_length=0,st.lookahead>=z&&0<st.strstart&&(Nt=Bt[Dt=st.strstart-1])===Bt[++Dt]&&Nt===Bt[++Dt]&&Nt===Bt[++Dt]){Yt=st.strstart+Q;do;while(Nt===Bt[++Dt]&&Nt===Bt[++Dt]&&Nt===Bt[++Dt]&&Nt===Bt[++Dt]&&Nt===Bt[++Dt]&&Nt===Bt[++Dt]&&Nt===Bt[++Dt]&&Nt===Bt[++Dt]&&Dt<Yt);st.match_length=Q-(Yt-Dt),st.match_length>st.lookahead&&(st.match_length=st.lookahead)}if(st.match_length>=z?(Tt=h._tr_tally(st,1,st.match_length-z),st.lookahead-=st.match_length,st.strstart+=st.match_length,st.match_length=0):(Tt=h._tr_tally(st,0,st.window[st.strstart]),st.lookahead--,st.strstart++),Tt&&(j(st,!1),st.strm.avail_out===0))return E}return st.insert=0,Et===v?(j(st,!0),st.strm.avail_out===0?K:Y):st.last_lit&&(j(st,!1),st.strm.avail_out===0)?E:q})(N,F):o[N.level].func(N,F);if(yt!==K&&yt!==Y||(N.status=666),yt===E||yt===K)return S.avail_out===0&&(N.last_flush=-1),b;if(yt===q&&(F===1?h._tr_align(N):F!==5&&(h._tr_stored_block(N,0,0,!1),F===3&&(pt(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),A(S),S.avail_out===0))return N.last_flush=-1,b}return F!==v?b:N.wrap<=0?1:(N.wrap===2?(R(N,255&S.adler),R(N,S.adler>>8&255),R(N,S.adler>>16&255),R(N,S.adler>>24&255),R(N,255&S.total_in),R(N,S.total_in>>8&255),R(N,S.total_in>>16&255),R(N,S.total_in>>24&255)):(Z(N,S.adler>>>16),Z(N,65535&S.adler)),A(S),0<N.wrap&&(N.wrap=-N.wrap),N.pending!==0?b:1)},a.deflateEnd=function(S){var F;return S&&S.state?(F=S.state.status)!==L&&F!==69&&F!==73&&F!==91&&F!==103&&F!==P&&F!==666?rt(S,w):(S.state=null,F===P?rt(S,-3):b):w},a.deflateSetDictionary=function(S,F){var H,N,D,G,ut,yt,st,Et,Tt=F.length;if(!S||!S.state||(G=(H=S.state).wrap)===2||G===1&&H.status!==L||H.lookahead)return w;for(G===1&&(S.adler=d(S.adler,F,Tt,0)),H.wrap=0,Tt>=H.w_size&&(G===0&&(pt(H.head),H.strstart=0,H.block_start=0,H.insert=0),Et=new c.Buf8(H.w_size),c.arraySet(Et,F,Tt-H.w_size,H.w_size,0),F=Et,Tt=H.w_size),ut=S.avail_in,yt=S.next_in,st=S.input,S.avail_in=Tt,S.next_in=0,S.input=F,_t(H);H.lookahead>=z;){for(N=H.strstart,D=H.lookahead-(z-1);H.ins_h=(H.ins_h<<H.hash_shift^H.window[N+z-1])&H.hash_mask,H.prev[N&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=N,N++,--D;);H.strstart=N,H.lookahead=z-1,_t(H)}return H.strstart+=H.lookahead,H.block_start=H.strstart,H.insert=H.lookahead,H.lookahead=0,H.match_length=H.prev_length=z-1,H.match_available=0,S.next_in=yt,S.input=st,S.avail_in=ut,H.wrap=G,b},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,a){i.exports=function(o,c){var h,d,f,p,x,v,b,w,_,k,C,O,M,X,I,$,V,B,z,Q,ct,L,P,E,q;h=o.state,d=o.next_in,E=o.input,f=d+(o.avail_in-5),p=o.next_out,q=o.output,x=p-(c-o.avail_out),v=p+(o.avail_out-257),b=h.dmax,w=h.wsize,_=h.whave,k=h.wnext,C=h.window,O=h.hold,M=h.bits,X=h.lencode,I=h.distcode,$=(1<<h.lenbits)-1,V=(1<<h.distbits)-1;t:do{M<15&&(O+=E[d++]<<M,M+=8,O+=E[d++]<<M,M+=8),B=X[O&$];e:for(;;){if(O>>>=z=B>>>24,M-=z,(z=B>>>16&255)===0)q[p++]=65535&B;else{if(!(16&z)){if((64&z)==0){B=X[(65535&B)+(O&(1<<z)-1)];continue e}if(32&z){h.mode=12;break t}o.msg="invalid literal/length code",h.mode=30;break t}Q=65535&B,(z&=15)&&(M<z&&(O+=E[d++]<<M,M+=8),Q+=O&(1<<z)-1,O>>>=z,M-=z),M<15&&(O+=E[d++]<<M,M+=8,O+=E[d++]<<M,M+=8),B=I[O&V];n:for(;;){if(O>>>=z=B>>>24,M-=z,!(16&(z=B>>>16&255))){if((64&z)==0){B=I[(65535&B)+(O&(1<<z)-1)];continue n}o.msg="invalid distance code",h.mode=30;break t}if(ct=65535&B,M<(z&=15)&&(O+=E[d++]<<M,(M+=8)<z&&(O+=E[d++]<<M,M+=8)),b<(ct+=O&(1<<z)-1)){o.msg="invalid distance too far back",h.mode=30;break t}if(O>>>=z,M-=z,(z=p-x)<ct){if(_<(z=ct-z)&&h.sane){o.msg="invalid distance too far back",h.mode=30;break t}if(P=C,(L=0)===k){if(L+=w-z,z<Q){for(Q-=z;q[p++]=C[L++],--z;);L=p-ct,P=q}}else if(k<z){if(L+=w+k-z,(z-=k)<Q){for(Q-=z;q[p++]=C[L++],--z;);if(L=0,k<Q){for(Q-=z=k;q[p++]=C[L++],--z;);L=p-ct,P=q}}}else if(L+=k-z,z<Q){for(Q-=z;q[p++]=C[L++],--z;);L=p-ct,P=q}for(;2<Q;)q[p++]=P[L++],q[p++]=P[L++],q[p++]=P[L++],Q-=3;Q&&(q[p++]=P[L++],1<Q&&(q[p++]=P[L++]))}else{for(L=p-ct;q[p++]=q[L++],q[p++]=q[L++],q[p++]=q[L++],2<(Q-=3););Q&&(q[p++]=q[L++],1<Q&&(q[p++]=q[L++]))}break}}break}}while(d<f&&p<v);d-=Q=M>>3,O&=(1<<(M-=Q<<3))-1,o.next_in=d,o.next_out=p,o.avail_in=d<f?f-d+5:5-(d-f),o.avail_out=p<v?v-p+257:257-(p-v),h.hold=O,h.bits=M}},{}],49:[function(n,i,a){var o=n("../utils/common"),c=n("./adler32"),h=n("./crc32"),d=n("./inffast"),f=n("./inftrees"),p=1,x=2,v=0,b=-2,w=1,_=852,k=592;function C(L){return(L>>>24&255)+(L>>>8&65280)+((65280&L)<<8)+((255&L)<<24)}function O(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(L){var P;return L&&L.state?(P=L.state,L.total_in=L.total_out=P.total=0,L.msg="",P.wrap&&(L.adler=1&P.wrap),P.mode=w,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new o.Buf32(_),P.distcode=P.distdyn=new o.Buf32(k),P.sane=1,P.back=-1,v):b}function X(L){var P;return L&&L.state?((P=L.state).wsize=0,P.whave=0,P.wnext=0,M(L)):b}function I(L,P){var E,q;return L&&L.state?(q=L.state,P<0?(E=0,P=-P):(E=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?b:(q.window!==null&&q.wbits!==P&&(q.window=null),q.wrap=E,q.wbits=P,X(L))):b}function $(L,P){var E,q;return L?(q=new O,(L.state=q).window=null,(E=I(L,P))!==v&&(L.state=null),E):b}var V,B,z=!0;function Q(L){if(z){var P;for(V=new o.Buf32(512),B=new o.Buf32(32),P=0;P<144;)L.lens[P++]=8;for(;P<256;)L.lens[P++]=9;for(;P<280;)L.lens[P++]=7;for(;P<288;)L.lens[P++]=8;for(f(p,L.lens,0,288,V,0,L.work,{bits:9}),P=0;P<32;)L.lens[P++]=5;f(x,L.lens,0,32,B,0,L.work,{bits:5}),z=!1}L.lencode=V,L.lenbits=9,L.distcode=B,L.distbits=5}function ct(L,P,E,q){var K,Y=L.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new o.Buf8(Y.wsize)),q>=Y.wsize?(o.arraySet(Y.window,P,E-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):(q<(K=Y.wsize-Y.wnext)&&(K=q),o.arraySet(Y.window,P,E-q,K,Y.wnext),(q-=K)?(o.arraySet(Y.window,P,E-q,q,0),Y.wnext=q,Y.whave=Y.wsize):(Y.wnext+=K,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=K))),0}a.inflateReset=X,a.inflateReset2=I,a.inflateResetKeep=M,a.inflateInit=function(L){return $(L,15)},a.inflateInit2=$,a.inflate=function(L,P){var E,q,K,Y,rt,et,pt,A,j,R,Z,W,_t,xt,bt,Ct,ot,St,At,dt,S,F,H,N,D=0,G=new o.Buf8(4),ut=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!L||!L.state||!L.output||!L.input&&L.avail_in!==0)return b;(E=L.state).mode===12&&(E.mode=13),rt=L.next_out,K=L.output,pt=L.avail_out,Y=L.next_in,q=L.input,et=L.avail_in,A=E.hold,j=E.bits,R=et,Z=pt,F=v;t:for(;;)switch(E.mode){case w:if(E.wrap===0){E.mode=13;break}for(;j<16;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if(2&E.wrap&&A===35615){G[E.check=0]=255&A,G[1]=A>>>8&255,E.check=h(E.check,G,2,0),j=A=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&A)<<8)+(A>>8))%31){L.msg="incorrect header check",E.mode=30;break}if((15&A)!=8){L.msg="unknown compression method",E.mode=30;break}if(j-=4,S=8+(15&(A>>>=4)),E.wbits===0)E.wbits=S;else if(S>E.wbits){L.msg="invalid window size",E.mode=30;break}E.dmax=1<<S,L.adler=E.check=1,E.mode=512&A?10:12,j=A=0;break;case 2:for(;j<16;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if(E.flags=A,(255&E.flags)!=8){L.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){L.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=A>>8&1),512&E.flags&&(G[0]=255&A,G[1]=A>>>8&255,E.check=h(E.check,G,2,0)),j=A=0,E.mode=3;case 3:for(;j<32;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}E.head&&(E.head.time=A),512&E.flags&&(G[0]=255&A,G[1]=A>>>8&255,G[2]=A>>>16&255,G[3]=A>>>24&255,E.check=h(E.check,G,4,0)),j=A=0,E.mode=4;case 4:for(;j<16;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}E.head&&(E.head.xflags=255&A,E.head.os=A>>8),512&E.flags&&(G[0]=255&A,G[1]=A>>>8&255,E.check=h(E.check,G,2,0)),j=A=0,E.mode=5;case 5:if(1024&E.flags){for(;j<16;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}E.length=A,E.head&&(E.head.extra_len=A),512&E.flags&&(G[0]=255&A,G[1]=A>>>8&255,E.check=h(E.check,G,2,0)),j=A=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(et<(W=E.length)&&(W=et),W&&(E.head&&(S=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),o.arraySet(E.head.extra,q,Y,W,S)),512&E.flags&&(E.check=h(E.check,q,W,Y)),et-=W,Y+=W,E.length-=W),E.length))break t;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(et===0)break t;for(W=0;S=q[Y+W++],E.head&&S&&E.length<65536&&(E.head.name+=String.fromCharCode(S)),S&&W<et;);if(512&E.flags&&(E.check=h(E.check,q,W,Y)),et-=W,Y+=W,S)break t}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(et===0)break t;for(W=0;S=q[Y+W++],E.head&&S&&E.length<65536&&(E.head.comment+=String.fromCharCode(S)),S&&W<et;);if(512&E.flags&&(E.check=h(E.check,q,W,Y)),et-=W,Y+=W,S)break t}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;j<16;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if(A!==(65535&E.check)){L.msg="header crc mismatch",E.mode=30;break}j=A=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),L.adler=E.check=0,E.mode=12;break;case 10:for(;j<32;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}L.adler=E.check=C(A),j=A=0,E.mode=11;case 11:if(E.havedict===0)return L.next_out=rt,L.avail_out=pt,L.next_in=Y,L.avail_in=et,E.hold=A,E.bits=j,2;L.adler=E.check=1,E.mode=12;case 12:if(P===5||P===6)break t;case 13:if(E.last){A>>>=7&j,j-=7&j,E.mode=27;break}for(;j<3;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}switch(E.last=1&A,j-=1,3&(A>>>=1)){case 0:E.mode=14;break;case 1:if(Q(E),E.mode=20,P!==6)break;A>>>=2,j-=2;break t;case 2:E.mode=17;break;case 3:L.msg="invalid block type",E.mode=30}A>>>=2,j-=2;break;case 14:for(A>>>=7&j,j-=7&j;j<32;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if((65535&A)!=(A>>>16^65535)){L.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&A,j=A=0,E.mode=15,P===6)break t;case 15:E.mode=16;case 16:if(W=E.length){if(et<W&&(W=et),pt<W&&(W=pt),W===0)break t;o.arraySet(K,q,Y,W,rt),et-=W,Y+=W,pt-=W,rt+=W,E.length-=W;break}E.mode=12;break;case 17:for(;j<14;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if(E.nlen=257+(31&A),A>>>=5,j-=5,E.ndist=1+(31&A),A>>>=5,j-=5,E.ncode=4+(15&A),A>>>=4,j-=4,286<E.nlen||30<E.ndist){L.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;j<3;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}E.lens[ut[E.have++]]=7&A,A>>>=3,j-=3}for(;E.have<19;)E.lens[ut[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,H={bits:E.lenbits},F=f(0,E.lens,0,19,E.lencode,0,E.work,H),E.lenbits=H.bits,F){L.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;Ct=(D=E.lencode[A&(1<<E.lenbits)-1])>>>16&255,ot=65535&D,!((bt=D>>>24)<=j);){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if(ot<16)A>>>=bt,j-=bt,E.lens[E.have++]=ot;else{if(ot===16){for(N=bt+2;j<N;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if(A>>>=bt,j-=bt,E.have===0){L.msg="invalid bit length repeat",E.mode=30;break}S=E.lens[E.have-1],W=3+(3&A),A>>>=2,j-=2}else if(ot===17){for(N=bt+3;j<N;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}j-=bt,S=0,W=3+(7&(A>>>=bt)),A>>>=3,j-=3}else{for(N=bt+7;j<N;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}j-=bt,S=0,W=11+(127&(A>>>=bt)),A>>>=7,j-=7}if(E.have+W>E.nlen+E.ndist){L.msg="invalid bit length repeat",E.mode=30;break}for(;W--;)E.lens[E.have++]=S}}if(E.mode===30)break;if(E.lens[256]===0){L.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,H={bits:E.lenbits},F=f(p,E.lens,0,E.nlen,E.lencode,0,E.work,H),E.lenbits=H.bits,F){L.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,H={bits:E.distbits},F=f(x,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,H),E.distbits=H.bits,F){L.msg="invalid distances set",E.mode=30;break}if(E.mode=20,P===6)break t;case 20:E.mode=21;case 21:if(6<=et&&258<=pt){L.next_out=rt,L.avail_out=pt,L.next_in=Y,L.avail_in=et,E.hold=A,E.bits=j,d(L,Z),rt=L.next_out,K=L.output,pt=L.avail_out,Y=L.next_in,q=L.input,et=L.avail_in,A=E.hold,j=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;Ct=(D=E.lencode[A&(1<<E.lenbits)-1])>>>16&255,ot=65535&D,!((bt=D>>>24)<=j);){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if(Ct&&(240&Ct)==0){for(St=bt,At=Ct,dt=ot;Ct=(D=E.lencode[dt+((A&(1<<St+At)-1)>>St)])>>>16&255,ot=65535&D,!(St+(bt=D>>>24)<=j);){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}A>>>=St,j-=St,E.back+=St}if(A>>>=bt,j-=bt,E.back+=bt,E.length=ot,Ct===0){E.mode=26;break}if(32&Ct){E.back=-1,E.mode=12;break}if(64&Ct){L.msg="invalid literal/length code",E.mode=30;break}E.extra=15&Ct,E.mode=22;case 22:if(E.extra){for(N=E.extra;j<N;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}E.length+=A&(1<<E.extra)-1,A>>>=E.extra,j-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;Ct=(D=E.distcode[A&(1<<E.distbits)-1])>>>16&255,ot=65535&D,!((bt=D>>>24)<=j);){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if((240&Ct)==0){for(St=bt,At=Ct,dt=ot;Ct=(D=E.distcode[dt+((A&(1<<St+At)-1)>>St)])>>>16&255,ot=65535&D,!(St+(bt=D>>>24)<=j);){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}A>>>=St,j-=St,E.back+=St}if(A>>>=bt,j-=bt,E.back+=bt,64&Ct){L.msg="invalid distance code",E.mode=30;break}E.offset=ot,E.extra=15&Ct,E.mode=24;case 24:if(E.extra){for(N=E.extra;j<N;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}E.offset+=A&(1<<E.extra)-1,A>>>=E.extra,j-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){L.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(pt===0)break t;if(W=Z-pt,E.offset>W){if((W=E.offset-W)>E.whave&&E.sane){L.msg="invalid distance too far back",E.mode=30;break}_t=W>E.wnext?(W-=E.wnext,E.wsize-W):E.wnext-W,W>E.length&&(W=E.length),xt=E.window}else xt=K,_t=rt-E.offset,W=E.length;for(pt<W&&(W=pt),pt-=W,E.length-=W;K[rt++]=xt[_t++],--W;);E.length===0&&(E.mode=21);break;case 26:if(pt===0)break t;K[rt++]=E.length,pt--,E.mode=21;break;case 27:if(E.wrap){for(;j<32;){if(et===0)break t;et--,A|=q[Y++]<<j,j+=8}if(Z-=pt,L.total_out+=Z,E.total+=Z,Z&&(L.adler=E.check=E.flags?h(E.check,K,Z,rt-Z):c(E.check,K,Z,rt-Z)),Z=pt,(E.flags?A:C(A))!==E.check){L.msg="incorrect data check",E.mode=30;break}j=A=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;j<32;){if(et===0)break t;et--,A+=q[Y++]<<j,j+=8}if(A!==(4294967295&E.total)){L.msg="incorrect length check",E.mode=30;break}j=A=0}E.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return b}return L.next_out=rt,L.avail_out=pt,L.next_in=Y,L.avail_in=et,E.hold=A,E.bits=j,(E.wsize||Z!==L.avail_out&&E.mode<30&&(E.mode<27||P!==4))&&ct(L,L.output,L.next_out,Z-L.avail_out)?(E.mode=31,-4):(R-=L.avail_in,Z-=L.avail_out,L.total_in+=R,L.total_out+=Z,E.total+=Z,E.wrap&&Z&&(L.adler=E.check=E.flags?h(E.check,K,Z,L.next_out-Z):c(E.check,K,Z,L.next_out-Z)),L.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(R==0&&Z===0||P===4)&&F===v&&(F=-5),F)},a.inflateEnd=function(L){if(!L||!L.state)return b;var P=L.state;return P.window&&(P.window=null),L.state=null,v},a.inflateGetHeader=function(L,P){var E;return L&&L.state?(2&(E=L.state).wrap)==0?b:((E.head=P).done=!1,v):b},a.inflateSetDictionary=function(L,P){var E,q=P.length;return L&&L.state?(E=L.state).wrap!==0&&E.mode!==11?b:E.mode===11&&c(1,P,q,0)!==E.check?-3:ct(L,P,q,q)?(E.mode=31,-4):(E.havedict=1,v):b},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,a){var o=n("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(p,x,v,b,w,_,k,C){var O,M,X,I,$,V,B,z,Q,ct=C.bits,L=0,P=0,E=0,q=0,K=0,Y=0,rt=0,et=0,pt=0,A=0,j=null,R=0,Z=new o.Buf16(16),W=new o.Buf16(16),_t=null,xt=0;for(L=0;L<=15;L++)Z[L]=0;for(P=0;P<b;P++)Z[x[v+P]]++;for(K=ct,q=15;1<=q&&Z[q]===0;q--);if(q<K&&(K=q),q===0)return w[_++]=20971520,w[_++]=20971520,C.bits=1,0;for(E=1;E<q&&Z[E]===0;E++);for(K<E&&(K=E),L=et=1;L<=15;L++)if(et<<=1,(et-=Z[L])<0)return-1;if(0<et&&(p===0||q!==1))return-1;for(W[1]=0,L=1;L<15;L++)W[L+1]=W[L]+Z[L];for(P=0;P<b;P++)x[v+P]!==0&&(k[W[x[v+P]]++]=P);if(V=p===0?(j=_t=k,19):p===1?(j=c,R-=257,_t=h,xt-=257,256):(j=d,_t=f,-1),L=E,$=_,rt=P=A=0,X=-1,I=(pt=1<<(Y=K))-1,p===1&&852<pt||p===2&&592<pt)return 1;for(;;){for(B=L-rt,Q=k[P]<V?(z=0,k[P]):k[P]>V?(z=_t[xt+k[P]],j[R+k[P]]):(z=96,0),O=1<<L-rt,E=M=1<<Y;w[$+(A>>rt)+(M-=O)]=B<<24|z<<16|Q|0,M!==0;);for(O=1<<L-1;A&O;)O>>=1;if(O!==0?(A&=O-1,A+=O):A=0,P++,--Z[L]==0){if(L===q)break;L=x[v+k[P]]}if(K<L&&(A&I)!==X){for(rt===0&&(rt=K),$+=E,et=1<<(Y=L-rt);Y+rt<q&&!((et-=Z[Y+rt])<=0);)Y++,et<<=1;if(pt+=1<<Y,p===1&&852<pt||p===2&&592<pt)return 1;w[X=A&I]=K<<24|Y<<16|$-_|0}}return A!==0&&(w[$+A]=L-rt<<24|64<<16|0),C.bits=K,0}},{"../utils/common":41}],51:[function(n,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,a){var o=n("../utils/common"),c=0,h=1;function d(D){for(var G=D.length;0<=--G;)D[G]=0}var f=0,p=29,x=256,v=x+1+p,b=30,w=19,_=2*v+1,k=15,C=16,O=7,M=256,X=16,I=17,$=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ct=new Array(2*(v+2));d(ct);var L=new Array(2*b);d(L);var P=new Array(512);d(P);var E=new Array(256);d(E);var q=new Array(p);d(q);var K,Y,rt,et=new Array(b);function pt(D,G,ut,yt,st){this.static_tree=D,this.extra_bits=G,this.extra_base=ut,this.elems=yt,this.max_length=st,this.has_stree=D&&D.length}function A(D,G){this.dyn_tree=D,this.max_code=0,this.stat_desc=G}function j(D){return D<256?P[D]:P[256+(D>>>7)]}function R(D,G){D.pending_buf[D.pending++]=255&G,D.pending_buf[D.pending++]=G>>>8&255}function Z(D,G,ut){D.bi_valid>C-ut?(D.bi_buf|=G<<D.bi_valid&65535,R(D,D.bi_buf),D.bi_buf=G>>C-D.bi_valid,D.bi_valid+=ut-C):(D.bi_buf|=G<<D.bi_valid&65535,D.bi_valid+=ut)}function W(D,G,ut){Z(D,ut[2*G],ut[2*G+1])}function _t(D,G){for(var ut=0;ut|=1&D,D>>>=1,ut<<=1,0<--G;);return ut>>>1}function xt(D,G,ut){var yt,st,Et=new Array(k+1),Tt=0;for(yt=1;yt<=k;yt++)Et[yt]=Tt=Tt+ut[yt-1]<<1;for(st=0;st<=G;st++){var Nt=D[2*st+1];Nt!==0&&(D[2*st]=_t(Et[Nt]++,Nt))}}function bt(D){var G;for(G=0;G<v;G++)D.dyn_ltree[2*G]=0;for(G=0;G<b;G++)D.dyn_dtree[2*G]=0;for(G=0;G<w;G++)D.bl_tree[2*G]=0;D.dyn_ltree[2*M]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function Ct(D){8<D.bi_valid?R(D,D.bi_buf):0<D.bi_valid&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function ot(D,G,ut,yt){var st=2*G,Et=2*ut;return D[st]<D[Et]||D[st]===D[Et]&&yt[G]<=yt[ut]}function St(D,G,ut){for(var yt=D.heap[ut],st=ut<<1;st<=D.heap_len&&(st<D.heap_len&&ot(G,D.heap[st+1],D.heap[st],D.depth)&&st++,!ot(G,yt,D.heap[st],D.depth));)D.heap[ut]=D.heap[st],ut=st,st<<=1;D.heap[ut]=yt}function At(D,G,ut){var yt,st,Et,Tt,Nt=0;if(D.last_lit!==0)for(;yt=D.pending_buf[D.d_buf+2*Nt]<<8|D.pending_buf[D.d_buf+2*Nt+1],st=D.pending_buf[D.l_buf+Nt],Nt++,yt===0?W(D,st,G):(W(D,(Et=E[st])+x+1,G),(Tt=V[Et])!==0&&Z(D,st-=q[Et],Tt),W(D,Et=j(--yt),ut),(Tt=B[Et])!==0&&Z(D,yt-=et[Et],Tt)),Nt<D.last_lit;);W(D,M,G)}function dt(D,G){var ut,yt,st,Et=G.dyn_tree,Tt=G.stat_desc.static_tree,Nt=G.stat_desc.has_stree,Dt=G.stat_desc.elems,Yt=-1;for(D.heap_len=0,D.heap_max=_,ut=0;ut<Dt;ut++)Et[2*ut]!==0?(D.heap[++D.heap_len]=Yt=ut,D.depth[ut]=0):Et[2*ut+1]=0;for(;D.heap_len<2;)Et[2*(st=D.heap[++D.heap_len]=Yt<2?++Yt:0)]=1,D.depth[st]=0,D.opt_len--,Nt&&(D.static_len-=Tt[2*st+1]);for(G.max_code=Yt,ut=D.heap_len>>1;1<=ut;ut--)St(D,Et,ut);for(st=Dt;ut=D.heap[1],D.heap[1]=D.heap[D.heap_len--],St(D,Et,1),yt=D.heap[1],D.heap[--D.heap_max]=ut,D.heap[--D.heap_max]=yt,Et[2*st]=Et[2*ut]+Et[2*yt],D.depth[st]=(D.depth[ut]>=D.depth[yt]?D.depth[ut]:D.depth[yt])+1,Et[2*ut+1]=Et[2*yt+1]=st,D.heap[1]=st++,St(D,Et,1),2<=D.heap_len;);D.heap[--D.heap_max]=D.heap[1],(function(Bt,Ot){var se,ae,Te,Kt,xe,Qt,Wt=Ot.dyn_tree,Oe=Ot.max_code,un=Ot.stat_desc.static_tree,an=Ot.stat_desc.has_stree,gn=Ot.stat_desc.extra_bits,Mt=Ot.stat_desc.extra_base,Ht=Ot.stat_desc.max_length,zt=0;for(Kt=0;Kt<=k;Kt++)Bt.bl_count[Kt]=0;for(Wt[2*Bt.heap[Bt.heap_max]+1]=0,se=Bt.heap_max+1;se<_;se++)Ht<(Kt=Wt[2*Wt[2*(ae=Bt.heap[se])+1]+1]+1)&&(Kt=Ht,zt++),Wt[2*ae+1]=Kt,Oe<ae||(Bt.bl_count[Kt]++,xe=0,Mt<=ae&&(xe=gn[ae-Mt]),Qt=Wt[2*ae],Bt.opt_len+=Qt*(Kt+xe),an&&(Bt.static_len+=Qt*(un[2*ae+1]+xe)));if(zt!==0){do{for(Kt=Ht-1;Bt.bl_count[Kt]===0;)Kt--;Bt.bl_count[Kt]--,Bt.bl_count[Kt+1]+=2,Bt.bl_count[Ht]--,zt-=2}while(0<zt);for(Kt=Ht;Kt!==0;Kt--)for(ae=Bt.bl_count[Kt];ae!==0;)Oe<(Te=Bt.heap[--se])||(Wt[2*Te+1]!==Kt&&(Bt.opt_len+=(Kt-Wt[2*Te+1])*Wt[2*Te],Wt[2*Te+1]=Kt),ae--)}})(D,G),xt(Et,Yt,D.bl_count)}function S(D,G,ut){var yt,st,Et=-1,Tt=G[1],Nt=0,Dt=7,Yt=4;for(Tt===0&&(Dt=138,Yt=3),G[2*(ut+1)+1]=65535,yt=0;yt<=ut;yt++)st=Tt,Tt=G[2*(yt+1)+1],++Nt<Dt&&st===Tt||(Nt<Yt?D.bl_tree[2*st]+=Nt:st!==0?(st!==Et&&D.bl_tree[2*st]++,D.bl_tree[2*X]++):Nt<=10?D.bl_tree[2*I]++:D.bl_tree[2*$]++,Et=st,Yt=(Nt=0)===Tt?(Dt=138,3):st===Tt?(Dt=6,3):(Dt=7,4))}function F(D,G,ut){var yt,st,Et=-1,Tt=G[1],Nt=0,Dt=7,Yt=4;for(Tt===0&&(Dt=138,Yt=3),yt=0;yt<=ut;yt++)if(st=Tt,Tt=G[2*(yt+1)+1],!(++Nt<Dt&&st===Tt)){if(Nt<Yt)for(;W(D,st,D.bl_tree),--Nt!=0;);else st!==0?(st!==Et&&(W(D,st,D.bl_tree),Nt--),W(D,X,D.bl_tree),Z(D,Nt-3,2)):Nt<=10?(W(D,I,D.bl_tree),Z(D,Nt-3,3)):(W(D,$,D.bl_tree),Z(D,Nt-11,7));Et=st,Yt=(Nt=0)===Tt?(Dt=138,3):st===Tt?(Dt=6,3):(Dt=7,4)}}d(et);var H=!1;function N(D,G,ut,yt){Z(D,(f<<1)+(yt?1:0),3),(function(st,Et,Tt,Nt){Ct(st),R(st,Tt),R(st,~Tt),o.arraySet(st.pending_buf,st.window,Et,Tt,st.pending),st.pending+=Tt})(D,G,ut)}a._tr_init=function(D){H||((function(){var G,ut,yt,st,Et,Tt=new Array(k+1);for(st=yt=0;st<p-1;st++)for(q[st]=yt,G=0;G<1<<V[st];G++)E[yt++]=st;for(E[yt-1]=st,st=Et=0;st<16;st++)for(et[st]=Et,G=0;G<1<<B[st];G++)P[Et++]=st;for(Et>>=7;st<b;st++)for(et[st]=Et<<7,G=0;G<1<<B[st]-7;G++)P[256+Et++]=st;for(ut=0;ut<=k;ut++)Tt[ut]=0;for(G=0;G<=143;)ct[2*G+1]=8,G++,Tt[8]++;for(;G<=255;)ct[2*G+1]=9,G++,Tt[9]++;for(;G<=279;)ct[2*G+1]=7,G++,Tt[7]++;for(;G<=287;)ct[2*G+1]=8,G++,Tt[8]++;for(xt(ct,v+1,Tt),G=0;G<b;G++)L[2*G+1]=5,L[2*G]=_t(G,5);K=new pt(ct,V,x+1,v,k),Y=new pt(L,B,0,b,k),rt=new pt(new Array(0),z,0,w,O)})(),H=!0),D.l_desc=new A(D.dyn_ltree,K),D.d_desc=new A(D.dyn_dtree,Y),D.bl_desc=new A(D.bl_tree,rt),D.bi_buf=0,D.bi_valid=0,bt(D)},a._tr_stored_block=N,a._tr_flush_block=function(D,G,ut,yt){var st,Et,Tt=0;0<D.level?(D.strm.data_type===2&&(D.strm.data_type=(function(Nt){var Dt,Yt=4093624447;for(Dt=0;Dt<=31;Dt++,Yt>>>=1)if(1&Yt&&Nt.dyn_ltree[2*Dt]!==0)return c;if(Nt.dyn_ltree[18]!==0||Nt.dyn_ltree[20]!==0||Nt.dyn_ltree[26]!==0)return h;for(Dt=32;Dt<x;Dt++)if(Nt.dyn_ltree[2*Dt]!==0)return h;return c})(D)),dt(D,D.l_desc),dt(D,D.d_desc),Tt=(function(Nt){var Dt;for(S(Nt,Nt.dyn_ltree,Nt.l_desc.max_code),S(Nt,Nt.dyn_dtree,Nt.d_desc.max_code),dt(Nt,Nt.bl_desc),Dt=w-1;3<=Dt&&Nt.bl_tree[2*Q[Dt]+1]===0;Dt--);return Nt.opt_len+=3*(Dt+1)+5+5+4,Dt})(D),st=D.opt_len+3+7>>>3,(Et=D.static_len+3+7>>>3)<=st&&(st=Et)):st=Et=ut+5,ut+4<=st&&G!==-1?N(D,G,ut,yt):D.strategy===4||Et===st?(Z(D,2+(yt?1:0),3),At(D,ct,L)):(Z(D,4+(yt?1:0),3),(function(Nt,Dt,Yt,Bt){var Ot;for(Z(Nt,Dt-257,5),Z(Nt,Yt-1,5),Z(Nt,Bt-4,4),Ot=0;Ot<Bt;Ot++)Z(Nt,Nt.bl_tree[2*Q[Ot]+1],3);F(Nt,Nt.dyn_ltree,Dt-1),F(Nt,Nt.dyn_dtree,Yt-1)})(D,D.l_desc.max_code+1,D.d_desc.max_code+1,Tt+1),At(D,D.dyn_ltree,D.dyn_dtree)),bt(D),yt&&Ct(D)},a._tr_tally=function(D,G,ut){return D.pending_buf[D.d_buf+2*D.last_lit]=G>>>8&255,D.pending_buf[D.d_buf+2*D.last_lit+1]=255&G,D.pending_buf[D.l_buf+D.last_lit]=255&ut,D.last_lit++,G===0?D.dyn_ltree[2*ut]++:(D.matches++,G--,D.dyn_ltree[2*(E[ut]+x+1)]++,D.dyn_dtree[2*j(G)]++),D.last_lit===D.lit_bufsize-1},a._tr_align=function(D){Z(D,2,3),W(D,M,ct),(function(G){G.bi_valid===16?(R(G,G.bi_buf),G.bi_buf=0,G.bi_valid=0):8<=G.bi_valid&&(G.pending_buf[G.pending++]=255&G.bi_buf,G.bi_buf>>=8,G.bi_valid-=8)})(D)}},{"../utils/common":41}],53:[function(n,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,a){(function(o){(function(c,h){if(!c.setImmediate){var d,f,p,x,v=1,b={},w=!1,_=c.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(c);k=k&&k.setTimeout?k:c,d={}.toString.call(c.process)==="[object process]"?function(X){process.nextTick(function(){O(X)})}:(function(){if(c.postMessage&&!c.importScripts){var X=!0,I=c.onmessage;return c.onmessage=function(){X=!1},c.postMessage("","*"),c.onmessage=I,X}})()?(x="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",M,!1):c.attachEvent("onmessage",M),function(X){c.postMessage(x+X,"*")}):c.MessageChannel?((p=new MessageChannel).port1.onmessage=function(X){O(X.data)},function(X){p.port2.postMessage(X)}):_&&"onreadystatechange"in _.createElement("script")?(f=_.documentElement,function(X){var I=_.createElement("script");I.onreadystatechange=function(){O(X),I.onreadystatechange=null,f.removeChild(I),I=null},f.appendChild(I)}):function(X){setTimeout(O,0,X)},k.setImmediate=function(X){typeof X!="function"&&(X=new Function(""+X));for(var I=new Array(arguments.length-1),$=0;$<I.length;$++)I[$]=arguments[$+1];var V={callback:X,args:I};return b[v]=V,d(v),v++},k.clearImmediate=C}function C(X){delete b[X]}function O(X){if(w)setTimeout(O,0,X);else{var I=b[X];if(I){w=!0;try{(function($){var V=$.callback,B=$.args;switch(B.length){case 0:V();break;case 1:V(B[0]);break;case 2:V(B[0],B[1]);break;case 3:V(B[0],B[1],B[2]);break;default:V.apply(h,B)}})(I)}finally{C(X),w=!1}}}}function M(X){X.source===c&&typeof X.data=="string"&&X.data.indexOf(x)===0&&O(+X.data.slice(x.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Ei<"u"?Ei:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Xd)),Xd.exports}var oT=rT();const lT=bf(oT),cT=/[/\\:*?"<>|]/g;function uT(u,t,n){if(!u)return`image_${n}`;const i=u.replace(/\{index\}/g,String(n)),o=jo(i,t).replace(cT,"_");return o.trim()?o:`image_${n}`}function hT(){return new Promise(u=>setTimeout(u,0))}function dT(u,t){const n=t.get(u)??0;return t.set(u,n+1),n===0?u:`${u}_${n+1}`}class fT{constructor(){Ti(this,"cancelled",!1)}async generate(t,n,i,a){this.cancelled=!1;const o=n.length,c=new lT,h=new Map,d=i.format==="jpeg"?".jpg":".png",f=[];for(let x=0;x<o;x++){if(this.cancelled)throw new Error("Batch generation cancelled");const v=n[x],b=await Nv(t,v,{format:i.format,quality:i.quality}),w=uT(i.filenamePattern,v,x),_=dT(w,h);c.file(`${_}${d}`,b),f.push({blob:b,row:v,index:x,filename:`${_}${d}`}),a(x+1,o),await hT()}if(this.cancelled)throw new Error("Batch generation cancelled");return{zip:await c.generateAsync({type:"blob"}),images:f}}cancel(){this.cancelled=!0}}var jc={exports:{}},gT=jc.exports,cx;function mT(){return cx||(cx=1,(function(u,t){(function(n,i){i()})(gT,function(){function n(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function i(f,p,x){var v=new XMLHttpRequest;v.open("GET",f),v.responseType="blob",v.onload=function(){d(v.response,p,x)},v.onerror=function(){console.error("could not download file")},v.send()}function a(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ei=="object"&&Ei.global===Ei?Ei:void 0,h=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(f,p,x){var v=c.URL||c.webkitURL,b=document.createElement("a");p=p||f.name||"download",b.download=p,b.rel="noopener",typeof f=="string"?(b.href=f,b.origin===location.origin?o(b):a(b.href)?i(f,p,x):o(b,b.target="_blank")):(b.href=v.createObjectURL(f),setTimeout(function(){v.revokeObjectURL(b.href)},4e4),setTimeout(function(){o(b)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,x){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(n(f,x),p);else if(a(f))i(f,p,x);else{var v=document.createElement("a");v.href=f,v.target="_blank",setTimeout(function(){o(v)})}}:function(f,p,x,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof f=="string")return i(f,p,x);var b=f.type==="application/octet-stream",w=/constructor/i.test(c.HTMLElement)||c.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||b&&w||h)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var M=k.result;M=_?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=M:location=M,v=null},k.readAsDataURL(f)}else{var C=c.URL||c.webkitURL,O=C.createObjectURL(f);v?v.location=O:location.href=O,v=null,setTimeout(function(){C.revokeObjectURL(O)},4e4)}});c.saveAs=d.saveAs=d,u.exports=d})})(jc)),jc.exports}var pT=mT();function yT(u,t){pT.saveAs(u,t)}function xT(){const u=It(dt=>dt.csvData),t=It(dt=>dt.templateConfig),n=It(dt=>dt.buildOptions),i=It(dt=>dt.setBuildOptions),a=It(dt=>dt.buildProgress),o=It(dt=>dt.setBuildProgress),c=It(dt=>dt.setCurrentStep),h=It(dt=>dt.shareText),d=It(dt=>dt.setShareText),f=It(dt=>dt.generatedImages),p=It(dt=>dt.setGeneratedImages),x=It(dt=>dt.clearGeneratedImages),v=tt.useRef(null),[b,w]=tt.useState(null),[_,k]=tt.useState(!1),[C,O]=tt.useState(!1),[M,X]=tt.useState(null),[I,$]=tt.useState(null),[V,B]=tt.useState(new Set),[z,Q]=tt.useState("zip"),[ct,L]=tt.useState(""),P=Be(dt=>dt.t),E=z==="zip"||z==="both",q=z==="share"||z==="both",K=(u==null?void 0:u.rows)??[],Y=(u==null?void 0:u.headers)??[],rt=K.length,et=rt>0,pt=t.elements.length>0,A=a.status==="running",j=a.status==="completed",R=a.status==="cancelled",Z=a.status==="error",W=a.total>0?Math.round(a.completed/a.total*100):0,_t=tt.useCallback(async()=>{var S;if(!et||!pt)return;w(null),x(),o({status:"running",completed:0,total:rt});const dt=new fT;v.current=dt;try{const{zip:F,images:H}=await dt.generate(t,K,n,(N,D)=>{o({completed:N,total:D})});if(q){const N=H.map(D=>({blob:D.blob,url:URL.createObjectURL(D.blob),row:D.row,index:D.index}));p(N)}o({status:"completed"}),E&&yT(F,`${((S=u==null?void 0:u.fileName)==null?void 0:S.replace(/\.csv$/i,""))??"images"}.zip`)}catch(F){const H=F instanceof Error?F.message:"Generation failed";H.includes("cancelled")?o({status:"cancelled"}):(o({status:"error"}),w(H))}finally{v.current=null}},[et,pt,rt,t,K,n,u==null?void 0:u.fileName,o,x,p,E,q]),xt=tt.useCallback(()=>{var dt;(dt=v.current)==null||dt.cancel()},[]),bt=tt.useCallback(dt=>{i({filenamePattern:`${n.filenamePattern}{${dt}}`}),k(!1)},[n.filenamePattern,i]),Ct=tt.useCallback(dt=>{d(`${h}{${dt}}`),O(!1)},[h,d]),ot=tt.useCallback(dt=>{$(dt),setTimeout(()=>$(null),3e3)},[]),St=tt.useCallback(async(dt,S)=>{const F=jo(h,dt.row),H=new File([dt.blob],"image.png",{type:dt.blob.type});if(S==="native"&&navigator.share){if(F)try{await navigator.clipboard.writeText(F),ot(P("build.textCopied"))}catch{}try{await navigator.share({text:F,files:[H]})}catch{}return}if(S==="whatsapp"){const N=encodeURIComponent(F);window.open(`https://wa.me/?text=${N}`,"_blank");return}if(S==="copy")try{await navigator.clipboard.writeText(F)}catch{}},[h]),At=tt.useCallback(dt=>{B(S=>{const F=new Set(S);return F.has(dt)?F.delete(dt):F.add(dt),F})},[]);return et?pt?g.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 sm:space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 space-y-4 sm:space-y-6",children:[g.jsx("h3",{className:"text-sm font-semibold text-gray-800 uppercase tracking-wide",children:P("build.exportOptions")}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:P("build.outputMode")}),g.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"zip",label:P("build.downloadZip"),icon:tr},{value:"share",label:P("build.shareOnly"),icon:Za},{value:"both",label:P("build.both"),icon:null}].map(({value:dt,label:S,icon:F})=>g.jsxs("button",{type:"button",disabled:A,onClick:()=>Q(dt),className:`inline-flex items-center gap-1.5 px-3 py-2 text-sm font-medium rounded-lg border transition-colors ${z===dt?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[F&&g.jsx(F,{className:"w-3.5 h-3.5"}),S]},dt))})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[g.jsx(H2,{className:"w-4 h-4 inline-block mr-1.5 -mt-0.5 text-gray-400"}),P("build.imageFormat")]}),g.jsx("div",{className:"flex gap-3",children:["png","jpeg"].map(dt=>g.jsx("button",{type:"button",disabled:A,onClick:()=>i({format:dt}),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-colors ${n.format===dt?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:dt.toUpperCase()},dt))})]}),n.format==="jpeg"&&g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[P("build.quality"),": ",n.quality,"%"]}),g.jsx("input",{type:"range",min:1,max:100,value:n.quality,disabled:A,onChange:dt=>i({quality:Number(dt.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed"}),g.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[g.jsx("span",{children:P("build.smallest")}),g.jsx("span",{children:P("build.best")})]})]}),E&&g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[g.jsx(W2,{className:"w-4 h-4 inline-block mr-1.5 -mt-0.5 text-gray-400"}),P("build.filenamePattern")]}),g.jsx("div",{className:"relative",children:g.jsx("input",{type:"text",value:n.filenamePattern,disabled:A,onChange:dt=>i({filenamePattern:dt.target.value}),placeholder:"e.g. {name}_badge",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"})}),g.jsxs("div",{className:"mt-2",children:[g.jsx("button",{type:"button",disabled:A,onClick:()=>k(!_),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:P(_?"build.hideTokens":"build.showTokens")}),_&&g.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[Y.map(dt=>g.jsx("button",{type:"button",onClick:()=>bt(dt.name),className:"inline-flex items-center px-2 py-1 text-xs font-mono bg-gray-100 text-gray-700 rounded hover:bg-indigo-100 hover:text-indigo-700 transition-colors",children:`{${dt.name}}`},dt.name)),g.jsx("button",{type:"button",onClick:()=>bt("index"),className:"inline-flex items-center px-2 py-1 text-xs font-mono bg-gray-100 text-gray-700 rounded hover:bg-indigo-100 hover:text-indigo-700 transition-colors",children:"{index}"})]})]}),g.jsx("p",{className:"mt-1 text-xs text-gray-400",children:P("build.filenameHint")})]})]}),q&&g.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 space-y-4",children:[g.jsxs("h3",{className:"text-sm font-semibold text-gray-800 uppercase tracking-wide flex items-center gap-2",children:[g.jsx(Za,{className:"w-4 h-4 text-gray-400"}),P("build.shareText")]}),g.jsx("p",{className:"text-xs text-gray-500",children:P("build.shareTextHint")}),g.jsx("textarea",{value:h,disabled:A,onChange:dt=>d(dt.target.value),placeholder:P("build.shareTextPlaceholder"),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-y disabled:opacity-50 disabled:cursor-not-allowed"}),g.jsxs("div",{children:[g.jsx("button",{type:"button",disabled:A,onClick:()=>O(!C),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:P(C?"build.hideTokens":"build.showTokens")}),C&&g.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:Y.map(dt=>g.jsx("button",{type:"button",onClick:()=>Ct(dt.name),className:"inline-flex items-center px-2 py-1 text-xs font-mono bg-gray-100 text-gray-700 rounded hover:bg-indigo-100 hover:text-indigo-700 transition-colors",children:`{${dt.name}}`},dt.name))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:P("build.cardLabel")}),g.jsx("p",{className:"text-xs text-gray-500 mb-2",children:P("build.cardLabelHint")}),g.jsxs("select",{value:ct,disabled:A,onChange:dt=>L(dt.target.value),className:"w-full sm:w-auto px-3 py-2 text-sm border border-gray-200 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("option",{value:"",children:P("build.autoFirstColumn")}),Y.map(dt=>g.jsx("option",{value:dt.name,children:dt.name},dt.name))]})]})]}),g.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:g.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[g.jsxs("span",{children:[P("build.summary",{count:String(rt),format:n.format.toUpperCase()}),n.format==="jpeg"&&g.jsxs(g.Fragment,{children:[" ",P("build.summaryQuality",{quality:String(n.quality)})]})]}),g.jsxs("span",{className:"text-xs text-gray-400",children:[t.width,"",t.height,"px"]})]})}),(A||j||R||Z)&&g.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 space-y-4",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[g.jsxs("span",{className:"font-medium text-gray-700",children:[A&&P("build.generating"),j&&P("build.complete"),R&&P("build.cancelled"),Z&&P("build.failed")]}),g.jsxs("span",{className:"text-gray-500",children:[a.completed," / ",a.total]})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${Z?"bg-red-500":R?"bg-yellow-500":j?"bg-green-500":"bg-indigo-600"}`,style:{width:`${W}%`}})}),g.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[W,"%"]})]}),j&&g.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700 bg-green-50 rounded-lg p-3",children:[g.jsx(j2,{className:"w-5 h-5 flex-shrink-0"}),g.jsxs("span",{children:[P("build.allGenerated",{count:String(a.total)}),E&&` ${P("build.andDownloaded")}`,q&&P("build.scrollToShare"),"."]})]}),R&&g.jsxs("div",{className:"flex items-center gap-2 text-sm text-yellow-700 bg-yellow-50 rounded-lg p-3",children:[g.jsx(Z0,{className:"w-5 h-5 flex-shrink-0"}),g.jsx("span",{children:P("build.cancelledAfter",{completed:String(a.completed),total:String(a.total)})})]}),Z&&b&&g.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-700 bg-red-50 rounded-lg p-3",children:[g.jsx(rr,{className:"w-5 h-5 flex-shrink-0"}),g.jsx("span",{children:b})]})]}),g.jsx("div",{className:"flex items-center justify-end",children:g.jsxs("div",{className:"flex items-center gap-3",children:[A&&g.jsxs("button",{type:"button",onClick:xt,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",children:[g.jsx(Z0,{className:"w-4 h-4"}),P("build.cancel")]}),g.jsx("button",{type:"button",onClick:_t,disabled:A,className:"inline-flex items-center gap-2 px-5 py-2.5 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:A?g.jsxs(g.Fragment,{children:[g.jsx(Gc,{className:"w-4 h-4 animate-spin"}),P("build.generatingBtn")]}):g.jsxs(g.Fragment,{children:[E?g.jsx(tr,{className:"w-4 h-4"}):g.jsx(Za,{className:"w-4 h-4"}),j||Z||R?P("build.buildAgain"):P("build.buildImages",{count:String(rt)})]})})]})}),j&&f.length>0&&q&&g.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 space-y-4",children:[g.jsxs("h3",{className:"text-sm font-semibold text-gray-800 uppercase tracking-wide flex items-center gap-2",children:[g.jsx(Za,{className:"w-4 h-4 text-gray-400"}),P("build.shareImages",{count:String(f.length)})]}),g.jsx("p",{className:"text-xs text-gray-500",children:P("build.shareImagesHint")}),g.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:f.map((dt,S)=>{const F=jo(h,dt.row),H=V.has(S),N=ct?dt.row[ct]||`Image ${S+1}`:Object.values(dt.row)[0]||`Image ${S+1}`;return g.jsxs("div",{className:"border border-gray-100 rounded-lg overflow-hidden bg-gray-50",children:[g.jsxs("button",{type:"button",onClick:()=>At(S),className:"w-full flex items-center gap-3 p-3 text-left hover:bg-gray-100 transition-colors",children:[g.jsx("img",{src:dt.url,alt:`Generated ${S+1}`,className:"w-10 h-10 sm:w-12 sm:h-12 rounded object-cover flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:N}),g.jsx("p",{className:"text-xs text-gray-500 truncate",children:F})]}),H?g.jsx(fx,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}):g.jsx(ar,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})]}),H&&g.jsxs("div",{className:"px-3 pb-3 space-y-3",children:[g.jsx("img",{src:dt.url,alt:`Generated ${S+1}`,className:"w-full max-w-xs mx-auto rounded-lg shadow-sm"}),g.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:g.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap break-words",children:F})}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[typeof navigator<"u"&&typeof navigator.share=="function"&&g.jsxs("button",{type:"button",onClick:()=>St(dt,"native"),className:"inline-flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors",children:[g.jsx(Za,{className:"w-3.5 h-3.5"}),P("build.share")]}),g.jsxs("button",{type:"button",onClick:()=>St(dt,"whatsapp"),className:"inline-flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors",children:[g.jsx(u_,{className:"w-3.5 h-3.5"}),P("build.whatsapp")]}),g.jsx("button",{type:"button",onClick:async()=>{await St(dt,"copy"),X(S),setTimeout(()=>X(null),2e3)},className:"inline-flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:M===S?g.jsxs(g.Fragment,{children:[g.jsx(kc,{className:"w-3.5 h-3.5 text-green-600"}),P("build.copied")]}):g.jsxs(g.Fragment,{children:[g.jsx(Ec,{className:"w-3.5 h-3.5"}),P("build.copyText")]})}),g.jsxs("a",{href:dt.url,download:`image_${S+1}.${n.format==="jpeg"?"jpg":"png"}`,className:"inline-flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[g.jsx(tr,{className:"w-3.5 h-3.5"}),P("build.download")]})]})]})]},S)})})]}),I&&g.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 px-4 py-2.5 bg-gray-900 text-white text-sm rounded-lg shadow-lg max-w-[90vw] text-center",style:{animation:"fadeIn 0.2s ease-out"},children:I})]}):g.jsx("div",{className:"max-w-3xl mx-auto",children:g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx(bs,{className:"w-12 h-12 text-gray-300 mb-4"}),g.jsx("h2",{className:"text-lg font-medium text-gray-700",children:P("build.noElements")}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:P("build.noElementsHint")}),g.jsxs("button",{type:"button",onClick:()=>c("editor"),className:"mt-4 inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[g.jsx(ir,{className:"w-4 h-4"}),P("build.goToEditor")]})]})}):g.jsx("div",{className:"max-w-3xl mx-auto",children:g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx(rr,{className:"w-12 h-12 text-gray-300 mb-4"}),g.jsx("h2",{className:"text-lg font-medium text-gray-700",children:P("build.noData")}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:P("build.noDataHint")}),g.jsxs("button",{type:"button",onClick:()=>c("upload"),className:"mt-4 inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[g.jsx(ir,{className:"w-4 h-4"}),P("build.goToUpload")]})]})})}function ux(){return g.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none","aria-hidden":"true",children:[g.jsx("div",{className:"absolute -top-32 -left-32 w-96 h-96 bg-indigo-200/30 rounded-full blur-3xl animate-[float_20s_ease-in-out_infinite]"}),g.jsx("div",{className:"absolute top-1/3 -right-24 w-80 h-80 bg-violet-200/25 rounded-full blur-3xl animate-[float_25s_ease-in-out_infinite_reverse]"}),g.jsx("div",{className:"absolute -bottom-20 left-1/4 w-72 h-72 bg-pink-200/20 rounded-full blur-3xl animate-[float_22s_ease-in-out_3s_infinite]"})]})}function ln({icon:u,title:t,desc:n}){return g.jsxs("div",{className:"group bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-lg hover:border-indigo-200 transition-all duration-300 hover:-translate-y-1",children:[g.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-50 text-indigo-600 flex items-center justify-center mb-4 group-hover:bg-indigo-100 group-hover:scale-110 transition-all duration-300",children:u}),g.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t}),g.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n})]})}function xc({number:u,icon:t,title:n,desc:i}){return g.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[g.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-600 text-white flex items-center justify-center mb-4 shadow-lg shadow-indigo-200",children:t}),g.jsx("span",{className:"absolute -top-2 -right-2 sm:right-auto sm:-left-2 w-7 h-7 rounded-full bg-indigo-100 text-indigo-700 text-xs font-bold flex items-center justify-center",children:u}),g.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),g.jsx("p",{className:"text-gray-600 text-sm leading-relaxed max-w-xs",children:i})]})}function Wa({icon:u,title:t,desc:n}){return g.jsxs("div",{className:"flex gap-4 items-start bg-white rounded-xl p-5 border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 hover:-translate-y-0.5",children:[g.jsx("div",{className:"w-10 h-10 rounded-lg bg-violet-50 text-violet-600 flex items-center justify-center shrink-0",children:u}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:t}),g.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n})]})]})}function vT({t:u}){return g.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-gray-200/60 border border-gray-200/80 overflow-hidden",children:[g.jsxs("div",{className:"bg-gray-100 px-4 py-3 flex items-center gap-2 border-b border-gray-200",children:[g.jsxs("div",{className:"flex gap-1.5",children:[g.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400"}),g.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400"}),g.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"})]}),g.jsx("div",{className:"flex-1 text-center",children:g.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:["Post Factory  ",u("app.title")]})})]}),g.jsxs("div",{className:"p-6 sm:p-8 bg-gradient-to-br from-gray-50 to-indigo-50/30",children:[g.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{key:"previewUpload",icon:g.jsx(ko,{className:"w-6 h-6"}),active:!1},{key:"previewDesign",icon:g.jsx(Dc,{className:"w-6 h-6"}),active:!0},{key:"previewPreview",icon:g.jsx(wf,{className:"w-6 h-6"}),active:!1},{key:"previewBuild",icon:g.jsx(tr,{className:"w-6 h-6"}),active:!1}].map(t=>g.jsxs("div",{className:`flex flex-col items-center gap-2 p-4 rounded-xl transition-all ${t.active?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"bg-white text-gray-400 border border-gray-200"}`,children:[t.icon,g.jsx("span",{className:"text-xs font-medium",children:u(`landing.${t.key}`)})]},t.key))}),g.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[g.jsxs("div",{className:"col-span-1 bg-white rounded-xl border border-gray-200 p-4 space-y-3",children:[g.jsx("div",{className:"h-3 w-20 bg-gray-200 rounded"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"h-8 bg-indigo-50 rounded-lg border border-indigo-100 flex items-center px-2",children:g.jsx("span",{className:"text-[10px] text-indigo-400 font-mono truncate",children:"{name}"})}),g.jsx("div",{className:"h-8 bg-violet-50 rounded-lg border border-violet-100 flex items-center px-2",children:g.jsx("span",{className:"text-[10px] text-violet-400 font-mono truncate",children:"{photo}"})}),g.jsx("div",{className:"h-8 bg-pink-50 rounded-lg border border-pink-100 flex items-center px-2",children:g.jsx("span",{className:"text-[10px] text-pink-400 font-mono truncate",children:"{date}"})})]})]}),g.jsx("div",{className:"col-span-1 bg-white rounded-xl border border-gray-200 p-4 flex items-center justify-center",children:g.jsxs("div",{className:"w-full aspect-square bg-gradient-to-br from-indigo-100 to-violet-100 rounded-lg flex items-center justify-center relative overflow-hidden",children:[g.jsxs("div",{className:"text-center space-y-2",children:[g.jsx("div",{className:"h-3 w-16 bg-indigo-300 rounded mx-auto"}),g.jsx("div",{className:"h-2 w-12 bg-violet-300 rounded mx-auto"}),g.jsx("div",{className:"w-8 h-8 bg-indigo-200 rounded-full mx-auto mt-2"})]}),g.jsx("div",{className:"absolute top-2 left-2 w-2 h-2 border-2 border-indigo-400 rounded-sm bg-white"}),g.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 border-2 border-indigo-400 rounded-sm bg-white"}),g.jsx("div",{className:"absolute bottom-2 left-2 w-2 h-2 border-2 border-indigo-400 rounded-sm bg-white"}),g.jsx("div",{className:"absolute bottom-2 right-2 w-2 h-2 border-2 border-indigo-400 rounded-sm bg-white"})]})}),g.jsxs("div",{className:"col-span-1 bg-white rounded-xl border border-gray-200 p-4 space-y-3",children:[g.jsx("div",{className:"h-3 w-20 bg-gray-200 rounded"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-3 w-3 bg-indigo-400 rounded"}),g.jsx("div",{className:"h-2 flex-1 bg-gray-100 rounded"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-3 w-3 bg-violet-400 rounded"}),g.jsx("div",{className:"h-2 flex-1 bg-gray-100 rounded"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-3 w-3 bg-green-400 rounded"}),g.jsx("div",{className:"h-2 flex-1 bg-gray-100 rounded"}),g.jsx("span",{className:"text-[9px] text-green-500 font-medium",children:"IF"})]})]})]})]})]})]})}function bT({t:u}){return g.jsx("div",{className:"relative mx-auto w-[260px]",children:g.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-3 shadow-2xl shadow-gray-400/30",children:[g.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 w-24 h-5 bg-gray-900 rounded-b-xl z-10"}),g.jsxs("div",{className:"bg-white rounded-[2rem] overflow-hidden",children:[g.jsx("div",{className:"h-8 bg-gray-50 flex items-center justify-center",children:g.jsx("div",{className:"w-16 h-1.5 bg-gray-300 rounded-full"})}),g.jsxs("div",{className:"px-3 py-2 bg-white border-b border-gray-100 flex items-center gap-2",children:[g.jsx("div",{className:"w-5 h-5 rounded bg-indigo-600 flex items-center justify-center",children:g.jsx(bs,{className:"w-3 h-3 text-white"})}),g.jsx("span",{className:"text-[10px] font-semibold text-gray-900",children:u("app.title")})]}),g.jsx("div",{className:"px-2 py-2 bg-white border-b border-gray-50 flex gap-1",children:[{key:"previewUpload",active:!1},{key:"previewDesign",active:!0},{key:"previewPreview",active:!1},{key:"previewBuild",active:!1}].map(t=>g.jsx("div",{className:`flex-1 text-center py-1 rounded-md text-[8px] font-medium ${t.active?"bg-indigo-600 text-white":"text-gray-400"}`,children:u(`landing.${t.key}`)},t.key))}),g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"aspect-square bg-gradient-to-br from-indigo-50 to-violet-50 rounded-lg flex items-center justify-center relative",children:[g.jsxs("div",{className:"text-center space-y-1.5",children:[g.jsx("div",{className:"h-2 w-12 bg-indigo-300 rounded mx-auto"}),g.jsx("div",{className:"h-1.5 w-8 bg-violet-300 rounded mx-auto"}),g.jsx("div",{className:"w-6 h-6 bg-indigo-200 rounded-full mx-auto mt-1"})]}),g.jsx("div",{className:"absolute top-1 left-1 w-1.5 h-1.5 border border-indigo-400 rounded-sm bg-white"}),g.jsx("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 border border-indigo-400 rounded-sm bg-white"}),g.jsx("div",{className:"absolute bottom-1 left-1 w-1.5 h-1.5 border border-indigo-400 rounded-sm bg-white"}),g.jsx("div",{className:"absolute bottom-1 right-1 w-1.5 h-1.5 border border-indigo-400 rounded-sm bg-white"})]}),g.jsxs("div",{className:"mt-2 flex gap-1",children:[g.jsx("div",{className:"flex-1 h-5 bg-indigo-50 rounded border border-indigo-100 flex items-center justify-center",children:g.jsx("span",{className:"text-[8px] text-indigo-400 font-mono",children:"{name}"})}),g.jsx("div",{className:"flex-1 h-5 bg-violet-50 rounded border border-violet-100 flex items-center justify-center",children:g.jsx("span",{className:"text-[8px] text-violet-400 font-mono",children:"{photo}"})})]})]}),g.jsx("div",{className:"h-6 bg-gray-50 flex items-center justify-center",children:g.jsx("div",{className:"w-20 h-1 bg-gray-300 rounded-full"})})]})]})})}function _T(){const u=Be(a=>a.t),t=It(a=>a.setCurrentStep),n=()=>{t("upload")},i=()=>{var a;(a=document.getElementById("features"))==null||a.scrollIntoView({behavior:"smooth"})};return g.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white overflow-y-auto",children:[g.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-lg border-b border-gray-200/60",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-9 h-9 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-sm",children:g.jsx(bs,{className:"w-5 h-5"})}),g.jsx("span",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Post Factory"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Jd,{}),g.jsxs("button",{onClick:n,className:"hidden sm:inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-sm",children:[u("landing.getStarted"),g.jsx(ho,{className:"w-4 h-4 rtl:rotate-180"})]})]})]})}),g.jsxs("section",{className:"relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50 via-white to-violet-50"}),g.jsx(ux,{}),g.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"radial-gradient(circle at 1px 1px, #4f46e5 1px, transparent 0)",backgroundSize:"40px 40px"}}),g.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 sm:pt-24 pb-20 sm:pb-32",children:[g.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[g.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-full text-xs font-medium mb-6 border border-indigo-100",children:[g.jsx(_d,{className:"w-3.5 h-3.5"}),u("landing.feature4Title")]}),g.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold text-gray-900 tracking-tight leading-tight mb-6",children:u("landing.heroTitle")}),g.jsx("p",{className:"text-lg sm:text-xl text-gray-600 leading-relaxed mb-10 max-w-2xl mx-auto",children:u("landing.heroSubtitle")}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[g.jsxs("button",{onClick:n,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-8 py-4 bg-indigo-600 text-white text-base font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200 hover:shadow-xl hover:shadow-indigo-300 hover:-translate-y-0.5",children:[u("landing.getStarted"),g.jsx(ho,{className:"w-5 h-5 rtl:rotate-180"})]}),g.jsxs("button",{onClick:i,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-8 py-4 bg-white text-gray-700 text-base font-semibold rounded-xl border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all",children:[u("landing.learnMore"),g.jsx(ar,{className:"w-5 h-5"})]})]})]}),g.jsx("div",{className:"mt-16 sm:mt-20 max-w-5xl mx-auto hidden sm:block",children:g.jsx(vT,{t:u})}),g.jsx("div",{className:"mt-12 sm:hidden",children:g.jsx(bT,{t:u})})]})]}),g.jsxs("section",{className:"py-20 sm:py-28 bg-white relative",id:"how-it-works",children:[g.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none","aria-hidden":"true",children:g.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-indigo-200 to-transparent"})}),g.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:u("landing.howItWorksTitle")}),g.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:u("landing.howItWorksSubtitle")})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 lg:gap-8",children:[g.jsx(xc,{number:1,icon:g.jsx(ko,{className:"w-7 h-7"}),title:u("landing.step1Title"),desc:u("landing.step1Desc")}),g.jsx(xc,{number:2,icon:g.jsx(Dc,{className:"w-7 h-7"}),title:u("landing.step2Title"),desc:u("landing.step2Desc")}),g.jsx(xc,{number:3,icon:g.jsx(wf,{className:"w-7 h-7"}),title:u("landing.step3Title"),desc:u("landing.step3Desc")}),g.jsx(xc,{number:4,icon:g.jsx(tr,{className:"w-7 h-7"}),title:u("landing.step4Title"),desc:u("landing.step4Desc")})]})]})]}),g.jsxs("section",{className:"py-20 sm:py-28 bg-gray-50 relative",id:"features",children:[g.jsx(ux,{}),g.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:u("landing.featuresTitle")}),g.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:u("landing.featuresSubtitle")})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[g.jsx(ln,{icon:g.jsx(sa,{className:"w-6 h-6"}),title:u("landing.feature1Title"),desc:u("landing.feature1Desc")}),g.jsx(ln,{icon:g.jsx(W_,{className:"w-6 h-6"}),title:u("landing.feature2Title"),desc:u("landing.feature2Desc")}),g.jsx(ln,{icon:g.jsx(Dc,{className:"w-6 h-6"}),title:u("landing.feature3Title"),desc:u("landing.feature3Desc")}),g.jsx(ln,{icon:g.jsx(_d,{className:"w-6 h-6"}),title:u("landing.feature4Title"),desc:u("landing.feature4Desc")}),g.jsx(ln,{icon:g.jsx(U_,{className:"w-6 h-6"}),title:u("landing.feature5Title"),desc:u("landing.feature5Desc")}),g.jsx(ln,{icon:g.jsx(Nc,{className:"w-6 h-6"}),title:u("landing.feature6Title"),desc:u("landing.feature6Desc")}),g.jsx(ln,{icon:g.jsx(Za,{className:"w-6 h-6"}),title:u("landing.feature7Title"),desc:u("landing.feature7Desc")}),g.jsx(ln,{icon:g.jsx($i,{className:"w-6 h-6"}),title:u("landing.feature8Title"),desc:u("landing.feature8Desc")}),g.jsx(ln,{icon:g.jsx(sa,{className:"w-6 h-6"}),title:u("landing.feature9Title"),desc:u("landing.feature9Desc")}),g.jsx(ln,{icon:g.jsx(qd,{className:"w-6 h-6"}),title:u("landing.feature10Title"),desc:u("landing.feature10Desc")}),g.jsx(ln,{icon:g.jsx(B2,{className:"w-6 h-6"}),title:u("landing.feature11Title"),desc:u("landing.feature11Desc")}),g.jsx(ln,{icon:g.jsx(mx,{className:"w-6 h-6"}),title:u("landing.feature12Title"),desc:u("landing.feature12Desc")}),g.jsx(ln,{icon:g.jsx(K_,{className:"w-6 h-6"}),title:u("landing.feature13Title"),desc:u("landing.feature13Desc")}),g.jsx(ln,{icon:g.jsx(gx,{className:"w-6 h-6"}),title:u("landing.feature14Title"),desc:u("landing.feature14Desc")}),g.jsx(ln,{icon:g.jsx($i,{className:"w-6 h-6"}),title:u("landing.feature15Title"),desc:u("landing.feature15Desc")}),g.jsx(ln,{icon:g.jsx(bs,{className:"w-6 h-6"}),title:u("landing.feature16Title"),desc:u("landing.feature16Desc")})]})]})]}),g.jsxs("section",{className:"py-20 sm:py-28 bg-white relative",id:"use-cases",children:[g.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none","aria-hidden":"true",children:g.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-violet-200 to-transparent"})}),g.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:u("landing.useCasesTitle")}),g.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:u("landing.useCasesSubtitle")})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[g.jsx(Wa,{icon:g.jsx(X2,{className:"w-5 h-5"}),title:u("landing.useCase1Title"),desc:u("landing.useCase1Desc")}),g.jsx(Wa,{icon:g.jsx(l_,{className:"w-5 h-5"}),title:u("landing.useCase2Title"),desc:u("landing.useCase2Desc")}),g.jsx(Wa,{icon:g.jsx(m2,{className:"w-5 h-5"}),title:u("landing.useCase3Title"),desc:u("landing.useCase3Desc")}),g.jsx(Wa,{icon:g.jsx(s_,{className:"w-5 h-5"}),title:u("landing.useCase4Title"),desc:u("landing.useCase4Desc")}),g.jsx(Wa,{icon:g.jsx(F_,{className:"w-5 h-5"}),title:u("landing.useCase5Title"),desc:u("landing.useCase5Desc")}),g.jsx(Wa,{icon:g.jsx(x2,{className:"w-5 h-5"}),title:u("landing.useCase6Title"),desc:u("landing.useCase6Desc")})]})]})]}),g.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-indigo-600 via-indigo-700 to-violet-700 relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 1px 1px, white 1px, transparent 0)",backgroundSize:"32px 32px"}}),g.jsx("div",{className:"absolute -top-20 -right-20 w-80 h-80 bg-white/5 rounded-full blur-2xl animate-[float_18s_ease-in-out_infinite]","aria-hidden":"true"}),g.jsx("div",{className:"absolute -bottom-16 -left-16 w-64 h-64 bg-white/5 rounded-full blur-2xl animate-[float_22s_ease-in-out_infinite_reverse]","aria-hidden":"true"}),g.jsxs("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[g.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:u("landing.ctaTitle")}),g.jsx("p",{className:"text-lg text-indigo-100 mb-10 max-w-2xl mx-auto",children:u("landing.ctaSubtitle")}),g.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 px-10 py-4 bg-white text-indigo-700 text-base font-semibold rounded-xl hover:bg-indigo-50 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:[u("landing.ctaButton"),g.jsx(ho,{className:"w-5 h-5 rtl:rotate-180"})]})]})]}),g.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 text-white flex items-center justify-center",children:g.jsx(bs,{className:"w-4 h-4"})}),g.jsxs("div",{children:[g.jsx("span",{className:"text-white font-semibold",children:"Post Factory"}),g.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:u("landing.footerTagline")})]})]}),g.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[g.jsx(_d,{className:"w-4 h-4 text-green-500"}),g.jsx("span",{children:u("landing.footerPrivacy")})]})]})})})]})}function wT(){const u=It(a=>a.currentStep),t=It(a=>a.csvData),n=It(a=>a.templateConfig),i=It(a=>a.setCurrentStep);switch(tt.useEffect(()=>{u==="editor"&&!t?i("upload"):(u==="preview"&&(!t||n.elements.length===0)||u==="build"&&(!t||n.elements.length===0))&&i(t?"editor":"upload")},[u,t,n.elements.length,i]),u){case"upload":return g.jsx(ly,{});case"editor":return t?g.jsx(eT,{}):null;case"preview":return t?g.jsx(aT,{}):null;case"build":return t?g.jsx(xT,{}):null;default:return g.jsx(ly,{})}}function ST(){const u=It(t=>t.showLanding);return tt.useEffect(()=>{u?document.documentElement.classList.remove("app-mode"):document.documentElement.classList.add("app-mode")},[u]),u?g.jsx(_T,{}):g.jsx(dw,{children:g.jsx(wT,{})})}const CT="modulepreload",TT=function(u){return"/"+u},hx={},jT=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){let c=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=c(n.map(f=>{if(f=TT(f),f in hx)return;hx[f]=!0;const p=f.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${x}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":CT,p||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),p)return new Promise((b,w)=>{v.addEventListener("load",b),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return t().catch(o)})};function kT(u={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisteredSW:o,onRegisterError:c}=u;let h,d;const f=async(x=!0)=>{await d};async function p(){if("serviceWorker"in navigator){if(h=await jT(async()=>{const{Workbox:x}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:x}},[]).then(({Workbox:x})=>new x("/sw.js",{scope:"/",type:"classic"})).catch(x=>{c==null||c(x)}),!h)return;h.addEventListener("activated",x=>{(x.isUpdate||x.isExternal)&&window.location.reload()}),h.addEventListener("installed",x=>{x.isUpdate||i==null||i()}),h.register({immediate:t}).then(x=>{o?o("/sw.js",x):a==null||a(x)}).catch(x=>{c==null||c(x)})}}return d=p(),f}zw();kT({onNeedRefresh(){},onOfflineReady(){console.log("Post Factory is ready to work offline")}});$b.createRoot(document.getElementById("root")).render(g.jsx(tt.StrictMode,{children:g.jsx(ST,{})}));
